<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Flashing failed with GCC optimisation	on	Olimex STM32-P103
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Flashing%20failed%20with%20GCC%20optimisation%0A%09on%09Olimex%20STM32-P103&In-Reply-To=%3C1233899819.27844.1.camel%40Ubuntu-Desktop%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004658.html">
   <LINK REL="Next"  HREF="004675.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Flashing failed with GCC optimisation	on	Olimex STM32-P103</H1>
    <B>James</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Flashing%20failed%20with%20GCC%20optimisation%0A%09on%09Olimex%20STM32-P103&In-Reply-To=%3C1233899819.27844.1.camel%40Ubuntu-Desktop%3E"
       TITLE="[Openocd-development] Flashing failed with GCC optimisation	on	Olimex STM32-P103">jamessteward at optusnet.com.au
       </A><BR>
    <I>Fri Feb  6 06:56:59 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004658.html">[Openocd-development] Flashing failed with GCC optimisation on	Olimex STM32-P103
</A></li>
        <LI>Next message: <A HREF="004675.html">[Openocd-development] Flashing failed with GCC	optimisation	on	Olimex STM32-P103
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4659">[ date ]</a>
              <a href="thread.html#4659">[ thread ]</a>
              <a href="subject.html#4659">[ subject ]</a>
              <a href="author.html#4659">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Thu, 2009-02-05 at 21:48 -0800, Rick Altherr wrote:
&gt;<i> On Feb 5, 2009, at 4:00 PM, James wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; flash write_bank 0 ./obj/ct_in.bin 0
</I>&gt;<i> &gt; BUG: keep_alive() was not invoked in the 1000ms timelimit. GDB alive
</I>&gt;<i> &gt; packet not sent! (1079)
</I>&gt;<i> &gt; timed out while waiting for target halted
</I>&gt;<i> &gt; error executing stm32x flash write algorithm
</I>&gt;<i> &gt; flash writing failed with error code: 0xfffffc7a
</I>&gt;<i> &gt; error writing to flash at address 0x08000000 at offset 0x00000000  
</I>&gt;<i> &gt; (-902)
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> When the target has working area available and supports it, OpenOCD  
</I>&gt;<i> loads blocks of data into the target's working area and then runs an  
</I>&gt;<i> algorithm on the target to write a block to the flash.  The error  
</I>&gt;<i> message means that the flash algorithm failed to finish for a block.   
</I>&gt;<i> It appears that it failed to write any of the data to the flash region  
</I>&gt;<i> starting at 0x08000000, though it is possible that it could have  
</I>&gt;<i> failed within that block and the offset just wasn't propagated  
</I>&gt;<i> correctly.
</I>&gt;<i> 
</I>&gt;<i> This frequently occurs if the image to be flashed is larger than the  
</I>&gt;<i> available flash in the target.  I'm not sure what the start address of  
</I>&gt;<i> the flash region is in an stm32 (it appears to be discovered at  
</I>&gt;<i> runtime) nor the amount of flash available so I can't say that that is  
</I>&gt;<i> what is happening.
</I>&gt;<i> 
</I>&gt;<i> Doing the same operation with either '-d 3' as the first argument on  
</I>&gt;<i> the command line or 'debug_level 3' at the start of your first config  
</I>&gt;<i> file would provide a log with much more information that we can use to  
</I>&gt;<i> analyze the problem.
</I>
Thanks Rick.  I'll repeat the test on Monday morning.  If anything the
data should be much smaller than the successful case, because it fails
on optimised for size binaries!

Regards,
James.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004658.html">[Openocd-development] Flashing failed with GCC optimisation on	Olimex STM32-P103
</A></li>
	<LI>Next message: <A HREF="004675.html">[Openocd-development] Flashing failed with GCC	optimisation	on	Olimex STM32-P103
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4659">[ date ]</a>
              <a href="thread.html#4659">[ thread ]</a>
              <a href="subject.html#4659">[ subject ]</a>
              <a href="author.html#4659">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

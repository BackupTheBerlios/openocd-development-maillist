<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] log multiple callbacks improvement
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20log%20multiple%20callbacks%20improvement&In-Reply-To=%3C47C2F955.6060804%40asix.cz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001091.html">
   <LINK REL="Next"  HREF="001107.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] log multiple callbacks improvement</H1>
    <B>Pavel Chromy</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20log%20multiple%20callbacks%20improvement&In-Reply-To=%3C47C2F955.6060804%40asix.cz%3E"
       TITLE="[Openocd-development] log multiple callbacks improvement">chromy at asix.cz
       </A><BR>
    <I>Mon Feb 25 18:22:29 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001091.html">[Openocd-development] gdb log callback crash fix
</A></li>
        <LI>Next message: <A HREF="001107.html">[Openocd-development] log multiple callbacks improvement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1105">[ date ]</a>
              <a href="thread.html#1105">[ thread ]</a>
              <a href="subject.html#1105">[ subject ]</a>
              <a href="author.html#1105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello &#216;yvind and the list,

as I promised, here is the patch allowing multiple log listeners discussed before.
The patch also changes some related identifiers to follow OpenOCDs naming convention.
Newly introduced: log_add_callback() log_remove_callback(), log_callback_[st]

There is OUTPUT macro for printf replacement, it just prints out what it is
given, without any header nor trailing newline.
All remaining printfs (openocd.c and options.c) replaced by OUTPUT.

Unless there is a problem spotted, please commit.

Best regards,
   Pavel

&gt;&gt;<i> I think the way to go here is to switch to a log_add/remove_callback()
</I>&gt;&gt;<i> scheme where there can be any number of listeners and the code that
</I>&gt;&gt;<i> invokes log_add_callback() is responsible to invoke the
</I>&gt;&gt;<i> log_remove_callback(). OpenOCD naming convention can be respected as
</I>&gt;&gt;<i> part of that rewrite.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> How does that sound? Would you like to have a stab at it? :-)
</I>&gt;<i> 
</I>&gt;<i> Ok, I will do this.
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001091.html">[Openocd-development] gdb log callback crash fix
</A></li>
	<LI>Next message: <A HREF="001107.html">[Openocd-development] log multiple callbacks improvement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1105">[ date ]</a>
              <a href="thread.html#1105">[ thread ]</a>
              <a href="subject.html#1105">[ subject ]</a>
              <a href="author.html#1105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

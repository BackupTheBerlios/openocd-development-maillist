<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] printf &amp; log patch
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20printf%20%26%20log%20patch&In-Reply-To=%3C47C14484.6040409%40asix.cz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001034.html">
   <LINK REL="Next"  HREF="001045.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] printf &amp; log patch</H1>
    <B>Pavel Chromy</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20printf%20%26%20log%20patch&In-Reply-To=%3C47C14484.6040409%40asix.cz%3E"
       TITLE="[Openocd-development] printf &amp; log patch">chromy at asix.cz
       </A><BR>
    <I>Sun Feb 24 11:18:44 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001034.html">[Openocd-development] printf &amp; log patch
</A></li>
        <LI>Next message: <A HREF="001045.html">[Openocd-development] printf &amp; log patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1035">[ date ]</a>
              <a href="thread.html#1035">[ thread ]</a>
              <a href="subject.html#1035">[ subject ]</a>
              <a href="author.html#1035">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Oh, forgot to attach the patch, sorry...

Hello list,

here is a patch fixing some soft of cosmetic issues concerning output and logging.

1) openocd.c sends welcome&amp;version message to stdout, no problem with this,
however, if stdout and stderr is merged to a single pipe and captured on Windows,
these two lines appear at the end of the output, because stdout does not get flushed.
Adding fflush(stdout) after printing welcome message fixes the issue.\

2) I believe that direct usage of printf should be avoided, normal code shall use logging.
There were a few remaining calls to printf through the code, which the patch replaces by
ERROR() or INFO() respectively.

3) Cosmetic think in log.c - &quot;User:&quot; messages no aligned/indented the same way as other messages.

If there are no objections, please commit.

Best regards,

Pavel


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: printf-log.patch
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20080224/5c0467bb/attachment.ksh">https://lists.berlios.de/pipermail/openocd-development/attachments/20080224/5c0467bb/attachment.ksh</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001034.html">[Openocd-development] printf &amp; log patch
</A></li>
	<LI>Next message: <A HREF="001045.html">[Openocd-development] printf &amp; log patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1035">[ date ]</a>
              <a href="thread.html#1035">[ thread ]</a>
              <a href="subject.html#1035">[ subject ]</a>
              <a href="author.html#1035">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

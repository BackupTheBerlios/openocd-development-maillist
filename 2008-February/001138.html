<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Improving flash error handling
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Improving%20flash%20error%20handling&In-Reply-To=%3Cc09652430802260350j3e179f75s61559f7e08a98cd2%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001144.html">
   <LINK REL="Next"  HREF="001142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Improving flash error handling</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Improving%20flash%20error%20handling&In-Reply-To=%3Cc09652430802260350j3e179f75s61559f7e08a98cd2%40mail.gmail.com%3E"
       TITLE="[Openocd-development] Improving flash error handling">oyvind.harboe at zylin.com
       </A><BR>
    <I>Tue Feb 26 12:50:23 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001144.html">[Openocd-development] Improving flash error handling
</A></li>
        <LI>Next message: <A HREF="001142.html">[Openocd-development] Improving flash error handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1138">[ date ]</a>
              <a href="thread.html#1138">[ thread ]</a>
              <a href="subject.html#1138">[ subject ]</a>
              <a href="author.html#1138">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>  Particularly, the check for the halted state of the target is basically two lines of code
</I>&gt;<i>  if (bank-&gt;target-&gt;state != TARGET_HALTED)
</I>&gt;<i>         return ERROR_TARGET_NOT_HALTED;
</I>
There are more checks than that to be performed, e.g. illegal sector ranges.

I thought you argued to do away with the wrapper and have
the driver invoke a check fn()?

That check fn() can report the precise error, e.g. &quot;Error: illegal sector 5&quot;.

&gt;<i>  However the driver shall never issue an error message in case of such generic error,
</I>&gt;<i>  this is a task for the wrapper.
</I>
Here I disagree. Information about *what* went wrong should not be
put into the return value and then translated into an error code, rather
an ERROR() should be reported at the failure site. This is the
same that exceptions do and I don't think it makes sense to
try to do things differently here. :-)




-- 
&#216;yvind Harboe
<A HREF="http://www.zylin.com">http://www.zylin.com</A> - eCos ARM &amp; FPGA  developer kit

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001144.html">[Openocd-development] Improving flash error handling
</A></li>
	<LI>Next message: <A HREF="001142.html">[Openocd-development] Improving flash error handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1138">[ date ]</a>
              <a href="thread.html#1138">[ thread ]</a>
              <a href="subject.html#1138">[ subject ]</a>
              <a href="author.html#1138">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

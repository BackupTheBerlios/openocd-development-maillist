<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Making OpenOCD reset handling less	confusing
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Making%20OpenOCD%20reset%20handling%20less%0A%09confusing&In-Reply-To=%3Cc09652430802070352i482d0fa8r2e36172d7b122f38%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000777.html">
   <LINK REL="Next"  HREF="000770.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Making OpenOCD reset handling less	confusing</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Making%20OpenOCD%20reset%20handling%20less%0A%09confusing&In-Reply-To=%3Cc09652430802070352i482d0fa8r2e36172d7b122f38%40mail.gmail.com%3E"
       TITLE="[Openocd-development] Making OpenOCD reset handling less	confusing">oyvind.harboe at zylin.com
       </A><BR>
    <I>Thu Feb  7 12:52:24 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000777.html">[Openocd-development] Making OpenOCD reset handling less	confusing
</A></li>
        <LI>Next message: <A HREF="000770.html">[Openocd-development] Improving error messages and progress reports
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#769">[ date ]</a>
              <a href="thread.html#769">[ thread ]</a>
              <a href="subject.html#769">[ subject ]</a>
              <a href="author.html#769">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>sharing with the group...

On Feb 7, 2008 12:47 PM, Dominic Rath &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Dominic.Rath at gmx.de</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> -------- Original-Nachricht --------
</I>&gt;<i> &gt; Datum: Thu, 7 Feb 2008 11:25:27 +0100
</I>&gt;<i> &gt; Von: &quot;&#216;yvind Harboe&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">oyvind.harboe at zylin.com</A>&gt;
</I>&gt;<i> &gt; An: Openocd-Dev &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">openocd-development at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt; Betreff: [Openocd-development] Making OpenOCD reset handling less confusing
</I>&gt;<i>
</I>&gt;<i> &gt; I've coded up the following to make OpenOCD the reset command
</I>&gt;<i> &gt; less confusing &amp; better support scripting(e.g. from GDB):
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - &quot;reset&quot; command is synchronous. Fixed 5 second timeout.
</I>&gt;<i> &gt;   Message is printed upon timeout.
</I>&gt;<i>
</I>&gt;<i> Guess that's fine with me. Not sure about the implications this
</I>&gt;<i> has for debugging multiple targets, which was my original reason
</I>&gt;<i> for making reset asynchronous.
</I>
wait 5 seconds for *all* targets to finish reset. Should be fine.

&gt;<i>
</I>&gt;<i> &gt; - init/halt are translated to run_and_xxx w/warning printed
</I>&gt;<i>
</I>&gt;<i> Not sure what you mean here?
</I>
&quot;reset init&quot; is impossible when TRST &amp; SRST are tied together. This is now
automatically converted to &quot;reset run_and_init&quot; w/a warning.

&gt;<i>
</I>&gt;<i> &gt; - the &quot;reset&quot; command no longer modifies the default reset mode for a
</I>&gt;<i> &gt; target, thus
</I>&gt;<i> &gt;   making sure that typing just &quot;reset&quot; will *always* have the same effect.
</I>&gt;<i> &gt; Less
</I>&gt;<i> &gt;   confusing and good for scripting that wants to use the targets' default
</I>&gt;<i> &gt;   reset type.
</I>&gt;<i>
</I>&gt;<i> Well, I liked the original behaviour. I usually have reset_halt/init at
</I>&gt;<i> the beginning, and once there's a known good image in flash I
</I>&gt;<i> issue a reset run once... I haven't heard many complaints about the
</I>&gt;<i> original behaviour, but I guess I can live with this change.
</I>
I haven't heard any complaints, but I've seen programmers hopelessly
confused :-)

Doing the same sequence of operations should, as much as possible, have
the same effect. *Especially* for scripting purposes.




-- 
&#216;yvind Harboe
<A HREF="http://www.zylin.com">http://www.zylin.com</A> - eCos ARM &amp; FPGA  developer kit

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000777.html">[Openocd-development] Making OpenOCD reset handling less	confusing
</A></li>
	<LI>Next message: <A HREF="000770.html">[Openocd-development] Improving error messages and progress reports
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#769">[ date ]</a>
              <a href="thread.html#769">[ thread ]</a>
              <a href="subject.html#769">[ subject ]</a>
              <a href="author.html#769">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

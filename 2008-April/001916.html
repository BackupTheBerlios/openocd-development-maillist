<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Enabled auto erase,	gdb memory map and gdb flash programming by default.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Enabled%20auto%20erase%2C%0A%09gdb%20memory%20map%20and%20gdb%20flash%20programming%20by%20default.&In-Reply-To=%3Cc09652430804182248we38b7e4ycc7fadce7ed88083%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001914.html">
   <LINK REL="Next"  HREF="001922.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Enabled auto erase,	gdb memory map and gdb flash programming by default.</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Enabled%20auto%20erase%2C%0A%09gdb%20memory%20map%20and%20gdb%20flash%20programming%20by%20default.&In-Reply-To=%3Cc09652430804182248we38b7e4ycc7fadce7ed88083%40mail.gmail.com%3E"
       TITLE="[Openocd-development] Enabled auto erase,	gdb memory map and gdb flash programming by default.">oyvind.harboe at zylin.com
       </A><BR>
    <I>Sat Apr 19 07:48:40 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001914.html">[Openocd-development] Enabled auto erase, gdb memory map and gdb flash programming by default.
</A></li>
        <LI>Next message: <A HREF="001922.html">[Openocd-development] Enabled auto erase, gdb memory map and gdb flash programming by default.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1916">[ date ]</a>
              <a href="thread.html#1916">[ thread ]</a>
              <a href="subject.html#1916">[ subject ]</a>
              <a href="author.html#1916">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Apr 19, 2008 at 3:11 AM, Jonathan Larmour &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">jifl at ecoscentric.com</A>&gt; wrote:
&gt;<i> Michael Schwingen wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &#216;yvind Harboe wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The contents of flash will also be destroyed equally effectively by a
</I>&gt;<i> &gt; &gt; flash write, so the auto erase on/off makes no difference w.r.t.
</I>&gt;<i> &gt; &gt; destroying contents of flash.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Full ACK here. Writing is as dangerously as erasing - writing new data
</I>&gt;<i> over a non-erased sector will destroy the contents as effectively as erasing
</I>&gt;<i> does.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>  Out of interest, some programmers do a blank check first. Without a
</I>&gt;<i> software agent running on the target (as many other JTAG programmers use)
</I>&gt;<i> that's more difficult for OpenOCD as it would require reading all the target
</I>&gt;<i> area, but you can use a blank check heuristic - check the first, say, 16
</I>&gt;<i> bytes and last 16 bytes of the flash to be programmed, and also for the
</I>&gt;<i> start/end of any sectors in the middle.
</I>
For a debug tool, used when things are going wrong, I don't like
such a heuristic. Murphy's law will bite you.

OpenOCD does have code running on the target, but I'd like
the command to actually erase + write every time. Also,
checking if a sector is blank is, in fact, not the same thing
as erasing it.

The OpenOCD eCos flash driver(OpenOCD can use eCos's flash
drivers), doesn't actually know the sector size so an erase
check as the above would break it.

-- 
&#216;yvind Harboe
<A HREF="http://www.zylin.com">http://www.zylin.com</A> - eCos ARM &amp; FPGA developer kit

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001914.html">[Openocd-development] Enabled auto erase, gdb memory map and gdb flash programming by default.
</A></li>
	<LI>Next message: <A HREF="001922.html">[Openocd-development] Enabled auto erase, gdb memory map and gdb flash programming by default.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1916">[ date ]</a>
              <a href="thread.html#1916">[ thread ]</a>
              <a href="subject.html#1916">[ subject ]</a>
              <a href="author.html#1916">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Fwd: Re:  Various reset and flash fixes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Fwd%3A%20Re%3A%20%20Various%20reset%20and%20flash%20fixes&In-Reply-To=%3C200804061718.50977.Dominic.Rath%40gmx.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001690.html">
   <LINK REL="Next"  HREF="001709.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Fwd: Re:  Various reset and flash fixes</H1>
    <B>Dominic Rath</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Fwd%3A%20Re%3A%20%20Various%20reset%20and%20flash%20fixes&In-Reply-To=%3C200804061718.50977.Dominic.Rath%40gmx.de%3E"
       TITLE="[Openocd-development] Fwd: Re:  Various reset and flash fixes">Dominic.Rath at gmx.de
       </A><BR>
    <I>Sun Apr  6 17:18:50 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001690.html">[Openocd-development] Fwd: Re:  Various reset and flash fixes
</A></li>
        <LI>Next message: <A HREF="001709.html">[Openocd-development] Fwd: Re:  Various reset and flash fixes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1708">[ date ]</a>
              <a href="thread.html#1708">[ thread ]</a>
              <a href="subject.html#1708">[ subject ]</a>
              <a href="author.html#1708">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Friday 04 April 2008 16:37:37 Dominic Rath wrote:
&gt;<i> -------- Original-Nachricht --------
</I>&gt;<i> Datum: Fri, 04 Apr 2008 16:36:56 +0200
</I>&gt;<i> Von: &quot;Dominic Rath&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Dominic.Rath at gmx.de</A>&gt;
</I>&gt;<i> An: &quot;&#216;yvind Harboe&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">oyvind.harboe at zylin.com</A>&gt;
</I>&gt;<i> Betreff: Re: [Openocd-development] Various reset and flash fixes
</I>&gt;<i>
</I>&gt;<i> &gt; - provide debug_level 3 log
</I>&gt;<i> &gt; - provide config script?
</I>&gt;<i>
</I>&gt;<i> I'll send both later today when I get home. Don't have these things with me
</I>&gt;<i> in the office.
</I>
Still problems, even at Rev 540/1:

Open On-Chip Debugger 1.0 (2008-04-04-17:54) svn:540
$URL: <A HREF="https://drath@svn.berlios.de/svnroot/repos/openocd/trunk/src/openocd.c">https://drath@svn.berlios.de/svnroot/repos/openocd/trunk/src/openocd.c</A> $
Debug:   5 74 command.c:383 command_run_line(): script olimex_sam9_l9260.cfg
Debug:   6 74 configuration.c:87 open_file_from_path(): opened olimex_sam9_l9260.cfg
Debug:   7 74 command.c:383 command_run_line(): telnet_port 4444
Debug:   8 74 command.c:383 command_run_line(): gdb_port 3333
Debug:   9 74 command.c:383 command_run_line(): gdb_report_data_abort enable
Debug:   10 74 command.c:383 command_run_line(): interface ft2232
Debug:   11 74 command.c:383 command_run_line(): ft2232_device_desc &quot;Amontec JTAGkey&quot;
Debug:   12 74 command.c:383 command_run_line(): ft2232_serial AMTJKV31
Debug:   13 75 command.c:383 command_run_line(): ft2232_layout jtagkey
Debug:   14 75 command.c:383 command_run_line(): ft2232_vid_pid 0x0403 0xcff8
Debug:   15 75 command.c:383 command_run_line(): jtag_speed 1400 1400
Debug:   16 75 jtag.c:1742 handle_jtag_speed_command(): handle jtag speed
Info:    17 75 options.c:50 configuration_output_handler(): jtag_speed: 1400, 1400
Debug:   18 75 command.c:383 command_run_line(): reset_config trst_and_srst separate trst_push_pull srst_open_drain
Debug:   19 75 command.c:383 command_run_line(): jtag_device 4 0x1 0xf 0xe
Debug:   20 87 command.c:383 command_run_line(): jtag_nsrst_delay 1000
Debug:   21 87 command.c:383 command_run_line(): jtag_ntrst_delay 1000
Debug:   22 87 command.c:383 command_run_line(): daemon_startup attach
Debug:   23 87 command.c:383 command_run_line(): target arm926ejs little reset_init 0
Debug:   24 87 arm926ejs.c:731 arm926ejs_target_command(): chain_pos: 0, variant: (null)
Debug:   25 87 command.c:383 command_run_line(): working_area 0 0x00200000 0x1000 nobackup
Debug:   26 88 jtag.c:1480 jtag_init(): -
Debug:   27 88 ft2232.c:1333 ft2232_init_ftd2xx(): 'ft2232' interface using FTD2XX with 'jtagkey' layout (0403:cff8)
Warning: 28 88 ft2232.c:1346 ft2232_init_ftd2xx(): can't open by device description and serial number, giving precedence to serial
Debug:   29 195 ft2232.c:1422 ft2232_init_ftd2xx(): current latency timer: 2
Debug:   30 196 ft2232.c:1688 jtagkey_init(): 80 08 1b
Debug:   31 197 ft2232.c:1746 jtagkey_init(): 82 09 0f
Debug:   32 197 ft2232.c:255 ft2232_speed(): 86 78 05
Debug:   33 199 jtag.c:307 jtag_call_event_callbacks(): jtag event: JTAG controller reset(tms or TRST)
Debug:   34 199 jtag.c:1240 jtag_reset_callback(): -
Debug:   35 200 jtag.c:307 jtag_call_event_callbacks(): jtag event: JTAG controller reset(tms or TRST)
Debug:   36 201 jtag.c:1240 jtag_reset_callback(): -
Info:    37 356 jtag.c:1334 jtag_examine_chain(): JTAG device found: 0x0792603f (Manufacturer: 0x01f, Part: 0x7926, Version: 0x0)
Debug:   38 356 jtag.c:307 jtag_call_event_callbacks(): jtag event: JTAG controller reset(tms or TRST)
Debug:   39 356 jtag.c:1240 jtag_reset_callback(): -
Debug:   40 362 openocd.c:125 main(): jtag init complete
Debug:   41 426 embeddedice.c:376 embeddedice_write_reg(): 0: 0x00000000
Debug:   42 446 openocd.c:129 main(): target init complete
Debug:   43 446 openocd.c:133 main(): flash init complete
Debug:   44 446 openocd.c:137 main(): NAND init complete
Debug:   45 446 openocd.c:141 main(): pld init complete
Debug:   46 446 gdb_server.c:1965 gdb_init(): gdb service for target arm926ejs at port 3333
Debug:   47 446 openocd.c:153 main(): target init reset complete
Info:    48 18386 server.c:97 add_connection(): accepting 'telnet' connection from 0
Debug:   49 19338 command.c:383 command_run_line(): poll
User:    50 19364 target.c:808 target_arch_state(): target state: running
Debug:   51 20587 command.c:383 command_run_line(): halt
Debug:   52 20587 target.c:1617 handle_halt_command(): -
Debug:   53 20587 arm7_9_common.c:946 arm7_9_halt(): target-&gt;state: running
Debug:   54 20587 embeddedice.c:376 embeddedice_write_reg(): 0: 0x00000002
Debug:   55 20623 arm7_9_common.c:700 arm7_9_poll(): DBGACK set, dbg_state-&gt;value: 0x24d
Debug:   56 20624 embeddedice.c:376 embeddedice_write_reg(): 0: 0x00000005
Debug:   57 20624 embeddedice.c:376 embeddedice_write_reg(): 0: 0x00000005
Debug:   58 20672 arm926ejs.c:327 arm926ejs_examine_debug_reason(): internal debug request
Debug:   59 20673 arm7_9_common.c:1055 arm7_9_debug_entry(): target entered debug from ARM state
Debug:   60 21299 arm7_9_common.c:1087 arm7_9_debug_entry(): target entered debug state in Supervisor mode
Debug:   61 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r0: 0x00000000
Debug:   62 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r1: 0x23f21ff4
Debug:   63 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r2: 0xfffff200
Debug:   64 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r3: 0x40001a1a
Debug:   65 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r4: 0x00000000
Debug:   66 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r5: 0x23f2c88c
Debug:   67 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r6: 0x00000001
Debug:   68 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r7: 0x00000008
Debug:   69 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r8: 0x23ebffdc
Debug:   70 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r9: 0x4071c0a2
Debug:   71 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r10: 0x23f21ff4
Debug:   72 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r11: 0x1d93d656
Debug:   73 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r12: 0xffffffff
Debug:   74 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r13: 0x23ebfee0
Debug:   75 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r14: 0x23f10d14
Debug:   76 21299 arm7_9_common.c:1116 arm7_9_debug_entry(): r15: 0x23f1a658
Debug:   77 21299 arm7_9_common.c:1122 arm7_9_debug_entry(): entered debug state at PC 0x23f1a658
Debug:   78 21539 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x10 value: 00051078
Debug:   79 21539 arm926ejs.c:447 arm926ejs_post_debug_entry(): cp15_control_reg: 00051078
Debug:   80 21569 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x100 value: 1d112112
Debug:   81 21598 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x50 value: 00000046
Debug:   82 21628 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x150 value: 00000008
Debug:   83 21658 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x60 value: 0234cc42
Debug:   84 21659 arm926ejs.c:468 arm926ejs_post_debug_entry(): D FSR: 0x00000046, D FAR: 0x0234cc42, I FSR: 0x00000008
Debug:   85 21688 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x38f0 value: 00000000
Debug:   86 21718 arm926ejs.c:270 arm926ejs_cp15_write(): addr: 0x38f0 value: 00000007
Debug:   87 21719 target.c:577 target_call_event_callbacks(): target event 0
User:    88 21719 target.c:808 target_arch_state(): target state: halted
User:    89 21719 arm926ejs.c:568 arm926ejs_arch_state(): target halted in ARM state due to debug request, current mode: Supervisor
cpsr: 0x400000d3 pc: 0x23f1a658
MMU: disabled, D-Cache: disabled, I-Cache: enabled
Debug:   90 26741 command.c:383 command_run_line(): resume
Debug:   91 26741 arm7_9_common.c:1433 arm7_9_resume(): -
Debug:   92 26741 arm7_9_common.c:1237 arm7_9_restore_context(): -
Debug:   93 26778 arm926ejs.c:110 arm926ejs_catch_broken_irscan(): caught ARM926EJ-S invalid Capture-IR result after CP15 access
Debug:   94 26778 arm926ejs.c:270 arm926ejs_cp15_write(): addr: 0x50 value: 00000046
Debug:   95 26815 arm926ejs.c:110 arm926ejs_catch_broken_irscan(): caught ARM926EJ-S invalid Capture-IR result after CP15 access
Debug:   96 26815 arm926ejs.c:270 arm926ejs_cp15_write(): addr: 0x150 value: 00000008
Debug:   97 26853 arm926ejs.c:110 arm926ejs_catch_broken_irscan(): caught ARM926EJ-S invalid Capture-IR result after CP15 access
Debug:   98 26853 arm926ejs.c:270 arm926ejs_cp15_write(): addr: 0x60 value: 0234cc42
Debug:   99 26891 arm926ejs.c:110 arm926ejs_catch_broken_irscan(): caught ARM926EJ-S invalid Capture-IR result after CP15 access
Debug:   100 26891 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x38f0 value: 00000007
Debug:   101 26927 arm926ejs.c:270 arm926ejs_cp15_write(): addr: 0x38f0 value: 00000000
Debug:   102 26927 arm7_9_common.c:1253 arm7_9_restore_context(): examining User mode
Debug:   103 26927 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: r0
Debug:   104 26927 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: pc
Debug:   105 26927 arm7_9_common.c:1315 arm7_9_restore_context(): writing register 0 of mode User with value 0x00000000
Debug:   106 26927 arm7_9_common.c:1253 arm7_9_restore_context(): examining FIQ mode
Debug:   107 26927 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: pc
Debug:   108 26927 arm7_9_common.c:1253 arm7_9_restore_context(): examining IRQ mode
Debug:   109 26927 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: pc
Debug:   110 26927 arm7_9_common.c:1253 arm7_9_restore_context(): examining Supervisor mode
Debug:   111 26927 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: pc
Debug:   112 26927 arm7_9_common.c:1253 arm7_9_restore_context(): examining Abort mode
Debug:   113 26927 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: pc
Debug:   114 26927 arm7_9_common.c:1253 arm7_9_restore_context(): examining Undefined mode
Debug:   115 26927 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: pc
Debug:   116 26927 arm7_9_common.c:1355 arm7_9_restore_context(): writing PC with value 0x23f1a658
Debug:   117 26927 embeddedice.c:376 embeddedice_write_reg(): 0: 0x00000000
Debug:   118 27280 arm926ejs.c:110 arm926ejs_catch_broken_irscan(): caught ARM926EJ-S invalid Capture-IR result after CP15 access
Debug:   119 27280 target.c:577 target_call_event_callbacks(): target event 1
Debug:   120 27280 arm7_9_common.c:1543 arm7_9_resume(): target resumed
Debug:   121 34343 command.c:383 command_run_line(): reset halt
Debug:   122 34343 target.c:1666 handle_reset_command(): -
Debug:   123 34343 ft2232.c:255 ft2232_speed(): 86 78 05
Debug:   124 34345 arm7_9_common.c:748 arm7_9_assert_reset(): target-&gt;state: running
Debug:   125 34345 embeddedice.c:376 embeddedice_write_reg(): 2: 0x00000001
Debug:   126 34345 jtag.c:943 jtag_add_reset(): SRST line asserted
Debug:   127 34345 jtag.c:966 jtag_add_reset(): TRST line asserted
Debug:   128 34345 jtag.c:307 jtag_call_event_callbacks(): jtag event: JTAG controller reset(tms or TRST)
Debug:   129 34345 jtag.c:1240 jtag_reset_callback(): -
Debug:   130 34345 jtag.c:943 jtag_add_reset(): SRST line asserted
Debug:   131 34345 ft2232.c:963 jtagkey_reset(): trst: 1, srst: 1, high_output: 0x00, high_direction: 0x0f
Debug:   132 34352 ft2232.c:963 jtagkey_reset(): trst: 0, srst: 1, high_output: 0x01, high_direction: 0x0f
Debug:   133 35403 arm7_9_common.c:946 arm7_9_halt(): target-&gt;state: reset
Debug:   134 35403 embeddedice.c:376 embeddedice_write_reg(): 0: 0x00000002
Debug:   135 35403 arm7_9_common.c:809 arm7_9_deassert_reset(): target-&gt;state: reset
Debug:   136 35403 jtag.c:947 jtag_add_reset(): SRST line released
Debug:   137 35403 ft2232.c:963 jtagkey_reset(): trst: 0, srst: 0, high_output: 0x09, high_direction: 0x0f
Warning: 138 35425 jtag.c:1162 jtag_check_value(): value captured during scan didn't pass the requested check: captured: 0x0f check_value: 0x01 check_mask: 0x0f
Warning: 139 35425 jtag.c:1122 jtag_read_buffer(): in_handler reported a failed check
Warning: 140 35425 jtag.c:1162 jtag_check_value(): value captured during scan didn't pass the requested check: captured: 0x0f check_value: 0x01 check_mask: 0x0f
Warning: 141 35425 jtag.c:1122 jtag_read_buffer(): in_handler reported a failed check
Debug:   142 37425 target.c:341 target_process_reset(): Waiting for halted stated as approperiate
Debug:   143 37451 arm7_9_common.c:700 arm7_9_poll(): DBGACK set, dbg_state-&gt;value: 0x10d
Debug:   144 37451 embeddedice.c:376 embeddedice_write_reg(): 0: 0x00000005
Debug:   145 37451 embeddedice.c:376 embeddedice_write_reg(): 0: 0x00000005
Debug:   146 37507 arm926ejs.c:307 arm926ejs_examine_debug_reason(): vector catch breakpoint
Debug:   147 37507 arm7_9_common.c:1055 arm7_9_debug_entry(): target entered debug from ARM state
Debug:   148 38133 arm7_9_common.c:1087 arm7_9_debug_entry(): target entered debug state in Supervisor mode
Debug:   149 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r0: 0x00000000
Debug:   150 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r1: 0x23f21ff4
Debug:   151 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r2: 0xfffff200
Debug:   152 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r3: 0x40001a1a
Debug:   153 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r4: 0x00000000
Debug:   154 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r5: 0x23f2c88c
Debug:   155 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r6: 0x00000001
Debug:   156 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r7: 0x00000008
Debug:   157 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r8: 0x23ebffdc
Debug:   158 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r9: 0x4071c0a2
Debug:   159 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r10: 0x23f21ff4
Debug:   160 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r11: 0x1d93d656
Debug:   161 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r12: 0xffffffff
Debug:   162 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r13: 0x23ebfee0
Debug:   163 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r14: 0x23f10d14
Debug:   164 38133 arm7_9_common.c:1116 arm7_9_debug_entry(): r15: 0x00000000
Debug:   165 38133 arm7_9_common.c:1122 arm7_9_debug_entry(): entered debug state at PC 0x0
Debug:   166 38373 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x10 value: 00050078
Debug:   167 38373 arm926ejs.c:447 arm926ejs_post_debug_entry(): cp15_control_reg: 00050078
Debug:   168 38403 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x50 value: 00000046
Debug:   169 38433 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x150 value: 00000008
Debug:   170 38463 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x60 value: 0234cc42
Debug:   171 38463 arm926ejs.c:468 arm926ejs_post_debug_entry(): D FSR: 0x00000046, D FAR: 0x0234cc42, I FSR: 0x00000008
Debug:   172 38493 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x38f0 value: 00000000
Debug:   173 38523 arm926ejs.c:270 arm926ejs_cp15_write(): addr: 0x38f0 value: 00000007
Debug:   174 38523 target.c:577 target_call_event_callbacks(): target event 0
User:    175 38523 target.c:808 target_arch_state(): target state: halted
User:    176 38523 arm926ejs.c:568 arm926ejs_arch_state(): target halted in ARM state due to breakpoint, current mode: Supervisor
cpsr: 0x000000d3 pc: 0x00000000
MMU: disabled, D-Cache: disabled, I-Cache: disabled
Debug:   177 38523 target.c:355 target_process_reset(): Polling target
Debug:   178 38565 arm926ejs.c:110 arm926ejs_catch_broken_irscan(): caught ARM926EJ-S invalid Capture-IR result after CP15 access
Debug:   179 38565 arm7_9_common.c:700 arm7_9_poll(): DBGACK set, dbg_state-&gt;value: 0x10d
Debug:   180 38565 ft2232.c:255 ft2232_speed(): 86 78 05
Debug:   181 46241 command.c:383 command_run_line(): poll
Debug:   182 46268 arm7_9_common.c:700 arm7_9_poll(): DBGACK set, dbg_state-&gt;value: 0x10d
User:    183 46268 target.c:808 target_arch_state(): target state: halted
User:    184 46268 arm926ejs.c:568 arm926ejs_arch_state(): target halted in ARM state due to breakpoint, current mode: Supervisor
cpsr: 0x000000d3 pc: 0x00000000
MMU: disabled, D-Cache: disabled, I-Cache: disabled
Debug:   185 48849 command.c:383 command_run_line(): resume
Debug:   186 48849 arm7_9_common.c:1433 arm7_9_resume(): -
Debug:   187 48849 arm7_9_common.c:1237 arm7_9_restore_context(): -
Debug:   188 48892 arm926ejs.c:270 arm926ejs_cp15_write(): addr: 0x50 value: 00000046
Debug:   189 48929 arm926ejs.c:110 arm926ejs_catch_broken_irscan(): caught ARM926EJ-S invalid Capture-IR result after CP15 access
Debug:   190 48929 arm926ejs.c:270 arm926ejs_cp15_write(): addr: 0x150 value: 00000008
Debug:   191 48967 arm926ejs.c:110 arm926ejs_catch_broken_irscan(): caught ARM926EJ-S invalid Capture-IR result after CP15 access
Debug:   192 48967 arm926ejs.c:270 arm926ejs_cp15_write(): addr: 0x60 value: 0234cc42
Debug:   193 49005 arm926ejs.c:110 arm926ejs_catch_broken_irscan(): caught ARM926EJ-S invalid Capture-IR result after CP15 access
Debug:   194 49005 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x38f0 value: 00000007
Debug:   195 49035 arm926ejs.c:270 arm926ejs_cp15_write(): addr: 0x38f0 value: 00000000
Debug:   196 49035 arm7_9_common.c:1253 arm7_9_restore_context(): examining User mode
Debug:   197 49035 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: r0
Debug:   198 49035 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: pc
Debug:   199 49035 arm7_9_common.c:1315 arm7_9_restore_context(): writing register 0 of mode User with value 0x00000000
Debug:   200 49035 arm7_9_common.c:1253 arm7_9_restore_context(): examining FIQ mode
Debug:   201 49035 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: pc
Debug:   202 49035 arm7_9_common.c:1253 arm7_9_restore_context(): examining IRQ mode
Debug:   203 49035 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: pc
Debug:   204 49035 arm7_9_common.c:1253 arm7_9_restore_context(): examining Supervisor mode
Debug:   205 49035 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: pc
Debug:   206 49035 arm7_9_common.c:1253 arm7_9_restore_context(): examining Abort mode
Debug:   207 49035 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: pc
Debug:   208 49035 arm7_9_common.c:1253 arm7_9_restore_context(): examining Undefined mode
Debug:   209 49035 arm7_9_common.c:1267 arm7_9_restore_context(): examining dirty reg: pc
Debug:   210 49035 arm7_9_common.c:1355 arm7_9_restore_context(): writing PC with value 0x00000000
Debug:   211 49035 embeddedice.c:376 embeddedice_write_reg(): 0: 0x00000000
Debug:   212 49388 arm926ejs.c:110 arm926ejs_catch_broken_irscan(): caught ARM926EJ-S invalid Capture-IR result after CP15 access
Debug:   213 49388 target.c:577 target_call_event_callbacks(): target event 1
Debug:   214 49388 arm7_9_common.c:1543 arm7_9_resume(): target resumed
Debug:   215 58359 command.c:383 command_run_line(): reset run
Debug:   216 58359 target.c:1666 handle_reset_command(): -
Debug:   217 58359 ft2232.c:255 ft2232_speed(): 86 78 05
Debug:   218 58360 arm7_9_common.c:748 arm7_9_assert_reset(): target-&gt;state: running
Debug:   219 58360 embeddedice.c:376 embeddedice_write_reg(): 2: 0x00000001
Debug:   220 58360 jtag.c:943 jtag_add_reset(): SRST line asserted
Debug:   221 58360 jtag.c:966 jtag_add_reset(): TRST line asserted
Debug:   222 58360 jtag.c:307 jtag_call_event_callbacks(): jtag event: JTAG controller reset(tms or TRST)
Debug:   223 58360 jtag.c:1240 jtag_reset_callback(): -
Debug:   224 58360 jtag.c:943 jtag_add_reset(): SRST line asserted
Debug:   225 58360 ft2232.c:963 jtagkey_reset(): trst: 1, srst: 1, high_output: 0x00, high_direction: 0x0f
Debug:   226 58367 ft2232.c:963 jtagkey_reset(): trst: 0, srst: 1, high_output: 0x01, high_direction: 0x0f
Debug:   227 59418 arm7_9_common.c:809 arm7_9_deassert_reset(): target-&gt;state: reset
Debug:   228 59418 jtag.c:947 jtag_add_reset(): SRST line released
Debug:   229 59418 ft2232.c:963 jtagkey_reset(): trst: 0, srst: 0, high_output: 0x09, high_direction: 0x0f
Debug:   230 61419 target.c:341 target_process_reset(): Waiting for halted stated as approperiate
Warning: 231 61455 jtag.c:1162 jtag_check_value(): value captured during scan didn't pass the requested check: captured: 0x0f check_value: 0x01 check_mask: 0x0f
Warning: 232 61456 jtag.c:1122 jtag_read_buffer(): in_handler reported a failed check
Error:   233 61456 target.c:1388 handle_target(): couldn't poll target(-104). It's due for a reset.
Debug:   234 61456 target.c:355 target_process_reset(): Polling target
Debug:   235 61487 arm7_9_common.c:700 arm7_9_poll(): DBGACK set, dbg_state-&gt;value: 0x10d
Debug:   236 61487 embeddedice.c:376 embeddedice_write_reg(): 0: 0x00000005
Debug:   237 61488 embeddedice.c:376 embeddedice_write_reg(): 0: 0x00000005
Debug:   238 61538 arm926ejs.c:307 arm926ejs_examine_debug_reason(): vector catch breakpoint
Debug:   239 61538 arm7_9_common.c:1055 arm7_9_debug_entry(): target entered debug from ARM state
Debug:   240 62163 arm7_9_common.c:1087 arm7_9_debug_entry(): target entered debug state in Supervisor mode
Debug:   241 62163 arm7_9_common.c:1116 arm7_9_debug_entry(): r0: 0x00000000
Debug:   242 62163 arm7_9_common.c:1116 arm7_9_debug_entry(): r1: 0x23f21ff4
Debug:   243 62163 arm7_9_common.c:1116 arm7_9_debug_entry(): r2: 0xfffff200
Debug:   244 62163 arm7_9_common.c:1116 arm7_9_debug_entry(): r3: 0x23f28af0
Debug:   245 62163 arm7_9_common.c:1116 arm7_9_debug_entry(): r4: 0x00000000
Debug:   246 62164 arm7_9_common.c:1116 arm7_9_debug_entry(): r5: 0x23f2c88c
Debug:   247 62164 arm7_9_common.c:1116 arm7_9_debug_entry(): r6: 0x00000001
Debug:   248 62164 arm7_9_common.c:1116 arm7_9_debug_entry(): r7: 0x00000008
Debug:   249 62164 arm7_9_common.c:1116 arm7_9_debug_entry(): r8: 0x23ebffdc
Debug:   250 62164 arm7_9_common.c:1116 arm7_9_debug_entry(): r9: 0x4071c0a2
Debug:   251 62164 arm7_9_common.c:1116 arm7_9_debug_entry(): r10: 0x23f21ff4
Debug:   252 62164 arm7_9_common.c:1116 arm7_9_debug_entry(): r11: 0x1d93d656
Debug:   253 62164 arm7_9_common.c:1116 arm7_9_debug_entry(): r12: 0xffffffff
Debug:   254 62164 arm7_9_common.c:1116 arm7_9_debug_entry(): r13: 0x23ebfee0
Debug:   255 62164 arm7_9_common.c:1116 arm7_9_debug_entry(): r14: 0x23f10d14
Debug:   256 62164 arm7_9_common.c:1116 arm7_9_debug_entry(): r15: 0x00000000
Debug:   257 62164 arm7_9_common.c:1122 arm7_9_debug_entry(): entered debug state at PC 0x0
Debug:   258 62405 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x10 value: 00050078
Debug:   259 62405 arm926ejs.c:447 arm926ejs_post_debug_entry(): cp15_control_reg: 00050078
Debug:   260 62435 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x50 value: 00000046
Debug:   261 62465 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x150 value: 00000008
Debug:   262 62495 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x60 value: 0234cc42
Debug:   263 62495 arm926ejs.c:468 arm926ejs_post_debug_entry(): D FSR: 0x00000046, D FAR: 0x0234cc42, I FSR: 0x00000008
Debug:   264 62524 arm926ejs.c:191 arm926ejs_cp15_read(): addr: 0x38f0 value: 00000000
Debug:   265 62554 arm926ejs.c:270 arm926ejs_cp15_write(): addr: 0x38f0 value: 00000007
Debug:   266 62554 target.c:577 target_call_event_callbacks(): target event 0
User:    267 62554 target.c:808 target_arch_state(): target state: halted
User:    268 62555 arm926ejs.c:568 arm926ejs_arch_state(): target halted in ARM state due to breakpoint, current mode: Supervisor
cpsr: 0x000000d3 pc: 0x00000000
MMU: disabled, D-Cache: disabled, I-Cache: disabled
Debug:   269 62555 ft2232.c:255 ft2232_speed(): 86 78 05
Debug:   270 68653 command.c:383 command_run_line(): poll
Debug:   271 68694 arm926ejs.c:110 arm926ejs_catch_broken_irscan(): caught ARM926EJ-S invalid Capture-IR result after CP15 access
Debug:   272 68694 arm7_9_common.c:700 arm7_9_poll(): DBGACK set, dbg_state-&gt;value: 0x10d
User:    273 68694 target.c:808 target_arch_state(): target state: halted
User:    274 68694 arm926ejs.c:568 arm926ejs_arch_state(): target halted in ARM state due to breakpoint, current mode: Supervisor
cpsr: 0x000000d3 pc: 0x00000000
MMU: disabled, D-Cache: disabled, I-Cache: disabled
Debug:   275 72722 command.c:383 command_run_line(): shut
Debug:   276 72722 command.c:340 find_and_run_command(): Command failed with error code -600
Info:    277 72722 server.c:401 server_loop(): dropped 'telnet' connection

The Telnet output:

Open On-Chip Debugger
&gt;<i> poll
</I>target state: running
&gt;<i> halt
</I>target state: halted
target halted in ARM state due to debug request, current mode: Supervisor
cpsr: 0x400000d3 pc: 0x23f1a658
MMU: disabled, D-Cache: disabled, I-Cache: enabled
&gt;<i> resume
</I>&gt;<i> reset halt
</I>value captured during scan didn't pass the requested check: captured: 0x0f check_value: 0x01 check_mask: 0x0f
in_handler reported a failed check
value captured during scan didn't pass the requested check: captured: 0x0f check_value: 0x01 check_mask: 0x0f
in_handler reported a failed check
target state: halted
target halted in ARM state due to breakpoint, current mode: Supervisor
cpsr: 0x000000d3 pc: 0x00000000
MMU: disabled, D-Cache: disabled, I-Cache: disabled
&gt;<i> poll
</I>target state: halted
target halted in ARM state due to breakpoint, current mode: Supervisor
cpsr: 0x000000d3 pc: 0x00000000
MMU: disabled, D-Cache: disabled, I-Cache: disabled
&gt;<i> resume
</I>&gt;<i> reset run
</I>value captured during scan didn't pass the requested check: captured: 0x0f check_value: 0x01 check_mask: 0x0f
in_handler reported a failed check
couldn't poll target(-104). It's due for a reset.
target state: halted
target halted in ARM state due to breakpoint, current mode: Supervisor
cpsr: 0x000000d3 pc: 0x00000000
MMU: disabled, D-Cache: disabled, I-Cache: disabled
&gt;<i> poll
</I>target state: halted
target halted in ARM state due to breakpoint, current mode: Supervisor
cpsr: 0x000000d3 pc: 0x00000000
MMU: disabled, D-Cache: disabled, I-Cache: disabled
&gt;<i> shut
</I>
The Config file used:

#daemon configuration
telnet_port 4444
gdb_port 3333

gdb_report_data_abort enable

#interface
interface ft2232
#ft2232_device_desc &quot;Olimex OpenOCD JTAG&quot;
#ft2232_layout olimex-jtag
#ft2232_vid_pid 0x15ba 0x0003
ft2232_device_desc &quot;Amontec JTAGkey&quot;
ft2232_serial AMTJKV31
#ft2232_serial T1P3S2W8
ft2232_layout jtagkey
ft2232_vid_pid 0x0403 0xcff8
jtag_speed 1400 1400
#use combined on interfaces or targets that can't set TRST/SRST separately
reset_config trst_and_srst separate trst_push_pull srst_open_drain

#jtag scan chain
#format L IRC IRCM IDCODE (Length, IR Capture, IR Capture Mask, IDCODE)
jtag_device 4 0x1 0xf 0xe

jtag_nsrst_delay 1000
jtag_ntrst_delay 1000

#target configuration
daemon_startup attach
#target &lt;type&gt; &lt;endianess&gt; &lt;reset mode&gt;
target arm926ejs little reset_init 0

working_area 0 0x00200000 0x1000 nobackup

Regards,

Dominic

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001690.html">[Openocd-development] Fwd: Re:  Various reset and flash fixes
</A></li>
	<LI>Next message: <A HREF="001709.html">[Openocd-development] Fwd: Re:  Various reset and flash fixes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1708">[ date ]</a>
              <a href="thread.html#1708">[ thread ]</a>
              <a href="subject.html#1708">[ subject ]</a>
              <a href="author.html#1708">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

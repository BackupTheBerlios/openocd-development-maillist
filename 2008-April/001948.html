<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] indeterminate troubles programming lpc2138	(new user, new device, new to openocd ; )
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20indeterminate%20troubles%20programming%20lpc2138%0A%09%28new%20user%2C%20new%20device%2C%20new%20to%20openocd%20%3B%20%29&In-Reply-To=%3C539c60b90804211151s682f2700uaac6100b208e8d57%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001947.html">
   <LINK REL="Next"  HREF="001949.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] indeterminate troubles programming lpc2138	(new user, new device, new to openocd ; )</H1>
    <B>Steve Franks</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20indeterminate%20troubles%20programming%20lpc2138%0A%09%28new%20user%2C%20new%20device%2C%20new%20to%20openocd%20%3B%20%29&In-Reply-To=%3C539c60b90804211151s682f2700uaac6100b208e8d57%40mail.gmail.com%3E"
       TITLE="[Openocd-development] indeterminate troubles programming lpc2138	(new user, new device, new to openocd ; )">stevefranks at ieee.org
       </A><BR>
    <I>Mon Apr 21 20:51:24 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001947.html">[Openocd-development] Enable DCC memory by default or remove	optionentirely?
</A></li>
        <LI>Next message: <A HREF="001949.html">[Openocd-development] indeterminate troubles programming	lpc2138 (new user, new device, new to openocd ; )
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1948">[ date ]</a>
              <a href="thread.html#1948">[ thread ]</a>
              <a href="subject.html#1948">[ subject ]</a>
              <a href="author.html#1948">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I was wondering if anyone can make sense of my debug output.  I've
never got my ARM-USB-OCD dongle to work yet, although I can use it
with urjtag and a xilinx device, so I know the hardware is functional.
 I notice two main problems:

(1) seems to be having trouble talking to the chain - I can program
the device with lpc21isp, so I know it's powered and not DOA, and I'm
pretty sure the jtag is wired correctly.  I don't have the TRST line
hooked up, but that's never been a problem with any other jtag chain.

(2) I see a bunch of &quot;command XYZ not found&quot; lines in the output - so
maybe something has changed in the source, or I forgot some
--enable-XYZ when I ./configured?  This is a fresh (this morning) SVN
checkout, on a gnu/linux (FreeBSD) system.

Thanks,
Steve

sudo openocd -d 3 -f /home/steve/projects/include/arm/lpc2xxx_armusbocd.cfg
Open On-Chip Debugger 1.0 (2008-04-21-10:48) svn:
$URL: <A HREF="svn://svn.berlios.de/openocd/trunk/src/openocd.c">svn://svn.berlios.de/openocd/trunk/src/openocd.c</A> $
Debug:   5 49 command.c:383 command_run_line(): script
/home/steve/projects/include/arm/lpc2xxx_armusbocd.cfg
Debug:   6 73 configuration.c:87 open_file_from_path(): opened
/home/steve/projects/include/arm/lpc2xxx_armusbocd.cfg
Debug:   7 112 command.c:383 command_run_line(): telnet_port 4444
Debug:   8 139 command.c:383 command_run_line(): gdb_port 3333
Debug:   9 166 command.c:383 command_run_line(): gdb_memory_map enable
Debug:   10 193 command.c:383 command_run_line(): gdb_flash_program enable
Debug:   11 221 command.c:383 command_run_line(): interface ft2232
Debug:   12 249 command.c:383 command_run_line(): ft2232_device_desc
&quot;Olimex Olimex OpenOCD JTAG&quot;
Debug:   13 279 command.c:383 command_run_line(): ft2232_layout &quot;olimex-jtag&quot;
Debug:   14 309 command.c:383 command_run_line(): ft2232_vid_pid 0x15ba 0x0003
Debug:   15 338 command.c:383 command_run_line(): ft2232_latency 10
Debug:   16 368 command.c:383 command_run_line(): reset_config none
Debug:   17 399 command.c:383 command_run_line(): jtag_device 4 0x1 0xf 0xe
Debug:   18 437 command.c:383 command_run_line(): jtag_nsrst_delay 200
Debug:   19 469 command.c:383 command_run_line(): jtag_ntrst_delay 200
Debug:   20 504 command.c:383 command_run_line(): jtag_speed 3
Debug:   21 539 jtag.c:1843 handle_jtag_speed_command(): handle jtag speed
Info:    22 570 options.c:50 configuration_output_handler(): jtag_speed: 3, 3
Debug:   23 603 command.c:383 command_run_line(): daemon_startup reset
Info:    24 635 options.c:50 configuration_output_handler(): Open
On-Chip Debugger 1.0 (2008-04-21-10:48) svn:
Debug:   25 667 command.c:383 command_run_line(): target arm7tdmi
little run_and_halt 0 arm7tdmi-s_r4
Debug:   26 702 command.c:383 command_run_line(): run_and_halt_time 0 30
Debug:   27 746 command.c:383 command_run_line(): working_area 0
0x40000000 0x4000 nobackup
Debug:   28 789 command.c:383 command_run_line(): flash bank lpc2000
0x0 0x7d000 0 0 0 lpc2000_v2 12000 calc_checksum
Debug:   29 833 command.c:383 command_run_line(): arm7_9 dcc_downloads enable
Info:    30 877 options.c:50 configuration_output_handler(): dcc
downloads are enabled
Debug:   31 921 command.c:383 command_run_line(): wait_halt
Info:    32 964 options.c:50 configuration_output_handler(): Command
wait_halt not found
Debug:   33 1007 command.c:383 command_run_line(): sleep 10
Debug:   34 1063 command.c:383 command_run_line(): poll
Info:    35 1106 options.c:50 configuration_output_handler(): Command
poll not found
Debug:   36 1148 command.c:383 command_run_line(): flash probe 0
Info:    37 1192 options.c:50 configuration_output_handler(): Command
probe not found
Debug:   38 1237 command.c:383 command_run_line(): flash erase 0 0 0
Info:    39 1279 options.c:50 configuration_output_handler(): Command
erase not found
Debug:   40 1323 command.c:383 command_run_line(): flash write 0 Main.hex 0x0
Info:    41 1368 options.c:50 configuration_output_handler(): Command
write not found
Debug:   42 1410 command.c:383 command_run_line(): reset run
Error:   43 1453 jtag.c:1745 handle_reset_config_command(): invalid
reset_config argument, defaulting to none
Debug:   44 1454 command.c:340 find_and_run_command(): Command failed
with error code -1
Debug:   45 1454 command.c:383 command_run_line(): sleep 10
Debug:   46 1464 command.c:383 command_run_line(): shutdown
Debug:   47 1464 command.c:340 find_and_run_command(): Command failed
with error code -600
Debug:   48 1464 command.c:383 command_run_line(): init
Debug:   49 1464 openocd.c:102 handle_init_command(): target init complete
Debug:   50 1464 ft2232.c:1457 ft2232_init_libftdi(): 'ft2232'
interface using libftdi with 'olimex-jtag' layout (15ba:0003)
Debug:   51 1534 ft2232.c:1500 ft2232_init_libftdi(): current latency timer: 10
Debug:   52 1536 ft2232.c:1767 olimex_jtag_init(): 80 08 1b
Debug:   53 1538 ft2232.c:1810 olimex_jtag_init(): 82 09 0f
Debug:   54 1540 ft2232.c:252 ft2232_speed(): 86 03 00
Debug:   55 1548 openocd.c:109 handle_init_command(): jtag interface
init complete
Debug:   56 1548 jtag.c:1526 jtag_init_inner(): Init JTAG chain
Debug:   57 1548 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   58 1548 jtag.c:1282 jtag_reset_callback(): -
Debug:   59 1550 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   60 1550 jtag.c:1282 jtag_reset_callback(): -
Error:   61 1562 jtag.c:1338 jtag_examine_chain(): JTAG communication
failure, check connection, JTAG interface, target power etc.
Error:   62 1562 jtag.c:1545 jtag_init_inner(): trying to validate
configured JTAG chain anyway...
Debug:   63 1562 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   64 1562 jtag.c:1282 jtag_reset_callback(): -
Error:   65 1572 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   66 1583 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   67 1583 jtag.c:1282 jtag_reset_callback(): -
Error:   68 1592 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   69 1603 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   70 1603 jtag.c:1282 jtag_reset_callback(): -
Error:   71 1612 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   72 1623 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   73 1623 jtag.c:1282 jtag_reset_callback(): -
Error:   74 1631 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   75 1642 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   76 1642 jtag.c:1282 jtag_reset_callback(): -
Error:   77 1651 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   78 1662 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   79 1662 jtag.c:1282 jtag_reset_callback(): -
Error:   80 1671 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Error:   81 1671 jtag.c:1554 jtag_init_inner(): Could not validate
JTAG chain, exit
Debug:   82 1671 jtag.c:1570 jtag_init_reset(): Trying to bring the
JTAG controller to life by asserting TRST / tms
Debug:   83 1671 jtag.c:989 jtag_add_reset(): SRST line released
Debug:   84 1671 jtag.c:996 jtag_add_reset(): JTAG reset with tms
instead of TRST
Debug:   85 1671 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   86 1671 jtag.c:1282 jtag_reset_callback(): -
Debug:   87 1671 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   88 1671 jtag.c:1282 jtag_reset_callback(): -
Debug:   89 1671 jtag.c:989 jtag_add_reset(): SRST line released
Debug:   90 1671 ft2232.c:993 olimex_jtag_reset(): trst: 0, srst: 0,
high_output: 0x01, high_direction: 0x0f
Debug:   91 1874 ft2232.c:993 olimex_jtag_reset(): trst: 0, srst: 0,
high_output: 0x01, high_direction: 0x0f
Debug:   92 2277 jtag.c:1526 jtag_init_inner(): Init JTAG chain
Debug:   93 2277 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   94 2277 jtag.c:1282 jtag_reset_callback(): -
Debug:   95 2278 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   96 2278 jtag.c:1282 jtag_reset_callback(): -
Error:   97 2292 jtag.c:1338 jtag_examine_chain(): JTAG communication
failure, check connection, JTAG interface, target power etc.
Error:   98 2292 jtag.c:1545 jtag_init_inner(): trying to validate
configured JTAG chain anyway...
Debug:   99 2292 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   100 2292 jtag.c:1282 jtag_reset_callback(): -
Error:   101 2302 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   102 2313 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   103 2313 jtag.c:1282 jtag_reset_callback(): -
Error:   104 2322 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   105 2333 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   106 2333 jtag.c:1282 jtag_reset_callback(): -
Error:   107 2342 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   108 2353 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   109 2353 jtag.c:1282 jtag_reset_callback(): -
Error:   110 2362 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   111 2373 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   112 2373 jtag.c:1282 jtag_reset_callback(): -
Error:   113 2382 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   114 2393 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   115 2393 jtag.c:1282 jtag_reset_callback(): -
Error:   116 2402 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Error:   117 2402 jtag.c:1554 jtag_init_inner(): Could not validate
JTAG chain, exit
Debug:   118 2402 openocd.c:126 handle_init_command(): flash init complete
Debug:   119 2402 openocd.c:130 handle_init_command(): NAND init complete
Debug:   120 2402 openocd.c:134 handle_init_command(): pld init complete
Debug:   121 2402 gdb_server.c:1975 gdb_init(): gdb service for target
arm7tdmi at port 3333
Debug:   122 2402 command.c:383 command_run_line(): reset
Debug:   123 2403 target.c:1813 handle_reset_command(): -
Debug:   124 2403 ft2232.c:252 ft2232_speed(): 86 03 00
Debug:   125 2404 jtag.c:1570 jtag_init_reset(): Trying to bring the
JTAG controller to life by asserting TRST / tms
Debug:   126 2404 jtag.c:989 jtag_add_reset(): SRST line released
Debug:   127 2404 jtag.c:996 jtag_add_reset(): JTAG reset with tms
instead of TRST
Debug:   128 2404 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   129 2404 jtag.c:1282 jtag_reset_callback(): -
Debug:   130 2404 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   131 2404 jtag.c:1282 jtag_reset_callback(): -
Debug:   132 2404 jtag.c:989 jtag_add_reset(): SRST line released
Debug:   133 2404 ft2232.c:993 olimex_jtag_reset(): trst: 0, srst: 0,
high_output: 0x09, high_direction: 0x0f
Debug:   134 2607 ft2232.c:993 olimex_jtag_reset(): trst: 0, srst: 0,
high_output: 0x09, high_direction: 0x0f
Debug:   135 3010 jtag.c:1526 jtag_init_inner(): Init JTAG chain
Debug:   136 3010 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   137 3010 jtag.c:1282 jtag_reset_callback(): -
Debug:   138 3011 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   139 3011 jtag.c:1282 jtag_reset_callback(): -
Error:   140 3026 jtag.c:1338 jtag_examine_chain(): JTAG communication
failure, check connection, JTAG interface, target power etc.
Error:   141 3026 jtag.c:1545 jtag_init_inner(): trying to validate
configured JTAG chain anyway...
Debug:   142 3026 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   143 3026 jtag.c:1282 jtag_reset_callback(): -
Error:   144 3036 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   145 3047 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   146 3047 jtag.c:1282 jtag_reset_callback(): -
Error:   147 3056 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   148 3067 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   149 3067 jtag.c:1282 jtag_reset_callback(): -
Error:   150 3076 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   151 3087 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   152 3087 jtag.c:1282 jtag_reset_callback(): -
Error:   153 3096 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   154 3107 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   155 3107 jtag.c:1282 jtag_reset_callback(): -
Error:   156 3116 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   157 3127 jtag.c:319 jtag_call_event_callbacks(): jtag event:
JTAG controller reset(tms or TRST)
Debug:   158 3127 jtag.c:1282 jtag_reset_callback(): -
Error:   159 3136 jtag.c:1431 jtag_validate_chain(): Error validating
JTAG scan chain, IR mismatch, scan returned 0x3f
Error:   160 3136 jtag.c:1554 jtag_init_inner(): Could not validate
JTAG chain, exit
&gt;<i>Exit code: 0
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001947.html">[Openocd-development] Enable DCC memory by default or remove	optionentirely?
</A></li>
	<LI>Next message: <A HREF="001949.html">[Openocd-development] indeterminate troubles programming	lpc2138 (new user, new device, new to openocd ; )
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1948">[ date ]</a>
              <a href="thread.html#1948">[ thread ]</a>
              <a href="subject.html#1948">[ subject ]</a>
              <a href="author.html#1948">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

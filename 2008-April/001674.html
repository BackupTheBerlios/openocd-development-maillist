<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Fwd: Re: is target_free_all_working_areas() flawed?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Fwd%3A%20Re%3A%20is%20target_free_all_working_areas%28%29%0A%20flawed%3F&In-Reply-To=%3C20080403080621.98480%40gmx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001673.html">
   <LINK REL="Next"  HREF="001675.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Fwd: Re: is target_free_all_working_areas() flawed?</H1>
    <B>Dominic Rath</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Fwd%3A%20Re%3A%20is%20target_free_all_working_areas%28%29%0A%20flawed%3F&In-Reply-To=%3C20080403080621.98480%40gmx.net%3E"
       TITLE="[Openocd-development] Fwd: Re: is target_free_all_working_areas() flawed?">Dominic.Rath at gmx.de
       </A><BR>
    <I>Thu Apr  3 10:06:21 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001673.html">[Openocd-development] is target_free_all_working_areas() flawed?
</A></li>
        <LI>Next message: <A HREF="001675.html">[Openocd-development] Fwd: Re: is target_free_all_working_areas() flawed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1674">[ date ]</a>
              <a href="thread.html#1674">[ thread ]</a>
              <a href="subject.html#1674">[ subject ]</a>
              <a href="author.html#1674">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-------- Original-Nachricht --------
Datum: Thu, 03 Apr 2008 10:05:28 +0200
Von: &quot;Dominic Rath&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Dominic.Rath at gmx.de</A>&gt;
An: &quot;&#216;yvind Harboe&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">oyvind.harboe at zylin.com</A>&gt;
Betreff: Re: [Openocd-development] is target_free_all_working_areas() flawed?


-------- Original-Nachricht --------
&gt;<i> OK. I understand the API better now.
</I>&gt;<i> 
</I>&gt;<i> There is a *sharp* corner on this API:
</I>&gt;<i> 
</I>&gt;<i> if &quot;area&quot; passed in to target_alloc_working_area() points to a memory
</I>&gt;<i> location that goes out of scope (e.g. a pointer on the stack), then
</I>&gt;<i> the caller of target_alloc_working_area() is responsible for invoking
</I>&gt;<i> target_free_working_area() before &quot;area&quot; goes out of scope.
</I>
Yes. The user of a working areas has to ensure that all data describing the working area exists past its own end, if he wants the working area to survive. Otherwise he has to call target_free_working_area.

Normally, that shouldn't be a problem, because only global or heap allocated area pointers are suitable for a working area that's supposed to exist after its user ends. 

I'm open for suggestions how this can be handled more developer friendly.

Regards,

Dominic
-- 
--
Dominic Rath &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Dominic.Rath at gmx.de</A>&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001673.html">[Openocd-development] is target_free_all_working_areas() flawed?
</A></li>
	<LI>Next message: <A HREF="001675.html">[Openocd-development] Fwd: Re: is target_free_all_working_areas() flawed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1674">[ date ]</a>
              <a href="thread.html#1674">[ thread ]</a>
              <a href="subject.html#1674">[ subject ]</a>
              <a href="author.html#1674">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Unable to halt after reset LPC-2148
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Unable%20to%20halt%20after%20reset%20LPC-2148&In-Reply-To=%3C20090714093300.14441w8wisaptio0%40webmail.stack.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009518.html">
   <LINK REL="Next"  HREF="009532.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Unable to halt after reset LPC-2148</H1>
    <B>openocd at mailinator.com</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Unable%20to%20halt%20after%20reset%20LPC-2148&In-Reply-To=%3C20090714093300.14441w8wisaptio0%40webmail.stack.nl%3E"
       TITLE="[Openocd-development] Unable to halt after reset LPC-2148">openocd at mailinator.com
       </A><BR>
    <I>Tue Jul 14 09:33:00 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009518.html">[Openocd-development] OpenOCD/FTD2XX: license recap
</A></li>
        <LI>Next message: <A HREF="009532.html">[Openocd-development] Unable to halt after reset LPC-2148
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9531">[ date ]</a>
              <a href="thread.html#9531">[ thread ]</a>
              <a href="subject.html#9531">[ subject ]</a>
              <a href="author.html#9531">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I seem unable to halt my LPC-2148 device, anyone knows what's  
wrong/what I am doing wrong? Thanks a bunch in advance.

openocd using olimex arm-usb-ocd, openocd log:
Open On-Chip Debugger 1.0 (2008-10-04-10:00) svn:exported
$URL: <A HREF="http://svn.berlios.de/svnroot/repos/openocd/trunk/src/openocd.c">http://svn.berlios.de/svnroot/repos/openocd/trunk/src/openocd.c</A> $
Debug:   5 0 command.c:432 command_run_line(): script  
C:\gccfd\projects\demoproject\armusbocd.cfg
Debug:   6 0 configuration.c:87 open_file_from_path(): opened  
C:\gccfd\projects\demoproject\armusbocd.cfg
Debug:   8 0 command.c:432 command_run_line(): telnet_port 4444
Debug:   10 0 command.c:432 command_run_line(): gdb_port 3333
Debug:   12 0 command.c:432 command_run_line(): interface ft2232
Debug:   14 0 command.c:432 command_run_line(): ft2232_device_desc  
&quot;Olimex OpenOCD JTAG A&quot;
Debug:   16 1 command.c:432 command_run_line(): ft2232_layout &quot;olimex-jtag&quot;
Debug:   18 1 command.c:432 command_run_line(): ft2232_vid_pid 0x15BA 0x0003
Debug:   20 1 command.c:432 command_run_line(): jtag_speed 2
Debug:   21 1 jtag.c:1863 handle_jtag_speed_command(): handle jtag speed
Info:    22 1 options.c:50 configuration_output_handler(): jtag_speed: 2, 2
Debug:   24 1 command.c:432 command_run_line(): reset_config  
trst_and_srst separate
Debug:   26 1 command.c:432 command_run_line(): jtag_device 4 0x1 0xf 0xe
Debug:   28 1 command.c:432 command_run_line(): daemon_startup reset
Info:    29 1 options.c:50 configuration_output_handler(): Open  
On-Chip Debugger 1.0 (2008-10-04-10:00) svn:exported
Debug:   31 1 command.c:432 command_run_line(): target arm7tdmi little  
run_and_halt 0 arm7tdmi-s_r4
Debug:   33 1 command.c:432 command_run_line(): run_and_halt_time 0 30
Debug:   35 1 command.c:432 command_run_line(): working_area 0  
0x40000000 0x40000 nobackup
Debug:   37 1 command.c:432 command_run_line(): flash bank lpc2000 0x0  
0x7D000 0 0 0 lpc2000_v2 12000 calc_checksum
Debug:   39 1 command.c:432 command_run_line(): init
Debug:   40 2 openocd.c:102 handle_init_command(): target init complete
Debug:   41 2 ft2232.c:1374 ft2232_init_ftd2xx(): 'ft2232' interface  
using FTD2XX with 'olimex-jtag' layout (15ba:0003)
Debug:   42 30 ft2232.c:1463 ft2232_init_ftd2xx(): current latency timer: 2
Debug:   43 32 ft2232.c:1810 olimex_jtag_init(): 80 08 1b
Debug:   44 33 ft2232.c:1853 olimex_jtag_init(): 82 09 0f
Debug:   45 34 ft2232.c:253 ft2232_speed(): 86 02 00
Debug:   46 50 openocd.c:109 handle_init_command(): jtag interface  
init complete
Debug:   47 50 jtag.c:1537 jtag_init_inner(): Init JTAG chain
Debug:   48 50 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   49 50 jtag.c:1295 jtag_reset_callback(): -
Debug:   50 52 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   51 52 jtag.c:1295 jtag_reset_callback(): -
Error:   52 56 jtag.c:1351 jtag_examine_chain(): JTAG communication  
failure, check connection, JTAG interface, target power etc.
Error:   53 56 jtag.c:1556 jtag_init_inner(): trying to validate  
configured JTAG chain anyway...
Debug:   54 56 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   55 56 jtag.c:1295 jtag_reset_callback(): -
Error:   56 57 jtag.c:1444 jtag_validate_chain(): Error validating  
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   57 67 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   58 67 jtag.c:1295 jtag_reset_callback(): -
Error:   59 70 jtag.c:1444 jtag_validate_chain(): Error validating  
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   60 80 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   61 80 jtag.c:1295 jtag_reset_callback(): -
Error:   62 82 jtag.c:1444 jtag_validate_chain(): Error validating  
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   63 92 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   64 92 jtag.c:1295 jtag_reset_callback(): -
Error:   65 93 jtag.c:1444 jtag_validate_chain(): Error validating  
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   66 103 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   67 103 jtag.c:1295 jtag_reset_callback(): -
Error:   68 105 jtag.c:1444 jtag_validate_chain(): Error validating  
JTAG scan chain, IR mismatch, scan returned 0x3f
Debug:   69 115 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   70 115 jtag.c:1295 jtag_reset_callback(): -
Error:   71 117 jtag.c:1444 jtag_validate_chain(): Error validating  
JTAG scan chain, IR mismatch, scan returned 0x3f
Error:   72 117 jtag.c:1565 jtag_init_inner(): Could not validate JTAG  
chain, exit
Debug:   73 117 jtag.c:1581 jtag_init_reset(): Trying to bring the  
JTAG controller to life by asserting TRST / TLR
Debug:   74 117 jtag.c:996 jtag_add_reset(): SRST line released
Debug:   75 117 jtag.c:1015 jtag_add_reset(): TRST line asserted
Debug:   76 117 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   77 117 jtag.c:1295 jtag_reset_callback(): -
Debug:   78 117 jtag.c:992 jtag_add_reset(): SRST line asserted
Debug:   79 117 jtag.c:1015 jtag_add_reset(): TRST line asserted
Debug:   80 117 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   81 117 jtag.c:1295 jtag_reset_callback(): -
Debug:   82 117 jtag.c:992 jtag_add_reset(): SRST line asserted
Debug:   83 117 jtag.c:996 jtag_add_reset(): SRST line released
Debug:   84 117 ft2232.c:1037 olimex_jtag_reset(): trst: 1, srst: 0,  
high_output: 0x00, high_direction: 0x0f
Debug:   85 117 ft2232.c:1037 olimex_jtag_reset(): trst: 1, srst: 1,  
high_output: 0x02, high_direction: 0x0f
Debug:   86 117 ft2232.c:1037 olimex_jtag_reset(): trst: 0, srst: 1,  
high_output: 0x03, high_direction: 0x0f
Debug:   87 117 ft2232.c:1037 olimex_jtag_reset(): trst: 0, srst: 0,  
high_output: 0x01, high_direction: 0x0f
Debug:   88 118 jtag.c:1537 jtag_init_inner(): Init JTAG chain
Debug:   89 118 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   90 118 jtag.c:1295 jtag_reset_callback(): -
Debug:   91 119 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   92 119 jtag.c:1295 jtag_reset_callback(): -
Info:    93 122 jtag.c:1389 jtag_examine_chain(): JTAG device found:  
0x4f1f0f0f (Manufacturer: 0x787, Part: 0xf1f0, Version: 0x4)
Debug:   94 122 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   95 122 jtag.c:1295 jtag_reset_callback(): -
Debug:   96 124 openocd.c:116 handle_init_command(): jtag init complete
Debug:   97 128 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000000
Debug:   98 129 openocd.c:119 handle_init_command(): jtag examine complete
Debug:   99 129 openocd.c:126 handle_init_command(): flash init complete
Debug:   100 129 openocd.c:130 handle_init_command(): NAND init complete
Debug:   101 129 openocd.c:134 handle_init_command(): pld init complete
Debug:   102 184 gdb_server.c:2036 gdb_init(): gdb service for target  
arm7tdmi at port 3333
Debug:   104 184 command.c:432 command_run_line(): reset
Debug:   105 184 target.c:1851 handle_reset_command(): -
Debug:   106 184 ft2232.c:253 ft2232_speed(): 86 02 00
Debug:   107 185 jtag.c:1581 jtag_init_reset(): Trying to bring the  
JTAG controller to life by asserting TRST / TLR
Debug:   108 185 jtag.c:996 jtag_add_reset(): SRST line released
Debug:   109 185 jtag.c:1015 jtag_add_reset(): TRST line asserted
Debug:   110 185 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   111 185 jtag.c:1295 jtag_reset_callback(): -
Debug:   112 185 jtag.c:992 jtag_add_reset(): SRST line asserted
Debug:   113 185 jtag.c:1015 jtag_add_reset(): TRST line asserted
Debug:   114 185 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   115 185 jtag.c:1295 jtag_reset_callback(): -
Debug:   116 185 jtag.c:992 jtag_add_reset(): SRST line asserted
Debug:   117 185 jtag.c:996 jtag_add_reset(): SRST line released
Debug:   118 185 ft2232.c:1037 olimex_jtag_reset(): trst: 1, srst: 0,  
high_output: 0x00, high_direction: 0x0f
Debug:   119 185 ft2232.c:1037 olimex_jtag_reset(): trst: 1, srst: 1,  
high_output: 0x02, high_direction: 0x0f
Debug:   120 185 ft2232.c:1037 olimex_jtag_reset(): trst: 0, srst: 1,  
high_output: 0x03, high_direction: 0x0f
Debug:   121 185 ft2232.c:1037 olimex_jtag_reset(): trst: 0, srst: 0,  
high_output: 0x01, high_direction: 0x0f
Debug:   122 186 jtag.c:1537 jtag_init_inner(): Init JTAG chain
Debug:   123 187 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   124 187 jtag.c:1295 jtag_reset_callback(): -
Info:    125 190 jtag.c:1389 jtag_examine_chain(): JTAG device found:  
0x4f1f0f0f (Manufacturer: 0x787, Part: 0xf1f0, Version: 0x4)
Debug:   126 190 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   127 190 jtag.c:1295 jtag_reset_callback(): -
Debug:   128 194 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000000
Debug:   129 195 arm7_9_common.c:767 arm7_9_assert_reset():  
target-&gt;state: unknown
Debug:   130 195 jtag.c:992 jtag_add_reset(): SRST line asserted
Debug:   131 195 ft2232.c:1037 olimex_jtag_reset(): trst: 0, srst: 1,  
high_output: 0x0b, high_direction: 0x0f
Debug:   132 246 arm7_9_common.c:820 arm7_9_deassert_reset():  
target-&gt;state: reset
Debug:   133 246 jtag.c:996 jtag_add_reset(): SRST line released
Debug:   134 246 ft2232.c:1037 olimex_jtag_reset(): trst: 0, srst: 0,  
high_output: 0x09, high_direction: 0x0f
Debug:   135 246 target.c:411 target_process_reset(): Waiting for  
halted stated as approperiate
Debug:   136 248 target.c:425 target_process_reset(): Polling target
Debug:   138 751 arm7_9_common.c:960 arm7_9_halt(): target-&gt;state: running
Debug:   139 751 embeddedice.c:397 embeddedice_write_reg(): 9: 0xffffffff
Debug:   140 751 embeddedice.c:397 embeddedice_write_reg(): 11: 0xffffffff
Debug:   141 751 embeddedice.c:397 embeddedice_write_reg(): 12: 0x00000100
Debug:   142 751 embeddedice.c:397 embeddedice_write_reg(): 13: 0x000000f7
Debug:   143 751 target.c:425 target_process_reset(): Polling target
Debug:   145 1255 target.c:425 target_process_reset(): Polling target
Debug:   147 1759 target.c:425 target_process_reset(): Polling target
Debug:   149 2263 target.c:425 target_process_reset(): Polling target
Debug:   151 2767 target.c:425 target_process_reset(): Polling target
Debug:   153 3271 target.c:425 target_process_reset(): Polling target
Debug:   155 3775 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000005
Debug:   156 3775 embeddedice.c:397 embeddedice_write_reg(): 12: 0x00000000
Debug:   157 3776 arm7_9_common.c:1074 arm7_9_debug_entry(): target  
entered debug from ARM state
Error:   158 3779 armv4_5.h:114 armv4_5_mode_to_number(): invalid mode  
value encountered
Error:   159 3779 arm7_9_common.c:1102 arm7_9_debug_entry(): cpsr  
contains invalid mode value - communication failure
Debug:   160 3779 target.c:425 target_process_reset(): Polling target
Debug:   162 4283 target.c:425 target_process_reset(): Polling target
Debug:   164 4787 target.c:425 target_process_reset(): Polling target

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009518.html">[Openocd-development] OpenOCD/FTD2XX: license recap
</A></li>
	<LI>Next message: <A HREF="009532.html">[Openocd-development] Unable to halt after reset LPC-2148
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9531">[ date ]</a>
              <a href="thread.html#9531">[ thread ]</a>
              <a href="subject.html#9531">[ subject ]</a>
              <a href="author.html#9531">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Unable to halt after reset LPC-2148
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Unable%20to%20halt%20after%20reset%20LPC-2148&In-Reply-To=%3C20090715133343.26176alt7xz9zvcw%40webmail.stack.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009577.html">
   <LINK REL="Next"  HREF="009582.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Unable to halt after reset LPC-2148</H1>
    <B>openocd at mailinator.com</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Unable%20to%20halt%20after%20reset%20LPC-2148&In-Reply-To=%3C20090715133343.26176alt7xz9zvcw%40webmail.stack.nl%3E"
       TITLE="[Openocd-development] Unable to halt after reset LPC-2148">openocd at mailinator.com
       </A><BR>
    <I>Wed Jul 15 13:33:43 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009577.html">[Openocd-development] About thee open-ocd &amp; FT2232
</A></li>
        <LI>Next message: <A HREF="009582.html">[Openocd-development] Unable to halt after reset LPC-2148
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9581">[ date ]</a>
              <a href="thread.html#9581">[ thread ]</a>
              <a href="subject.html#9581">[ subject ]</a>
              <a href="author.html#9581">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &#216;yvind Harboe:
</I>&gt;<i> Also, you should try the builtin OpenOCD script rather than
</I>&gt;<i> the monolithic scripts you find on the web. Especially when
</I>&gt;<i> these scripts can contain obsolete commands and be out
</I>&gt;<i> of sync with the OpenOCD version you are using.
</I>
&gt;<i> openocd -f interface/parport.cfg -f target/lpc2148.cfg
</I>
I tried with these parameters:
-f C:\gccfd\openocd\lib\openocd\interface\arm-usb-ocd.cfg -f  
C:\gccfd\openocd\lib\openocd\target\lpc2148.cfg -d3

I got this feedback from my console:
Open On-Chip Debugger 1.0 (2008-10-04-10:00) svn:exported
$URL: <A HREF="http://svn.berlios.de/svnroot/repos/openocd/trunk/src/openocd.c">http://svn.berlios.de/svnroot/repos/openocd/trunk/src/openocd.c</A> $
Debug:   5 1 command.c:432 command_run_line(): script  
C:\gccfd\openocd\lib\openocd\interface\arm-usb-ocd.cfg
Debug:   6 1 configuration.c:87 open_file_from_path(): opened  
C:\gccfd\openocd\lib\openocd\interface\arm-usb-ocd.cfg
Debug:   8 1 command.c:432 command_run_line(): interface ft2232
Debug:   10 1 command.c:432 command_run_line(): ft2232_device_desc  
&quot;Olimex OpenOCD JTAG A&quot;
Debug:   12 2 command.c:432 command_run_line(): ft2232_layout &quot;olimex-jtag&quot;
Debug:   14 2 command.c:432 command_run_line(): ft2232_vid_pid 0x15BA 0x0003
Debug:   16 2 command.c:432 command_run_line(): script  
C:\gccfd\openocd\lib\openocd\target\lpc2148.cfg
Debug:   17 2 configuration.c:87 open_file_from_path(): opened  
C:\gccfd\openocd\lib\openocd\target\lpc2148.cfg
Debug:   19 2 command.c:432 command_run_line(): jtag_nsrst_delay 200
Debug:   21 2 command.c:432 command_run_line(): jtag_ntrst_delay 200
Debug:   23 2 command.c:432 command_run_line(): reset_config  
trst_and_srst srst_pulls_trst
Debug:   25 2 command.c:432 command_run_line(): jtag_reset 1 1
Debug:   26 2 ft2232.c:1374 ft2232_init_ftd2xx(): 'ft2232' interface  
using FTD2XX with 'olimex-jtag' layout (15ba:0003)
Debug:   27 34 ft2232.c:1463 ft2232_init_ftd2xx(): current latency timer: 2
Debug:   28 36 ft2232.c:1810 olimex_jtag_init(): 80 08 1b
Debug:   29 36 ft2232.c:1853 olimex_jtag_init(): 82 09 0f
Debug:   30 38 ft2232.c:253 ft2232_speed(): 86 00 00
Debug:   31 54 jtag.c:992 jtag_add_reset(): SRST line asserted
Debug:   32 54 jtag.c:1015 jtag_add_reset(): TRST line asserted
Debug:   33 54 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   34 54 ft2232.c:1037 olimex_jtag_reset(): trst: 1, srst: 1,  
high_output: 0x02, high_direction: 0x0f
Debug:   36 54 command.c:432 command_run_line(): jtag_reset 0 0
Debug:   37 54 jtag.c:996 jtag_add_reset(): SRST line released
Debug:   38 54 ft2232.c:1037 olimex_jtag_reset(): trst: 0, srst: 0,  
high_output: 0x09, high_direction: 0x0f
Debug:   40 455 command.c:432 command_run_line(): jtag_device 4 0x1 0xf 0xe
Debug:   42 455 command.c:432 command_run_line(): target arm7tdmi  
little run_and_init 0 arm7tdmi-s_r4
Debug:   44 455 command.c:432 command_run_line(): run_and_halt_time 0 30
Debug:   46 455 command.c:432 command_run_line(): target_script 0  
reset event/lpc2148_reset.script
Debug:   48 455 command.c:432 command_run_line(): working_area 0  
0x40000000 0x4000 nobackup
Debug:   50 455 command.c:432 command_run_line(): flash bank lpc2000  
0x0 0x7d000 0 0 0 lpc2000_v2 14765
Debug:   52 455 command.c:432 command_run_line(): init
Debug:   53 455 openocd.c:102 handle_init_command(): target init complete
Debug:   54 455 openocd.c:109 handle_init_command(): jtag interface  
init complete
Debug:   55 455 jtag.c:1537 jtag_init_inner(): Init JTAG chain
Debug:   56 455 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   57 455 jtag.c:1295 jtag_reset_callback(): -
Debug:   58 456 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   59 456 jtag.c:1295 jtag_reset_callback(): -
Info:    60 459 jtag.c:1389 jtag_examine_chain(): JTAG device found:  
0x4f1f0f0f (Manufacturer: 0x787, Part: 0xf1f0, Version: 0x4)
Debug:   61 459 jtag.c:326 jtag_call_event_callbacks(): jtag event:  
JTAG controller reset (TLR or TRST)
Debug:   62 459 jtag.c:1295 jtag_reset_callback(): -
Debug:   63 460 openocd.c:116 handle_init_command(): jtag init complete
Debug:   64 464 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000000
Debug:   65 465 openocd.c:119 handle_init_command(): jtag examine complete
Debug:   66 465 openocd.c:126 handle_init_command(): flash init complete
Debug:   67 465 openocd.c:130 handle_init_command(): NAND init complete
Debug:   68 465 openocd.c:134 handle_init_command(): pld init complete
Warning: 69 484 telnet_server.c:624 telnet_init(): no telnet port  
specified, using default port 4444
Warning: 70 531 gdb_server.c:2021 gdb_init(): no gdb port specified,  
using default port 3333
Debug:   71 532 gdb_server.c:2036 gdb_init(): gdb service for target  
arm7tdmi at port 3333
Warning: 72 563 arm7_9_common.c:700 arm7_9_poll(): DBGACK set while  
target was in unknown state. Reset or initialize target.
Debug:   73 563 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000005
Debug:   74 563 embeddedice.c:397 embeddedice_write_reg(): 12: 0x00000000
Debug:   75 564 arm7_9_common.c:1074 arm7_9_debug_entry(): target  
entered debug from ARM state
Debug:   76 568 arm7_9_common.c:1106 arm7_9_debug_entry(): target  
entered debug state in System mode
Debug:   77 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r0: 0x00000000
Debug:   78 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r1: 0x400006bc
Debug:   79 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r2: 0x00000055
Debug:   80 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r3: 0x80000027
Debug:   81 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r4: 0x00000000
Debug:   82 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r5: 0xe01fc040
Debug:   83 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r6: 0x12345678
Debug:   84 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r7: 0xa3940a61
Debug:   85 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r8: 0xe0ae3843
Debug:   86 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r9: 0x6bd61b71
Debug:   87 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r10: 0xaf89ec21
Debug:   88 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r11: 0x40007e68
Debug:   89 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r12: 0x40007e6c
Debug:   90 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r13: 0x40007e5c
Debug:   91 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r14: 0x00000247
Debug:   92 568 arm7_9_common.c:1137 arm7_9_debug_entry(): r15: 0xfffffff0
Debug:   93 568 arm7_9_common.c:1143 arm7_9_debug_entry(): entered  
debug state at PC 0xfffffff0
Debug:   94 568 target.c:724 target_call_event_callbacks(): target event 0

The problem seems to be the same: the controller does not reset and  
halt the way it should.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009577.html">[Openocd-development] About thee open-ocd &amp; FT2232
</A></li>
	<LI>Next message: <A HREF="009582.html">[Openocd-development] Unable to halt after reset LPC-2148
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9581">[ date ]</a>
              <a href="thread.html#9581">[ thread ]</a>
              <a href="subject.html#9581">[ subject ]</a>
              <a href="author.html#9581">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

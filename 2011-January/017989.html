<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] NAND Flash Bad Block Density - What is reasonable?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-January/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20NAND%20Flash%20Bad%20Block%20Density%20-%20What%20is%0A%20reasonable%3F&In-Reply-To=%3CC9643F8A.149D%25jamwyatt%40cisco.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017984.html">
   <LINK REL="Next"  HREF="017991.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] NAND Flash Bad Block Density - What is reasonable?</H1>
    <B>jamwyatt</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20NAND%20Flash%20Bad%20Block%20Density%20-%20What%20is%0A%20reasonable%3F&In-Reply-To=%3CC9643F8A.149D%25jamwyatt%40cisco.com%3E"
       TITLE="[Openocd-development] NAND Flash Bad Block Density - What is reasonable?">jamwyatt at cisco.com
       </A><BR>
    <I>Tue Jan 25 15:51:22 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="017984.html">[Openocd-development] NAND Flash Bad Block Density - What isreasonable?
</A></li>
        <LI>Next message: <A HREF="017991.html">[Openocd-development] NAND Flash Bad Block Density - What is reasonable?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17989">[ date ]</a>
              <a href="thread.html#17989">[ thread ]</a>
              <a href="subject.html#17989">[ subject ]</a>
              <a href="author.html#17989">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Thanks for the details Jon.

Based on this, I might change the partitions sizes a little. I do use UBI
for the major partition, but the other partitions are read by u-boot (Kernel
or R/O root filesystem in JFFS2). These smaller partitions have to have a
set size with an explicit offset, but the question is what size is enough to
account for bad blocks. From your comments, I might have to go to 4 bad
blocks in 4M. The downside is that uboot, as provided from Marvell, is
relatively particular at the use and management of the first 1M partition. I
believe that it can not survive more than one bad block in that partition.

Robert

P.S. Thanks for the source that can test distributions.


On 1/25/11 12:43 AM, &quot;Jon Povey&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Jon.Povey at racelogic.co.uk</A>&gt; wrote:

&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">openocd-development-bounces at lists.berlios.de</A> wrote:
</I>&gt;&gt;<i> I was asking the ODM to
</I>&gt;&gt;<i> ensure that no more than 2 bad blocks occur in any 4M range
</I>&gt;&gt;<i> of the flash as a requirement.
</I>&gt;<i> 
</I>&gt;<i> You have a pretty good chance of hitting that ime.
</I>&gt;<i> 
</I>&gt;&gt;<i> Anyone have any place to get something official about bad
</I>&gt;&gt;<i> block density? I suspect that in practice, 2 BB in 4M is
</I>&gt;&gt;<i> reasonable and unlikely to cause issues, but without
</I>&gt;&gt;<i> empirical documentation, I can't make a requirement.
</I>&gt;<i> 
</I>&gt;<i> with 2KB page 512MB NAND flash if I remember rightly quite a few of the chips
</I>&gt;<i> we buy in would fail your 4M requirement. More than 1-2% I think.
</I>&gt;<i> 
</I>&gt;<i> My statistics are not hot enough to give you the formula, but 512M into 4M
</I>&gt;<i> buckets is 128 buckets, assuming 128KB blocks is 4096 blocks, let's say
</I>&gt;<i> 1% are bad is around 41, ideally randomly distributed - this gives a very
</I>&gt;<i> high probability that two will be in the same bucket. Not sure the
</I>&gt;<i> probability for 3, but I think it is also high.
</I>&gt;<i> 
</I>&gt;<i> Also I think (fuzzy memory, sorry) that bad blocks tend to appear close
</I>&gt;<i> together more often than even random distribution would suggest.
</I>&gt;<i> 
</I>
-- 
Cisco 
2200 E. Pres. George Bush Turnpike
Richardson, TX 75082
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">jamwyatt at cisco.com</A>     972-813-1544
&quot;Any sufficiently advanced technology is indistinguishable from magic&quot;
Arthur C. Clarke
 
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017984.html">[Openocd-development] NAND Flash Bad Block Density - What isreasonable?
</A></li>
	<LI>Next message: <A HREF="017991.html">[Openocd-development] NAND Flash Bad Block Density - What is reasonable?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17989">[ date ]</a>
              <a href="thread.html#17989">[ thread ]</a>
              <a href="subject.html#17989">[ subject ]</a>
              <a href="author.html#17989">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

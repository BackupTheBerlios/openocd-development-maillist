<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] MIPS EJTAG ROM monitor or HALT mode debugging
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-January/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20MIPS%20EJTAG%20ROM%20monitor%20or%20HALT%20mode%20debugging&In-Reply-To=%3CAANLkTikPBTzG7VkZAU_cxnnJA_kKxMOU2UHd0Gzpsu_-%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017893.html">
   <LINK REL="Next"  HREF="017876.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] MIPS EJTAG ROM monitor or HALT mode debugging</H1>
    <B>Drasko DRASKOVIC</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20MIPS%20EJTAG%20ROM%20monitor%20or%20HALT%20mode%20debugging&In-Reply-To=%3CAANLkTikPBTzG7VkZAU_cxnnJA_kKxMOU2UHd0Gzpsu_-%40mail.gmail.com%3E"
       TITLE="[Openocd-development] MIPS EJTAG ROM monitor or HALT mode debugging">drasko.draskovic at gmail.com
       </A><BR>
    <I>Fri Jan  7 16:06:24 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="017893.html">[Openocd-development] Cable madness
</A></li>
        <LI>Next message: <A HREF="017876.html">[Openocd-development] MIPS EJTAG ROM monitor or HALT mode	debugging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17863">[ date ]</a>
              <a href="thread.html#17863">[ thread ]</a>
              <a href="subject.html#17863">[ subject ]</a>
              <a href="author.html#17863">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>HI all,
I have a simple question for anyone worked with MIPS (EJTAG) before -
does it support &quot;halt&quot; mode debugging, or ROM monitor mode is only
option ?

Coming from the ARM world, I am looking for &quot;halt&quot; mode debugging, as
I am very limited on chip surface to add additional ROM.

1)
I read in one document :
In addition to providing a standard debug I/O interface, EJTAG
provides the following new
capabilities for software and system debug:
- Off-board EJTAG memory - A MIPS processor in Debug Mode sees EJTAG
memory mapped
as physical memory, but references to this memory are converted into
transactions on the
TAP interface. Both instructions and data can be accessed in EJTAG
memory, which allows
debugging of systems without requiring the presence of a ROM monitor
or debugger scratch
pad RAM.

Would that mean that all CPU-s internal state can be explored using
TAP and without monitor ROM ?


2)
In Software Users Manual it is written :
The TAP modules support handling of fetches, loads and stores from the
CPU through the dmseg segment, whereby
the TAP module can operate like a slave unit connected to the on-chip
bus. The core can then execute code taken
from the EJTAG Probe and it can access data (via a load or store)
which is located on the EJTAG Probe. This occurs
in a serial way through the EJTAG interface: the core can thus execute
instructions e.g. debug monitor code, without
occupying the memory.

What would that say, I do not quite get... That ROM monitor is finally
necessary, and there is no &quot;halt&quot; mode debugging ?

3)
Here : <A HREF="http://www.linux-mips.org/wiki/JTAG">http://www.linux-mips.org/wiki/JTAG</A> is written :
MIPS EJTAG has two modes, one is &quot;DMA&quot; mode where the JTAG can cause
CPU bus cycles directly, the other &quot;PrAcc&quot; is where the JTAG interface
is used to respond to CPU memory accesses in a special range of memory
(DMSEG, 0xFF200000) and you have to write little bits of MIPS code to
do what you want and emulate that memory on the host side. All systems
support PrAcc mode by nature. The DMA mode is optional and not as
widely supported as the normal mode. The presence of DMA mode is noted
in the IMPCODE register.

Can anyone explain me what this would say &quot; JTAG can cause CPU bus
cycles directly&quot; ?

Can anyone confirm me that &quot; 'PrAcc' is where the JTAG interface is
used to respond to CPU memory accesses in a special range of memory
(DMSEG, 0xFF200000) &quot;, which I do not quite get,  would actually say
that &quot; ROM monitor is called when breakpoint exception is hit &quot; and
explain what &quot;emulate that memory on the host side&quot; would say (I have
no idea)...

Thank you very much and best regards,
Drasko

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017893.html">[Openocd-development] Cable madness
</A></li>
	<LI>Next message: <A HREF="017876.html">[Openocd-development] MIPS EJTAG ROM monitor or HALT mode	debugging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17863">[ date ]</a>
              <a href="thread.html#17863">[ thread ]</a>
              <a href="subject.html#17863">[ subject ]</a>
              <a href="author.html#17863">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

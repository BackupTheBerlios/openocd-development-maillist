<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Automatically generate 'struct StellarisParts'
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-January/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Automatically%20generate%20%27struct%20StellarisParts%27&In-Reply-To=%3CAANLkTik%2Bu6vOdMxxBef-EUMpxj6DDAANchOMpLKKn1Y%2B%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017895.html">
   <LINK REL="Next"  HREF="017941.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Automatically generate 'struct StellarisParts'</H1>
    <B>Eric Wetzel</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Automatically%20generate%20%27struct%20StellarisParts%27&In-Reply-To=%3CAANLkTik%2Bu6vOdMxxBef-EUMpxj6DDAANchOMpLKKn1Y%2B%40mail.gmail.com%3E"
       TITLE="[Openocd-development] Automatically generate 'struct StellarisParts'">thewetzel at gmail.com
       </A><BR>
    <I>Mon Jan 10 16:56:54 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="017895.html">[Openocd-development] Simplifying LPC2xxx scripts
</A></li>
        <LI>Next message: <A HREF="017941.html">[Openocd-development] Automatically generate 'struct	StellarisParts'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17901">[ date ]</a>
              <a href="thread.html#17901">[ thread ]</a>
              <a href="subject.html#17901">[ subject ]</a>
              <a href="author.html#17901">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I've written a Perl script that will update the StellarisParts struct
in src/flash/nor/stellaris.c with the latest collection of
recognizable Stellaris chip IDs. It requires TI/Luminary's
&quot;StellarisWare complete Firmware Development Package,&quot; available from
here:
<A HREF="http://www.luminarymicro.com/products/software_updates.html">http://www.luminarymicro.com/products/software_updates.html</A>

The Perl script takes the directory that contains the chip-specific
include files (usually SW-LM3S-####/inc) and the location of your
stellaris.c file as arguments. Originally, the Perl script would just
generate a standalone struct, but I couldn't figure out how to turn
that into a patch without manual intervention. The current version of
the script will generate the new struct in memory, then read
stellaris.c into memory until it gets to the StellarisParts struct,
substitutes the new struct, and reads the remainder of the file. Then
it reopens the file for writing and overwrites it. It's probably not
the best way, but it works.

Best regards,
~Eric Wetzel
-------------- next part --------------
A non-text attachment was scrubbed...
Name: stellaris-part-header.pl
Type: application/octet-stream
Size: 1737 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20110110/a1ab1c55/attachment.obj">https://lists.berlios.de/pipermail/openocd-development/attachments/20110110/a1ab1c55/attachment.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017895.html">[Openocd-development] Simplifying LPC2xxx scripts
</A></li>
	<LI>Next message: <A HREF="017941.html">[Openocd-development] Automatically generate 'struct	StellarisParts'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17901">[ date ]</a>
              <a href="thread.html#17901">[ thread ]</a>
              <a href="subject.html#17901">[ subject ]</a>
              <a href="author.html#17901">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

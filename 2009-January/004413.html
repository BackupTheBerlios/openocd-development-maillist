<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] OpenOCD doesn't open gdb/telnet/tcl port	when used with JLink interface
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20OpenOCD%20doesn%27t%20open%20gdb/telnet/tcl%20port%0A%09when%20used%20with%20JLink%20interface&In-Reply-To=%3C7A3DFA07-F0F8-42B0-8A8D-B121905996A4%40kc8apf.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004409.html">
   <LINK REL="Next"  HREF="004415.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] OpenOCD doesn't open gdb/telnet/tcl port	when used with JLink interface</H1>
    <B>Rick Altherr</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20OpenOCD%20doesn%27t%20open%20gdb/telnet/tcl%20port%0A%09when%20used%20with%20JLink%20interface&In-Reply-To=%3C7A3DFA07-F0F8-42B0-8A8D-B121905996A4%40kc8apf.net%3E"
       TITLE="[Openocd-development] OpenOCD doesn't open gdb/telnet/tcl port	when used with JLink interface">kc8apf at kc8apf.net
       </A><BR>
    <I>Wed Jan 14 20:48:34 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004409.html">[Openocd-development] OpenOCD doesn't open gdb/telnet/tcl port when	used with JLink interface
</A></li>
        <LI>Next message: <A HREF="004415.html">[Openocd-development] OpenOCD doesn't open gdb/telnet/tcl port	when used with JLink interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4413">[ date ]</a>
              <a href="thread.html#4413">[ thread ]</a>
              <a href="subject.html#4413">[ subject ]</a>
              <a href="author.html#4413">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jan 14, 2009, at 11:38 AM, Alan Carvalho de Assis wrote:

Here we start initializing the jtag chain.

&gt;<i>
</I>&gt;<i> Info : 50 279 jlink.c:317 jlink_init(): J-Link JTAG Interface ready
</I>&gt;<i> Debug: 51 279 jlink.c:446 jlink_reset(): trst: 0, srst: 0
</I>&gt;<i> Debug: 52 279 openocd.c:151 handle_init_command(): jtag interface  
</I>&gt;<i> init complete
</I>&gt;<i> Debug: 53 279 jtag.c:2240 jtag_init_inner(): Init JTAG chain
</I>&gt;<i> Debug: 54 279 jtag.c:434 jtag_call_event_callbacks(): jtag event: JTAG
</I>&gt;<i> controller reset (RESET or TRST)
</I>&gt;<i> Debug: 55 279 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 56 279 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 57 279 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 58 279 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 59 280 jtag.c:434 jtag_call_event_callbacks(): jtag event: JTAG
</I>&gt;<i> controller reset (RESET or TRST)
</I>&gt;<i> Debug: 60 280 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 61 280 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 62 280 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 63 280 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Info : 64 314 jtag.c:1607 jtag_examine_chain(): JTAG tap: imx31.sjc
</I>&gt;<i> tap/device found: 0x2b900f0f (Manufacturer: 0x787, Part: 0xb900,
</I>&gt;<i> Version: 0x2)
</I>&gt;<i> Info : 65 314 jtag.c:1645 jtag_examine_chain(): JTAG Tap/device  
</I>&gt;<i> matched
</I>&gt;<i> Info : 66 314 jtag.c:1607 jtag_examine_chain(): JTAG tap: imx31.cpu
</I>&gt;<i> tap/device found: 0x07b3601d (Manufacturer: 0x00e, Part: 0x7b36,
</I>&gt;<i> Version: 0x0)
</I>&gt;<i> Info : 67 314 jtag.c:1645 jtag_examine_chain(): JTAG Tap/device  
</I>&gt;<i> matched
</I>&gt;<i> Warn : 68 314 jtag.c:1560 jtag_examine_chain(): Tap/Device does not  
</I>&gt;<i> have IDCODE
</I>&gt;<i> Info : 69 314 jtag.c:1645 jtag_examine_chain(): JTAG Tap/device  
</I>&gt;<i> matched
</I>&gt;<i> Info : 70 314 jtag.c:1607 jtag_examine_chain(): JTAG tap: imx31.smda
</I>&gt;<i> tap/device found: 0x2190101d (Manufacturer: 0x00e, Part: 0x1901,
</I>&gt;<i> Version: 0x2)
</I>&gt;<i> Info : 71 314 jtag.c:1645 jtag_examine_chain(): JTAG Tap/device  
</I>&gt;<i> matched
</I>
We managed to read the IDCODEs and match them.

&gt;<i>
</I>&gt;<i> Debug: 72 314 jtag.c:434 jtag_call_event_callbacks(): jtag event: JTAG
</I>&gt;<i> controller reset (RESET or TRST)
</I>&gt;<i> Debug: 73 314 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 74 314 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 75 314 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 76 314 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Error: 77 317 jtag.c:1718 jtag_validate_chain(): Could not validate
</I>&gt;<i> JTAG scan chain, IR mismatch, scan returned 0x0c2011.
</I>&gt;<i> tap=imx31.whatchacallit pos=9 expected 0x1 got 0
</I>&gt;<i> Warn : 78 317 jtag.c:2260 jtag_init_inner(): Could not validate JTAG
</I>&gt;<i> chain, continuing anyway...
</I>
Then for some reason we reset the jtag chain and try to do a  
validate.  We get an IR mismatch and bail.  I would guess the scan  
chain is in an inconsistent state at this point but we proceed anyway.

&gt;<i>
</I>&gt;<i> Debug: 79 317 openocd.c:157 handle_init_command(): jtag init complete
</I>&gt;<i> Debug: 80 317 jtag.c:434 jtag_call_event_callbacks(): jtag event: JTAG
</I>&gt;<i> controller reset (RESET or TRST)
</I>&gt;<i> Debug: 81 317 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 82 317 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 83 317 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Debug: 84 317 jtag.c:1487 jtag_reset_callback(): -
</I>&gt;<i> Info : 85 328 arm11.c:1595 arm11_examine(): found ARM1136
</I>&gt;<i> Debug: 86 328 arm11.c:1625 arm11_examine(): IDCODE 07b3601d
</I>&gt;<i> IMPLEMENTOR 41 DIDR 15110004
</I>&gt;<i> Debug: 87 334 arm11.c:328 arm11_check_init(): Bringing target into  
</I>&gt;<i> debug mode
</I>
We reset again and successfully find the ARM1136.  The last line  
indicates we are attempting to halt the target under debug mode but  
since it doesn't return, I would guess is it unsuccessful.  Since this  
isn't finishing, we never finish the init process and the servers are  
never started.


Is the JLink config expecting RCLK?  Does the imx31 support RCLK?   
What speed is the JLink interface being set to?  I suspect this is a  
data corruption issue on the jtag interface.

&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Openocd-development mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">https://lists.berlios.de/mailman/listinfo/openocd-development</A>
</I>
--
Rick Altherr
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">kc8apf at kc8apf.net</A>

&quot;He said he hadn't had a byte in three days. I had a short, so I split  
it with him.&quot;
  -- Unsigned



-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2446 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20090114/05b2073c/attachment.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20090114/05b2073c/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004409.html">[Openocd-development] OpenOCD doesn't open gdb/telnet/tcl port when	used with JLink interface
</A></li>
	<LI>Next message: <A HREF="004415.html">[Openocd-development] OpenOCD doesn't open gdb/telnet/tcl port	when used with JLink interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4413">[ date ]</a>
              <a href="thread.html#4413">[ thread ]</a>
              <a href="subject.html#4413">[ subject ]</a>
              <a href="author.html#4413">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

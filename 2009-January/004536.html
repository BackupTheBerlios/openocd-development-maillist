<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] svf support
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20svf%20support&In-Reply-To=%3C200901220027482811695%40SimonQian.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004534.html">
   <LINK REL="Next"  HREF="004538.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] svf support</H1>
    <B>SimonQian</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20svf%20support&In-Reply-To=%3C200901220027482811695%40SimonQian.com%3E"
       TITLE="[Openocd-development] svf support">simonqian at SimonQian.com
       </A><BR>
    <I>Wed Jan 21 17:27:49 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004534.html">[Openocd-development] svf support
</A></li>
        <LI>Next message: <A HREF="004538.html">[Openocd-development] svf support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4536">[ date ]</a>
              <a href="thread.html#4536">[ thread ]</a>
              <a href="subject.html#4536">[ subject ]</a>
              <a href="author.html#4536">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In OpenoCD, we can handle TRST ON/OFF/ABSENT. But we can not 
handle TRST Z, not all the jtag tool can support this. So should it be 
interpreted as TRST OFF?
My SVF code doesn't handle TRST Z, I'll provide a patch for TRST 
command and using jtag_add_clocks.

According to the SVF specification, TRST mode(ON/OFF) should be 
changed right after all the previous commands executed. But I don't 
have a chip require operations on TRST, so I can not test on this.

I compared XSVF commands and SVF commands, there are 4 
commands absent in XSVF.
1. FREQUENCY, in SVF it's used to set the frequency of the JTAG.
If using XSVF, jtag_khz should be run before executing the xsvf file.
Some tools will run at a very low speed without setting the jtag speed.
2. PIOMAP
3. PIO
They are used to control some other pins, which is not available in OpenOCD.
4. TRST
discussed above.

For the 'quite' mode, I just want to test the execution speed for compare.
I don't know how many percentage of the time, printing function will take.

2009-01-21 



Best Regards, Simon Qian

SimonQian(<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">simonqian at SimonQian.com</A>) ---- www.SimonQian.com



&#21457;&#20214;&#20154;&#65306; Dick Hollenbeck 
&#21457;&#36865;&#26102;&#38388;&#65306; 2009-01-21  23:10:15 
&#25910;&#20214;&#20154;&#65306; SimonQian 
&#25220;&#36865;&#65306; openocd-development 
&#20027;&#39064;&#65306; Re: [Openocd-development] svf support 
 
SimonQian wrote:
&gt;<i> Hi,
</I>&gt;<i> When try to convert svf file to xsvf, i got this:
</I>&gt;<i> --------------------------------------------------
</I>&gt;<i> H:\MyProject\Versaloon\test&gt;python --version
</I>&gt;<i> Python 3.0
</I>&gt;<i> H:\MyProject\Versaloon\test&gt;python svf2xsvf.py temp.svf temp.xsvf
</I>&gt;<i> Error in file 'temp.svf' at line 29 near token 'TRST'
</I>&gt;<i> Unknown token 'TRST'
</I>&gt;<i> --------------------------------------------------
</I>&gt;<i> svf file is in the attachment. it's generated by Quartus II Web Edition.
</I>&gt;<i> I remove the programming part.
</I>&gt;<i> 'TRST' is a valid command in svf, but there is no corresponding
</I>&gt;<i> command in xsvf.
</I>Simon,
True about TRST. But now we are in control of the XSVF format that we
want to support, as a result of being able to generate the XSVF file.
Our support can be a superset of Xilinx's, it already is. It is possible
to add opcodes to the XSVF file as needed. We are fully in control of
our own destiny here.
Let me know your thoughts on this. As I read the SVF spec, the
description of TRST with ABSENT is clear and unambiguous. After that,
for other values of &quot;trst_mode&quot;, some clarity is helpful. Do you read it
to mean that if trst_mode is &quot;ON&quot;, then we are to &quot;set to zero/low&quot; the
TRST line at that point in the execution stream? And if the argument is
&quot;OFF&quot;, then we are to &quot;set to one/high&quot; the TRST line at that point in
the execution stream? What about trst_mode equal to &quot;Z&quot;. Does our cable
API even support a high Z state for the TRST line? If not, what should
we do then?
Regarding your other posting about verbosity of the XSVF programming
operation:
We can add a &quot;quiet&quot; argument to the command for you. I personally do
not want to have to turn on debug logging to get the output that is
currently in there, because then the logging format changes and it is
intermingled with other output. I personally do not mind that it scrolls
off the screen. I prefer to see progress being made during what can be a
long operation.
I will prepare a patch or two for you once we agree on a direction.
Thanks for your feedback,
Dick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20090122/8f7c9a35/attachment.html">https://lists.berlios.de/pipermail/openocd-development/attachments/20090122/8f7c9a35/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004534.html">[Openocd-development] svf support
</A></li>
	<LI>Next message: <A HREF="004538.html">[Openocd-development] svf support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4536">[ date ]</a>
              <a href="thread.html#4536">[ thread ]</a>
              <a href="subject.html#4536">[ subject ]</a>
              <a href="author.html#4536">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

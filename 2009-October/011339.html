<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] A little Git repo cleanup
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20A%20little%20Git%20repo%20cleanup&In-Reply-To=%3Cc09652430910182305n6bdda5dblb74d13c1cdef726b%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011336.html">
   <LINK REL="Next"  HREF="011346.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] A little Git repo cleanup</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20A%20little%20Git%20repo%20cleanup&In-Reply-To=%3Cc09652430910182305n6bdda5dblb74d13c1cdef726b%40mail.gmail.com%3E"
       TITLE="[Openocd-development] A little Git repo cleanup">oyvind.harboe at zylin.com
       </A><BR>
    <I>Mon Oct 19 08:05:30 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="011336.html">[Openocd-development] A little Git repo cleanup
</A></li>
        <LI>Next message: <A HREF="011346.html">[Openocd-development] A little Git repo cleanup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11339">[ date ]</a>
              <a href="thread.html#11339">[ thread ]</a>
              <a href="subject.html#11339">[ subject ]</a>
              <a href="author.html#11339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Oct 19, 2009 at 3:53 AM, Nicolas Pitre &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">nico at fluxnic.net</A>&gt; wrote:
&gt;<i> On Sun, 18 Oct 2009, David Brownell wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Sunday 18 October 2009, &#216;yvind Harboe wrote:
</I>&gt;&gt;<i> &gt; I'm not quite up to speed on this graft stuff(first I heard of
</I>&gt;&gt;<i> &gt; it), but I trust you on how to execute this in the best manner.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I didn't know about &quot;graft&quot; (in the non-political sense!)
</I>&gt;&gt;<i> before I started exploring how to fix this either. &#160;;)
</I>&gt;<i>
</I>&gt;<i> To cleanup/fix a git repository, what you usually want to use is
</I>&gt;<i> &quot;git filter-branch&quot;. &#160;The man page is quite comprehensive with examples.
</I>
I've used git filter-branch once before and it seems like a very
unclever(as in good!) way to fix the problem.

The only trick is that you'll only see the size reduction when
you clone as removing the now unreferenced objects from the
database is *much* harder than using git filter-branch in the
first place.

I tried the below, but it didn't work(I don't recall how I did
this last time...):

git filter-branch --tree-filter 'rm -rf zy1000/' HEAD
...
WARNING: Ref 'refs/heads/master' is unchanged

# Read &quot;Checklist for Shrinking...&quot; in git filter-branch docs
git clone openocd
tar -cjvf x openocd
ls -l x


But how do I push these changes to sourceforge? I basically need
to wipe the current .git repository and push this one...

-- 
&#216;yvind Harboe
<A HREF="http://www.zylin.com/zy1000.html">http://www.zylin.com/zy1000.html</A>
ARM7 ARM9 ARM11 XScale Cortex
JTAG debugger and flash programmer

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011336.html">[Openocd-development] A little Git repo cleanup
</A></li>
	<LI>Next message: <A HREF="011346.html">[Openocd-development] A little Git repo cleanup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11339">[ date ]</a>
              <a href="thread.html#11339">[ thread ]</a>
              <a href="subject.html#11339">[ subject ]</a>
              <a href="author.html#11339">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

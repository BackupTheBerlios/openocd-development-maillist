<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] first round of mcr mrc interface support completed
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20first%20round%20of%20mcr%20mrc%20interface%20support%0A%20completed&In-Reply-To=%3C1256441470.15183.14269.camel%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011540.html">
   <LINK REL="Next"  HREF="011566.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] first round of mcr mrc interface support completed</H1>
    <B>Zach Welch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20first%20round%20of%20mcr%20mrc%20interface%20support%0A%20completed&In-Reply-To=%3C1256441470.15183.14269.camel%40localhost%3E"
       TITLE="[Openocd-development] first round of mcr mrc interface support completed">zw at superlucidity.net
       </A><BR>
    <I>Sun Oct 25 04:31:10 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="011540.html">[Openocd-development] first round of mcr mrc interface support	completed
</A></li>
        <LI>Next message: <A HREF="011566.html">[Openocd-development] first round of mcr mrc interface support	completed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11564">[ date ]</a>
              <a href="thread.html#11564">[ thread ]</a>
              <a href="subject.html#11564">[ subject ]</a>
              <a href="author.html#11564">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 2009-10-24 at 15:03 +0200, &#216;yvind Harboe wrote:
&gt;<i> Attached are the remaining patches for the first round of
</I>&gt;<i> target-&gt;type-&gt;mcr/mrc support.
</I>&gt;<i> 
</I>&gt;<i> There is a writeup in TODO of the harder targets
</I>&gt;<i> that remain. E.g. arm966e support requires good knowledge
</I>&gt;<i> of that target + ideally access to test hardware, so that's not
</I>&gt;<i> something I can or should attempt at this point.
</I>&gt;<i> 
</I>&gt;<i> Old cp15 commands still work and should only be retired once
</I>&gt;<i> the new mrc/mcr can be tested on actual targets.
</I>
If there are existing commands, then this feature definitely should have
been committed once it was complete, after a series of patches to
gracefully cut over to the new system had been developed and tested.

There many &quot;improvements&quot; to make, but your proposed patches create
avoidable code duplication.  I started to eliminate these problems types
of problems, but it gets hard to stay motivated on that task when the
goal line keeps moved back like that.  I am striving to gain a better
perspective of the system at this level, but it seems that your present
implementation weakens OpenOCD's architecture and thus creates a new
barrier to improving it.

Obviously, I am not trying to discourage you from continuing to work on
these features, but this should underscore the notion that only complete
and reviewed work should be pushed.  Whether during development or
testing, incomplete or experimental patches should be processed outside
of the main SF.net repository.

&gt;<i> It would be great if I could have this tested *before*
</I>&gt;<i> a release, but the test cycles of OpenOCD(identify
</I>&gt;<i> a user who has a target and is willing and able
</I>&gt;<i> to test) are long enough that I would be pleased if
</I>&gt;<i> all targets could have tested mcr/mrc interface
</I>&gt;<i> in the course of a few months and a release or two...
</I>
Please publish a mirror on repo.or.cz and push this branch regularly so
others can pull it for testing.

&gt;<i> This whole mrc/mcr thing is about driving
</I>&gt;<i> OpenOCD in the direction of polymorphic interfaces
</I>&gt;<i> at the C and command level, ref recent &quot;mww phys&quot;
</I>&gt;<i> work.
</I>
Is this the right level though?  Anything that is specific to ARM should
not be in target.[ch].

&gt;<i> mrc/mcr commands are only added if the target-&gt;type
</I>&gt;<i> supports mcr/mrc. That way help isn't quite as cluttered.
</I>&gt;<i> Previous behavior was to fail when executing the
</I>&gt;<i> commands.
</I>
Definitely an improvement, but is it possible to architect the target
layers such that only devices with it have the callback at all?

Cheers,

Zach

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011540.html">[Openocd-development] first round of mcr mrc interface support	completed
</A></li>
	<LI>Next message: <A HREF="011566.html">[Openocd-development] first round of mcr mrc interface support	completed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11564">[ date ]</a>
              <a href="thread.html#11564">[ thread ]</a>
              <a href="subject.html#11564">[ subject ]</a>
              <a href="author.html#11564">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

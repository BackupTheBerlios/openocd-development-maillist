<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] USB bulk write failures when using	FT2232H dongle
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20USB%20bulk%20write%20failures%20when%20using%0A%09FT2232H%20dongle&In-Reply-To=%3C200910282107.47161.dinuxbg%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011717.html">
   <LINK REL="Next"  HREF="011734.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] USB bulk write failures when using	FT2232H dongle</H1>
    <B>Dimitar Dimitrov</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20USB%20bulk%20write%20failures%20when%20using%0A%09FT2232H%20dongle&In-Reply-To=%3C200910282107.47161.dinuxbg%40gmail.com%3E"
       TITLE="[Openocd-development] USB bulk write failures when using	FT2232H dongle">dinuxbg at gmail.com
       </A><BR>
    <I>Wed Oct 28 20:07:46 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="011717.html">[Openocd-development] USB bulk write failures when using	FT2232H dongle
</A></li>
        <LI>Next message: <A HREF="011734.html">[Openocd-development] USB bulk write failures when using	FT2232H dongle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11733">[ date ]</a>
              <a href="thread.html#11733">[ thread ]</a>
              <a href="subject.html#11733">[ subject ]</a>
              <a href="author.html#11733">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I did &quot;rmmod ehci_hcd&quot; and the OHCI driver took over. In full speed USB mode, however, OpenOCD could not validate the JTAG chain, let alone reach &quot;reset init&quot;. A complete debug log is attached, containing verbose USB and JTAG communications messages.

I'll try to test it on another computer and with external USB hub. Meanwhile, however, I'm open for suggestions.

Regards,
Dimitar

On Tuesday 27 October 2009, David Brownell wrote:
&gt;<i> On Tuesday 27 October 2009, Dimitar Dimitrov wrote:
</I>&gt;<i> &gt; I'm trying to debug SAM9-L9260 board /AT91SAM9260 chip/ using
</I>&gt;<i> &gt; the latest GIT openocd checkout, FT2232H-based dongle and
</I>&gt;<i> &gt; libftdi-0.16. I'm getting the following error when issuing &quot;reset init&quot;:  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Error: 228 7449 ft2232.c:419 ft2232_read(): couldn't read the
</I>&gt;<i> &gt;		requested number of bytes from FT2232 device (0 &lt; 6) 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; After increasing the FT2232 timeouts (patch attached) the
</I>&gt;<i> &gt; &quot;reset init&quot; command completed successfully. 
</I>&gt;<i> 
</I>&gt;<i> Those timeouts are a bit odd; they look more like retry
</I>&gt;<i> counts (but I'd have to learn more about libftdi to be
</I>&gt;<i> sure of that).
</I>&gt;<i> 
</I>&gt;<i> Are you using this highspeed-capable FT2232H at high speed?
</I>&gt;<i> If so, that suggests an experiment:  run it at full speed
</I>&gt;<i> instead.  On Linux you could just &quot;rmmod ehci-hcd&quot;.  On
</I>&gt;<i> any OS, you could just access it through a full speed hub.
</I>&gt;<i> 
</I>&gt;<i> If that matters, the timing logic is probably goofed up by
</I>&gt;<i> the performance differences in the low level driver.
</I>&gt;<i> 
</I>&gt;<i> Another possibility is that the FT2232H support isn't quite
</I>&gt;<i> bugless yet...
</I>&gt;<i> 
</I>&gt;<i> - Dave
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: ft2232h-sam9l9260.log
Type: text/x-log
Size: 24575 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20091028/331f11fb/attachment.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20091028/331f11fb/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011717.html">[Openocd-development] USB bulk write failures when using	FT2232H dongle
</A></li>
	<LI>Next message: <A HREF="011734.html">[Openocd-development] USB bulk write failures when using	FT2232H dongle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11733">[ date ]</a>
              <a href="thread.html#11733">[ thread ]</a>
              <a href="subject.html#11733">[ subject ]</a>
              <a href="author.html#11733">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

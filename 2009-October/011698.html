<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] interface scheme
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20interface%20scheme&In-Reply-To=%3Cc09652430910270624i7daacc3awffc17b46a3bb16cf%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011705.html">
   <LINK REL="Next"  HREF="011737.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] interface scheme</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20interface%20scheme&In-Reply-To=%3Cc09652430910270624i7daacc3awffc17b46a3bb16cf%40mail.gmail.com%3E"
       TITLE="[Openocd-development] interface scheme">oyvind.harboe at zylin.com
       </A><BR>
    <I>Tue Oct 27 14:24:39 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="011705.html">[Openocd-development] http://repo.or.cz/w/openocd.git developer repositories
</A></li>
        <LI>Next message: <A HREF="011737.html">[Openocd-development] interface scheme
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11698">[ date ]</a>
              <a href="thread.html#11698">[ thread ]</a>
              <a href="subject.html#11698">[ subject ]</a>
              <a href="author.html#11698">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here is an IMO simple interface scheme:

int target-&gt;type-&gt;get_interface(int id, void **interface);

The ID is a unique ID across OpenOCD. The interface can be
either a single fn pointer or a structure which contains a list
of fn pointers.

Note that target or e.g. arm code can provide default implementations
of an interface. The arm11 could provide it's interfaces and pass
over to target.c to do the rest..

All the fn pointers take a pointer to target as the first argument.

The return value is a boolean ERROR_OK success/failure. No
interpretation is to be done of the return value according to
the error handling rules in OpenOCD.

In the case where the caller needs to distinguish between
is not supported yet and should never be supported, then
a separate interface like target-&gt;type-&gt;has_mmu must be added.



-- 
&#216;yvind Harboe
<A HREF="http://www.zylin.com/zy1000.html">http://www.zylin.com/zy1000.html</A>
ARM7 ARM9 ARM11 XScale Cortex
JTAG debugger and flash programmer

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011705.html">[Openocd-development] http://repo.or.cz/w/openocd.git developer repositories
</A></li>
	<LI>Next message: <A HREF="011737.html">[Openocd-development] interface scheme
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11698">[ date ]</a>
              <a href="thread.html#11698">[ thread ]</a>
              <a href="subject.html#11698">[ subject ]</a>
              <a href="author.html#11698">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

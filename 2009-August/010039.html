<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] OpenOCD + beagle
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20OpenOCD%20%2B%20beagle&In-Reply-To=%3C436648.56967.qm%40web50603.mail.re2.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010050.html">
   <LINK REL="Next"  HREF="010041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] OpenOCD + beagle</H1>
    <B>James Lin</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20OpenOCD%20%2B%20beagle&In-Reply-To=%3C436648.56967.qm%40web50603.mail.re2.yahoo.com%3E"
       TITLE="[Openocd-development] OpenOCD + beagle">linderlong at yahoo.com
       </A><BR>
    <I>Sun Aug 23 20:11:05 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010050.html">[Openocd-development] OpenOCD + beagle
</A></li>
        <LI>Next message: <A HREF="010041.html">[Openocd-development] OpenOCD + beagle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10039">[ date ]</a>
              <a href="thread.html#10039">[ thread ]</a>
              <a href="subject.html#10039">[ subject ]</a>
              <a href="author.html#10039">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I pulled out trunk 2604 and applied 4 patches. On my system, OpenOCD works the way Dirk email has described. 

Best regards,

James

--- On Sun, 8/23/09, Dirk Behme &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">dirk.behme at googlemail.com</A>&gt; wrote:

&gt;<i> From: Dirk Behme &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">dirk.behme at googlemail.com</A>&gt;
</I>&gt;<i> Subject: Re: [Openocd-development] OpenOCD + beagle
</I>&gt;<i> To: &quot;David Brownell&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">david-b at pacbell.net</A>&gt;, <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">openocd-development at lists.berlios.de</A>, &quot;James Lin&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">linderlong at yahoo.com</A>&gt;
</I>&gt;<i> Date: Sunday, August 23, 2009, 5:52 AM
</I>&gt;<i> David Brownell wrote:
</I>&gt;<i> &gt; On Wednesday 19 August 2009, James Lin wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt; Then I tried to apply the patch described in 
</I>&gt;<i> &gt;&gt; <A HREF="../2009-June/008256.html">http://lists.berlios.de/pipermail/openocd-development/2009-June/008256.html</A>
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; I don't know if this additional step was necessary
</I>&gt;<i> but it seemed
</I>&gt;<i> &gt;&gt; to get correct mfg, part, ver.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; So it *was* necessary.&#160; You seem to have had
</I>&gt;<i> better luck than I
</I>&gt;<i> &gt; did, way back when I did that, in that you got that
</I>&gt;<i> without first
</I>&gt;<i> &gt; forcing a reset.&#160; Right?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Maybe an updated version of that patch should
</I>&gt;<i> merge...
</I>&gt;<i> 
</I>&gt;<i> With the four patches in attachment (from [1] [2] [3]) on
</I>&gt;<i> top of recent OpenOCD r2604 with BeagleBoard:
</I>&gt;<i> 
</I>&gt;<i> -- cut --
</I>&gt;<i> &gt; openocd -s lib/openocd/ -f interface/flyswatter.cfg -f
</I>&gt;<i> board/ti_beagleboard.cfg
</I>&gt;<i> Open On-Chip Debugger 0.3.0-in-development
</I>&gt;<i> (2009-08-22-08:37) svn:2604M
</I>&gt;<i> $URL: <A HREF="svn://svn.berlios.de/openocd/trunk/src/openocd.c">svn://svn.berlios.de/openocd/trunk/src/openocd.c</A> $
</I>&gt;<i> For bug reports, read <A HREF="http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS">http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS</A>
</I>&gt;<i> OLD SYNTAX: DEPRECATED - use jtag_khz, not jtag_speed
</I>&gt;<i> jtag_speed: 1
</I>&gt;<i> Warn : huge IR length 38
</I>&gt;<i> Info : clock speed 3000 kHz
</I>&gt;<i> Info : JTAG tap: omap3530.jrc tap/device found: 0x0b7ae02f
</I>&gt;<i> (mfg: 0x017, part: 0xb7ae, ver: 0x0)
</I>&gt;<i> Info : JTAG Tap/device matched
</I>&gt;<i> -- cut --
</I>&gt;<i> 
</I>&gt;<i> -- cut --
</I>&gt;<i> &gt; telnet localhost 4444
</I>&gt;<i> Trying 127.0.0.1...
</I>&gt;<i> Connected to localhost.
</I>&gt;<i> Escape character is '^]'.
</I>&gt;<i> Open On-Chip Debugger
</I>&gt;<i> &gt; omap3_dbginit
</I>&gt;<i> JTAG tap: omap3530.jrc tap/device found: 0x0b7ae02f (mfg:
</I>&gt;<i> 0x017, part: 0xb7ae, ver: 0x0)
</I>&gt;<i> JTAG Tap/device matched
</I>&gt;<i> AHBAP Cached values: dp_select 0x10, ap_csw 0xa2000002,
</I>&gt;<i> ap_tar 0x54011080
</I>&gt;<i> SWJ-DP STICKY ERROR
</I>&gt;<i> Read MEM_AP_CSW 0x80000042, MEM_AP_TAR 0x54011080
</I>&gt;<i> &#160; &#160; TargetName&#160; &#160; &#160;
</I>&gt;<i> &#160;&#160;&#160;Type&#160; &#160; &#160;&#160;&#160;Endian
</I>&gt;<i> TapName&#160; &#160; &#160; &#160; &#160; &#160; State
</I>&gt;<i> --&#160; ------------------ ---------- ------
</I>&gt;<i> ------------------ ------------
</I>&gt;<i>  0* omap3.cpu&#160; &#160; &#160; &#160; &#160;
</I>&gt;<i> cortex_a8&#160; little omap3530.dap&#160; &#160;
</I>&gt;<i> &#160;&#160;&#160;unknown
</I>&gt;<i> 0x54011314 00000003&#160; &#160; &#160; &#160; &#160;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;
</I>&gt;<i> &#160; ....
</I>&gt;<i> 0x54011314 00000001&#160; &#160; &#160; &#160; &#160;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;
</I>&gt;<i> &#160; ....
</I>&gt;<i> &gt; scan_chain
</I>&gt;<i> &#160; &#160;&#160;&#160;TapName&#160; &#160; &#160; &#160;
</I>&gt;<i> &#160; &#160; | Enabled |&#160;&#160;&#160;IdCode&#160;
</I>&gt;<i> &#160; &#160; Expected&#160; &#160; IrLen IrCap&#160; IrMask
</I>&gt;<i> Instr
</I>&gt;<i> ---|--------------------|---------|------------|------------|------|------|------|---------
</I>&gt;<i>  0 | omap3530.dsp&#160; &#160; &#160;&#160;&#160;|&#160;
</I>&gt;<i> &#160; n&#160; &#160; | 0x00000000 | 0x00000000 | 0x26 |
</I>&gt;<i> 0x25 | 0x3f | 0xffffffff
</I>&gt;<i>  1 | omap3530.dap&#160; &#160; &#160;&#160;&#160;|&#160;
</I>&gt;<i> &#160; Y&#160; &#160; | 0x00000000 | 0x0b6d602f | 0x04 |
</I>&gt;<i> 0x01 | 0x0f | 0x0a
</I>&gt;<i>  2 | omap3530.jrc&#160; &#160; &#160;&#160;&#160;|&#160;
</I>&gt;<i> &#160; Y&#160; &#160; | 0x0b7ae02f | 0x0b7ae02f | 0x06 |
</I>&gt;<i> 0x01 | 0x3f | 0x3f
</I>&gt;<i> &gt; halt 
</I>&gt;<i> invalid mode value encountered 
</I>&gt;<i> ...
</I>&gt;<i> invalid mode value encountered
</I>&gt;<i> target state: halted
</I>&gt;<i> invalid mode value encountered
</I>&gt;<i> ...
</I>&gt;<i> target halted in ARM state due to debug-request, current
</I>&gt;<i> mode: Illegal mode value
</I>&gt;<i> r0: 0xfffffff8 pc: 0x00000000
</I>&gt;<i> MMU: disabled, D-Cache: disabled, I-Cache: disabled
</I>&gt;<i> &gt; poll
</I>&gt;<i> background polling: on
</I>&gt;<i> TAP: omap3530.dap (enabled)
</I>&gt;<i> target state: halted
</I>&gt;<i> invalid mode value encountered
</I>&gt;<i> ...
</I>&gt;<i> target halted in ARM state due to debug-request, current
</I>&gt;<i> mode: Illegal mode value
</I>&gt;<i> r0: 0xfffffff8 pc: 0x00000000
</I>&gt;<i> MMU: disabled, D-Cache: disabled, I-Cache: disabled
</I>&gt;<i> &gt; resume
</I>&gt;<i> invalid mode value encountered
</I>&gt;<i> ...
</I>&gt;<i> &gt; poll
</I>&gt;<i> background polling: on
</I>&gt;<i> TAP: omap3530.dap (enabled)
</I>&gt;<i> target state: running
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> -- cut --
</I>&gt;<i> 
</I>&gt;<i> Having U-Boot running, halt and resume seem to work (but a
</I>&gt;<i> lot of invalid mode warnings). And yes, &quot;soft_reset_halt&quot;
</I>&gt;<i> still gives a segfault.
</I>&gt;<i> 
</I>&gt;<i> What are the next steps which could be done with
</I>&gt;<i> BeagleBoard? I never attached gdb yet, so if anybody has
</I>&gt;<i> hints for this ... ;)
</I>&gt;<i> 
</I>&gt;<i> I'd vote to apply the four patches in attachment.
</I>&gt;<i> 
</I>&gt;<i> Then, the next steps would be to find the reason for
</I>&gt;<i> invalid mode message, the segfault and maybe fix the &quot;OLD
</I>&gt;<i> SYNTAX: DEPRECATED - use jtag_khz, not jtag_speed&quot; message
</I>&gt;<i> above?
</I>&gt;<i> 
</I>&gt;<i> I would be happy to test all this ;)
</I>&gt;<i> 
</I>&gt;<i> Best regards
</I>&gt;<i> 
</I>&gt;<i> Dirk
</I>&gt;<i> 
</I>&gt;<i> [1] <A HREF="https://lists.berlios.de/pipermail/openocd-development/2009-June/008256.html">https://lists.berlios.de/pipermail/openocd-development/2009-June/008256.html</A>
</I>&gt;<i> 
</I>&gt;<i> [2] <A HREF="../2009-July/009652.html">http://lists.berlios.de/pipermail/openocd-development/2009-July/009652.html</A>
</I>&gt;<i> 
</I>&gt;<i> [3] <A HREF="https://lists.berlios.de/pipermail/openocd-development/2009-August/010004.html">https://lists.berlios.de/pipermail/openocd-development/2009-August/010004.html</A>
</I>&gt;<i> 
</I>&gt;<i> -----Inline Attachment Follows-----
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -----Inline Attachment Follows-----
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -----Inline Attachment Follows-----
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -----Inline Attachment Follows-----
</I>&gt;<i> 
</I>&gt;<i> 
</I>

      

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010050.html">[Openocd-development] OpenOCD + beagle
</A></li>
	<LI>Next message: <A HREF="010041.html">[Openocd-development] OpenOCD + beagle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10039">[ date ]</a>
              <a href="thread.html#10039">[ thread ]</a>
              <a href="subject.html#10039">[ subject ]</a>
              <a href="author.html#10039">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] init sequence tricks - simulating execution	of elf images
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20init%20sequence%20tricks%20-%20simulating%20execution%0A%09of%20elf%20images&In-Reply-To=%3Cc09652430909010417u3a0a464cw6aea44f500ec2d87%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010288.html">
   <LINK REL="Next"  HREF="010311.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] init sequence tricks - simulating execution	of elf images</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20init%20sequence%20tricks%20-%20simulating%20execution%0A%09of%20elf%20images&In-Reply-To=%3Cc09652430909010417u3a0a464cw6aea44f500ec2d87%40mail.gmail.com%3E"
       TITLE="[Openocd-development] init sequence tricks - simulating execution	of elf images">oyvind.harboe at zylin.com
       </A><BR>
    <I>Tue Sep  1 13:17:51 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010288.html">[Openocd-development] Cortex-A8 problems
</A></li>
        <LI>Next message: <A HREF="010311.html">[Openocd-development] init sequence tricks - simulating	execution of elf images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10293">[ date ]</a>
              <a href="thread.html#10293">[ thread ]</a>
              <a href="subject.html#10293">[ subject ]</a>
              <a href="author.html#10293">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Starting a new thread on a crazy idea I had to help alleviate
problems with coming up with the reset init sequence.

Lots of hardware out there have working .elf files that set up
the hardware.

What if a known working elf image could be used instead of
having to first succeed in writing a reset init sequence?

What if the init sequence could be extracted automatically
from such an image?

Rough idea:

- an elf file is loaded into the OpenOCD host memory
- simulation then starts at some address within the elf image
- memory accesses inside the address range of the elf
image are handled by the simulator reading/writing into the
elf image stored in OpenOCD host memory
- memory accesses outside the address range of the
elf image are directed to the target
- add some capability of interactivity and good debug output.
The seasoned embedded engineer should then be able
to massage the result of this simulation into a working
reset script with moderate effort.



This would not be a tool for those that &quot;just want something
that works out of the box&quot;, but rather an alternate path to
creating config scripts that are included with OpenOCD.


Perhaps it would be able to do away with the simulation
bit here. Clearly there are elf images that will not work
in simulation mode... The trick with running an elf image
without a working reset init sequence is that the elf image
might be designed to run out of flash/rom.


-- 
&#216;yvind Harboe
Embedded software and hardware consulting services
<A HREF="http://www.zylin.com">http://www.zylin.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010288.html">[Openocd-development] Cortex-A8 problems
</A></li>
	<LI>Next message: <A HREF="010311.html">[Openocd-development] init sequence tricks - simulating	execution of elf images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10293">[ date ]</a>
              <a href="thread.html#10293">[ thread ]</a>
              <a href="subject.html#10293">[ subject ]</a>
              <a href="author.html#10293">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20openocd%200.3.0%20%2B%20GDB%20%2B%20ECLIPSE%20not%20working&In-Reply-To=%3C1718888c0909170746x18ee5a03m85a90fc2cc242232%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010631.html">
   <LINK REL="Next"  HREF="010634.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working</H1>
    <B>Ji&#345;&#237; Kubias</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20openocd%200.3.0%20%2B%20GDB%20%2B%20ECLIPSE%20not%20working&In-Reply-To=%3C1718888c0909170746x18ee5a03m85a90fc2cc242232%40mail.gmail.com%3E"
       TITLE="[Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working">jiri.kubias at gmail.com
       </A><BR>
    <I>Thu Sep 17 16:46:08 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010631.html">[Openocd-development]  openocd 0.3.0 + GDB + ECLIPSE not working
</A></li>
        <LI>Next message: <A HREF="010634.html">[Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10632">[ date ]</a>
              <a href="thread.html#10632">[ thread ]</a>
              <a href="subject.html#10632">[ subject ]</a>
              <a href="author.html#10632">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
I thought that this email didn't reach opnocd mailing list (I didnt recieve
copy from mailing list).  I solved my problem yesterday - the main problem
was missconfigured GDB (it was configured only for i686-linux platform and
not for arm-elf .... The second was enabled code compression - eclipse
didn't survive this. Well now it works fine.

I have troubles with the drivers provided on amontec web page - the windows
driver is quied old (DriverVer=12/01/2005, taken from FTD2XX.inf), in linux
I have the same problems so Im using the second driver usblib for ftdi
chips. I reported this problem to amontec - but no response.

Jirka



2009/9/17 Laurent Gauch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">laurent.gauch at amontec.com</A>&gt;

&gt;<i> &gt;
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt; Im newbie to debugging under linux at all. Im tying to make work openocd
</I>&gt;<i> &gt; 0.3.0  + jtagkey2 + gdb + eclipse working. However Im not sucessfull. I
</I>&gt;<i> &gt; found several problems:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 1) Maybe this is not problem, but when i open opencd with jkagkey script
</I>&gt;<i> and
</I>&gt;<i> &gt; lpc2378 (im using lpc2364 - config is wery similar) I get this output
</I>&gt;<i> &gt; Error: EmbeddedICE v7 handling might be broken
</I>&gt;<i> &gt; but everything seems that is working
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2) but when i use eclipse with CDT pluguin from Zylin and configure GDB
</I>&gt;<i> with
</I>&gt;<i> &gt; this init command;
</I>&gt;<i> &gt; target remote localhost:3333
</I>&gt;<i> &gt; set mem inaccessible-by-default off
</I>&gt;<i> &gt; monitor halt
</I>&gt;<i> &gt; monitor arm7_9 dcc_downloads enable
</I>&gt;<i> &gt; monitor gdb_breakpoint_override hard
</I>&gt;<i> &gt; monitor arm7_9 fast_memory_access enable
</I>&gt;<i> &gt; monitor wait_halt
</I>&gt;<i> &gt; break main
</I>&gt;<i> &gt; continue
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It always fails see this log from openocd
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Open On-Chip Debugger 0.3.0-in-development (2009-09-16-11:44) svn:2714
</I>&gt;<i> &gt; $URL: <A HREF="svn://svn.berlios.de/openocd/trunk/src/openocd.c">svn://svn.berlios.de/openocd/trunk/src/openocd.c</A> $
</I>&gt;<i> &gt; For bug reports, read
</I>&gt;<i> <A HREF="http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS">http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS</A>
</I>&gt;<i> &gt; jtag_nsrst_delay: 200
</I>&gt;<i> &gt; jtag_ntrst_delay: 200
</I>&gt;<i> &gt; Warn : use 'lpc2378.cpu' as target identifier, not '0'
</I>&gt;<i> &gt; 500 kHz
</I>&gt;<i> &gt; Info : max TCK change to: 30000 kHz
</I>&gt;<i> &gt; Info : clock speed 500 kHz
</I>&gt;<i> &gt; Info : JTAG tap: lpc2378.cpu tap/device found: 0x4f1f0f0f (mfg: 0x787,
</I>&gt;<i> part:
</I>&gt;<i> &gt; 0xf1f0, ver: 0x4)
</I>&gt;<i> &gt; Error: EmbeddedICE v7 handling might be broken
</I>&gt;<i> &gt; target state: halted
</I>&gt;<i> &gt; target halted in ARM state due to breakpoint, current mode: Supervisor
</I>&gt;<i> &gt; cpsr: 0x20000013 pc: 0x00000238
</I>&gt;<i> &gt; Info : accepting 'gdb' connection from 0
</I>&gt;<i> &gt; Warn : acknowledgment received, but no packet pending
</I>&gt;<i> &gt; Warn : memory read caused data abort (address: 0x08000000, size: 0x4,
</I>&gt;<i> count:
</I>&gt;<i> &gt; 0x2)
</I>&gt;<i> &gt; Warn : memory read caused data abort (address: 0x08000000, size: 0x4,
</I>&gt;<i> count:
</I>&gt;<i> &gt; 0x1)
</I>&gt;<i> &gt; dcc downloads are enabled
</I>&gt;<i> &gt; force hard breakpoints
</I>&gt;<i> &gt; fast memory access is enabled
</I>&gt;<i> &gt; Info : dropped 'gdb' connection - error -400
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; the log from eclipse
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; source .gdbinit
</I>&gt;<i> &gt; target remote localhost:3333
</I>&gt;<i> &gt; 0x08000000 in ?? ()
</I>&gt;<i> &gt; set mem inaccessible-by-default off
</I>&gt;<i> &gt; monitor halt
</I>&gt;<i> &gt; monitor arm7_9 dcc_downloads enable
</I>&gt;<i> &gt; dcc downloads are enabled
</I>&gt;<i> &gt; monitor gdb_breakpoint_override hard
</I>&gt;<i> &gt; force hard breakpoints
</I>&gt;<i> &gt; monitor arm7_9 fast_memory_access enable
</I>&gt;<i> &gt; fast memory access is enabled
</I>&gt;<i> &gt; monitor wait_halt
</I>&gt;<i> &gt; break main
</I>&gt;<i> &gt; Breakpoint 1 at 0x64c: file
</I>&gt;<i> &gt; /home/data/robot/eurobot/sysless-lpc21xx/app/test222/main.c, line 141.
</I>&gt;<i> &gt; Note: automatically using hardware breakpoints for read-only addresses.
</I>&gt;<i> &gt; continue
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So please help me. Im not sure if is not somethig wrong with eclipse, but
</I>&gt;<i> is
</I>&gt;<i> &gt; wery hard to find wiking exaple for Amontec Jtagkey2 , the lastest
</I>&gt;<i> openocd
</I>&gt;<i> &gt; and eclipse.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; OpenOCD - 0.3.0  svn build: 2741
</I>&gt;<i> &gt; Eclipse 3.4.1
</I>&gt;<i> &gt; GDB  6.8
</I>&gt;<i> &gt; system Gentoo
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Jiri Kubias
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The Amontec JTAGkey-2 is the new generation of Amontec JTAGkey Dongle
</I>&gt;<i> Family.
</I>&gt;<i> The main new features are : High-Speed / Hi-Speed USB 2.0 compliant / 30
</I>&gt;<i> MHz JTAG / RTCK support / auto-sense1.2V to 5.5V JTAG IOs voltage / 32
</I>&gt;<i> mA output drivers for all JTAG IOs / TVS protections on all IOs /
</I>&gt;<i> Amontec JTAG hot-plug certified / USB plug-and-play/ 4 onboard LEDs for
</I>&gt;<i> easy first-uses /
</I>&gt;<i>  http//www.amontec.com
</I>&gt;<i>
</I>&gt;<i> The Amontec JTAGkey-2 is supporting RTCK (return clock for adaptive TCK
</I>&gt;<i> Frequency controlled by your Target itself ).
</I>&gt;<i> RTCK feature makes the debug much more stable since the Target frequency
</I>&gt;<i> could change at any time using a ARM -s processor.
</I>&gt;<i>
</I>&gt;<i> RTCK is a very nice feature allowing the Amontec JTAGkey-2 to be
</I>&gt;<i> synchronized depending on the Target frequency  (your LPC23xx). For the
</I>&gt;<i> ARM processors, the RTCK is implemented for any -s version.
</I>&gt;<i>
</I>&gt;<i> Now, you should enable the rtck signal in your OpenOCD configuration
</I>&gt;<i> file and try again.
</I>&gt;<i> ...
</I>&gt;<i> jtag_rtck
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i> Let us know your result enabling RTCK.
</I>&gt;<i>
</I>&gt;<i> If it is not better, try to add more delay for TRST and SRST ...
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Laurent Gauch
</I>&gt;<i>  <A HREF="http://www.amontec.com">http://www.amontec.com</A>
</I>&gt;<i>
</I>&gt;<i> Note : please use last FTD2XX drivers.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Openocd-development mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">https://lists.berlios.de/mailman/listinfo/openocd-development</A>
</I>&gt;<i>
</I>


-- 
===================================================
Bc. Jiri Kubias
Czech Technical University in Prague
Faculty of Electrical Engineering
dept. of Control Engineering
Karlovo namesti 13/E, 121 35 Prague
Czech Republic

web page: <A HREF="http://dce.felk.cvut.cz">http://dce.felk.cvut.cz</A>
e-mail: <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">jiri.kubias at gmail.com</A>
mobile: 777 974167
===================================================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20090917/0d1496e4/attachment.html">https://lists.berlios.de/pipermail/openocd-development/attachments/20090917/0d1496e4/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010631.html">[Openocd-development]  openocd 0.3.0 + GDB + ECLIPSE not working
</A></li>
	<LI>Next message: <A HREF="010634.html">[Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10632">[ date ]</a>
              <a href="thread.html#10632">[ thread ]</a>
              <a href="subject.html#10632">[ subject ]</a>
              <a href="author.html#10632">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] sync command
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20sync%20command&In-Reply-To=%3Cc09652430909090210l39518589h6b2252619a64d95f%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010460.html">
   <LINK REL="Next"  HREF="010463.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] sync command</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20sync%20command&In-Reply-To=%3Cc09652430909090210l39518589h6b2252619a64d95f%40mail.gmail.com%3E"
       TITLE="[Openocd-development] sync command">oyvind.harboe at zylin.com
       </A><BR>
    <I>Wed Sep  9 11:10:56 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010460.html">[Openocd-development] xscale debug_handler.bin
</A></li>
        <LI>Next message: <A HREF="010463.html">[Openocd-development] PATCH: cfi.c: Improved support for some flash	devices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10461">[ date ]</a>
              <a href="thread.html#10461">[ thread ]</a>
              <a href="subject.html#10461">[ subject ]</a>
              <a href="author.html#10461">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>One problem with GDB is that it can get out of sync with the
target.

While GDB believes that the target is in the halted mode, the target
could be running, powered down, halted, etc.

Here is an idea:

- add a new command to OpenOCD, &quot;sync&quot;. When this is issued
on a target, the next step command will be a no-op.
- when needing to sync up GDB to the target state, issue a &quot;monitor
sync&quot; + &quot;stepi&quot;.


A similar scheme would be required for attaching to OpenOCD as
GDB is trying to halt the target upon connection. OpenOCD would
then issue an implicit &quot;sync&quot; upon attaching to the target. GDB will
query the target for the register values after connect,
upon which it is told white lies today.

A &quot;stepi&quot; immediately after connecting GDB to OpenOCD would then
be required to sync up GDB to the target state....


Thoughts?


-- 
&#216;yvind Harboe
Embedded software and hardware consulting services
<A HREF="http://www.zylin.com">http://www.zylin.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010460.html">[Openocd-development] xscale debug_handler.bin
</A></li>
	<LI>Next message: <A HREF="010463.html">[Openocd-development] PATCH: cfi.c: Improved support for some flash	devices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10461">[ date ]</a>
              <a href="thread.html#10461">[ thread ]</a>
              <a href="subject.html#10461">[ subject ]</a>
              <a href="author.html#10461">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] PATCH: cfi.c: Improved support for some flash	devices
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20PATCH%3A%20cfi.c%3A%20Improved%20support%20for%20some%20flash%0A%09devices&In-Reply-To=%3C243389.68938.qm%40web27302.mail.ukl.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010461.html">
   <LINK REL="Next"  HREF="010464.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] PATCH: cfi.c: Improved support for some flash	devices</H1>
    <B>Rolf Meeser</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20PATCH%3A%20cfi.c%3A%20Improved%20support%20for%20some%20flash%0A%09devices&In-Reply-To=%3C243389.68938.qm%40web27302.mail.ukl.yahoo.com%3E"
       TITLE="[Openocd-development] PATCH: cfi.c: Improved support for some flash	devices">rolfm_9dq at yahoo.de
       </A><BR>
    <I>Wed Sep  9 17:26:03 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010461.html">[Openocd-development] sync command
</A></li>
        <LI>Next message: <A HREF="010464.html">[Openocd-development] PATCH: cfi.c: Improved support for some	flash devices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10463">[ date ]</a>
              <a href="thread.html#10463">[ thread ]</a>
              <a href="subject.html#10463">[ subject ]</a>
              <a href="author.html#10463">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

This patch adds target algorithm support for those flash devices that do not support DQ5 polling. So far they could only be programmed with host algorithm, but this was way too slow.

I added support for 16-bit devices only (I have an SST39VF3201). I didn't want to add support for 8 and 32 bit without being able to test the assembler code.

The different assembler code fragments can now be of arbitrary size (fixed a hard coded value).

All working areas are now freed at the end of cfi_spansion_write_block(). This fixes a bug (cfi_info-&gt;write_algorithm wasn't freed before, and caused a crash when the write function was called again). It also prevents the working_area from becoming fragmented in two halfes.

Regards,
Rolf







      
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cfi.patch
Type: text/x-patch
Size: 3458 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20090909/d71ef999/attachment.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20090909/d71ef999/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010461.html">[Openocd-development] sync command
</A></li>
	<LI>Next message: <A HREF="010464.html">[Openocd-development] PATCH: cfi.c: Improved support for some	flash devices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10463">[ date ]</a>
              <a href="thread.html#10463">[ thread ]</a>
              <a href="subject.html#10463">[ subject ]</a>
              <a href="author.html#10463">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

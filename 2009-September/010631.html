<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development]  openocd 0.3.0 + GDB + ECLIPSE not working
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%20openocd%200.3.0%20%2B%20GDB%20%2B%20ECLIPSE%20not%20working&In-Reply-To=%3C4AB23E32.3050605%40amontec.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010674.html">
   <LINK REL="Next"  HREF="010632.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development]  openocd 0.3.0 + GDB + ECLIPSE not working</H1>
    <B>Laurent Gauch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%20openocd%200.3.0%20%2B%20GDB%20%2B%20ECLIPSE%20not%20working&In-Reply-To=%3C4AB23E32.3050605%40amontec.com%3E"
       TITLE="[Openocd-development]  openocd 0.3.0 + GDB + ECLIPSE not working">laurent.gauch at amontec.com
       </A><BR>
    <I>Thu Sep 17 15:48:34 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010674.html">[Openocd-development] [PATCH] Enhancement: Allow -1 as last	sector for protection and erase
</A></li>
        <LI>Next message: <A HREF="010632.html">[Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10631">[ date ]</a>
              <a href="thread.html#10631">[ thread ]</a>
              <a href="subject.html#10631">[ subject ]</a>
              <a href="author.html#10631">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i> Im newbie to debugging under linux at all. Im tying to make work openocd
</I>&gt;<i> 0.3.0  + jtagkey2 + gdb + eclipse working. However Im not sucessfull. I
</I>&gt;<i> found several problems:
</I>&gt;<i>
</I>&gt;<i> 1) Maybe this is not problem, but when i open opencd with jkagkey script and
</I>&gt;<i> lpc2378 (im using lpc2364 - config is wery similar) I get this output
</I>&gt;<i> Error: EmbeddedICE v7 handling might be broken
</I>&gt;<i> but everything seems that is working
</I>&gt;<i>
</I>&gt;<i> 2) but when i use eclipse with CDT pluguin from Zylin and configure GDB with
</I>&gt;<i> this init command;
</I>&gt;<i> target remote localhost:3333
</I>&gt;<i> set mem inaccessible-by-default off
</I>&gt;<i> monitor halt
</I>&gt;<i> monitor arm7_9 dcc_downloads enable
</I>&gt;<i> monitor gdb_breakpoint_override hard
</I>&gt;<i> monitor arm7_9 fast_memory_access enable
</I>&gt;<i> monitor wait_halt
</I>&gt;<i> break main
</I>&gt;<i> continue
</I>&gt;<i>
</I>&gt;<i> It always fails see this log from openocd
</I>&gt;<i>
</I>&gt;<i> Open On-Chip Debugger 0.3.0-in-development (2009-09-16-11:44) svn:2714
</I>&gt;<i> $URL: <A HREF="svn://svn.berlios.de/openocd/trunk/src/openocd.c">svn://svn.berlios.de/openocd/trunk/src/openocd.c</A> $
</I>&gt;<i> For bug reports, read <A HREF="http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS">http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS</A>
</I>&gt;<i> jtag_nsrst_delay: 200
</I>&gt;<i> jtag_ntrst_delay: 200
</I>&gt;<i> Warn : use 'lpc2378.cpu' as target identifier, not '0'
</I>&gt;<i> 500 kHz
</I>&gt;<i> Info : max TCK change to: 30000 kHz
</I>&gt;<i> Info : clock speed 500 kHz
</I>&gt;<i> Info : JTAG tap: lpc2378.cpu tap/device found: 0x4f1f0f0f (mfg: 0x787, part:
</I>&gt;<i> 0xf1f0, ver: 0x4)
</I>&gt;<i> Error: EmbeddedICE v7 handling might be broken
</I>&gt;<i> target state: halted
</I>&gt;<i> target halted in ARM state due to breakpoint, current mode: Supervisor
</I>&gt;<i> cpsr: 0x20000013 pc: 0x00000238
</I>&gt;<i> Info : accepting 'gdb' connection from 0
</I>&gt;<i> Warn : acknowledgment received, but no packet pending
</I>&gt;<i> Warn : memory read caused data abort (address: 0x08000000, size: 0x4, count:
</I>&gt;<i> 0x2)
</I>&gt;<i> Warn : memory read caused data abort (address: 0x08000000, size: 0x4, count:
</I>&gt;<i> 0x1)
</I>&gt;<i> dcc downloads are enabled
</I>&gt;<i> force hard breakpoints
</I>&gt;<i> fast memory access is enabled
</I>&gt;<i> Info : dropped 'gdb' connection - error -400
</I>&gt;<i>
</I>&gt;<i> the log from eclipse
</I>&gt;<i>
</I>&gt;<i> source .gdbinit
</I>&gt;<i> target remote localhost:3333
</I>&gt;<i> 0x08000000 in ?? ()
</I>&gt;<i> set mem inaccessible-by-default off
</I>&gt;<i> monitor halt
</I>&gt;<i> monitor arm7_9 dcc_downloads enable
</I>&gt;<i> dcc downloads are enabled
</I>&gt;<i> monitor gdb_breakpoint_override hard
</I>&gt;<i> force hard breakpoints
</I>&gt;<i> monitor arm7_9 fast_memory_access enable
</I>&gt;<i> fast memory access is enabled
</I>&gt;<i> monitor wait_halt
</I>&gt;<i> break main
</I>&gt;<i> Breakpoint 1 at 0x64c: file
</I>&gt;<i> /home/data/robot/eurobot/sysless-lpc21xx/app/test222/main.c, line 141.
</I>&gt;<i> Note: automatically using hardware breakpoints for read-only addresses.
</I>&gt;<i> continue
</I>&gt;<i>
</I>&gt;<i> So please help me. Im not sure if is not somethig wrong with eclipse, but is
</I>&gt;<i> wery hard to find wiking exaple for Amontec Jtagkey2 , the lastest openocd
</I>&gt;<i> and eclipse.
</I>&gt;<i>
</I>&gt;<i> OpenOCD - 0.3.0  svn build: 2741
</I>&gt;<i> Eclipse 3.4.1
</I>&gt;<i> GDB  6.8
</I>&gt;<i> system Gentoo
</I>&gt;<i>
</I>&gt;<i> Jiri Kubias
</I>

The Amontec JTAGkey-2 is the new generation of Amontec JTAGkey Dongle 
Family.
The main new features are : High-Speed / Hi-Speed USB 2.0 compliant / 30 
MHz JTAG / RTCK support / auto-sense1.2V to 5.5V JTAG IOs voltage / 32 
mA output drivers for all JTAG IOs / TVS protections on all IOs / 
Amontec JTAG hot-plug certified / USB plug-and-play/ 4 onboard LEDs for 
easy first-uses /
 http//www.amontec.com

The Amontec JTAGkey-2 is supporting RTCK (return clock for adaptive TCK 
Frequency controlled by your Target itself ).
RTCK feature makes the debug much more stable since the Target frequency 
could change at any time using a ARM -s processor.

RTCK is a very nice feature allowing the Amontec JTAGkey-2 to be 
synchronized depending on the Target frequency  (your LPC23xx). For the 
ARM processors, the RTCK is implemented for any -s version.

Now, you should enable the rtck signal in your OpenOCD configuration 
file and try again.
...
jtag_rtck
...

Let us know your result enabling RTCK.

If it is not better, try to add more delay for TRST and SRST ...

Regards,

Laurent Gauch
 <A HREF="http://www.amontec.com">http://www.amontec.com</A>

Note : please use last FTD2XX drivers.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010674.html">[Openocd-development] [PATCH] Enhancement: Allow -1 as last	sector for protection and erase
</A></li>
	<LI>Next message: <A HREF="010632.html">[Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10631">[ date ]</a>
              <a href="thread.html#10631">[ thread ]</a>
              <a href="subject.html#10631">[ subject ]</a>
              <a href="author.html#10631">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

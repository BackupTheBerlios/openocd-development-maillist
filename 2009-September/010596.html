<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20openocd%200.3.0%20%2B%20GDB%20%2B%20ECLIPSE%20not%20working&In-Reply-To=%3C1718888c0909160631s2babe70btd2edc9115263bd6%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010593.html">
   <LINK REL="Next"  HREF="010607.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working</H1>
    <B>Ji&#345;&#237; Kubias</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20openocd%200.3.0%20%2B%20GDB%20%2B%20ECLIPSE%20not%20working&In-Reply-To=%3C1718888c0909160631s2babe70btd2edc9115263bd6%40mail.gmail.com%3E"
       TITLE="[Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working">jiri.kubias at gmail.com
       </A><BR>
    <I>Wed Sep 16 15:31:54 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010593.html">[Openocd-development] PXA issues, GDB debugging on slow clocks
</A></li>
        <LI>Next message: <A HREF="010607.html">[Openocd-development] [PATCH]cortex_a8_init_debug_access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10596">[ date ]</a>
              <a href="thread.html#10596">[ thread ]</a>
              <a href="subject.html#10596">[ subject ]</a>
              <a href="author.html#10596">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
Im newbie to debugging under linux at all. Im tying to make work openocd
0.3.0  + jtagkey2 + gdb + eclipse working. However Im not sucessfull. I
found several problems:

1) Maybe this is not problem, but when i open opencd with jkagkey script and
lpc2378 (im using lpc2364 - config is wery similar) I get this output
Error: EmbeddedICE v7 handling might be broken
but everything seems that is working

2) but when i use eclipse with CDT pluguin from Zylin and configure GDB with
this init command;
target remote localhost:3333
set mem inaccessible-by-default off
monitor halt
monitor arm7_9 dcc_downloads enable
monitor gdb_breakpoint_override hard
monitor arm7_9 fast_memory_access enable
monitor wait_halt
break main
continue

It always fails see this log from openocd

Open On-Chip Debugger 0.3.0-in-development (2009-09-16-11:44) svn:2714
$URL: <A HREF="svn://svn.berlios.de/openocd/trunk/src/openocd.c">svn://svn.berlios.de/openocd/trunk/src/openocd.c</A> $
For bug reports, read <A HREF="http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS">http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS</A>
jtag_nsrst_delay: 200
jtag_ntrst_delay: 200
Warn : use 'lpc2378.cpu' as target identifier, not '0'
500 kHz
Info : max TCK change to: 30000 kHz
Info : clock speed 500 kHz
Info : JTAG tap: lpc2378.cpu tap/device found: 0x4f1f0f0f (mfg: 0x787, part:
0xf1f0, ver: 0x4)
Error: EmbeddedICE v7 handling might be broken
target state: halted
target halted in ARM state due to breakpoint, current mode: Supervisor
cpsr: 0x20000013 pc: 0x00000238
Info : accepting 'gdb' connection from 0
Warn : acknowledgment received, but no packet pending
Warn : memory read caused data abort (address: 0x08000000, size: 0x4, count:
0x2)
Warn : memory read caused data abort (address: 0x08000000, size: 0x4, count:
0x1)
dcc downloads are enabled
force hard breakpoints
fast memory access is enabled
Info : dropped 'gdb' connection - error -400

the log from eclipse

source .gdbinit
target remote localhost:3333
0x08000000 in ?? ()
set mem inaccessible-by-default off
monitor halt
monitor arm7_9 dcc_downloads enable
dcc downloads are enabled
monitor gdb_breakpoint_override hard
force hard breakpoints
monitor arm7_9 fast_memory_access enable
fast memory access is enabled
monitor wait_halt
break main
Breakpoint 1 at 0x64c: file
/home/data/robot/eurobot/sysless-lpc21xx/app/test222/main.c, line 141.
Note: automatically using hardware breakpoints for read-only addresses.
continue

So please help me. Im not sure if is not somethig wrong with eclipse, but is
wery hard to find wiking exaple for Amontec Jtagkey2 , the lastest openocd
and eclipse.

OpenOCD - 0.3.0  svn build: 2741
Eclipse 3.4.1
GDB  6.8
system Gentoo

Jiri Kubias




-- 
===================================================
Bc. Jiri Kubias
Czech Technical University in Prague
Faculty of Electrical Engineering
dept. of Control Engineering
Karlovo namesti 13/E, 121 35 Prague
Czech Republic

web page: <A HREF="http://dce.felk.cvut.cz">http://dce.felk.cvut.cz</A>
e-mail: <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">jiri.kubias at gmail.com</A>
mobile: 777 974167
===================================================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20090916/0795fa98/attachment.html">https://lists.berlios.de/pipermail/openocd-development/attachments/20090916/0795fa98/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010593.html">[Openocd-development] PXA issues, GDB debugging on slow clocks
</A></li>
	<LI>Next message: <A HREF="010607.html">[Openocd-development] [PATCH]cortex_a8_init_debug_access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10596">[ date ]</a>
              <a href="thread.html#10596">[ thread ]</a>
              <a href="subject.html#10596">[ subject ]</a>
              <a href="author.html#10596">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

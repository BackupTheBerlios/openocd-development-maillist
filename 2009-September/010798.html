<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] works on amd64 but not i386
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20works%20on%20amd64%20but%20not%20i386&In-Reply-To=%3C20090924152922.GT12991%40dream.aleph1.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010797.html">
   <LINK REL="Next"  HREF="010814.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] works on amd64 but not i386</H1>
    <B>Wookey</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20works%20on%20amd64%20but%20not%20i386&In-Reply-To=%3C20090924152922.GT12991%40dream.aleph1.co.uk%3E"
       TITLE="[Openocd-development] works on amd64 but not i386">wookey at wookware.org
       </A><BR>
    <I>Thu Sep 24 17:29:22 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010797.html">[Openocd-development] target configuration files for Toshiba TX09	familiy
</A></li>
        <LI>Next message: <A HREF="010814.html">[Openocd-development] [PATCH 0/7] Release Process Upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10798">[ date ]</a>
              <a href="thread.html#10798">[ thread ]</a>
              <a href="subject.html#10798">[ subject ]</a>
              <a href="author.html#10798">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have been having fun with various combinations of openocd, amontec
jtagkey and olimex usb-tiny and pxa270 and chianed and unchained JTAG
interfaces. We have one JTAG port to xilinx xcr3256 (coolrunner II
CPLD) and one to pxa270. 

I have a large table of what does and doesn't work which is all very
nice, but I suspect won't generally be of much interest here because
it all related to r1613 because that was the last version on which
xsvf or svf playing into CPLDs worked. I intend to work through svn
revisions, keeping the 1613-vontage xsvf code to see how far forward
one can go until that dies due to changes elsewhere. David Bisset is
also working with latest code to see if he can get it going again on
xscale - it seems that nor programing only works in simple-minded mode
- as soon as you try to use the debug-handler code in the xscale to
program NOR at a useful speed it fails.

Anyway. The issue we have is that we are stuck with r1613 for the time
being and we can make that work with an amontec jtagkey in
chained-JTAG setup quite well (it segfaults every odd run and works
just fine every even run - which is about as good as it gets IME :-)

However this turned out (when we tried to deploy it to production) to
only be true on amd64 machines. On i386 machines boundary scan always
fails. This is a bit of a pain (we've gone to buy another amd64 box
for now as openocd-fixing time has run out).

It works the same (every other time) on amd64 debian testing and
stable boxes, with both libftdi 0.13 and 0.16. It doesn't work just
the same with libftdi 0.13 and 0.16 on debian stable i386 machines.

So, if anyone has any bright ideas for fixing the underlying xsvf
problem so we can move to newer code or why it should be different on
i386.

Is anyone else using OpenOCD to program coolrunner CPLDs? I suspect
not otherwise there should be more grumbling that it's been broken for
quite some time. 

all our config files are available at 
<A HREF="http://balloonboard.org/cgi-bin/viewcvs.cgi/balloon/trunk/utils/openocd/">http://balloonboard.org/cgi-bin/viewcvs.cgi/balloon/trunk/utils/openocd/</A>

The case I am talking about above is:
openocd -s utils/openocd -f balloon3-amontec.cfg -f loadloon.cfg -f shutdown.cfg

Wookey
-- 
Principal hats:  iEndian - Balloonboard - Toby Churchill - Emdebian
<A HREF="http://wookware.org/">http://wookware.org/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010797.html">[Openocd-development] target configuration files for Toshiba TX09	familiy
</A></li>
	<LI>Next message: <A HREF="010814.html">[Openocd-development] [PATCH 0/7] Release Process Upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10798">[ date ]</a>
              <a href="thread.html#10798">[ thread ]</a>
              <a href="subject.html#10798">[ subject ]</a>
              <a href="author.html#10798">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

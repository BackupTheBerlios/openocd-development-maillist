<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20openocd%200.3.0%20%2B%20GDB%20%2B%20ECLIPSE%20not%20working&In-Reply-To=%3C1718888c0909210153t1c483bf8jb8937e441ad5dc95%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010634.html">
   <LINK REL="Next"  HREF="010633.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working</H1>
    <B>Ji&#345;&#237; Kubias</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20openocd%200.3.0%20%2B%20GDB%20%2B%20ECLIPSE%20not%20working&In-Reply-To=%3C1718888c0909210153t1c483bf8jb8937e441ad5dc95%40mail.gmail.com%3E"
       TITLE="[Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working">jiri.kubias at gmail.com
       </A><BR>
    <I>Mon Sep 21 10:53:45 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010634.html">[Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working
</A></li>
        <LI>Next message: <A HREF="010633.html">[Openocd-development] Please welcome David Brownell as a maintainer!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10706">[ date ]</a>
              <a href="thread.html#10706">[ thread ]</a>
              <a href="subject.html#10706">[ subject ]</a>
              <a href="author.html#10706">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>To Laurent Gauch: Did you received my private email?

Jiri Kubias

2009/9/17 Laurent Gauch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">laurent.gauch at amontec.com</A>&gt;

&gt;<i> Hi Jir(&#237; Kubias,
</I>&gt;<i>
</I>&gt;<i> Good to know you resolved your problem using GDB / OpenOCD / Amontec
</I>&gt;<i> JTAGkey-2 for your lpc2378 board.
</I>&gt;<i> Also, thank you for giving the how you have resolved the issue. It is nice
</I>&gt;<i> for other users.
</I>&gt;<i>
</I>&gt;<i> (By the way, I double checked our Amontec email box, but I did not find any
</I>&gt;<i> email from you regarding driver troubles.)
</I>&gt;<i> Actually, we did not have published the new driver, since we are doing
</I>&gt;<i> Microsoft certification for our new driver. For now, Amontec Team gives the
</I>&gt;<i> new driver on demand. But we will updated Amontec JTAGkey Dongle Drivers
</I>&gt;<i> tomorrow (uncertified one). Please check tomorrow <A HREF="http://www.amontec.com">http://www.amontec.com</A> .
</I>&gt;<i> The certified one (VISTA 64 bits) should come in the next 2 weeks.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Laurent Gauch
</I>&gt;<i> <A HREF="http://www.amontec.com">http://www.amontec.com</A>
</I>&gt;<i>
</I>&gt;<i> Jir(&#237; Kubias wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i> I thought that this email didn't reach opnocd mailing list (I didnt
</I>&gt;&gt;<i> recieve copy from mailing list). I solved my problem yesterday - the main
</I>&gt;&gt;<i> problem was missconfigured GDB (it was configured only for i686-linux
</I>&gt;&gt;<i> platform and not for arm-elf .... The second was enabled code compression -
</I>&gt;&gt;<i> eclipse didn't survive this. Well now it works fine.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have troubles with the drivers provided on amontec web page - the
</I>&gt;&gt;<i> windows driver is quied old (DriverVer=12/01/2005, taken from FTD2XX.inf),
</I>&gt;&gt;<i> in linux I have the same problems so Im using the second driver usblib for
</I>&gt;&gt;<i> ftdi chips. I reported this problem to amontec - but no response.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jirka
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2009/9/17 Laurent Gauch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">laurent.gauch at amontec.com</A> &lt;mailto:
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">laurent.gauch at amontec.com</A>&gt;&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    &gt;
</I>&gt;&gt;<i>    &gt; Hi,
</I>&gt;&gt;<i>    &gt; Im newbie to debugging under linux at all. Im tying to make work
</I>&gt;&gt;<i>    openocd
</I>&gt;&gt;<i>    &gt; 0.3.0 + jtagkey2 + gdb + eclipse working. However Im not
</I>&gt;&gt;<i>    sucessfull. I
</I>&gt;&gt;<i>    &gt; found several problems:
</I>&gt;&gt;<i>    &gt;
</I>&gt;&gt;<i>    &gt; 1) Maybe this is not problem, but when i open opencd with
</I>&gt;&gt;<i>    jkagkey script and
</I>&gt;&gt;<i>    &gt; lpc2378 (im using lpc2364 - config is wery similar) I get this
</I>&gt;&gt;<i>    output
</I>&gt;&gt;<i>    &gt; Error: EmbeddedICE v7 handling might be broken
</I>&gt;&gt;<i>    &gt; but everything seems that is working
</I>&gt;&gt;<i>    &gt;
</I>&gt;&gt;<i>    &gt; 2) but when i use eclipse with CDT pluguin from Zylin and
</I>&gt;&gt;<i>    configure GDB with
</I>&gt;&gt;<i>    &gt; this init command;
</I>&gt;&gt;<i>    &gt; target remote localhost:3333
</I>&gt;&gt;<i>    &gt; set mem inaccessible-by-default off
</I>&gt;&gt;<i>    &gt; monitor halt
</I>&gt;&gt;<i>    &gt; monitor arm7_9 dcc_downloads enable
</I>&gt;&gt;<i>    &gt; monitor gdb_breakpoint_override hard
</I>&gt;&gt;<i>    &gt; monitor arm7_9 fast_memory_access enable
</I>&gt;&gt;<i>    &gt; monitor wait_halt
</I>&gt;&gt;<i>    &gt; break main
</I>&gt;&gt;<i>    &gt; continue
</I>&gt;&gt;<i>    &gt;
</I>&gt;&gt;<i>    &gt; It always fails see this log from openocd
</I>&gt;&gt;<i>    &gt;
</I>&gt;&gt;<i>    &gt; Open On-Chip Debugger 0.3.0-in-development (2009-09-16-11:44)
</I>&gt;&gt;<i>    svn:2714
</I>&gt;&gt;<i>    &gt; $URL: <A HREF="svn://svn.berlios.de/openocd/trunk/src/openocd.c">svn://svn.berlios.de/openocd/trunk/src/openocd.c</A>
</I>&gt;&gt;<i>    &lt;<A HREF="http://svn.berlios.de/openocd/trunk/src/openocd.c">http://svn.berlios.de/openocd/trunk/src/openocd.c</A>&gt; $
</I>&gt;&gt;<i>    &gt; For bug reports, read
</I>&gt;&gt;<i>    <A HREF="http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS">http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS</A>
</I>&gt;&gt;<i>    &gt; jtag_nsrst_delay: 200
</I>&gt;&gt;<i>    &gt; jtag_ntrst_delay: 200
</I>&gt;&gt;<i>    &gt; Warn : use 'lpc2378.cpu' as target identifier, not '0'
</I>&gt;&gt;<i>    &gt; 500 kHz
</I>&gt;&gt;<i>    &gt; Info : max TCK change to: 30000 kHz
</I>&gt;&gt;<i>    &gt; Info : clock speed 500 kHz
</I>&gt;&gt;<i>    &gt; Info : JTAG tap: lpc2378.cpu tap/device found: 0x4f1f0f0f (mfg:
</I>&gt;&gt;<i>    0x787, part:
</I>&gt;&gt;<i>    &gt; 0xf1f0, ver: 0x4)
</I>&gt;&gt;<i>    &gt; Error: EmbeddedICE v7 handling might be broken
</I>&gt;&gt;<i>    &gt; target state: halted
</I>&gt;&gt;<i>    &gt; target halted in ARM state due to breakpoint, current mode:
</I>&gt;&gt;<i>    Supervisor
</I>&gt;&gt;<i>    &gt; cpsr: 0x20000013 pc: 0x00000238
</I>&gt;&gt;<i>    &gt; Info : accepting 'gdb' connection from 0
</I>&gt;&gt;<i>    &gt; Warn : acknowledgment received, but no packet pending
</I>&gt;&gt;<i>    &gt; Warn : memory read caused data abort (address: 0x08000000, size:
</I>&gt;&gt;<i>    0x4, count:
</I>&gt;&gt;<i>    &gt; 0x2)
</I>&gt;&gt;<i>    &gt; Warn : memory read caused data abort (address: 0x08000000, size:
</I>&gt;&gt;<i>    0x4, count:
</I>&gt;&gt;<i>    &gt; 0x1)
</I>&gt;&gt;<i>    &gt; dcc downloads are enabled
</I>&gt;&gt;<i>    &gt; force hard breakpoints
</I>&gt;&gt;<i>    &gt; fast memory access is enabled
</I>&gt;&gt;<i>    &gt; Info : dropped 'gdb' connection - error -400
</I>&gt;&gt;<i>    &gt;
</I>&gt;&gt;<i>    &gt; the log from eclipse
</I>&gt;&gt;<i>    &gt;
</I>&gt;&gt;<i>    &gt; source .gdbinit
</I>&gt;&gt;<i>    &gt; target remote localhost:3333
</I>&gt;&gt;<i>    &gt; 0x08000000 in ?? ()
</I>&gt;&gt;<i>    &gt; set mem inaccessible-by-default off
</I>&gt;&gt;<i>    &gt; monitor halt
</I>&gt;&gt;<i>    &gt; monitor arm7_9 dcc_downloads enable
</I>&gt;&gt;<i>    &gt; dcc downloads are enabled
</I>&gt;&gt;<i>    &gt; monitor gdb_breakpoint_override hard
</I>&gt;&gt;<i>    &gt; force hard breakpoints
</I>&gt;&gt;<i>    &gt; monitor arm7_9 fast_memory_access enable
</I>&gt;&gt;<i>    &gt; fast memory access is enabled
</I>&gt;&gt;<i>    &gt; monitor wait_halt
</I>&gt;&gt;<i>    &gt; break main
</I>&gt;&gt;<i>    &gt; Breakpoint 1 at 0x64c: file
</I>&gt;&gt;<i>    &gt; /home/data/robot/eurobot/sysless-lpc21xx/app/test222/main.c,
</I>&gt;&gt;<i>    line 141.
</I>&gt;&gt;<i>    &gt; Note: automatically using hardware breakpoints for read-only
</I>&gt;&gt;<i>    addresses.
</I>&gt;&gt;<i>    &gt; continue
</I>&gt;&gt;<i>    &gt;
</I>&gt;&gt;<i>    &gt; So please help me. Im not sure if is not somethig wrong with
</I>&gt;&gt;<i>    eclipse, but is
</I>&gt;&gt;<i>    &gt; wery hard to find wiking exaple for Amontec Jtagkey2 , the
</I>&gt;&gt;<i>    lastest openocd
</I>&gt;&gt;<i>    &gt; and eclipse.
</I>&gt;&gt;<i>    &gt;
</I>&gt;&gt;<i>    &gt; OpenOCD - 0.3.0 svn build: 2741
</I>&gt;&gt;<i>    &gt; Eclipse 3.4.1
</I>&gt;&gt;<i>    &gt; GDB 6.8
</I>&gt;&gt;<i>    &gt; system Gentoo
</I>&gt;&gt;<i>    &gt;
</I>&gt;&gt;<i>    &gt; Jiri Kubias
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    The Amontec JTAGkey-2 is the new generation of Amontec JTAGkey Dongle
</I>&gt;&gt;<i>    Family.
</I>&gt;&gt;<i>    The main new features are : High-Speed / Hi-Speed USB 2.0
</I>&gt;&gt;<i>    compliant / 30
</I>&gt;&gt;<i>    MHz JTAG / RTCK support / auto-sense1.2V to 5.5V JTAG IOs voltage / 32
</I>&gt;&gt;<i>    mA output drivers for all JTAG IOs / TVS protections on all IOs /
</I>&gt;&gt;<i>    Amontec JTAG hot-plug certified / USB plug-and-play/ 4 onboard
</I>&gt;&gt;<i>    LEDs for
</I>&gt;&gt;<i>    easy first-uses /
</I>&gt;&gt;<i>    http//www.amontec.com &lt;<A HREF="http://www.amontec.com">http://www.amontec.com</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    The Amontec JTAGkey-2 is supporting RTCK (return clock for
</I>&gt;&gt;<i>    adaptive TCK
</I>&gt;&gt;<i>    Frequency controlled by your Target itself ).
</I>&gt;&gt;<i>    RTCK feature makes the debug much more stable since the Target
</I>&gt;&gt;<i>    frequency
</I>&gt;&gt;<i>    could change at any time using a ARM -s processor.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    RTCK is a very nice feature allowing the Amontec JTAGkey-2 to be
</I>&gt;&gt;<i>    synchronized depending on the Target frequency (your LPC23xx). For the
</I>&gt;&gt;<i>    ARM processors, the RTCK is implemented for any -s version.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    Now, you should enable the rtck signal in your OpenOCD configuration
</I>&gt;&gt;<i>    file and try again.
</I>&gt;&gt;<i>    ...
</I>&gt;&gt;<i>    jtag_rtck
</I>&gt;&gt;<i>    ...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    Let us know your result enabling RTCK.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    If it is not better, try to add more delay for TRST and SRST ...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    Regards,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    Laurent Gauch
</I>&gt;&gt;<i>    <A HREF="http://www.amontec.com">http://www.amontec.com</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    Note : please use last FTD2XX drivers.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    _______________________________________________
</I>&gt;&gt;<i>    Openocd-development mailing list
</I>&gt;&gt;<i>    <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A>
</I>&gt;&gt;<i>    &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A>&gt;
</I>&gt;&gt;<i>    <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">https://lists.berlios.de/mailman/listinfo/openocd-development</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> ===================================================
</I>&gt;&gt;<i> Bc. Jiri Kubias
</I>&gt;&gt;<i> Czech Technical University in Prague
</I>&gt;&gt;<i> Faculty of Electrical Engineering
</I>&gt;&gt;<i> dept. of Control Engineering
</I>&gt;&gt;<i> Karlovo namesti 13/E, 121 35 Prague
</I>&gt;&gt;<i> Czech Republic
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> web page: <A HREF="http://dce.felk.cvut.cz">http://dce.felk.cvut.cz</A>
</I>&gt;&gt;<i> e-mail: <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">jiri.kubias at gmail.com</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">jiri.kubias at gmail.com</A>&gt;
</I>&gt;&gt;<i> mobile: 777 974167
</I>&gt;&gt;<i> ===================================================
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
===================================================
Bc. Jiri Kubias
Czech Technical University in Prague
Faculty of Electrical Engineering
dept. of Control Engineering
Karlovo namesti 13/E, 121 35 Prague
Czech Republic

web page: <A HREF="http://dce.felk.cvut.cz">http://dce.felk.cvut.cz</A>
e-mail: <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">jiri.kubias at gmail.com</A>
mobile: 777 974167
===================================================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20090921/f4cce0e7/attachment.html">https://lists.berlios.de/pipermail/openocd-development/attachments/20090921/f4cce0e7/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010634.html">[Openocd-development] openocd 0.3.0 + GDB + ECLIPSE not working
</A></li>
	<LI>Next message: <A HREF="010633.html">[Openocd-development] Please welcome David Brownell as a maintainer!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10706">[ date ]</a>
              <a href="thread.html#10706">[ thread ]</a>
              <a href="subject.html#10706">[ subject ]</a>
              <a href="author.html#10706">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

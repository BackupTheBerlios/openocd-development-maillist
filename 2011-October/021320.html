<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Change in openocd[master]: jlink	libusb1	driver with libusb1 common driver interface.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-October/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Change%20in%20openocd%5Bmaster%5D%3A%20jlink%0A%09libusb1%09driver%20with%20libusb1%20common%20driver%20interface.&In-Reply-To=%3C20111021134948.31190.qmail%40stuge.se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021311.html">
   <LINK REL="Next"  HREF="021245.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Change in openocd[master]: jlink	libusb1	driver with libusb1 common driver interface.</H1>
    <B>Peter Stuge</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Change%20in%20openocd%5Bmaster%5D%3A%20jlink%0A%09libusb1%09driver%20with%20libusb1%20common%20driver%20interface.&In-Reply-To=%3C20111021134948.31190.qmail%40stuge.se%3E"
       TITLE="[Openocd-development] Change in openocd[master]: jlink	libusb1	driver with libusb1 common driver interface.">peter at stuge.se
       </A><BR>
    <I>Fri Oct 21 15:49:48 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="021311.html">[Openocd-development] Change in openocd[master]: jlink libusb1 driver with libusb1 common driver interface.
</A></li>
        <LI>Next message: <A HREF="021245.html">[Openocd-development] unsubscribe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21320">[ date ]</a>
              <a href="thread.html#21320">[ thread ]</a>
              <a href="subject.html#21320">[ subject ]</a>
              <a href="author.html#21320">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mauro Gamba wrote:
&gt;<i> I think to proceed in this way:
</I>&gt;<i> 
</I>&gt;<i> - Add to the configuration step the possibility to choose which usb
</I>&gt;<i>   library to use.
</I>
Use pkg-config to check for all libraries that can work, and use
with the first one that is found. Check for libusb-1.0 first. You
will need to study more autoconf than you needed before. You can of
course also ask on the list if you are uncertain about something.


&gt;<i> - Create an abstraction layer to the usb library with all the
</I>&gt;<i>   necessary functions for the drivers.
</I>
Yes and no. &quot;all the neccessary functions&quot; should not be created at
once. Start with an abstraction layer that works for one driver but
still allows upward compatibility with the other drivers. This may be
more difficult than you think. You will have to analyze each driver
more in depth, and I guess it will take a bit of time.

The above two items shall be in the first commit. Please do not wait
for the complete driver analysis before you make the commit, please
start with creating an abstraction layer that is sufficient for only
one driver, push that to Gerrit, and see what the feedback is. This
is OK to do even if you want to do more work on the commit, but it is
important to get review feedback early, so that you do not have to do
double work.

Of course, remember to pay close attention to simple details like
checking all possible errors and code style.


&gt;<i> - Modify the drivers to use the abstraction layer instead directly
</I>&gt;<i>   the library.
</I>&gt;<i> 
</I>&gt;<i> Do you think it's reasonable?
</I>
Yes, but it is more work and more complicated, so it is even more
important than before to only start small and then gather feedback.


Thanks again for working on this! I'm really looking forward to your
commits!


//Peter

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021311.html">[Openocd-development] Change in openocd[master]: jlink libusb1 driver with libusb1 common driver interface.
</A></li>
	<LI>Next message: <A HREF="021245.html">[Openocd-development] unsubscribe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21320">[ date ]</a>
              <a href="thread.html#21320">[ thread ]</a>
              <a href="subject.html#21320">[ subject ]</a>
              <a href="author.html#21320">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

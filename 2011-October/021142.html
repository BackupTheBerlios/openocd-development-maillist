<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] What's up? Why so slow?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-October/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20What%27s%20up%3F%20Why%20so%20slow%3F&In-Reply-To=%3CCAKGHftdQ%2Bg9xdCc-U%2BzJx7aqPbGPX95pfgU22BX-EX%3Dy8Lt8ew%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021141.html">
   <LINK REL="Next"  HREF="021137.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] What's up? Why so slow?</H1>
    <B>Andreas Fritiofson</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20What%27s%20up%3F%20Why%20so%20slow%3F&In-Reply-To=%3CCAKGHftdQ%2Bg9xdCc-U%2BzJx7aqPbGPX95pfgU22BX-EX%3Dy8Lt8ew%40mail.gmail.com%3E"
       TITLE="[Openocd-development] What's up? Why so slow?">andreas.fritiofson at gmail.com
       </A><BR>
    <I>Sun Oct  9 23:13:23 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="021141.html">[Openocd-development] What's up? Why so slow?
</A></li>
        <LI>Next message: <A HREF="021137.html">[Openocd-development] Clock setup script for STM32F107
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21142">[ date ]</a>
              <a href="thread.html#21142">[ thread ]</a>
              <a href="subject.html#21142">[ subject ]</a>
              <a href="author.html#21142">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Oct 9, 2011 at 10:43 PM, Peter Stuge &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">peter at stuge.se</A>&gt; wrote:

&gt;<i> &#216;yvind Harboe wrote:
</I>&gt;<i> &gt; On Sun, Oct 9, 2011 at 3:40 AM, Peter Stuge &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">peter at stuge.se</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Transfer rate: 3 KB/sec, 13848 bytes/write.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; USB roundtrips?
</I>&gt;<i>
</I>&gt;<i> I&#836;'ll have a look with usbmon soon.
</I>&gt;<i>
</I>
U+0618 LATIN CAPITAL LETTER I WITH DIRT ON TOP? I tried to scrape it off my
monitor, dammit... :)

It sounds like the LM3S flash algorithm could use a rewrite like the one I
merged for STM32F10x yesterday. Flash speed went up from 9KB/s to 29 KB/s.
I don't know why &quot;before&quot;-speed was so low when I tested yesterday, I
normally got around 14 KB/s. Maybe the bus/computer was extra heavily
loaded. I've never seen it as far down as your figures though. Almost as if
the LM3S driver lacks block write completely.

Examining the timestamps in the full debug log is a good complement to
usbmon when debugging performance problems, btw.


&gt;<i> Akos Vandra wrote:
</I>&gt;<i> &gt; (At least) in SWD mode with an FTDI programmer openocd is sending
</I>&gt;<i> &gt; data bit by bit. I am planning to send in a patch to fix that, but
</I>&gt;<i> &gt; I am currently unable to test it, because I am waiting for my
</I>&gt;<i> &gt; SWD-capable programmer.
</I>&gt;<i>
</I>&gt;<i> LM3S knows JTAG and SWD. ICDI is FT2232 based and knows JTAG and SWD,
</I>&gt;<i> and it's what the late David Brownell was doing his SWD work on, but
</I>&gt;<i> my setup is using JTAG.
</I>

I'm pretty sure that mainline ft2232 uses byte writes whenever possible.
Akos: Is SWD even remotely up and running in mainline or are you using a
fork?

/Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20111009/bcbf0059/attachment.html">https://lists.berlios.de/pipermail/openocd-development/attachments/20111009/bcbf0059/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021141.html">[Openocd-development] What's up? Why so slow?
</A></li>
	<LI>Next message: <A HREF="021137.html">[Openocd-development] Clock setup script for STM32F107
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21142">[ date ]</a>
              <a href="thread.html#21142">[ thread ]</a>
              <a href="subject.html#21142">[ subject ]</a>
              <a href="author.html#21142">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

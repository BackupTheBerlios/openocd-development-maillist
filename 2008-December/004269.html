<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] freebsd &amp; openocd - [was: SVN COMMIT -	config with ftd2xx &amp;libftdi]
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-December/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20freebsd%20%26%20openocd%20-%20%5Bwas%3A%20SVN%20COMMIT%20-%0A%09config%20with%20ftd2xx%20%26libftdi%5D&In-Reply-To=%3C539c60b90812300952l20d08c03sc5630cb778f5fb4a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004266.html">
   <LINK REL="Next"  HREF="004270.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] freebsd &amp; openocd - [was: SVN COMMIT -	config with ftd2xx &amp;libftdi]</H1>
    <B>Steve Franks</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20freebsd%20%26%20openocd%20-%20%5Bwas%3A%20SVN%20COMMIT%20-%0A%09config%20with%20ftd2xx%20%26libftdi%5D&In-Reply-To=%3C539c60b90812300952l20d08c03sc5630cb778f5fb4a%40mail.gmail.com%3E"
       TITLE="[Openocd-development] freebsd &amp; openocd - [was: SVN COMMIT -	config with ftd2xx &amp;libftdi]">stevefranks at ieee.org
       </A><BR>
    <I>Tue Dec 30 18:52:47 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004266.html">[Openocd-development] freebsd &amp; openocd - [was: SVN COMMIT - config	with ftd2xx &amp;libftdi]
</A></li>
        <LI>Next message: <A HREF="004270.html">[Openocd-development] freebsd &amp; openocd - [was: SVN COMMIT -	config with ftd2xx &amp;libftdi]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4269">[ date ]</a>
              <a href="thread.html#4269">[ thread ]</a>
              <a href="subject.html#4269">[ subject ]</a>
              <a href="author.html#4269">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Dec 29, 2008 at 5:30 PM, Duane Ellis &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">openocd at duaneellis.com</A>&gt; wrote:
&gt;<i> Steve Franks wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I wonder how many other bumps we will find :-(
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --- Duane.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> steve&gt;  I just want to &quot;port&quot; OOCD into the 'standard' freebsd  port build
</I>&gt;<i> system.  steve&gt; I want no special toys, ftd2xx or whatever.  steve&gt; I'd like
</I>&gt;<i> minimal support for all dongles .... [urjtag porter did
</I>&gt;<i> Please - look at the *NEW* version of the user manual.
</I>&gt;<i> I just added some things to Section 2 (not on line yet)
</I>&gt;<i>
</I>&gt;<i> ===========
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> To be useful: You must have LIBFTDI support, which uses &quot;libusb&quot; -without it
</I>&gt;<i> I would not even bother.
</I>&gt;<i> LIBFTDI builds some number of test apps - try them - they need to work some
</I>&gt;<i> how.
</I>&gt;<i>
</I>&gt;<i> Again - I can't say it enough. Without &quot;libftdi + libusb&quot; - do not even
</I>&gt;<i> start.
</I>&gt;<i>
</I>&gt;<i>   <A HREF="http://www.freshports.org/devel/libusb/">http://www.freshports.org/devel/libusb/</A>
</I>&gt;<i> and:
</I>&gt;<i>   <A HREF="http://www.freshports.org/devel/libftdi">http://www.freshports.org/devel/libftdi</A>
</I>&gt;<i>
</I>&gt;<i> Seems to exist.. and should work..
</I>&gt;<i>
</I>&gt;<i> The Issue #1 i see is this:
</I>&gt;<i>
</I>&gt;<i>   <A HREF="http://www.freebsd.org/cgi/query-pr.cgi?pr=ports/129636">http://www.freebsd.org/cgi/query-pr.cgi?pr=ports/129636</A>
</I>&gt;<i>
</I>&gt;<i> Get clarity on which version of &quot;libftdi&quot; - current version is 0.14.
</I>&gt;<i> Solve that problem first. DO NOT go backwards from 0.14.
</I>&gt;<i>
</I>&gt;<i> =======================
</I>&gt;<i>
</I>&gt;&gt;&gt;<i>  If I should be just mangling the CFLAGS,
</I>&gt;<i>
</I>&gt;<i> You mention: &quot;CFLAGS&quot;
</I>&gt;<i>
</I>&gt;<i> Why?  Does GCC not by default look in: '/usr/local/include' by default?
</I>&gt;<i> And does &quot;LD&quot; not look in /usr/local/lib ...
</I>&gt;<i>
</I>&gt;<i> If so - then it is a non-issue.
</I>&gt;<i>
</I>&gt;<i> Then plain:
</I>&gt;<i>   ./configure --enable-&lt;a-fewthings-see-below&gt;
</I>&gt;<i>
</I>&gt;<i> The key to this is to look at the contents of &quot;config.log&quot; - when it fails.
</I>&gt;<i> It is a treasure trove of useful information. Start from the end and of the
</I>&gt;<i> file and work backwards.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ==========================
</I>&gt;<i>
</I>&gt;<i> I would suggest these options:
</I>&gt;<i>   ./configure \
</I>&gt;<i>       --enable-dummy \
</I>&gt;<i>
</I>&gt;<i> PRINTER PORTS
</I>&gt;<i>
</I>&gt;<i>       --enable-parport  --enable-parport-giveio \
</I>&gt;<i>      --enable-gw16012 --enable-parport-giveio --enable-amtjtagaccel
</I>&gt;<i>
</I>&gt;<i> LIBFTDI + LIBUSB - give these:
</I>&gt;<i>   --enable-ft2232_libftdi --enable-presto_libftdi
</I>&gt;<i> LIBUSB - add these:
</I>&gt;<i>   --enable-jlink  --enable-usbprog --enable-rlink  --enable-vsllink
</I>&gt;<i> --enable-usbprog
</I>&gt;<i>
</I>&gt;<i> ==========================
</I>&gt;<i> *END*
</I>&gt;<i> ==========================
</I>&gt;<i>
</I>&gt;<i> -Duane.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
Here's the nutshell.  I've gotten it to build fine on my system (yes,
we do have libusb and libftdi).  The big thing is that I had to go
hack the makefiles manually after configure to add a
-I/usr/local/include to the build steps, and -L/usr/local/lib to the
linker in order to find libftdi.  Obviously the people who commit
FreeBSD build scripts to the official distribution are not going to
stand for that, but I don't know how to fix it without manually
buggering up the makefiles after configure has run.  Getting OOCD to
build on my system is the first time I've ever been aware of the
existence and usage of configure, so admittedly, I have no clue what
I'm doing ;)

The funny thing (that I completely forgot until now), is that I've
also been trying to bring urjtag to FreeBSD, and whatever magic their
configure script goes thru, it finds libftdi automatically!  OOCD is
the only thing I've had to tweak the makefiles for, again, no idea why
as I'm new to configure.  I download both urjtag and OOCD from their
respective SVN's, then bootstrap/configure/gmake them.  I think urjtag
has an 'autogen.sh' script as well, perhaps that is where the magic
happens.

Best,
Steve

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004266.html">[Openocd-development] freebsd &amp; openocd - [was: SVN COMMIT - config	with ftd2xx &amp;libftdi]
</A></li>
	<LI>Next message: <A HREF="004270.html">[Openocd-development] freebsd &amp; openocd - [was: SVN COMMIT -	config with ftd2xx &amp;libftdi]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4269">[ date ]</a>
              <a href="thread.html#4269">[ thread ]</a>
              <a href="subject.html#4269">[ subject ]</a>
              <a href="author.html#4269">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

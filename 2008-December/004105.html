<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Beagleboard, reproducing recent status
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-December/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Beagleboard%2C%20reproducing%20recent%20status&In-Reply-To=%3CC46EF491-BAE5-44C1-9666-BF8C7C37227B%40kc8apf.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004101.html">
   <LINK REL="Next"  HREF="004107.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Beagleboard, reproducing recent status</H1>
    <B>Rick Altherr</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Beagleboard%2C%20reproducing%20recent%20status&In-Reply-To=%3CC46EF491-BAE5-44C1-9666-BF8C7C37227B%40kc8apf.net%3E"
       TITLE="[Openocd-development] Beagleboard, reproducing recent status">kc8apf at kc8apf.net
       </A><BR>
    <I>Wed Dec 17 18:02:26 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004101.html">[Openocd-development] Beagleboard, reproducing recent status
</A></li>
        <LI>Next message: <A HREF="004107.html">[Openocd-development] Beagleboard, reproducing recent status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4105">[ date ]</a>
              <a href="thread.html#4105">[ thread ]</a>
              <a href="subject.html#4105">[ subject ]</a>
              <a href="author.html#4105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I haven't tried getting OpenOCD to validate the JTAG chain.  The  
config file seems appropriate, but the error messages indicate a JTAG  
problem.  The EMU0 and EMU1 jumpers shouldn't matter as the default  
configuration is the JRC is the only enabled tap.  I'm trying to find  
some time to work on this, but at the moment, I don't know of any  
successful attempts to have OpenOCD validate the BeagleBoard JTAG  
chain with a Flyswatter.

Rick


On Dec 17, 2008, at 8:39 AM, Dirk Behme wrote:

&gt;<i>
</I>&gt;<i> I'd like to reproduce recent OpenOCD status with Beagleboard (and  
</I>&gt;<i> then maybe help/test?):
</I>&gt;<i>
</I>&gt;<i> I use OpenOCD svn version 1245 from yesterday with openocd.cfg and  
</I>&gt;<i> beagleboard.cfg in attachment (mainly from [1]). I use libFTDI and  
</I>&gt;<i> Flyswatter with TinCanTools Beagleboard adapter kit. BeagleBoard  
</I>&gt;<i> runs at U-Boot prompt (serial console via Flyswatter), then I do
</I>&gt;<i>
</I>&gt;<i> -- cut --
</I>&gt;<i> &gt; openocd -s lib/openocd/
</I>&gt;<i> Open On-Chip Debugger 1.0 (2008-12-16-07:54) svn:1245
</I>&gt;<i>
</I>&gt;<i> BUGS? Read <A HREF="http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS">http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS</A>
</I>&gt;<i>
</I>&gt;<i> $URL: <A HREF="svn://svn.berlios.de/openocd/trunk/src/openocd.c">svn://svn.berlios.de/openocd/trunk/src/openocd.c</A> $
</I>&gt;<i> jtag_speed: 1
</I>&gt;<i> Error:  JTAG communication failure, check connection, JTAG  
</I>&gt;<i> interface, target power etc.
</I>&gt;<i> Error:  trying to validate configured JTAG chain anyway...
</I>&gt;<i> Error:  Error validating JTAG scan chain, IR mismatch, scan returned  
</I>&gt;<i> 0xff
</I>&gt;<i> Error:  Could not validate JTAG chain, continuing anyway...
</I>&gt;<i> Warning:no gdb ports allocated as no target has been specified
</I>&gt;<i> Warning:no tcl port specified, using default port 6666
</I>&gt;<i> -- cut --
</I>&gt;<i>
</I>&gt;<i> At TinCanTools's JTAG adapter which is connected to the JTAG  
</I>&gt;<i> connector of BeagleBoard, jumper EMU0 and EMU1 are at 2-3 location,  
</I>&gt;<i> JP3 is open.
</I>&gt;<i>
</I>&gt;<i> Is this what you get, too?
</I>&gt;<i>
</I>&gt;<i> Best regards
</I>&gt;<i>
</I>&gt;<i> Dirk
</I>&gt;<i>
</I>&gt;<i> [1] <A HREF="https://lists.berlios.de/pipermail/openocd-development/2008-December/003838.html">https://lists.berlios.de/pipermail/openocd-development/2008-December/003838.html</A>
</I>&gt;<i> #
</I>&gt;<i> # Beagle Board is an ultra-low cost, high performance,
</I>&gt;<i> # low power OMAP3 based platform designed by BeagleBoard.org
</I>&gt;<i> # community members and sold by Digi-Key.
</I>&gt;<i> #
</I>&gt;<i> # The OpenOCD BeagleBoard support in under development and not  
</I>&gt;<i> functional
</I>&gt;<i> # yet
</I>&gt;<i>
</I>&gt;<i> #By default the BeagleBoard name as used in the rest of the  
</I>&gt;<i> configuration
</I>&gt;<i> #if BeagleBoard unless specified otherwise
</I>&gt;<i> if { [info exists CHIPNAME] } {
</I>&gt;<i>   set  _CHIPNAME $CHIPNAME
</I>&gt;<i> } else {
</I>&gt;<i>   set  _CHIPNAME beagleboard
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> #BeagleBoard scan chain.
</I>&gt;<i> #
</I>&gt;<i> # JRC or JTAG Router Controler is the piece hardware that can  
</I>&gt;<i> dynamically
</I>&gt;<i> # add or remove Test access points to a JTAG scan chain.
</I>&gt;<i> #
</I>&gt;<i> # Texas Instruments calls this feature ICEPick. ICEPick can be seen as
</I>&gt;<i> # Controller with can not only enable and disable parts of the scan  
</I>&gt;<i> chain
</I>&gt;<i> # but apparently also other things (like reading the emu status  
</I>&gt;<i> bits?).
</I>&gt;<i> #
</I>&gt;<i> #             JTAG
</I>&gt;<i> #
</I>&gt;<i> #    TDO |            | TDI
</I>&gt;<i> #        |            |
</I>&gt;<i> #   -----|------------|---------------
</I>&gt;<i> #  |     |            |                |
</I>&gt;<i> #  |     |         (Bypass)-IcePickTAP |
</I>&gt;<i> #  |     |            |                |
</I>&gt;<i> #  |  (Bypass)-----(Bypass)            |
</I>&gt;<i> #   ----------------------------------
</I>&gt;<i> #        |           |
</I>&gt;<i> #        |           |
</I>&gt;<i> #    CoreSight      DSP
</I>&gt;<i> #
</I>&gt;<i> #The first item is the IcePick TAP itself is has a known tap id.
</I>&gt;<i> #The IcePick can control up to 16 TAPs.
</I>&gt;<i> #The Second item in the scan chain on the beagleboard the dap  
</I>&gt;<i> providing direct
</I>&gt;<i> #access to memory, the cortex8, the etm and the etb. This item is  
</I>&gt;<i> not enabled
</I>&gt;<i> #By default and is attached to the third TAP on the IcePick. This is  
</I>&gt;<i> not visible
</I>&gt;<i> #here but needs to be known in order to send the right enable/ 
</I>&gt;<i> disable command
</I>&gt;<i> #to the IcePick controller
</I>&gt;<i> jtag newtap $_CHIPNAME jrc -irlen 6 -ircapture 0x1 -irmask 0x0 - 
</I>&gt;<i> expected-id 0x0b7ae02f
</I>&gt;<i> jtag newtap $_CHIPNAME dap -irlen 4 -ircapture 0x1 -irmask 0x0
</I>&gt;<i> #Basic configuration
</I>&gt;<i> telnet_port 4444
</I>&gt;<i> gdb_port 3333
</I>&gt;<i>
</I>&gt;<i> #Interface
</I>&gt;<i> source [find interface/flyswatter.cfg]
</I>&gt;<i>
</I>&gt;<i> #jtag scan chain
</I>&gt;<i> set CHIPNAME beagleboard
</I>&gt;<i> source [find board/beagleboard.cfg]
</I>&gt;<i>
</I>&gt;<i> #disable the dap before we enable it
</I>&gt;<i> jtag tapdisable beagleboard.dap
</I>&gt;<i>
</I>&gt;<i> proc enable_dap { } {
</I>&gt;<i>                puts &quot;Enabling DAP&quot;
</I>&gt;<i>                irscan 0 7
</I>&gt;<i>                drscan 0 8 0X89
</I>&gt;<i>                #irscan 0 2
</I>&gt;<i>                #fails..
</I>&gt;<i>                #drscan 0 32 0x81000080
</I>&gt;<i>                #drscan 0 32 0xa3002048
</I>&gt;<i>                #drscan 0 32 0x81002148
</I>&gt;<i>                #drscan 0 32 0xa3002148
</I>&gt;<i>                #sleep 10
</I>&gt;<i>                #jtag tapenable beagleboard.dap
</I>&gt;<i>                puts &quot;Enabled DAP&quot;
</I>&gt;<i> }
</I>&gt;<i> reset_config trst_and_srst
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Openocd-development mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">https://lists.berlios.de/mailman/listinfo/openocd-development</A>
</I>
--
Rick Altherr
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">kc8apf at kc8apf.net</A>

&quot;He said he hadn't had a byte in three days. I had a short, so I split  
it with him.&quot;
  -- Unsigned



-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2446 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20081217/ac8174c2/attachment.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20081217/ac8174c2/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004101.html">[Openocd-development] Beagleboard, reproducing recent status
</A></li>
	<LI>Next message: <A HREF="004107.html">[Openocd-development] Beagleboard, reproducing recent status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4105">[ date ]</a>
              <a href="thread.html#4105">[ thread ]</a>
              <a href="subject.html#4105">[ subject ]</a>
              <a href="author.html#4105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

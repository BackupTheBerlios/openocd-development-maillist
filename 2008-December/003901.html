<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] svn needs to be shuffled around a bit
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-December/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20svn%20needs%20to%20be%20shuffled%20around%20a%20bit&In-Reply-To=%3C696F4840-D787-4155-91D8-7E571684A688%40kc8apf.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003895.html">
   <LINK REL="Next"  HREF="003902.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] svn needs to be shuffled around a bit</H1>
    <B>Rick Altherr</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20svn%20needs%20to%20be%20shuffled%20around%20a%20bit&In-Reply-To=%3C696F4840-D787-4155-91D8-7E571684A688%40kc8apf.net%3E"
       TITLE="[Openocd-development] svn needs to be shuffled around a bit">kc8apf at kc8apf.net
       </A><BR>
    <I>Wed Dec  3 22:03:14 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003895.html">[Openocd-development] svn needs to be shuffled around a bit
</A></li>
        <LI>Next message: <A HREF="003902.html">[Openocd-development] svn needs to be shuffled around a bit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3901">[ date ]</a>
              <a href="thread.html#3901">[ thread ]</a>
              <a href="subject.html#3901">[ subject ]</a>
              <a href="author.html#3901">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Dec 3, 2008, at 12:38 PM, &#216;yvind Harboe wrote:

&gt;<i> On Wed, Dec 3, 2008 at 9:28 PM, Rick Altherr &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">kc8apf at kc8apf.net</A>&gt;  
</I>&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Dec 3, 2008, at 12:17 PM, &#216;yvind Harboe wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Either it should be part of the main OpenOCD source base or it  
</I>&gt;&gt;&gt;&gt;<i> should be
</I>&gt;&gt;&gt;&gt;<i> separate project.  If it is just a flash, interface, and target  
</I>&gt;&gt;&gt;&gt;<i> driver,
</I>&gt;&gt;&gt;&gt;<i> then
</I>&gt;&gt;&gt;&gt;<i> it should just be part of the mainline source base.  If it is  
</I>&gt;&gt;&gt;&gt;<i> more than
</I>&gt;&gt;&gt;&gt;<i> that, it isn't really part of OpenOCD.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It *is* part of the main openocd source base. This is just a  
</I>&gt;&gt;&gt;<i> technicality
</I>&gt;&gt;&gt;<i> w.r.t.
</I>&gt;&gt;&gt;<i> avoiding excessive download sizes for those that don't need those  
</I>&gt;&gt;&gt;<i> bits.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It looks like it contains the build environment for the zy1000  
</I>&gt;&gt;<i> firmware
</I>&gt;&gt;<i> which _uses_ OpenOCD but isn't part of OpenOCD.
</I>&gt;<i>
</I>&gt;<i> The whole point of a version control system is to be able to go
</I>&gt;<i> back and *build* some older version.
</I>&gt;<i>
</I>
Correct, and anyone can go build OpenOCD 1.0 once it is tagged without  
the contents of the zy1000 directory.

&gt;<i> The zy1000 directory contains the prerequisites to build the binary.
</I>
To build the zy1000 firmware, not OpenOCD.

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> embedded is different from building for developer operating systems.
</I>&gt;<i>
</I>
Yup, but zy1000 is not OpenOCD.  It is a separate project.

&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> It is also an embedded version of openocd, so it is built very  
</I>&gt;&gt;&gt;<i> differently
</I>&gt;&gt;&gt;<i> from openocd hosted on a developer OS.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Exactly, it isn't part of OpenOCD, but rather a user of OpenOCD.   
</I>&gt;&gt;<i> Just
</I>&gt;&gt;<i> because OpenOCD does a release doesn't mean that the zy1000 build
</I>&gt;&gt;<i> environment needs to be changed.  For example, OpenOCD might  
</I>&gt;&gt;<i> release 1.0.1
</I>&gt;&gt;<i> that contains a big bug that makes the zy1000 non-functional.  It is
</I>&gt;&gt;<i> completely reasonable in that case for the zy1000 build scripts to  
</I>&gt;&gt;<i> use
</I>&gt;&gt;<i> OpenOCD 1.0 instead with no real impact.
</I>&gt;<i>
</I>&gt;<i> Note that the zy1000 directory also contains *code* for openocd, not  
</I>&gt;<i> only the
</I>&gt;<i> build scripts. All of that code, combined, is GPL and there is no  
</I>&gt;<i> way to
</I>&gt;<i> mix and match versions of tools and other code that goes into the  
</I>&gt;<i> final mix.
</I>&gt;<i>
</I>
If the zy1000 build scripts patch OpenOCD, that's fine, but it doesn't  
mean that the zy1000 scripts must be tied to OpenOCD releases or that  
the zy1000 firmware is part of the OpenOCD project.  If anything this  
is more evidence that the zy1000 is a separate project that extends  
OpenOCD and should be treated as a separate project.

&gt;<i> It is not necessary to complicate the life of most developers out  
</I>&gt;<i> there with
</I>&gt;<i> the nasty bits that goes into building an embedded product and a  
</I>&gt;<i> separate
</I>&gt;<i> folder solves this.
</I>&gt;<i>
</I>
Exactly, we shouldn't complicate the state of affairs for the majority  
of developers.  So, the trunk should contain the OpenOCD release.   
That does not include the patches to build support for the zy1000.   
The build system and patches for the zy1000 should be maintained  
separately.


&gt;&gt;<i> The ZY1000 is a commercial product built on top of OpenOCD.  The  
</I>&gt;&gt;<i> scripts and
</I>&gt;&gt;<i> files necessary to build the ZY1000 firmware are not part of  
</I>&gt;&gt;<i> OpenOCD.  They
</I>&gt;&gt;<i> are part of the ZY1000 software.  OpenOCD is simply a component of  
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> ZY1000 software.
</I>&gt;<i>
</I>&gt;<i> What are you trying to say here?
</I>&gt;<i>
</I>
That OpenOCD and the ZY1000 are separate projects.  OpenOCD is a piece  
of software designed to run on a variety of OSes and utilize a variety  
of JTAG interfaces.  The ZY1000 is a device containing both hardware  
and software.  The software for the ZY1000 is a specific OS and a  
modified version of an OpenOCD release.

&gt;<i> OpenOCD is GPL and ZY1000 uses OpenOCD, so the resulting code is GPL.
</I>
OpenOCD is an application running on the OS packaged as part of the  
ZY1000.  Not all of the ZY1000 is required to be GPL nor does  
licensing have anything to do with whether the two projects should be  
treated as one.

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Where does &quot;commerical&quot; enter into it? GPL does not mean non- 
</I>&gt;<i> commerical.
</I>&gt;<i> In fact commercial and non-commerical is equal from GPL's point of  
</I>&gt;<i> view.
</I>&gt;<i>
</I>
That OpenOCD is free and the ZY1000 is not is simply another  
distinction that they are 2 separate projects with different goals and  
deliverables.

&gt;<i> What's the problem you're trying to address?
</I>&gt;<i>
</I>
Tying the two into a common directory structure means that when  
OpenOCD releases version 1.0, the ZY1000 firmware will also become  
version 1.0.  While the two might have release coincide frequently,  
this links all ZY1000 firmware versions to an corresponding OpenOCD  
version.  If a bug in a non-OpenOCD portion of the ZY1000 firmware was  
to be fixed but no changes were made in the OpenOCD portion, there is  
no reason to make a new OpenOCD version, yet the layout of the  
repository would cause a new version of OpenOCD to be tagged.

&gt;<i> What are you suggesting?
</I>
Treat OpenOCD and ZY1000 as separate projects.  Lay out the directory  
structure like:

openocd/
   trunk/
   tags/
   branches/
zy1000/
   trunk/
   tags/
   branches/

That way the zy1000 firmware can be versioned independently of  
OpenOCD.  The zy1000 scripts can check out a specific version of  
OpenOCD so the version locked changes can be handled gracefully when  
building the zy1000 firmware.  This way, OpenOCD can release version  
1.0.1 which breaks the zy1000 patches, but the zy1000 firmware can  
still build using the OpenOCD 1.0 release.

Tying a components versioning to that of a package it is delivered in  
only leads to headaches when making releases.  I speak from years of  
experience on this exact issue.

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> &#216;yvind Harboe
</I>&gt;<i> <A HREF="http://www.zylin.com/zy1000.html">http://www.zylin.com/zy1000.html</A>
</I>&gt;<i> ARM7 ARM9 XScale Cortex
</I>&gt;<i> JTAG debugger and flash programmer
</I>
--
Rick Altherr
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">kc8apf at kc8apf.net</A>

&quot;He said he hadn't had a byte in three days. I had a short, so I split  
it with him.&quot;
  -- Unsigned



-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2446 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20081203/708ee294/attachment.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20081203/708ee294/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003895.html">[Openocd-development] svn needs to be shuffled around a bit
</A></li>
	<LI>Next message: <A HREF="003902.html">[Openocd-development] svn needs to be shuffled around a bit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3901">[ date ]</a>
              <a href="thread.html#3901">[ thread ]</a>
              <a href="subject.html#3901">[ subject ]</a>
              <a href="author.html#3901">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

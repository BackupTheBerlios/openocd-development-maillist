<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development]  Retire out_mask in JTAG API
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%20Retire%20out_mask%20in%20JTAG%20API&In-Reply-To=%3C4A014510.4020107%40amontec.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006117.html">
   <LINK REL="Next"  HREF="006121.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development]  Retire out_mask in JTAG API</H1>
    <B>Laurent Gauch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%20Retire%20out_mask%20in%20JTAG%20API&In-Reply-To=%3C4A014510.4020107%40amontec.com%3E"
       TITLE="[Openocd-development]  Retire out_mask in JTAG API">laurent.gauch at amontec.com
       </A><BR>
    <I>Wed May  6 10:06:40 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006117.html">[Openocd-development] JTAG API cleanup
</A></li>
        <LI>Next message: <A HREF="006121.html">[Openocd-development] Retire out_mask in JTAG API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6118">[ date ]</a>
              <a href="thread.html#6118">[ thread ]</a>
              <a href="subject.html#6118">[ subject ]</a>
              <a href="author.html#6118">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Do not submit this patch.
Do not modify / retire any parameter from JTAG API scan functions.

Yes, field.out_mask is not used for ARM Debug, but could be very important for pure boundary scan test !

Please do not touch the JTAG API at all !

Regards,
Laurent Gauch
  <A HREF="http://www.amontec.com">http://www.amontec.com</A>
  <A HREF="http://www.amontec.com/jtagkey.shtml">http://www.amontec.com/jtagkey.shtml</A>



&gt;<i> I'd like to retire out_mask, it isn't used anywhere.
</I>&gt;<i>
</I>&gt;<i> See attached patch.
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> &#216;yvind Harboe
</I>&gt;<i> Embedded software and hardware consulting services
</I>&gt;<i> <A HREF="http://consulting.zylin.com">http://consulting.zylin.com</A>
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> Index: C:/workspace/openocd/src/flash/str9xpec.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/flash/str9xpec.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/flash/str9xpec.c	(working copy)
</I>&gt;<i> @@ -125,7 +125,7 @@
</I>&gt;<i>  		field.num_bits = tap-&gt;ir_length;
</I>&gt;<i>  		field.out_value = calloc(CEIL(field.num_bits, 8), 1);
</I>&gt;<i>  		buf_set_u32(field.out_value, 0, field.num_bits, new_instr);
</I>&gt;<i> -		field.out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		field.in_value = NULL;
</I>&gt;<i>  		field.in_check_value = NULL;
</I>&gt;<i>  		field.in_check_mask = NULL;
</I>&gt;<i> @@ -151,7 +151,7 @@
</I>&gt;<i>  	field.tap = tap;
</I>&gt;<i>  	field.num_bits = 8;
</I>&gt;<i>  	field.out_value = NULL;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = &status;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> @@ -243,7 +243,7 @@
</I>&gt;<i>  	field.tap = tap;
</I>&gt;<i>  	field.num_bits = 64;
</I>&gt;<i>  	field.out_value = NULL;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = str9xpec_info-&gt;options;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> @@ -395,7 +395,7 @@
</I>&gt;<i>  	field.tap = tap;
</I>&gt;<i>  	field.num_bits = 64;
</I>&gt;<i>  	field.out_value = buffer;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = NULL;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> @@ -409,7 +409,7 @@
</I>&gt;<i>  	field.tap = tap;
</I>&gt;<i>  	field.num_bits = 64;
</I>&gt;<i>  	field.out_value = NULL;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = buffer;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> @@ -511,7 +511,7 @@
</I>&gt;<i>  	field.tap = tap;
</I>&gt;<i>  	field.num_bits = 64;
</I>&gt;<i>  	field.out_value = buffer;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = NULL;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> @@ -577,7 +577,7 @@
</I>&gt;<i>  		field.tap = tap;
</I>&gt;<i>  		field.num_bits = 8;
</I>&gt;<i>  		field.out_value = NULL;
</I>&gt;<i> -		field.out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		field.in_value = &status;
</I>&gt;<i>  		field.in_check_value = NULL;
</I>&gt;<i>  		field.in_check_mask = NULL;
</I>&gt;<i> @@ -663,7 +663,7 @@
</I>&gt;<i>  	field.tap = tap;
</I>&gt;<i>  	field.num_bits = 8;
</I>&gt;<i>  	field.out_value = &sector;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = NULL;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> @@ -752,7 +752,7 @@
</I>&gt;<i>  			field.tap = tap;
</I>&gt;<i>  			field.num_bits = 64;
</I>&gt;<i>  			field.out_value = (buffer + bytes_written);
</I>&gt;<i> -			field.out_mask = NULL;
</I>&gt;<i> +			
</I>&gt;<i>  			field.in_value = NULL;
</I>&gt;<i>  			field.in_check_value = NULL;
</I>&gt;<i>  			field.in_check_mask = NULL;
</I>&gt;<i> @@ -770,7 +770,7 @@
</I>&gt;<i>  				field.tap = tap;
</I>&gt;<i>  				field.num_bits = 8;
</I>&gt;<i>  				field.out_value = NULL;
</I>&gt;<i> -				field.out_mask = NULL;
</I>&gt;<i> +				
</I>&gt;<i>  				field.in_value = scanbuf;
</I>&gt;<i>  				field.in_check_value = NULL;
</I>&gt;<i>  				field.in_check_mask = NULL;
</I>&gt;<i> @@ -812,7 +812,7 @@
</I>&gt;<i>  		field.tap = tap;
</I>&gt;<i>  		field.num_bits = 64;
</I>&gt;<i>  		field.out_value = last_dword;
</I>&gt;<i> -		field.out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		field.in_value = NULL;
</I>&gt;<i>  		field.in_check_value = NULL;
</I>&gt;<i>  		field.in_check_mask = NULL;
</I>&gt;<i> @@ -830,7 +830,7 @@
</I>&gt;<i>  			field.tap = tap;
</I>&gt;<i>  			field.num_bits = 8;
</I>&gt;<i>  			field.out_value = NULL;
</I>&gt;<i> -			field.out_mask = NULL;
</I>&gt;<i> +			
</I>&gt;<i>  			field.in_value = scanbuf;
</I>&gt;<i>  			field.in_check_value = NULL;
</I>&gt;<i>  			field.in_check_mask = NULL;
</I>&gt;<i> @@ -894,7 +894,7 @@
</I>&gt;<i>  	field.tap = tap;
</I>&gt;<i>  	field.num_bits = 32;
</I>&gt;<i>  	field.out_value = NULL;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = buffer;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> @@ -1019,7 +1019,7 @@
</I>&gt;<i>  	field.tap = tap;
</I>&gt;<i>  	field.num_bits = 64;
</I>&gt;<i>  	field.out_value = str9xpec_info-&gt;options;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = NULL;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> @@ -1037,7 +1037,7 @@
</I>&gt;<i>  		field.tap = tap;
</I>&gt;<i>  		field.num_bits = 8;
</I>&gt;<i>  		field.out_value = NULL;
</I>&gt;<i> -		field.out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		field.in_value = &status;
</I>&gt;<i>  		field.in_check_value = NULL;
</I>&gt;<i>  		field.in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/helper/tclapi.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/helper/tclapi.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/helper/tclapi.c	(working copy)
</I>&gt;<i> @@ -447,7 +447,6 @@
</I>&gt;<i>  		fields[field_count].num_bits = bits;
</I>&gt;<i>  		fields[field_count].out_value = malloc(CEIL(bits, 8));
</I>&gt;<i>  		str_to_buf(str, len, fields[field_count].out_value, bits, 0);
</I>&gt;<i> -		fields[field_count].out_mask = NULL;
</I>&gt;<i>  		fields[field_count].in_value = fields[field_count].out_value;
</I>&gt;<i>  		fields[field_count].in_check_mask = NULL;
</I>&gt;<i>  		fields[field_count].in_check_value = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/jtag/jtag.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/jtag/jtag.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/jtag/jtag.c	(working copy)
</I>&gt;<i> @@ -579,8 +579,7 @@
</I>&gt;<i>  			{
</I>&gt;<i>  				found = 1;
</I>&gt;<i>  				(*last_cmd)-&gt;cmd.scan-&gt;fields[nth_tap].out_value = buf_cpy(fields[j].out_value, cmd_queue_alloc(CEIL(scan_size, 8)), scan_size);
</I>&gt;<i> -				(*last_cmd)-&gt;cmd.scan-&gt;fields[nth_tap].out_mask = buf_cpy(fields[j].out_mask, cmd_queue_alloc(CEIL(scan_size, 8)), scan_size);
</I>&gt;<i> -
</I>&gt;<i> +				
</I>&gt;<i>  				if (jtag_verify_capture_ir)
</I>&gt;<i>  				{
</I>&gt;<i>  					if (fields[j].in_handler==NULL)
</I>&gt;<i> @@ -604,7 +603,6 @@
</I>&gt;<i>  		{
</I>&gt;<i>  			/* if a tap isn't listed, set it to BYPASS */
</I>&gt;<i>  			(*last_cmd)-&gt;cmd.scan-&gt;fields[nth_tap].out_value = buf_set_ones(cmd_queue_alloc(CEIL(scan_size, 8)), scan_size);
</I>&gt;<i> -			(*last_cmd)-&gt;cmd.scan-&gt;fields[nth_tap].out_mask = NULL;
</I>&gt;<i>  			tap-&gt;bypass = 1;
</I>&gt;<i>  		}
</I>&gt;<i>  
</I>&gt;<i> @@ -652,7 +650,6 @@
</I>&gt;<i>  		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].tap = fields[i].tap;
</I>&gt;<i>  		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].num_bits = num_bits;
</I>&gt;<i>  		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].out_value = buf_cpy(fields[i].out_value, cmd_queue_alloc(num_bytes), num_bits);
</I>&gt;<i> -		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].out_mask = buf_cpy(fields[i].out_mask, cmd_queue_alloc(num_bytes), num_bits);
</I>&gt;<i>  		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].in_value = fields[i].in_value;
</I>&gt;<i>  		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].in_check_value = fields[i].in_check_value;
</I>&gt;<i>  		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].in_check_mask = fields[i].in_check_mask;
</I>&gt;<i> @@ -729,7 +726,6 @@
</I>&gt;<i>  				scan_size = fields[j].num_bits;
</I>&gt;<i>  				(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].num_bits = scan_size;
</I>&gt;<i>  				(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].out_value = buf_cpy(fields[j].out_value, cmd_queue_alloc(CEIL(scan_size, 8)), scan_size);
</I>&gt;<i> -				(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].out_mask = buf_cpy(fields[j].out_mask, cmd_queue_alloc(CEIL(scan_size, 8)), scan_size);
</I>&gt;<i>  				(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].in_value = fields[j].in_value;
</I>&gt;<i>  				(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].in_check_value = fields[j].in_check_value;
</I>&gt;<i>  				(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].in_check_mask = fields[j].in_check_mask;
</I>&gt;<i> @@ -750,7 +746,6 @@
</I>&gt;<i>  			/* program the scan field to 1 bit length, and ignore it's value */
</I>&gt;<i>  			(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].num_bits = 1;
</I>&gt;<i>  			(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].out_value = NULL;
</I>&gt;<i> -			(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].out_mask = NULL;
</I>&gt;<i>  			(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].in_value = NULL;
</I>&gt;<i>  			(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].in_check_value = NULL;
</I>&gt;<i>  			(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].in_check_mask = NULL;
</I>&gt;<i> @@ -840,7 +835,6 @@
</I>&gt;<i>  				buf_set_u32(out_value, 0, scan_size, value[j]);
</I>&gt;<i>  				(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].num_bits = scan_size;
</I>&gt;<i>  				(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].out_value = buf_cpy(out_value, cmd_queue_alloc(CEIL(scan_size, 8)), scan_size);
</I>&gt;<i> -				(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].out_mask = NULL;
</I>&gt;<i>  				(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].in_value = NULL;
</I>&gt;<i>  				(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].in_check_value = NULL;
</I>&gt;<i>  				(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].in_check_mask = NULL;
</I>&gt;<i> @@ -860,7 +854,6 @@
</I>&gt;<i>  			/* program the scan field to 1 bit length, and ignore it's value */
</I>&gt;<i>  			(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].num_bits = 1;
</I>&gt;<i>  			(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].out_value = NULL;
</I>&gt;<i> -			(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].out_mask = NULL;
</I>&gt;<i>  			(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].in_value = NULL;
</I>&gt;<i>  			(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].in_check_value = NULL;
</I>&gt;<i>  			(*last_cmd)-&gt;cmd.scan-&gt;fields[field_count].in_check_mask = NULL;
</I>&gt;<i> @@ -906,7 +899,6 @@
</I>&gt;<i>  		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].tap = fields[i].tap;
</I>&gt;<i>  		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].num_bits = num_bits;
</I>&gt;<i>  		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].out_value = buf_cpy(fields[i].out_value, cmd_queue_alloc(num_bytes), num_bits);
</I>&gt;<i> -		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].out_mask = buf_cpy(fields[i].out_mask, cmd_queue_alloc(num_bytes), num_bits);
</I>&gt;<i>  		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].in_value = fields[i].in_value;
</I>&gt;<i>  		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].in_check_value = fields[i].in_check_value;
</I>&gt;<i>  		(*last_cmd)-&gt;cmd.scan-&gt;fields[i].in_check_mask = fields[i].in_check_mask;
</I>&gt;<i> @@ -1492,7 +1484,7 @@
</I>&gt;<i>  	field.tap = NULL;
</I>&gt;<i>  	field.num_bits = sizeof(idcode_buffer) * 8;
</I>&gt;<i>  	field.out_value = idcode_buffer;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = idcode_buffer;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> @@ -1670,7 +1662,7 @@
</I>&gt;<i>  	field.tap = NULL;
</I>&gt;<i>  	field.num_bits = total_ir_length;
</I>&gt;<i>  	field.out_value = ir_test;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = ir_test;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> @@ -2792,7 +2784,6 @@
</I>&gt;<i>  		fields[i].tap = tap;
</I>&gt;<i>  		fields[i].out_value = malloc(CEIL(field_size, 8));
</I>&gt;<i>  		buf_set_u32(fields[i].out_value, 0, field_size, strtoul(args[i*2+1], NULL, 0));
</I>&gt;<i> -		fields[i].out_mask = NULL;
</I>&gt;<i>  		fields[i].in_value = NULL;
</I>&gt;<i>  		fields[i].in_check_mask = NULL;
</I>&gt;<i>  		fields[i].in_handler = NULL;
</I>&gt;<i> @@ -2908,7 +2899,6 @@
</I>&gt;<i>  		fields[field_count].num_bits = bits;
</I>&gt;<i>  		fields[field_count].out_value = malloc(CEIL(bits, 8));
</I>&gt;<i>  		str_to_buf(str, len, fields[field_count].out_value, bits, 0);
</I>&gt;<i> -		fields[field_count].out_mask = NULL;
</I>&gt;<i>  		fields[field_count].in_value = fields[field_count].out_value;
</I>&gt;<i>  		fields[field_count].in_check_mask = NULL;
</I>&gt;<i>  		fields[field_count].in_check_value = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/jtag/jtag.h
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/jtag/jtag.h	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/jtag/jtag.h	(working copy)
</I>&gt;<i> @@ -271,7 +271,6 @@
</I>&gt;<i>  	jtag_tap_t* tap;                /* tap pointer this instruction refers to */
</I>&gt;<i>  	int         num_bits;           /* number of bits this field specifies (up to 32) */
</I>&gt;<i>  	u8*         out_value;          /* value to be scanned into the device */
</I>&gt;<i> -	u8*         out_mask;           /* only masked bits care */
</I>&gt;<i>  	u8*         in_value;           /* pointer to a 32-bit memory location to take data scanned out */
</I>&gt;<i>  	/* in_check_value/mask, in_handler_error_handler, in_handler_priv can be used by the in handler, otherwise they contain garbage  */
</I>&gt;<i>  	u8*          in_check_value;    /* used to validate scan results */
</I>&gt;<i> Index: C:/workspace/openocd/src/jtag/zy1000.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/jtag/zy1000.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/jtag/zy1000.c	(working copy)
</I>&gt;<i> @@ -650,7 +650,6 @@
</I>&gt;<i>  			/* program the scan field to 1 bit length, and ignore it's value */
</I>&gt;<i>  			tmp.num_bits = 1;
</I>&gt;<i>  			tmp.out_value = NULL;
</I>&gt;<i> -			tmp.out_mask = NULL;
</I>&gt;<i>  			tmp.in_value = NULL;
</I>&gt;<i>  			tmp.in_check_value = NULL;
</I>&gt;<i>  			tmp.in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/pld/virtex2.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/pld/virtex2.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/pld/virtex2.c	(working copy)
</I>&gt;<i> @@ -56,7 +56,7 @@
</I>&gt;<i>  		field.num_bits = tap-&gt;ir_length;
</I>&gt;<i>  		field.out_value = calloc(CEIL(field.num_bits, 8), 1);
</I>&gt;<i>  		buf_set_u32(field.out_value, 0, field.num_bits, new_instr);
</I>&gt;<i> -		field.out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		field.in_value = NULL;
</I>&gt;<i>  		field.in_check_value = NULL;
</I>&gt;<i>  		field.in_check_mask = NULL;
</I>&gt;<i> @@ -83,7 +83,6 @@
</I>&gt;<i>  	scan_field.tap = virtex2_info-&gt;tap;
</I>&gt;<i>  	scan_field.num_bits = num_words * 32;
</I>&gt;<i>  	scan_field.out_value = values;
</I>&gt;<i> -	scan_field.out_mask = NULL;
</I>&gt;<i>  	scan_field.in_value = NULL;
</I>&gt;<i>  	scan_field.in_check_value = NULL;
</I>&gt;<i>  	scan_field.in_check_mask = NULL;
</I>&gt;<i> @@ -117,7 +116,6 @@
</I>&gt;<i>  	scan_field.tap = virtex2_info-&gt;tap;
</I>&gt;<i>  	scan_field.num_bits = 32;
</I>&gt;<i>  	scan_field.out_value = NULL;
</I>&gt;<i> -	scan_field.out_mask = NULL;
</I>&gt;<i>  	scan_field.in_value = NULL;
</I>&gt;<i>  	scan_field.in_check_value = NULL;
</I>&gt;<i>  	scan_field.in_check_mask = NULL;
</I>&gt;<i> @@ -166,7 +164,7 @@
</I>&gt;<i>  	scan_field_t field;
</I>&gt;<i>  
</I>&gt;<i>  	field.tap = virtex2_info-&gt;tap;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = NULL;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/svf/svf.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/svf/svf.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/svf/svf.c	(working copy)
</I>&gt;<i> @@ -975,7 +975,7 @@
</I>&gt;<i>  			field.tap = tap;
</I>&gt;<i>  			field.num_bits = i;
</I>&gt;<i>  			field.out_value = &amp;svf_tdi_buffer[svf_buffer_index];
</I>&gt;<i> -			field.out_mask = NULL;
</I>&gt;<i> +			
</I>&gt;<i>  			field.in_value = &amp;svf_tdi_buffer[svf_buffer_index];
</I>&gt;<i>  			field.in_check_value = NULL;
</I>&gt;<i>  			field.in_check_mask = NULL;
</I>&gt;<i> @@ -1076,7 +1076,7 @@
</I>&gt;<i>  			field.tap = tap;
</I>&gt;<i>  			field.num_bits = i;
</I>&gt;<i>  			field.out_value = &amp;svf_tdi_buffer[svf_buffer_index];
</I>&gt;<i> -			field.out_mask = NULL;
</I>&gt;<i> +			
</I>&gt;<i>  			field.in_value = &amp;svf_tdi_buffer[svf_buffer_index];
</I>&gt;<i>  			field.in_check_value = NULL;
</I>&gt;<i>  			field.in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/arm11_dbgtap.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/arm11_dbgtap.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/arm11_dbgtap.c	(working copy)
</I>&gt;<i> @@ -87,7 +87,6 @@
</I>&gt;<i>  {
</I>&gt;<i>  	field-&gt;tap   			= arm11-&gt;jtag_info.tap;
</I>&gt;<i>  	field-&gt;num_bits			= num_bits;
</I>&gt;<i> -	field-&gt;out_mask			= NULL;
</I>&gt;<i>  	field-&gt;in_check_mask	= NULL;
</I>&gt;<i>  	field-&gt;in_check_value	= NULL;
</I>&gt;<i>  	field-&gt;in_handler		= NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/arm720t.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/arm720t.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/arm720t.c	(working copy)
</I>&gt;<i> @@ -112,7 +112,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 1;
</I>&gt;<i>  	fields[0].out_value = &amp;instruction_buf;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -122,7 +122,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	fields[1].out_value = out_buf;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	if (in)
</I>&gt;<i>  	{
</I>&gt;<i> Index: C:/workspace/openocd/src/target/arm7tdmi.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/arm7tdmi.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/arm7tdmi.c	(working copy)
</I>&gt;<i> @@ -111,7 +111,7 @@
</I>&gt;<i>  		fields[0].tap = arm7_9-&gt;jtag_info.tap;
</I>&gt;<i>  		fields[0].num_bits = 1;
</I>&gt;<i>  		fields[0].out_value = NULL;
</I>&gt;<i> -		fields[0].out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		fields[0].in_value = &breakpoint;
</I>&gt;<i>  		fields[0].in_check_value = NULL;
</I>&gt;<i>  		fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -121,7 +121,7 @@
</I>&gt;<i>  		fields[1].tap = arm7_9-&gt;jtag_info.tap;
</I>&gt;<i>  		fields[1].num_bits = 32;
</I>&gt;<i>  		fields[1].out_value = NULL;
</I>&gt;<i> -		fields[1].out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		fields[1].in_value = databus;
</I>&gt;<i>  		fields[1].in_check_value = NULL;
</I>&gt;<i>  		fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -198,7 +198,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 1;
</I>&gt;<i>  	fields[0].out_value = NULL;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -208,7 +208,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	fields[1].out_value = NULL;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_handler = arm_jtag_buf_to_u32_flip; /* deprecated! invoke this from user code! */
</I>&gt;<i>  	fields[1].in_handler_priv = in;
</I>&gt;<i> @@ -259,7 +259,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 1;
</I>&gt;<i>  	fields[0].out_value = NULL;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -269,7 +269,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	fields[1].out_value = NULL;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	switch (size)
</I>&gt;<i>  	{
</I>&gt;<i> Index: C:/workspace/openocd/src/target/arm920t.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/arm920t.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/arm920t.c	(working copy)
</I>&gt;<i> @@ -113,7 +113,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 1;
</I>&gt;<i>  	fields[0].out_value = &amp;access_type_buf;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -123,7 +123,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	fields[1].out_value = NULL;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -133,7 +133,7 @@
</I>&gt;<i>  	fields[2].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[2].num_bits = 6;
</I>&gt;<i>  	fields[2].out_value = &amp;reg_addr_buf;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -143,7 +143,7 @@
</I>&gt;<i>  	fields[3].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[3].num_bits = 1;
</I>&gt;<i>  	fields[3].out_value = &amp;nr_w_buf;
</I>&gt;<i> -	fields[3].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[3].in_value = NULL;
</I>&gt;<i>  	fields[3].in_check_value = NULL;
</I>&gt;<i>  	fields[3].in_check_mask = NULL;
</I>&gt;<i> @@ -185,7 +185,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 1;
</I>&gt;<i>  	fields[0].out_value = &amp;access_type_buf;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -195,7 +195,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	fields[1].out_value = value_buf;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -205,7 +205,7 @@
</I>&gt;<i>  	fields[2].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[2].num_bits = 6;
</I>&gt;<i>  	fields[2].out_value = &amp;reg_addr_buf;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -215,7 +215,7 @@
</I>&gt;<i>  	fields[3].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[3].num_bits = 1;
</I>&gt;<i>  	fields[3].out_value = &amp;nr_w_buf;
</I>&gt;<i> -	fields[3].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[3].in_value = NULL;
</I>&gt;<i>  	fields[3].in_check_value = NULL;
</I>&gt;<i>  	fields[3].in_check_mask = NULL;
</I>&gt;<i> @@ -252,7 +252,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 1;
</I>&gt;<i>  	fields[0].out_value = &amp;access_type_buf;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -262,7 +262,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	fields[1].out_value = cp15_opcode_buf;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -272,7 +272,7 @@
</I>&gt;<i>  	fields[2].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[2].num_bits = 6;
</I>&gt;<i>  	fields[2].out_value = &amp;reg_addr_buf;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -282,7 +282,7 @@
</I>&gt;<i>  	fields[3].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[3].num_bits = 1;
</I>&gt;<i>  	fields[3].out_value = &amp;nr_w_buf;
</I>&gt;<i> -	fields[3].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[3].in_value = NULL;
</I>&gt;<i>  	fields[3].in_check_value = NULL;
</I>&gt;<i>  	fields[3].in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/arm926ejs.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/arm926ejs.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/arm926ejs.c	(working copy)
</I>&gt;<i> @@ -137,7 +137,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = NULL;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -147,7 +147,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 1;
</I>&gt;<i>  	fields[1].out_value = &access;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = &access;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -157,7 +157,7 @@
</I>&gt;<i>  	fields[2].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[2].num_bits = 14;
</I>&gt;<i>  	fields[2].out_value = address_buf;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -167,7 +167,7 @@
</I>&gt;<i>  	fields[3].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[3].num_bits = 1;
</I>&gt;<i>  	fields[3].out_value = &amp;nr_w_buf;
</I>&gt;<i> -	fields[3].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[3].in_value = NULL;
</I>&gt;<i>  	fields[3].in_check_value = NULL;
</I>&gt;<i>  	fields[3].in_check_mask = NULL;
</I>&gt;<i> @@ -227,7 +227,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = value_buf;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -237,7 +237,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 1;
</I>&gt;<i>  	fields[1].out_value = &access;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = &access;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -247,7 +247,7 @@
</I>&gt;<i>  	fields[2].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[2].num_bits = 14;
</I>&gt;<i>  	fields[2].out_value = address_buf;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -257,7 +257,7 @@
</I>&gt;<i>  	fields[3].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[3].num_bits = 1;
</I>&gt;<i>  	fields[3].out_value = &amp;nr_w_buf;
</I>&gt;<i> -	fields[3].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[3].in_value = NULL;
</I>&gt;<i>  	fields[3].in_check_value = NULL;
</I>&gt;<i>  	fields[3].in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/arm966e.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/arm966e.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/arm966e.c	(working copy)
</I>&gt;<i> @@ -187,7 +187,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = NULL;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -197,7 +197,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 6;
</I>&gt;<i>  	fields[1].out_value = &amp;reg_addr_buf;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -207,7 +207,7 @@
</I>&gt;<i>  	fields[2].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = &amp;nr_w_buf;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -255,7 +255,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = value_buf;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -265,7 +265,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 6;
</I>&gt;<i>  	fields[1].out_value = &amp;reg_addr_buf;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -275,7 +275,7 @@
</I>&gt;<i>  	fields[2].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = &amp;nr_w_buf;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/arm9tdmi.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/arm9tdmi.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/arm9tdmi.c	(working copy)
</I>&gt;<i> @@ -128,7 +128,7 @@
</I>&gt;<i>  		fields[0].tap = arm7_9-&gt;jtag_info.tap;
</I>&gt;<i>  		fields[0].num_bits = 32;
</I>&gt;<i>  		fields[0].out_value = NULL;
</I>&gt;<i> -		fields[0].out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		fields[0].in_value = databus;
</I>&gt;<i>  		fields[0].in_check_value = NULL;
</I>&gt;<i>  		fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -138,7 +138,7 @@
</I>&gt;<i>  		fields[1].tap = arm7_9-&gt;jtag_info.tap;
</I>&gt;<i>  		fields[1].num_bits = 3;
</I>&gt;<i>  		fields[1].out_value = NULL;
</I>&gt;<i> -		fields[1].out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		fields[1].in_value = &amp;debug_reason;
</I>&gt;<i>  		fields[1].in_check_value = NULL;
</I>&gt;<i>  		fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -148,7 +148,7 @@
</I>&gt;<i>  		fields[2].tap = arm7_9-&gt;jtag_info.tap;
</I>&gt;<i>  		fields[2].num_bits = 32;
</I>&gt;<i>  		fields[2].out_value = NULL;
</I>&gt;<i> -		fields[2].out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		fields[2].in_value = instructionbus;
</I>&gt;<i>  		fields[2].in_check_value = NULL;
</I>&gt;<i>  		fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -216,7 +216,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = out_buf;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	if (in)
</I>&gt;<i>  	{
</I>&gt;<i> @@ -234,7 +234,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 3;
</I>&gt;<i>  	fields[1].out_value = &amp;sysspeed_buf;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -244,7 +244,7 @@
</I>&gt;<i>  	fields[2].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[2].num_bits = 32;
</I>&gt;<i>  	fields[2].out_value = instr_buf;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -291,7 +291,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = NULL;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_handler = arm_jtag_buf_to_u32; /* deprecated! invoke this from user code! */
</I>&gt;<i>  	fields[0].in_handler_priv = in;
</I>&gt;<i> @@ -301,7 +301,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 3;
</I>&gt;<i>  	fields[1].out_value = NULL;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_handler = NULL;
</I>&gt;<i>  	fields[1].in_handler_priv = NULL;
</I>&gt;<i> @@ -311,7 +311,7 @@
</I>&gt;<i>  	fields[2].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[2].num_bits = 32;
</I>&gt;<i>  	fields[2].out_value = NULL;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -363,7 +363,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = NULL;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	switch (size)
</I>&gt;<i>  	{
</I>&gt;<i> @@ -384,7 +384,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 3;
</I>&gt;<i>  	fields[1].out_value = NULL;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_handler = NULL;
</I>&gt;<i>  	fields[1].in_handler_priv = NULL;
</I>&gt;<i> @@ -394,7 +394,7 @@
</I>&gt;<i>  	fields[2].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[2].num_bits = 32;
</I>&gt;<i>  	fields[2].out_value = NULL;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/arm_adi_v5.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/arm_adi_v5.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/arm_adi_v5.c	(working copy)
</I>&gt;<i> @@ -76,7 +76,7 @@
</I>&gt;<i>  	fields[0].num_bits = 3;
</I>&gt;<i>  	buf_set_u32(&amp;out_addr_buf, 0, 3, ((reg_addr &gt;&gt; 1) &amp; 0x6) | (RnW &amp; 0x1));
</I>&gt;<i>  	fields[0].out_value = &amp;out_addr_buf;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = ack;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -86,7 +86,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	fields[1].out_value = outvalue;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = invalue;
</I>&gt;<i>  	fields[1].in_handler = NULL;
</I>&gt;<i>  	fields[1].in_handler_priv = NULL;
</I>&gt;<i> @@ -112,7 +112,7 @@
</I>&gt;<i>  	fields[0].num_bits = 3;
</I>&gt;<i>  	buf_set_u32(&amp;out_addr_buf, 0, 3, ((reg_addr &gt;&gt; 1) &amp; 0x6) | (RnW &amp; 0x1));
</I>&gt;<i>  	fields[0].out_value = &amp;out_addr_buf;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = ack;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -123,7 +123,7 @@
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	buf_set_u32(out_value_buf, 0, 32, outvalue);
</I>&gt;<i>  	fields[1].out_value = out_value_buf;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	if (invalue)
</I>&gt;<i>  	{
</I>&gt;<i> Index: C:/workspace/openocd/src/target/arm_jtag.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/arm_jtag.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/arm_jtag.c	(working copy)
</I>&gt;<i> @@ -52,7 +52,7 @@
</I>&gt;<i>  		field.num_bits = tap-&gt;ir_length;
</I>&gt;<i>  		field.out_value = t;
</I>&gt;<i>  		buf_set_u32(field.out_value, 0, field.num_bits, new_instr);
</I>&gt;<i> -		field.out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		field.in_value = NULL;
</I>&gt;<i>  		field.in_check_value = NULL;
</I>&gt;<i>  		field.in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/avrt.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/avrt.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/avrt.c	(working copy)
</I>&gt;<i> @@ -232,7 +232,6 @@
</I>&gt;<i>  		field[0].tap = tap;
</I>&gt;<i>  		field[0].num_bits = tap-&gt;ir_length;
</I>&gt;<i>  		field[0].out_value = ir_out;
</I>&gt;<i> -		field[0].out_mask = NULL;
</I>&gt;<i>  		field[0].in_value = ir_in;
</I>&gt;<i>  		field[0].in_check_value = NULL;
</I>&gt;<i>  		field[0].in_check_mask = NULL;
</I>&gt;<i> @@ -258,7 +257,6 @@
</I>&gt;<i>  		field[0].tap = tap;
</I>&gt;<i>  		field[0].num_bits = dr_len;
</I>&gt;<i>  		field[0].out_value = dr_out;
</I>&gt;<i> -		field[0].out_mask = NULL;
</I>&gt;<i>  		field[0].in_value = dr_in;
</I>&gt;<i>  		field[0].in_check_value = NULL;
</I>&gt;<i>  		field[0].in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/embeddedice.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/embeddedice.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/embeddedice.c	(working copy)
</I>&gt;<i> @@ -251,7 +251,7 @@
</I>&gt;<i>  	fields[0].tap = ice_reg-&gt;jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = reg-&gt;value;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -262,7 +262,7 @@
</I>&gt;<i>  	fields[1].num_bits = 5;
</I>&gt;<i>  	fields[1].out_value = field1_out;
</I>&gt;<i>  	buf_set_u32(fields[1].out_value, 0, 5, reg_addr);
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -273,7 +273,7 @@
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = field2_out;
</I>&gt;<i>  	buf_set_u32(fields[2].out_value, 0, 1, 0);
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -313,7 +313,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = NULL;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -324,7 +324,7 @@
</I>&gt;<i>  	fields[1].num_bits = 5;
</I>&gt;<i>  	fields[1].out_value = field1_out;
</I>&gt;<i>  	buf_set_u32(fields[1].out_value, 0, 5, embeddedice_reg_arch_info[EICE_COMMS_DATA]);
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -335,7 +335,7 @@
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = field2_out;
</I>&gt;<i>  	buf_set_u32(fields[2].out_value, 0, 1, 0);
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -430,7 +430,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = field0_out;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -441,7 +441,7 @@
</I>&gt;<i>  	fields[1].num_bits = 5;
</I>&gt;<i>  	fields[1].out_value = field1_out;
</I>&gt;<i>  	buf_set_u32(fields[1].out_value, 0, 5, embeddedice_reg_arch_info[EICE_COMMS_DATA]);
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -452,7 +452,7 @@
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = field2_out;
</I>&gt;<i>  	buf_set_u32(fields[2].out_value, 0, 1, 1);
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -499,7 +499,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = NULL;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = field0_in;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -510,7 +510,7 @@
</I>&gt;<i>  	fields[1].num_bits = 5;
</I>&gt;<i>  	fields[1].out_value = field1_out;
</I>&gt;<i>  	buf_set_u32(fields[1].out_value, 0, 5, embeddedice_reg_arch_info[EICE_COMMS_CTRL]);
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -521,7 +521,7 @@
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = field2_out;
</I>&gt;<i>  	buf_set_u32(fields[2].out_value, 0, 1, 0);
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/etb.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/etb.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/etb.c	(working copy)
</I>&gt;<i> @@ -70,7 +70,7 @@
</I>&gt;<i>  		field.num_bits = tap-&gt;ir_length;
</I>&gt;<i>  		field.out_value = calloc(CEIL(field.num_bits, 8), 1);
</I>&gt;<i>  		buf_set_u32(field.out_value, 0, field.num_bits, new_instr);
</I>&gt;<i> -		field.out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		field.in_value = NULL;
</I>&gt;<i>  		field.in_check_value = NULL;
</I>&gt;<i>  		field.in_check_mask = NULL;
</I>&gt;<i> @@ -95,7 +95,7 @@
</I>&gt;<i>  		field.num_bits = 5;
</I>&gt;<i>  		field.out_value = calloc(CEIL(field.num_bits, 8), 1);
</I>&gt;<i>  		buf_set_u32(field.out_value, 0, field.num_bits, new_scan_chain);
</I>&gt;<i> -		field.out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		field.in_value = NULL;
</I>&gt;<i>  		field.in_check_value = NULL;
</I>&gt;<i>  		field.in_check_mask = NULL;
</I>&gt;<i> @@ -186,7 +186,7 @@
</I>&gt;<i>  	fields[0].tap = etb-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = NULL;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -197,7 +197,7 @@
</I>&gt;<i>  	fields[1].num_bits = 7;
</I>&gt;<i>  	fields[1].out_value = malloc(1);
</I>&gt;<i>  	buf_set_u32(fields[1].out_value, 0, 7, 4);
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -208,7 +208,7 @@
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = malloc(1);
</I>&gt;<i>  	buf_set_u32(fields[2].out_value, 0, 1, 0);
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -257,7 +257,7 @@
</I>&gt;<i>  	fields[0].tap = etb_reg-&gt;etb-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = reg-&gt;value;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -268,7 +268,7 @@
</I>&gt;<i>  	fields[1].num_bits = 7;
</I>&gt;<i>  	fields[1].out_value = malloc(1);
</I>&gt;<i>  	buf_set_u32(fields[1].out_value, 0, 7, reg_addr);
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -279,7 +279,7 @@
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = malloc(1);
</I>&gt;<i>  	buf_set_u32(fields[2].out_value, 0, 1, 0);
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -354,7 +354,7 @@
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = malloc(4);
</I>&gt;<i>  	buf_set_u32(fields[0].out_value, 0, 32, value);
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -365,7 +365,7 @@
</I>&gt;<i>  	fields[1].num_bits = 7;
</I>&gt;<i>  	fields[1].out_value = malloc(1);
</I>&gt;<i>  	buf_set_u32(fields[1].out_value, 0, 7, reg_addr);
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -376,7 +376,7 @@
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = malloc(1);
</I>&gt;<i>  	buf_set_u32(fields[2].out_value, 0, 1, 1);
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/etm.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/etm.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/etm.c	(working copy)
</I>&gt;<i> @@ -339,7 +339,7 @@
</I>&gt;<i>  	fields[0].tap = etm_reg-&gt;jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = reg-&gt;value;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -350,7 +350,7 @@
</I>&gt;<i>  	fields[1].num_bits = 7;
</I>&gt;<i>  	fields[1].out_value = malloc(1);
</I>&gt;<i>  	buf_set_u32(fields[1].out_value, 0, 7, reg_addr);
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -361,7 +361,7 @@
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = malloc(1);
</I>&gt;<i>  	buf_set_u32(fields[2].out_value, 0, 1, 0);
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> @@ -431,7 +431,7 @@
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = malloc(4);
</I>&gt;<i>  	buf_set_u32(fields[0].out_value, 0, 32, value);
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -442,7 +442,7 @@
</I>&gt;<i>  	fields[1].num_bits = 7;
</I>&gt;<i>  	fields[1].out_value = malloc(1);
</I>&gt;<i>  	buf_set_u32(fields[1].out_value, 0, 7, reg_addr);
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -453,7 +453,7 @@
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = malloc(1);
</I>&gt;<i>  	buf_set_u32(fields[2].out_value, 0, 1, 1);
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/feroceon.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/feroceon.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/feroceon.c	(working copy)
</I>&gt;<i> @@ -135,7 +135,7 @@
</I>&gt;<i>  	fields[0].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[0].num_bits = 32;
</I>&gt;<i>  	fields[0].out_value = out_buf;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_handler = NULL;
</I>&gt;<i>  	fields[0].in_handler_priv = NULL;
</I>&gt;<i> @@ -145,7 +145,7 @@
</I>&gt;<i>  	fields[1].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[1].num_bits = 3;
</I>&gt;<i>  	fields[1].out_value = &amp;sysspeed_buf;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -155,7 +155,7 @@
</I>&gt;<i>  	fields[2].tap = jtag_info-&gt;tap;
</I>&gt;<i>  	fields[2].num_bits = 32;
</I>&gt;<i>  	fields[2].out_value = instr_buf;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	fields[2].in_check_value = NULL;
</I>&gt;<i>  	fields[2].in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/mips_ejtag.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/mips_ejtag.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/mips_ejtag.c	(working copy)
</I>&gt;<i> @@ -49,7 +49,7 @@
</I>&gt;<i>  		field.num_bits = tap-&gt;ir_length;
</I>&gt;<i>  		field.out_value = t;
</I>&gt;<i>  		buf_set_u32(field.out_value, 0, field.num_bits, new_instr);
</I>&gt;<i> -		field.out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		field.in_value = NULL;
</I>&gt;<i>  		field.in_check_value = NULL;
</I>&gt;<i>  		field.in_check_mask = NULL;
</I>&gt;<i> @@ -72,7 +72,7 @@
</I>&gt;<i>  	field.tap = ejtag_info-&gt;tap;
</I>&gt;<i>  	field.num_bits = 32;
</I>&gt;<i>  	field.out_value = NULL;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = (void*)idcode;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> @@ -99,7 +99,7 @@
</I>&gt;<i>  	field.tap = ejtag_info-&gt;tap;
</I>&gt;<i>  	field.num_bits = 32;
</I>&gt;<i>  	field.out_value = NULL;
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = (void*)impcode;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> @@ -130,7 +130,7 @@
</I>&gt;<i>  	field.num_bits = 32;
</I>&gt;<i>  	field.out_value = t;
</I>&gt;<i>  	buf_set_u32(field.out_value, 0, field.num_bits, *data);
</I>&gt;<i> -	field.out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	field.in_value = (u8*)data;
</I>&gt;<i>  	field.in_check_value = NULL;
</I>&gt;<i>  	field.in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/target/xscale.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/target/xscale.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/target/xscale.c	(working copy)
</I>&gt;<i> @@ -225,7 +225,7 @@
</I>&gt;<i>  		field.num_bits = tap-&gt;ir_length;
</I>&gt;<i>  		field.out_value = calloc(CEIL(field.num_bits, 8), 1);
</I>&gt;<i>  		buf_set_u32(field.out_value, 0, field.num_bits, new_instr);
</I>&gt;<i> -		field.out_mask = NULL;
</I>&gt;<i> +		
</I>&gt;<i>  		field.in_value = NULL;
</I>&gt;<i>  		jtag_set_check_value(&amp;field, tap-&gt;expected, tap-&gt;expected_mask, NULL);
</I>&gt;<i>  
</I>&gt;<i> @@ -261,7 +261,7 @@
</I>&gt;<i>  	fields[0].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[0].num_bits = 3;
</I>&gt;<i>  	fields[0].out_value = &amp;field0;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	jtag_set_check_value(fields+0, &amp;field0_check_value, &amp;field0_check_mask, NULL);
</I>&gt;<i>  
</I>&gt;<i> @@ -268,7 +268,7 @@
</I>&gt;<i>  	fields[1].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	fields[1].out_value = NULL;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DCSR].value;
</I>&gt;<i>  	fields[1].in_handler = NULL;
</I>&gt;<i>  	fields[1].in_handler_priv = NULL;
</I>&gt;<i> @@ -278,7 +278,7 @@
</I>&gt;<i>  	fields[2].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = &amp;field2;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	jtag_set_check_value(fields+2, &amp;field2_check_value, &amp;field2_check_mask, NULL);
</I>&gt;<i>  
</I>&gt;<i> @@ -339,7 +339,7 @@
</I>&gt;<i>  	fields[0].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[0].num_bits = 3;
</I>&gt;<i>  	fields[0].out_value = NULL;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	jtag_set_check_value(fields+0, &amp;field0_check_value, &amp;field0_check_mask, NULL);
</I>&gt;<i>  
</I>&gt;<i> @@ -346,7 +346,7 @@
</I>&gt;<i>  	fields[1].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	fields[1].out_value = NULL;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_handler = NULL;
</I>&gt;<i>  	fields[1].in_handler_priv = NULL;
</I>&gt;<i> @@ -356,7 +356,7 @@
</I>&gt;<i>  	fields[2].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = NULL;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	jtag_set_check_value(fields+2, &amp;field2_check_value, &amp;field2_check_mask, NULL);
</I>&gt;<i>  
</I>&gt;<i> @@ -458,7 +458,7 @@
</I>&gt;<i>  	fields[0].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[0].num_bits = 3;
</I>&gt;<i>  	fields[0].out_value = NULL;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = &amp;field0_in;
</I>&gt;<i>  	jtag_set_check_value(fields+0, &amp;field0_check_value, &amp;field0_check_mask, NULL);
</I>&gt;<i>  
</I>&gt;<i> @@ -465,7 +465,7 @@
</I>&gt;<i>  	fields[1].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	fields[1].out_value = NULL;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = xscale-&gt;reg_cache-&gt;reg_list[XSCALE_TX].value;
</I>&gt;<i>  	fields[1].in_handler = NULL;
</I>&gt;<i>  	fields[1].in_handler_priv = NULL;
</I>&gt;<i> @@ -475,7 +475,7 @@
</I>&gt;<i>  	fields[2].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = NULL;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	jtag_set_check_value(fields+2, &amp;field2_check_value, &amp;field2_check_mask, NULL);
</I>&gt;<i>  
</I>&gt;<i> @@ -554,7 +554,7 @@
</I>&gt;<i>  	fields[0].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[0].num_bits = 3;
</I>&gt;<i>  	fields[0].out_value = &amp;field0_out;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = &amp;field0_in;
</I>&gt;<i>  	jtag_set_check_value(fields+0, &amp;field0_check_value, &amp;field0_check_mask, NULL);
</I>&gt;<i>  
</I>&gt;<i> @@ -561,7 +561,7 @@
</I>&gt;<i>  	fields[1].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	fields[1].out_value = xscale-&gt;reg_cache-&gt;reg_list[XSCALE_RX].value;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_handler = NULL;
</I>&gt;<i>  	fields[1].in_handler_priv = NULL;
</I>&gt;<i> @@ -571,7 +571,7 @@
</I>&gt;<i>  	fields[2].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = &amp;field2;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	jtag_set_check_value(fields+2, &amp;field2_check_value, &amp;field2_check_mask, NULL);
</I>&gt;<i>  
</I>&gt;<i> @@ -729,7 +729,7 @@
</I>&gt;<i>  	fields[0].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[0].num_bits = 3;
</I>&gt;<i>  	fields[0].out_value = &amp;field0;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	jtag_set_check_value(fields+0, &amp;field0_check_value, &amp;field0_check_mask, NULL);
</I>&gt;<i>  
</I>&gt;<i> @@ -736,7 +736,7 @@
</I>&gt;<i>  	fields[1].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[1].num_bits = 32;
</I>&gt;<i>  	fields[1].out_value = xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DCSR].value;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_handler = NULL;
</I>&gt;<i>  	fields[1].in_handler_priv = NULL;
</I>&gt;<i> @@ -746,7 +746,7 @@
</I>&gt;<i>  	fields[2].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[2].num_bits = 1;
</I>&gt;<i>  	fields[2].out_value = &amp;field2;
</I>&gt;<i> -	fields[2].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[2].in_value = NULL;
</I>&gt;<i>  	jtag_set_check_value(fields+2, &amp;field2_check_value, &amp;field2_check_mask, NULL);
</I>&gt;<i>  
</I>&gt;<i> @@ -805,7 +805,7 @@
</I>&gt;<i>  	fields[0].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[0].num_bits = 6;
</I>&gt;<i>  	fields[0].out_value = &cmd;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -815,7 +815,7 @@
</I>&gt;<i>  	fields[1].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[1].num_bits = 27;
</I>&gt;<i>  	fields[1].out_value = packet;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> @@ -863,7 +863,7 @@
</I>&gt;<i>  	fields[0].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[0].num_bits = 6;
</I>&gt;<i>  	fields[0].out_value = &cmd;
</I>&gt;<i> -	fields[0].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[0].in_value = NULL;
</I>&gt;<i>  	fields[0].in_check_value = NULL;
</I>&gt;<i>  	fields[0].in_check_mask = NULL;
</I>&gt;<i> @@ -873,7 +873,7 @@
</I>&gt;<i>  	fields[1].tap = xscale-&gt;jtag_info.tap;
</I>&gt;<i>  	fields[1].num_bits = 27;
</I>&gt;<i>  	fields[1].out_value = packet;
</I>&gt;<i> -	fields[1].out_mask = NULL;
</I>&gt;<i> +	
</I>&gt;<i>  	fields[1].in_value = NULL;
</I>&gt;<i>  	fields[1].in_check_value = NULL;
</I>&gt;<i>  	fields[1].in_check_mask = NULL;
</I>&gt;<i> Index: C:/workspace/openocd/src/xsvf/xsvf.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- C:/workspace/openocd/src/xsvf/xsvf.c	(revision 1607)
</I>&gt;<i> +++ C:/workspace/openocd/src/xsvf/xsvf.c	(working copy)
</I>&gt;<i> @@ -486,7 +486,7 @@
</I>&gt;<i>  					field.tap = tap;
</I>&gt;<i>  					field.num_bits = xsdrsize;
</I>&gt;<i>  					field.out_value = dr_out_buf;
</I>&gt;<i> -					field.out_mask = NULL;
</I>&gt;<i> +					
</I>&gt;<i>  					field.in_value = NULL;
</I>&gt;<i>  
</I>&gt;<i>  					jtag_set_check_value(&amp;field, dr_in_buf, dr_in_mask, NULL);
</I>&gt;<i> @@ -705,7 +705,7 @@
</I>&gt;<i>  					field.tap = tap;
</I>&gt;<i>  					field.num_bits = bitcount;
</I>&gt;<i>  					field.out_value = ir_buf;
</I>&gt;<i> -					field.out_mask = NULL;
</I>&gt;<i> +					
</I>&gt;<i>  					field.in_value = NULL;
</I>&gt;<i>  					field.in_check_value = NULL;
</I>&gt;<i>  					field.in_check_mask = NULL;
</I>&gt;<i> @@ -937,7 +937,7 @@
</I>&gt;<i>  					field.tap = tap;
</I>&gt;<i>  					field.num_bits = xsdrsize;
</I>&gt;<i>  					field.out_value = dr_out_buf;
</I>&gt;<i> -					field.out_mask = NULL;
</I>&gt;<i> +					
</I>&gt;<i>  					field.in_value = NULL;
</I>&gt;<i>  
</I>&gt;<i>  					if (attempt &gt; 0 &amp;&amp; verbose)
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006117.html">[Openocd-development] JTAG API cleanup
</A></li>
	<LI>Next message: <A HREF="006121.html">[Openocd-development] Retire out_mask in JTAG API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6118">[ date ]</a>
              <a href="thread.html#6118">[ thread ]</a>
              <a href="subject.html#6118">[ subject ]</a>
              <a href="author.html#6118">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

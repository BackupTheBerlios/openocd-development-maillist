<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] PIC32 openocd status
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20PIC32%20openocd%20status&In-Reply-To=%3Ca276da400905171937w20c3dcc8yfed773eb068d5bcc%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006709.html">
   <LINK REL="Next"  HREF="006670.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] PIC32 openocd status</H1>
    <B>Xiaofan Chen</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20PIC32%20openocd%20status&In-Reply-To=%3Ca276da400905171937w20c3dcc8yfed773eb068d5bcc%40mail.gmail.com%3E"
       TITLE="[Openocd-development] PIC32 openocd status">xiaofanc at gmail.com
       </A><BR>
    <I>Mon May 18 04:37:59 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006709.html">[Openocd-development] PIC32 openocd status
</A></li>
        <LI>Next message: <A HREF="006670.html">[Openocd-development] Command name combining with underscores
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6710">[ date ]</a>
              <a href="thread.html#6710">[ thread ]</a>
              <a href="subject.html#6710">[ subject ]</a>
              <a href="author.html#6710">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, May 18, 2009 at 10:06 AM, Strontium &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">strntydog at gmail.com</A>&gt; wrote:
&gt;&gt;<i>
</I>&gt;&gt;<i> This is wrong. ICSP is Microchip's proprietory protocol for
</I>&gt;&gt;<i> programming and debugging. The ICSP module is independent
</I>&gt;&gt;<i> from the EJTAG module in PIC32. You can read Chapter
</I>&gt;&gt;<i> 33 of the PIC32MX Family Manual for more information.
</I>&gt;<i>
</I>&gt;<i> I didn't make it up.
</I>&gt;<i>
</I>&gt;<i> I read it.
</I>&gt;<i>
</I>&gt;<i> PIC32MX Flash Programming Specification 61145D.pdf :
</I>
&gt;<i> Plus PIC32MX talks about debugging using EJTAG.
</I>&gt;<i> EJTAG is designed for debugging. However that same functionality can be used
</I>&gt;<i> to allow programming. PIC do not need to re-specify EJTAG, as that is
</I>&gt;<i> available from MIPS. I have found no suggestion that the PIC32 does not
</I>&gt;<i> implement a compliant EJTAG core, and as ICSP is just de-multiplexed into 4
</I>&gt;<i> wire jtag internally, there is no reason why EJTAG operations will not
</I>&gt;<i> operate as expected over ICSP.
</I>
PIC32MX supports EJTAG, no doubt about it. I am saying
the ICSP module is different from the EJTAG.
I am thinking that the ICSP programming and EJTAG
programming interface may indeed share the same protocol
internally as per the programming specification. But I am 100%
sure  that ICSP debugging is different from the EJTAG
debugging. And I am also 100% sure that existing Microchip
debuggers for PIC32 (ICD 2, ICD 3 and Real ICE) do not
speak EJTAg for debugging.

Example:
<A HREF="http://www.microchip.com/forums/tm.aspx?m=414877">http://www.microchip.com/forums/tm.aspx?m=414877</A>
You have to disable JTAG port if using MPLAB ICD 2/3
and Real ICE for debugging since they use ICSP debugging.
Microchip PIC32 starter kit and PIC32 USB satrter kit do use
JTAG for debugging. Real ICE also has the trace function with
an add-on.

&gt;<i> There are lots of MIPS chips that have an EJTAG core. An EJTAG
</I>&gt;<i> implementation in OpenOCD would be awesome. PIC32 is a nice
</I>&gt;<i> cheap platform to develop and test this with.
</I>
I agree with this one. As I mentioned before, it would be good for
OpenOCD to support EJTAG of PIC32MX. 3rd parties already offers
this possibility now (Ashling, Macraigor Systems, and maybe Green Hill).
And the two starter kits also offers JTAG debugging within MPLAB.
So it is definitely possible. Actually I think it is already partially
supported by Openocd according to Spen.
<A HREF="http://www.microchip.com/forums/tm.aspx?m=346142">http://www.microchip.com/forums/tm.aspx?m=346142</A>

Since ICSP debugging protocol is closed, it is very difficult to support
it. So the only choice for debugging is EJTAG.

-- 
Xiaofan <A HREF="http://mcuee.blogspot.com">http://mcuee.blogspot.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006709.html">[Openocd-development] PIC32 openocd status
</A></li>
	<LI>Next message: <A HREF="006670.html">[Openocd-development] Command name combining with underscores
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6710">[ date ]</a>
              <a href="thread.html#6710">[ thread ]</a>
              <a href="subject.html#6710">[ subject ]</a>
              <a href="author.html#6710">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

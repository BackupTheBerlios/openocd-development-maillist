<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] JTAG API cleanup
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20JTAG%20API%20cleanup&In-Reply-To=%3Cc09652430905060022o17abe356g9ab886c41a660a08%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006119.html">
   <LINK REL="Next"  HREF="006118.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] JTAG API cleanup</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20JTAG%20API%20cleanup&In-Reply-To=%3Cc09652430905060022o17abe356g9ab886c41a660a08%40mail.gmail.com%3E"
       TITLE="[Openocd-development] JTAG API cleanup">oyvind.harboe at zylin.com
       </A><BR>
    <I>Wed May  6 09:22:05 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006119.html">[Openocd-development] jim.c no longer compiles warning free	under Cygwin
</A></li>
        <LI>Next message: <A HREF="006118.html">[Openocd-development]  Retire out_mask in JTAG API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6117">[ date ]</a>
              <a href="thread.html#6117">[ thread ]</a>
              <a href="subject.html#6117">[ subject ]</a>
              <a href="author.html#6117">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Committed.

in_handler is deprecated.  Removing the remaining uses will take
some time, but the most significant benefit of not having to setting
all those deprecated fields to NULL can be had immediately.




-- 
&#216;yvind Harboe
Embedded software and hardware consulting services
<A HREF="http://consulting.zylin.com">http://consulting.zylin.com</A>
-------------- next part --------------
### Eclipse Workspace Patch 1.0
#P openocd
Index: src/target/arm720t.c
===================================================================
--- src/target/arm720t.c	(revision 1608)
+++ src/target/arm720t.c	(working copy)
@@ -114,10 +114,10 @@
 	fields[0].out_value = &amp;instruction_buf;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
@@ -131,10 +131,10 @@
 	} else
 	{
 		fields[1].in_handler = NULL;
-		fields[1].in_handler_priv = NULL;
+		
 	}
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 
 	jtag_add_dr_scan(2, fields, TAP_INVALID);
 
Index: src/pld/virtex2.c
===================================================================
--- src/pld/virtex2.c	(revision 1608)
+++ src/pld/virtex2.c	(working copy)
@@ -56,12 +56,12 @@
 		field.num_bits = tap-&gt;ir_length;
 		field.out_value = calloc(CEIL(field.num_bits, 8), 1);
 		buf_set_u32(field.out_value, 0, field.num_bits, new_instr);
-		
+
 		field.in_value = NULL;
-		field.in_check_value = NULL;
-		field.in_check_mask = NULL;
+
+
 		field.in_handler = NULL;
-		field.in_handler_priv = NULL;
+
 
 		jtag_add_ir_scan(1, &amp;field, TAP_IDLE);
 
@@ -84,10 +84,7 @@
 	scan_field.num_bits = num_words * 32;
 	scan_field.out_value = values;
 	scan_field.in_value = NULL;
-	scan_field.in_check_value = NULL;
-	scan_field.in_check_mask = NULL;
 	scan_field.in_handler = NULL;
-	scan_field.in_handler_priv = NULL;
 
 	for (i = 0; i &lt; num_words; i++)
 		buf_set_u32(values + 4 * i, 0, 32, flip_u32(*words++, 32));
@@ -117,8 +114,6 @@
 	scan_field.num_bits = 32;
 	scan_field.out_value = NULL;
 	scan_field.in_value = NULL;
-	scan_field.in_check_value = NULL;
-	scan_field.in_check_mask = NULL;
 	scan_field.in_handler = virtex2_jtag_buf_to_u32; /* deprecated! invoke this from user code! */
 
 	virtex2_set_instr(virtex2_info-&gt;tap, 0x4); /* CFG_OUT */
@@ -164,12 +159,12 @@
 	scan_field_t field;
 
 	field.tap = virtex2_info-&gt;tap;
-	
+
 	field.in_value = NULL;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+
+
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+
 
 	if ((retval = xilinx_read_bit_file(&amp;bit_file, filename)) != ERROR_OK)
 		return retval;
Index: src/target/arm_adi_v5.c
===================================================================
--- src/target/arm_adi_v5.c	(revision 1608)
+++ src/target/arm_adi_v5.c	(working copy)
@@ -78,10 +78,10 @@
 	fields[0].out_value = &amp;out_addr_buf;
 	
 	fields[0].in_value = ack;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
@@ -89,9 +89,9 @@
 	
 	fields[1].in_value = invalue;
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
+	
 
 	jtag_add_dr_scan(2, fields, TAP_INVALID);
 
@@ -114,10 +114,10 @@
 	fields[0].out_value = &amp;out_addr_buf;
 	
 	fields[0].in_value = ack;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
@@ -133,10 +133,10 @@
 	else
 	{
 		fields[1].in_handler = NULL;
-		fields[1].in_handler_priv = NULL;
+		
 	}
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 
 	jtag_add_dr_scan(2, fields, TAP_INVALID);
 
Index: src/target/xscale.c
===================================================================
--- src/target/xscale.c	(revision 1608)
+++ src/target/xscale.c	(working copy)
@@ -271,9 +271,9 @@
 	
 	fields[1].in_value = xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DCSR].value;
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
+	
 
 	fields[2].tap = xscale-&gt;jtag_info.tap;
 	fields[2].num_bits = 1;
@@ -349,9 +349,9 @@
 	
 	fields[1].in_value = NULL;
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
+	
 
 	fields[2].tap = xscale-&gt;jtag_info.tap;
 	fields[2].num_bits = 1;
@@ -468,9 +468,9 @@
 	
 	fields[1].in_value = xscale-&gt;reg_cache-&gt;reg_list[XSCALE_TX].value;
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
+	
 
 	fields[2].tap = xscale-&gt;jtag_info.tap;
 	fields[2].num_bits = 1;
@@ -564,9 +564,9 @@
 	
 	fields[1].in_value = NULL;
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
+	
 
 	fields[2].tap = xscale-&gt;jtag_info.tap;
 	fields[2].num_bits = 1;
@@ -739,9 +739,9 @@
 	
 	fields[1].in_value = NULL;
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
+	
 
 	fields[2].tap = xscale-&gt;jtag_info.tap;
 	fields[2].num_bits = 1;
@@ -807,20 +807,20 @@
 	fields[0].out_value = &cmd;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = xscale-&gt;jtag_info.tap;
 	fields[1].num_bits = 27;
 	fields[1].out_value = packet;
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(2, fields, TAP_INVALID);
 
@@ -865,20 +865,20 @@
 	fields[0].out_value = &cmd;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = xscale-&gt;jtag_info.tap;
 	fields[1].num_bits = 27;
 	fields[1].out_value = packet;
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(2, fields, TAP_INVALID);
 
Index: src/svf/svf.c
===================================================================
--- src/svf/svf.c	(revision 1608)
+++ src/svf/svf.c	(working copy)
@@ -977,10 +977,10 @@
 			field.out_value = &amp;svf_tdi_buffer[svf_buffer_index];
 			
 			field.in_value = &amp;svf_tdi_buffer[svf_buffer_index];
-			field.in_check_value = NULL;
-			field.in_check_mask = NULL;
+			
+			
 			field.in_handler = NULL;
-			field.in_handler_priv = NULL;
+			
 			jtag_add_plain_dr_scan(1, &amp;field, svf_para.dr_end_state);
 
 			svf_buffer_index += (i + 7) &gt;&gt; 3;
@@ -1078,10 +1078,10 @@
 			field.out_value = &amp;svf_tdi_buffer[svf_buffer_index];
 			
 			field.in_value = &amp;svf_tdi_buffer[svf_buffer_index];
-			field.in_check_value = NULL;
-			field.in_check_mask = NULL;
+			
+			
 			field.in_handler = NULL;
-			field.in_handler_priv = NULL;
+			
 			jtag_add_plain_ir_scan(1, &amp;field, svf_para.ir_end_state);
 
 			svf_buffer_index += (i + 7) &gt;&gt; 3;
Index: src/xsvf/xsvf.c
===================================================================
--- src/xsvf/xsvf.c	(revision 1608)
+++ src/xsvf/xsvf.c	(working copy)
@@ -707,10 +707,10 @@
 					field.out_value = ir_buf;
 					
 					field.in_value = NULL;
-					field.in_check_value = NULL;
-					field.in_check_mask = NULL;
+					
+					
 					field.in_handler = NULL;
-					field.in_handler_priv = NULL;
+					
 
 					if (tap == NULL)
 						jtag_add_plain_ir_scan(1, &amp;field, my_end_state);
Index: src/target/feroceon.c
===================================================================
--- src/target/feroceon.c	(revision 1608)
+++ src/target/feroceon.c	(working copy)
@@ -138,29 +138,29 @@
 	
 	fields[0].in_value = NULL;
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 3;
 	fields[1].out_value = &amp;sysspeed_buf;
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 32;
 	fields[2].out_value = instr_buf;
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
Index: src/target/embeddedice.c
===================================================================
--- src/target/embeddedice.c	(revision 1608)
+++ src/target/embeddedice.c	(working copy)
@@ -253,10 +253,10 @@
 	fields[0].out_value = reg-&gt;value;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = ice_reg-&gt;jtag_info-&gt;tap;
 	fields[1].num_bits = 5;
@@ -264,10 +264,10 @@
 	buf_set_u32(fields[1].out_value, 0, 5, reg_addr);
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = ice_reg-&gt;jtag_info-&gt;tap;
 	fields[2].num_bits = 1;
@@ -275,10 +275,10 @@
 	buf_set_u32(fields[2].out_value, 0, 1, 0);
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
@@ -315,10 +315,10 @@
 	fields[0].out_value = NULL;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 5;
@@ -326,10 +326,10 @@
 	buf_set_u32(fields[1].out_value, 0, 5, embeddedice_reg_arch_info[EICE_COMMS_DATA]);
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 1;
@@ -337,10 +337,10 @@
 	buf_set_u32(fields[2].out_value, 0, 1, 0);
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
@@ -432,10 +432,10 @@
 	fields[0].out_value = field0_out;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 5;
@@ -443,10 +443,10 @@
 	buf_set_u32(fields[1].out_value, 0, 5, embeddedice_reg_arch_info[EICE_COMMS_DATA]);
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 1;
@@ -454,10 +454,10 @@
 	buf_set_u32(fields[2].out_value, 0, 1, 1);
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	while (size &gt; 0)
 	{
@@ -501,10 +501,10 @@
 	fields[0].out_value = NULL;
 	
 	fields[0].in_value = field0_in;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 5;
@@ -512,10 +512,10 @@
 	buf_set_u32(fields[1].out_value, 0, 5, embeddedice_reg_arch_info[EICE_COMMS_CTRL]);
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 1;
@@ -523,10 +523,10 @@
 	buf_set_u32(fields[2].out_value, 0, 1, 0);
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 	gettimeofday(&amp;lap, NULL);
Index: src/target/arm926ejs.c
===================================================================
--- src/target/arm926ejs.c	(revision 1608)
+++ src/target/arm926ejs.c	(working copy)
@@ -139,40 +139,40 @@
 	fields[0].out_value = NULL;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 1;
 	fields[1].out_value = &access;
 	
 	fields[1].in_value = &access;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 14;
 	fields[2].out_value = address_buf;
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	fields[3].tap = jtag_info-&gt;tap;
 	fields[3].num_bits = 1;
 	fields[3].out_value = &amp;nr_w_buf;
 	
 	fields[3].in_value = NULL;
-	fields[3].in_check_value = NULL;
-	fields[3].in_check_mask = NULL;
+	
+	
 	fields[3].in_handler = NULL;
-	fields[3].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(4, fields, TAP_INVALID);
 
@@ -229,40 +229,40 @@
 	fields[0].out_value = value_buf;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 1;
 	fields[1].out_value = &access;
 	
 	fields[1].in_value = &access;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 14;
 	fields[2].out_value = address_buf;
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	fields[3].tap = jtag_info-&gt;tap;
 	fields[3].num_bits = 1;
 	fields[3].out_value = &amp;nr_w_buf;
 	
 	fields[3].in_value = NULL;
-	fields[3].in_check_value = NULL;
-	fields[3].in_check_mask = NULL;
+	
+	
 	fields[3].in_handler = NULL;
-	fields[3].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(4, fields, TAP_INVALID);
 	/*TODO: add timeout*/
Index: src/target/arm966e.c
===================================================================
--- src/target/arm966e.c	(revision 1608)
+++ src/target/arm966e.c	(working copy)
@@ -189,30 +189,30 @@
 	fields[0].out_value = NULL;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 6;
 	fields[1].out_value = &amp;reg_addr_buf;
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 1;
 	fields[2].out_value = &amp;nr_w_buf;
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
@@ -257,30 +257,30 @@
 	fields[0].out_value = value_buf;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 6;
 	fields[1].out_value = &amp;reg_addr_buf;
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 1;
 	fields[2].out_value = &amp;nr_w_buf;
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
Index: src/target/etm.c
===================================================================
--- src/target/etm.c	(revision 1608)
+++ src/target/etm.c	(working copy)
@@ -341,10 +341,10 @@
 	fields[0].out_value = reg-&gt;value;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = etm_reg-&gt;jtag_info-&gt;tap;
 	fields[1].num_bits = 7;
@@ -352,10 +352,10 @@
 	buf_set_u32(fields[1].out_value, 0, 7, reg_addr);
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = etm_reg-&gt;jtag_info-&gt;tap;
 	fields[2].num_bits = 1;
@@ -363,10 +363,10 @@
 	buf_set_u32(fields[2].out_value, 0, 1, 0);
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
@@ -433,10 +433,10 @@
 	buf_set_u32(fields[0].out_value, 0, 32, value);
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = etm_reg-&gt;jtag_info-&gt;tap;
 	fields[1].num_bits = 7;
@@ -444,10 +444,10 @@
 	buf_set_u32(fields[1].out_value, 0, 7, reg_addr);
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = etm_reg-&gt;jtag_info-&gt;tap;
 	fields[2].num_bits = 1;
@@ -455,10 +455,10 @@
 	buf_set_u32(fields[2].out_value, 0, 1, 1);
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
Index: src/target/mips_ejtag.c
===================================================================
--- src/target/mips_ejtag.c	(revision 1609)
+++ src/target/mips_ejtag.c	(working copy)
@@ -51,10 +51,10 @@
 		buf_set_u32(field.out_value, 0, field.num_bits, new_instr);
 
 		field.in_value = NULL;
-		field.in_check_value = NULL;
-		field.in_check_mask = NULL;
+		
+		
 		field.in_handler = NULL;
-		field.in_handler_priv = NULL;
+		
 		jtag_add_ir_scan(1, &amp;field, TAP_INVALID);
 	}
 
@@ -74,10 +74,10 @@
 	field.out_value = NULL;
 
 	field.in_value = (void*)idcode;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 	jtag_add_dr_scan(1, &amp;field, TAP_INVALID);
 
 	if (jtag_execute_queue() != ERROR_OK)
@@ -101,10 +101,10 @@
 	field.out_value = NULL;
 
 	field.in_value = (void*)impcode;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 	jtag_add_dr_scan(1, &amp;field, TAP_INVALID);
 
 	if (jtag_execute_queue() != ERROR_OK)
@@ -132,10 +132,10 @@
 	buf_set_u32(field.out_value, 0, field.num_bits, *data);
 
 	field.in_value = (u8*)data;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 	jtag_add_dr_scan(1, &amp;field, TAP_INVALID);
 
 	if ((retval = jtag_execute_queue()) != ERROR_OK)
Index: src/flash/str9xpec.c
===================================================================
--- src/flash/str9xpec.c	(revision 1608)
+++ src/flash/str9xpec.c	(working copy)
@@ -127,10 +127,10 @@
 		buf_set_u32(field.out_value, 0, field.num_bits, new_instr);
 		
 		field.in_value = NULL;
-		field.in_check_value = NULL;
-		field.in_check_mask = NULL;
+		
+		
 		field.in_handler = NULL;
-		field.in_handler_priv = NULL;
+		
 
 		jtag_add_ir_scan(1, &amp;field, end_state);
 
@@ -153,10 +153,10 @@
 	field.out_value = NULL;
 	
 	field.in_value = &status;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(1, &amp;field, TAP_IDLE);
 	jtag_execute_queue();
@@ -245,10 +245,10 @@
 	field.out_value = NULL;
 	
 	field.in_value = str9xpec_info-&gt;options;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(1, &amp;field, TAP_IDLE);
 	jtag_execute_queue();
@@ -397,10 +397,10 @@
 	field.out_value = buffer;
 	
 	field.in_value = NULL;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(1, &amp;field, TAP_IDLE);
 	jtag_add_sleep(40000);
@@ -411,10 +411,10 @@
 	field.out_value = NULL;
 	
 	field.in_value = buffer;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(1, &amp;field, TAP_IRPAUSE);
 	jtag_execute_queue();
@@ -513,10 +513,10 @@
 	field.out_value = buffer;
 	
 	field.in_value = NULL;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(1, &amp;field, TAP_IDLE);
 	jtag_execute_queue();
@@ -579,10 +579,10 @@
 		field.out_value = NULL;
 		
 		field.in_value = &status;
-		field.in_check_value = NULL;
-		field.in_check_mask = NULL;
+		
+		
 		field.in_handler = NULL;
-		field.in_handler_priv = NULL;
+		
 
 		jtag_add_dr_scan(1, &amp;field, -1);
 		jtag_execute_queue();
@@ -665,10 +665,10 @@
 	field.out_value = &sector;
 	
 	field.in_value = NULL;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(1, &amp;field, -1);
 
@@ -754,10 +754,10 @@
 			field.out_value = (buffer + bytes_written);
 			
 			field.in_value = NULL;
-			field.in_check_value = NULL;
-			field.in_check_mask = NULL;
+			
+			
 			field.in_handler = NULL;
-			field.in_handler_priv = NULL;
+			
 
 			jtag_add_dr_scan(1, &amp;field, TAP_IDLE);
 
@@ -772,10 +772,10 @@
 				field.out_value = NULL;
 				
 				field.in_value = scanbuf;
-				field.in_check_value = NULL;
-				field.in_check_mask = NULL;
+				
+				
 				field.in_handler = NULL;
-				field.in_handler_priv = NULL;
+				
 
 				jtag_add_dr_scan(1, &amp;field, -1);
 				jtag_execute_queue();
@@ -814,10 +814,10 @@
 		field.out_value = last_dword;
 		
 		field.in_value = NULL;
-		field.in_check_value = NULL;
-		field.in_check_mask = NULL;
+		
+		
 		field.in_handler = NULL;
-		field.in_handler_priv = NULL;
+		
 
 		jtag_add_dr_scan(1, &amp;field, TAP_IDLE);
 
@@ -832,10 +832,10 @@
 			field.out_value = NULL;
 			
 			field.in_value = scanbuf;
-			field.in_check_value = NULL;
-			field.in_check_mask = NULL;
+			
+			
 			field.in_handler = NULL;
-			field.in_handler_priv = NULL;
+			
 
 			jtag_add_dr_scan(1, &amp;field, -1);
 			jtag_execute_queue();
@@ -896,10 +896,10 @@
 	field.out_value = NULL;
 	
 	field.in_value = buffer;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(1, &amp;field, TAP_IDLE);
 	jtag_execute_queue();
@@ -1021,10 +1021,10 @@
 	field.out_value = str9xpec_info-&gt;options;
 	
 	field.in_value = NULL;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(1, &amp;field, TAP_IDLE);
 
@@ -1039,10 +1039,10 @@
 		field.out_value = NULL;
 		
 		field.in_value = &status;
-		field.in_check_value = NULL;
-		field.in_check_mask = NULL;
+		
+		
 		field.in_handler = NULL;
-		field.in_handler_priv = NULL;
+		
 
 		jtag_add_dr_scan(1, &amp;field, -1);
 		jtag_execute_queue();
Index: src/target/etb.c
===================================================================
--- src/target/etb.c	(revision 1608)
+++ src/target/etb.c	(working copy)
@@ -72,10 +72,10 @@
 		buf_set_u32(field.out_value, 0, field.num_bits, new_instr);
 		
 		field.in_value = NULL;
-		field.in_check_value = NULL;
-		field.in_check_mask = NULL;
+		
+		
 		field.in_handler = NULL;
-		field.in_handler_priv = NULL;
+		
 
 		jtag_add_ir_scan(1, &amp;field, TAP_INVALID);
 
@@ -97,10 +97,10 @@
 		buf_set_u32(field.out_value, 0, field.num_bits, new_scan_chain);
 		
 		field.in_value = NULL;
-		field.in_check_value = NULL;
-		field.in_check_mask = NULL;
+		
+		
 		field.in_handler = NULL;
-		field.in_handler_priv = NULL;
+		
 
 		/* select INTEST instruction */
 		etb_set_instr(etb, 0x2);
@@ -188,10 +188,10 @@
 	fields[0].out_value = NULL;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = etb-&gt;tap;
 	fields[1].num_bits = 7;
@@ -199,10 +199,10 @@
 	buf_set_u32(fields[1].out_value, 0, 7, 4);
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = etb-&gt;tap;
 	fields[2].num_bits = 1;
@@ -210,10 +210,10 @@
 	buf_set_u32(fields[2].out_value, 0, 1, 0);
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
@@ -259,10 +259,10 @@
 	fields[0].out_value = reg-&gt;value;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = etb_reg-&gt;etb-&gt;tap;
 	fields[1].num_bits = 7;
@@ -270,10 +270,10 @@
 	buf_set_u32(fields[1].out_value, 0, 7, reg_addr);
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = etb_reg-&gt;etb-&gt;tap;
 	fields[2].num_bits = 1;
@@ -281,10 +281,10 @@
 	buf_set_u32(fields[2].out_value, 0, 1, 0);
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
@@ -356,10 +356,10 @@
 	buf_set_u32(fields[0].out_value, 0, 32, value);
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = etb_reg-&gt;etb-&gt;tap;
 	fields[1].num_bits = 7;
@@ -367,10 +367,10 @@
 	buf_set_u32(fields[1].out_value, 0, 7, reg_addr);
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = etb_reg-&gt;etb-&gt;tap;
 	fields[2].num_bits = 1;
@@ -378,10 +378,10 @@
 	buf_set_u32(fields[2].out_value, 0, 1, 1);
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
Index: src/jtag/jtag.h
===================================================================
--- src/jtag/jtag.h	(revision 1609)
+++ src/jtag/jtag.h	(working copy)
@@ -275,8 +275,8 @@
 	/* in_check_value/mask, in_handler_error_handler, in_handler_priv can be used by the in handler, otherwise they contain garbage  */
 	u8*          in_check_value;    /* deprecated! only used from jtag_set_check_value. used to validate scan results */
 	u8*          in_check_mask;     /* deprecated! only used from jtag_set_check_value.  check specified bits against check_value */
-	in_handler_t in_handler;        /* deprecated! DO NOT USE! process received buffer using this handler */
-	void*        in_handler_priv;   /* additional information for the in_handler */
+	in_handler_t in_handler;        /* deprecated! SET TO NULL. DO NOT USE! process received buffer using this handler */
+	void*        in_handler_priv;   /* deprecated! only used by obsolete in_handler implementations */
 } scan_field_t;
 
 enum scan_type {
Index: src/target/arm9tdmi.c
===================================================================
--- src/target/arm9tdmi.c	(revision 1608)
+++ src/target/arm9tdmi.c	(working copy)
@@ -130,30 +130,30 @@
 		fields[0].out_value = NULL;
 		
 		fields[0].in_value = databus;
-		fields[0].in_check_value = NULL;
-		fields[0].in_check_mask = NULL;
+		
+		
 		fields[0].in_handler = NULL;
-		fields[0].in_handler_priv = NULL;
+		
 
 		fields[1].tap = arm7_9-&gt;jtag_info.tap;
 		fields[1].num_bits = 3;
 		fields[1].out_value = NULL;
 		
 		fields[1].in_value = &amp;debug_reason;
-		fields[1].in_check_value = NULL;
-		fields[1].in_check_mask = NULL;
+		
+		
 		fields[1].in_handler = NULL;
-		fields[1].in_handler_priv = NULL;
+		
 
 		fields[2].tap = arm7_9-&gt;jtag_info.tap;
 		fields[2].num_bits = 32;
 		fields[2].out_value = NULL;
 		
 		fields[2].in_value = instructionbus;
-		fields[2].in_check_value = NULL;
-		fields[2].in_check_mask = NULL;
+		
+		
 		fields[2].in_handler = NULL;
-		fields[2].in_handler_priv = NULL;
+		
 
 		if((retval = arm_jtag_scann(&amp;arm7_9-&gt;jtag_info, 0x1)) != ERROR_OK)
 		{
@@ -226,30 +226,30 @@
 	else
 	{
 		fields[0].in_handler = NULL;
-		fields[0].in_handler_priv = NULL;
+		
 	}
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 3;
 	fields[1].out_value = &amp;sysspeed_buf;
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 32;
 	fields[2].out_value = instr_buf;
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
@@ -295,8 +295,8 @@
 	fields[0].in_value = NULL;
 	fields[0].in_handler = arm_jtag_buf_to_u32; /* deprecated! invoke this from user code! */
 	fields[0].in_handler_priv = in;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 3;
@@ -304,19 +304,19 @@
 	
 	fields[1].in_value = NULL;
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 32;
 	fields[2].out_value = NULL;
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
@@ -378,8 +378,8 @@
 			break;
 	}
 	fields[0].in_handler_priv = in;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 3;
@@ -387,19 +387,19 @@
 	
 	fields[1].in_value = NULL;
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 32;
 	fields[2].out_value = NULL;
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(3, fields, TAP_INVALID);
 
Index: src/jtag/jtag.c
===================================================================
--- src/jtag/jtag.c	(revision 1608)
+++ src/jtag/jtag.c	(working copy)
@@ -1486,10 +1486,10 @@
 	field.out_value = idcode_buffer;
 	
 	field.in_value = idcode_buffer;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 
 	for (i = 0; i &lt; JTAG_MAX_CHAIN_SIZE; i++)
 	{
@@ -1664,10 +1664,10 @@
 	field.out_value = ir_test;
 	
 	field.in_value = ir_test;
-	field.in_check_value = NULL;
-	field.in_check_mask = NULL;
+	
+	
 	field.in_handler = NULL;
-	field.in_handler_priv = NULL;
+	
 
 	jtag_add_plain_ir_scan(1, &amp;field, TAP_RESET);
 	jtag_execute_queue();
Index: src/target/arm_jtag.c
===================================================================
--- src/target/arm_jtag.c	(revision 1608)
+++ src/target/arm_jtag.c	(working copy)
@@ -54,10 +54,10 @@
 		buf_set_u32(field.out_value, 0, field.num_bits, new_instr);
 		
 		field.in_value = NULL;
-		field.in_check_value = NULL;
-		field.in_check_mask = NULL;
+		
+		
 		field.in_handler = handler;
-		field.in_handler_priv = NULL;
+		
 		jtag_add_ir_scan(1, &amp;field, TAP_INVALID);
 	}
 
Index: src/target/arm920t.c
===================================================================
--- src/target/arm920t.c	(revision 1608)
+++ src/target/arm920t.c	(working copy)
@@ -115,40 +115,40 @@
 	fields[0].out_value = &amp;access_type_buf;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
 	fields[1].out_value = NULL;
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 6;
 	fields[2].out_value = &amp;reg_addr_buf;
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	fields[3].tap = jtag_info-&gt;tap;
 	fields[3].num_bits = 1;
 	fields[3].out_value = &amp;nr_w_buf;
 	
 	fields[3].in_value = NULL;
-	fields[3].in_check_value = NULL;
-	fields[3].in_check_mask = NULL;
+	
+	
 	fields[3].in_handler = NULL;
-	fields[3].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(4, fields, TAP_INVALID);
 
@@ -187,40 +187,40 @@
 	fields[0].out_value = &amp;access_type_buf;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
 	fields[1].out_value = value_buf;
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 6;
 	fields[2].out_value = &amp;reg_addr_buf;
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	fields[3].tap = jtag_info-&gt;tap;
 	fields[3].num_bits = 1;
 	fields[3].out_value = &amp;nr_w_buf;
 	
 	fields[3].in_value = NULL;
-	fields[3].in_check_value = NULL;
-	fields[3].in_check_mask = NULL;
+	
+	
 	fields[3].in_handler = NULL;
-	fields[3].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(4, fields, TAP_INVALID);
 
@@ -254,40 +254,40 @@
 	fields[0].out_value = &amp;access_type_buf;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
 	fields[1].out_value = cp15_opcode_buf;
 	
 	fields[1].in_value = NULL;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 	fields[1].in_handler = NULL;
-	fields[1].in_handler_priv = NULL;
+	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 6;
 	fields[2].out_value = &amp;reg_addr_buf;
 	
 	fields[2].in_value = NULL;
-	fields[2].in_check_value = NULL;
-	fields[2].in_check_mask = NULL;
+	
+	
 	fields[2].in_handler = NULL;
-	fields[2].in_handler_priv = NULL;
+	
 
 	fields[3].tap = jtag_info-&gt;tap;
 	fields[3].num_bits = 1;
 	fields[3].out_value = &amp;nr_w_buf;
 	
 	fields[3].in_value = NULL;
-	fields[3].in_check_value = NULL;
-	fields[3].in_check_mask = NULL;
+	
+	
 	fields[3].in_handler = NULL;
-	fields[3].in_handler_priv = NULL;
+	
 
 	jtag_add_dr_scan(4, fields, TAP_INVALID);
 
Index: src/target/arm7tdmi.c
===================================================================
--- src/target/arm7tdmi.c	(revision 1608)
+++ src/target/arm7tdmi.c	(working copy)
@@ -113,20 +113,20 @@
 		fields[0].out_value = NULL;
 		
 		fields[0].in_value = &breakpoint;
-		fields[0].in_check_value = NULL;
-		fields[0].in_check_mask = NULL;
+		
+		
 		fields[0].in_handler = NULL;
-		fields[0].in_handler_priv = NULL;
+		
 
 		fields[1].tap = arm7_9-&gt;jtag_info.tap;
 		fields[1].num_bits = 32;
 		fields[1].out_value = NULL;
 		
 		fields[1].in_value = databus;
-		fields[1].in_check_value = NULL;
-		fields[1].in_check_mask = NULL;
+		
+		
 		fields[1].in_handler = NULL;
-		fields[1].in_handler_priv = NULL;
+		
 
 		if((retval = arm_jtag_scann(&amp;arm7_9-&gt;jtag_info, 0x1)) != ERROR_OK)
 		{
@@ -200,10 +200,10 @@
 	fields[0].out_value = NULL;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
@@ -212,8 +212,8 @@
 	fields[1].in_value = NULL;
 	fields[1].in_handler = arm_jtag_buf_to_u32_flip; /* deprecated! invoke this from user code! */
 	fields[1].in_handler_priv = in;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 
 	jtag_add_dr_scan(2, fields, TAP_INVALID);
 
@@ -261,10 +261,10 @@
 	fields[0].out_value = NULL;
 	
 	fields[0].in_value = NULL;
-	fields[0].in_check_value = NULL;
-	fields[0].in_check_mask = NULL;
+	
+	
 	fields[0].in_handler = NULL;
-	fields[0].in_handler_priv = NULL;
+	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
@@ -284,8 +284,8 @@
 			break;
 	}
 	fields[1].in_handler_priv = in;
-	fields[1].in_check_value = NULL;
-	fields[1].in_check_mask = NULL;
+	
+	
 
 	jtag_add_dr_scan(2, fields, TAP_INVALID);
 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006119.html">[Openocd-development] jim.c no longer compiles warning free	under Cygwin
</A></li>
	<LI>Next message: <A HREF="006118.html">[Openocd-development]  Retire out_mask in JTAG API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6117">[ date ]</a>
              <a href="thread.html#6117">[ thread ]</a>
              <a href="subject.html#6117">[ subject ]</a>
              <a href="author.html#6117">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] OpenOCD and different versions of J-Link
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20OpenOCD%20and%20different%20versions%20of%20J-Link&In-Reply-To=%3Cgv12q2%24vu%241%40ger.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006913.html">
   <LINK REL="Next"  HREF="006914.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] OpenOCD and different versions of J-Link</H1>
    <B>Gene Smith</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20OpenOCD%20and%20different%20versions%20of%20J-Link&In-Reply-To=%3Cgv12q2%24vu%241%40ger.gmane.org%3E"
       TITLE="[Openocd-development] OpenOCD and different versions of J-Link">gds at chartertn.net
       </A><BR>
    <I>Wed May 20 16:06:57 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006913.html">[Openocd-development] OpenOCD and different versions of J-Link
</A></li>
        <LI>Next message: <A HREF="006914.html">[Openocd-development] OpenOCD and different versions of J-Link
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6911">[ date ]</a>
              <a href="thread.html#6911">[ thread ]</a>
              <a href="subject.html#6911">[ subject ]</a>
              <a href="author.html#6911">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Magnus Lundin wrote:
&gt;<i> The following patch combines my previous patch with most of Ben's patch. 
</I>&gt;<i> It can use both  EMU_CMD_HW_JTAG2  and   EMU_CMD_HW_JTAG3
</I>&gt;<i> 
</I>&gt;<i> It defaults to EMU_CMD_HW_JTAG2 so it should work with all interfaces 
</I>&gt;<i> but EMU_CMD_HW_JTAG3 is recommended by SEgger,  you can change the 
</I>&gt;<i> behaviour with
</I>&gt;<i> 
</I>&gt;<i>  &gt; jlink_hw_jtag  3
</I>&gt;<i> or
</I>&gt;<i>  &gt; jlink_hw_jtag  2
</I>&gt;<i> 
</I>&gt;<i> Autodetection can be done when we know which versions JLink can use what 
</I>&gt;<i> setting,  (-d3 logs of setup messages )
</I>&gt;<i> 
</I>&gt;<i> Have a nice day
</I>&gt;<i> Magnus
</I>&gt;<i> 
</I>
Seems to work OK for me too (hw version yellow/V4 OEM IAR). If I do 
&quot;jlink_hw_jtag 2&quot; it loses USB comm (LED on jlink goes off) and I see 
messages:

jlink hw jtag  3
Error: usb_bulk_read failed (requested=12, result=-110)
Error: jlink_tap_execute, wrong result -107 (expected 12)
Error: usb_bulk_read failed (requested=12, result=-110)
Error: jlink_tap_execute, wrong result -107 (expected 12)
Error: usb_bulk_read failed (requested=12, result=-110)
:<i>
</I>:<i>Must restart openocd to recover.
</I>
Note: see similar string of messages if USB is unplugged from Jlink 
while running and must restart it. Does not recover when USB replugged.

So I guess I must use 2.

Still see occasional segfault on startup (still running r1833 except for 
jlink.c patch).

-gene





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006913.html">[Openocd-development] OpenOCD and different versions of J-Link
</A></li>
	<LI>Next message: <A HREF="006914.html">[Openocd-development] OpenOCD and different versions of J-Link
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6911">[ date ]</a>
              <a href="thread.html#6911">[ thread ]</a>
              <a href="subject.html#6911">[ subject ]</a>
              <a href="author.html#6911">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

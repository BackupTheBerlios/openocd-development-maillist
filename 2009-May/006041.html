<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] #if vs. #ifdef, autotools vs. Cmake
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%23if%20vs.%20%23ifdef%2C%20autotools%20vs.%20Cmake&In-Reply-To=%3C80e74c330905021135n2266df94pc415bacd7c5a3dba%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006032.html">
   <LINK REL="Next"  HREF="006044.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] #if vs. #ifdef, autotools vs. Cmake</H1>
    <B>Michael Bruck</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%23if%20vs.%20%23ifdef%2C%20autotools%20vs.%20Cmake&In-Reply-To=%3C80e74c330905021135n2266df94pc415bacd7c5a3dba%40mail.gmail.com%3E"
       TITLE="[Openocd-development] #if vs. #ifdef, autotools vs. Cmake">mbruck at digenius.de
       </A><BR>
    <I>Sat May  2 20:35:40 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006032.html">[Openocd-development] #if vs. #ifdef, autotools vs. Cmake
</A></li>
        <LI>Next message: <A HREF="006044.html">[Openocd-development] #if vs. #ifdef, autotools vs. Cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6041">[ date ]</a>
              <a href="thread.html#6041">[ thread ]</a>
              <a href="subject.html#6041">[ subject ]</a>
              <a href="author.html#6041">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, May 2, 2009 at 12:26 PM, Michael Schwingen
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">rincewind at discworld.dascon.de</A>&gt; wrote:
&gt;<i> Zach Welch wrote:
</I>&gt;&gt;<i> With autotools, #ifdef should be preferred. &#160; For example, HAVE_FOO_H
</I>&gt;&gt;<i> will be defined 1 by the AC_CHECK_HEADERS([foo.h],[1],[Comment]) macro;
</I>&gt;&gt;<i> configure defines the symbol to the given value if foo.h is present, and
</I>&gt;&gt;<i> the symbol is not defined if absent. &#160;In both cases, the definition will
</I>&gt;&gt;<i> exist in config.h, but it will be commented out when not defined; the
</I>&gt;&gt;<i> same would be true for the OpenOCD symbols, except that they are defined
</I>&gt;&gt;<i> explicitly.
</I>&gt;&gt;<i>
</I>&gt;<i> I don't know about autotools, but I do prefer #if, because that way, you
</I>&gt;<i> get warnings if the correct headers are not included. When using #ifdef,
</I>&gt;<i> a missing header may lead to wrong code without a warning.
</I>&gt;<i>
</I>&gt;<i> cu
</I>&gt;<i> Michael
</I>&gt;<i>
</I>
I prefer #if because it is a clearer syntax:

#if IS_WIN32
#if ! IS_WIN32
#if IS_WIN32 || IS_UNIX

vs.

#ifdef IS_WIN32
#ifndef IS_WIN32
#if defined(IS_WIN32) || defined(IS_UNIX)

The ! syntax is more expressive than the 'n' buried somewhere in
between. The boolean operations are more focussed on what is going on
and they are easier to extend (thus less error prone).

Michael

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006032.html">[Openocd-development] #if vs. #ifdef, autotools vs. Cmake
</A></li>
	<LI>Next message: <A HREF="006044.html">[Openocd-development] #if vs. #ifdef, autotools vs. Cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6041">[ date ]</a>
              <a href="thread.html#6041">[ thread ]</a>
              <a href="subject.html#6041">[ subject ]</a>
              <a href="author.html#6041">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

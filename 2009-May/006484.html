<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Cortex-A8  more testing
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Cortex-A8%20%20more%20testing&In-Reply-To=%3C4A0ADD2A.9060808%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006493.html">
   <LINK REL="Next"  HREF="006488.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Cortex-A8  more testing</H1>
    <B>Strontium</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Cortex-A8%20%20more%20testing&In-Reply-To=%3C4A0ADD2A.9060808%40gmail.com%3E"
       TITLE="[Openocd-development] Cortex-A8  more testing">strntydog at gmail.com
       </A><BR>
    <I>Wed May 13 16:46:02 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006493.html">[Openocd-development] Performance of 1606 vs. svn head
</A></li>
        <LI>Next message: <A HREF="006488.html">[Openocd-development] Cortex-A8  more testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6484">[ date ]</a>
              <a href="thread.html#6484">[ thread ]</a>
              <a href="subject.html#6484">[ subject ]</a>
              <a href="author.html#6484">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I haven't seen any Cortex A8 activity on the list, lately, so I wonder 
if anyone has come across these issues.

See attached script:

I tried implementing the functions described in the Cortex A8 TRM.  I 
was trying to see if I could read CPU ARM registers.

The code seems to mostly work.

Except for weird Cortex A8 things that don't seem to be documented, at 
least I cant find them.

1. If I set bit 1 to 1, on a write to the DSCR the core restarts ??
2. If I write an instruction to the ITR, the &quot;Execute Instruction 
Enable&quot; and &quot;Halting debug-mode&quot; bits in the DSCR randomly clear?
3. Even though DTRXfull in DSCR is set after writing the instruction to 
ITR (as expected), reading the DTRTX returns invalid data (it seems to 
be the data of the last write to ANY other debug register), BUT the 
DTRXfull flag in the DSCR is cleared, indicating the register was 
actually read?

Anyone have any ideas?  Anyone managed to read an ARM register through 
this interface?

I am obviously missing something important, but a days worth of hacking 
and re-reading the cortex a8 TRM has bought me no closer.

I am testing this on a small assembly stub which alternately flashes the 
leds on a beagle in a loop, its loaded by the ROM boot loader in the 
OMAP3 over USB.  That way when I read registers, I should be able to 
verify the contents against my code, based on the state of the leds.

Strontium




-------------- next part --------------
A non-text attachment was scrubbed...
Name: omap3.tcl
Type: text/x-tcl
Size: 6763 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20090513/3228694c/attachment.tcl">https://lists.berlios.de/pipermail/openocd-development/attachments/20090513/3228694c/attachment.tcl</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006493.html">[Openocd-development] Performance of 1606 vs. svn head
</A></li>
	<LI>Next message: <A HREF="006488.html">[Openocd-development] Cortex-A8  more testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6484">[ date ]</a>
              <a href="thread.html#6484">[ thread ]</a>
              <a href="subject.html#6484">[ subject ]</a>
              <a href="author.html#6484">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

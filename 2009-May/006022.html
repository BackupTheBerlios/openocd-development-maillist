<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] #if vs. #ifdef, autotools vs. Cmake
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%23if%20vs.%20%23ifdef%2C%20autotools%20vs.%20Cmake&In-Reply-To=%3C1241252281.8326.3750.camel%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006016.html">
   <LINK REL="Next"  HREF="006032.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] #if vs. #ifdef, autotools vs. Cmake</H1>
    <B>Zach Welch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%23if%20vs.%20%23ifdef%2C%20autotools%20vs.%20Cmake&In-Reply-To=%3C1241252281.8326.3750.camel%40localhost%3E"
       TITLE="[Openocd-development] #if vs. #ifdef, autotools vs. Cmake">zw at superlucidity.net
       </A><BR>
    <I>Sat May  2 10:18:01 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006016.html">[Openocd-development] #if vs. #ifdef, autotools vs. Cmake
</A></li>
        <LI>Next message: <A HREF="006032.html">[Openocd-development] #if vs. #ifdef, autotools vs. Cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6022">[ date ]</a>
              <a href="thread.html#6022">[ thread ]</a>
              <a href="subject.html#6022">[ subject ]</a>
              <a href="author.html#6022">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 2009-05-02 at 07:04 +0200, Michael Bruck wrote:
&gt;<i> I would like to start another holy war while we are at it:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 1. Are false preprocessor variables in OpenOCD specified by not
</I>&gt;<i> defining a variable or by defining it as 0 ?
</I>
OpenOCD's variables are defined as 0 or 1.  This is not standard.

&gt;<i> 2. config.h generated by autotools and cmake use different paradigms for this
</I>
Not surprising, but unfortunate.

&gt;<i> 3. several files (including my latest patch for jim.c) use #if(n)def
</I>&gt;<i> HAVE_... which makes no sense with the autotools generated config.h
</I>&gt;<i> 
</I>&gt;<i> see:
</I>&gt;<i> svn diff -r1560:1572 src/helper/jim.c
</I>
With autotools, #ifdef should be preferred.   For example, HAVE_FOO_H
will be defined 1 by the AC_CHECK_HEADERS([foo.h],[1],[Comment]) macro;
configure defines the symbol to the given value if foo.h is present, and
the symbol is not defined if absent.  In both cases, the definition will
exist in config.h, but it will be commented out when not defined; the
same would be true for the OpenOCD symbols, except that they are defined
explicitly.

All of the AC_DEFINE(....[0]) lines could be safely removed, if the code
was simultaneously switched to use #ifdef instead of #if.  Clearly, that
will not be worth the effort unless it would be required by CMake.

&gt;<i> 4. Mildly related: what is _WIN32 ?
</I>
A (built-in? header?) symbol provided by CygWin or MinGW32.

Cheers,

Zach

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006016.html">[Openocd-development] #if vs. #ifdef, autotools vs. Cmake
</A></li>
	<LI>Next message: <A HREF="006032.html">[Openocd-development] #if vs. #ifdef, autotools vs. Cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6022">[ date ]</a>
              <a href="thread.html#6022">[ thread ]</a>
              <a href="subject.html#6022">[ subject ]</a>
              <a href="author.html#6022">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

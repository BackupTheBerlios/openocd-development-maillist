<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Outsider's point of view
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Outsider%27s%20point%20of%20view&In-Reply-To=%3CC1CB6A18-7EA6-47ED-A4F0-3545190C15B6%40kc8apf.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006447.html">
   <LINK REL="Next"  HREF="006452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Outsider's point of view</H1>
    <B>Rick Altherr</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Outsider%27s%20point%20of%20view&In-Reply-To=%3CC1CB6A18-7EA6-47ED-A4F0-3545190C15B6%40kc8apf.net%3E"
       TITLE="[Openocd-development] Outsider's point of view">kc8apf at kc8apf.net
       </A><BR>
    <I>Wed May 13 05:49:54 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006447.html">[Openocd-development] Outsider's point of view
</A></li>
        <LI>Next message: <A HREF="006452.html">[Openocd-development] Outsider's point of view
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6451">[ date ]</a>
              <a href="thread.html#6451">[ thread ]</a>
              <a href="subject.html#6451">[ subject ]</a>
              <a href="author.html#6451">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On May 12, 2009, at 6:09 PM, David Brownell wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> Zack's &quot;list&quot; seemed useful in terms of having some
</I>&gt;&gt;&gt;<i> kind of direction be defined.  But that's distinct
</I>&gt;&gt;&gt;<i> from defining release criteria, or merge criteria.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yup.  A todo list is great, but we need a more rigid definition of
</I>&gt;&gt;<i> what need to be done to make the next release.  Essentially, we need
</I>&gt;&gt;<i> to decide on &quot;features&quot; for a release.  Any large changes need to be
</I>&gt;&gt;<i> aligned with a feature.  Small fixes should be accepted even if they
</I>&gt;&gt;<i> don't align with a feature.
</I>&gt;<i>
</I>&gt;<i> That's one process.  Not all small patches are safe
</I>&gt;<i> enough to merge at any time though; and not all large
</I>&gt;<i> changes should necessarily be aligned with target
</I>&gt;<i> features of some release.  (Example, some types of
</I>&gt;<i> code cleanup.)  Patches should IMO be graded more by
</I>&gt;<i> the risk/reward ratio ... and nearer to release
</I>&gt;<i> milestons, that ratio should shrink to near zero.
</I>&gt;<i>
</I>
Agreed.  Risk/reward works well as a metric for rating patches for  
integration.  The difficulty is determining the risk and the reward.   
Everyone seems to have a different set of criteria for those.  Even  
well established criteria doesn't solve all the problems since no two  
patches are alike.

&gt;<i>
</I>&gt;&gt;&gt;<i> Right *now*, what criteria are being used to choose
</I>&gt;&gt;&gt;<i> whether to merge a patch, reject it, or hold it back
</I>&gt;&gt;&gt;<i> until the next release?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Right now, the options are merge or let it die.  For nearly  
</I>&gt;&gt;<i> everything
</I>&gt;&gt;<i> that hits the list, it is automatically committed to SVN with little
</I>&gt;&gt;<i> review or commentary.  I'm not a fan of this.
</I>&gt;<i>
</I>&gt;<i> Right.  I think some patches should certainly be able
</I>&gt;<i> to fit into the &quot;keep that in the -next queue&quot; category.
</I>&gt;<i>
</I>&gt;<i> Effective review is probably not easy here; who knows
</I>&gt;<i> JTAG well enough to contribute non-cosmetic feedback?
</I>&gt;<i>
</I>
Actually, a fair number of us _do_ know JTAG fairly well.  The target  
protocols are another matter.

&gt;<i>
</I>&gt;<i> One process that could hardly help but improve things
</I>&gt;<i> is to define a &quot;release manager&quot; who herds patches for
</I>&gt;<i> a given release ... and someone else who herds patches
</I>&gt;<i> for the next one, keeping the queues in sync.
</I>&gt;<i>
</I>&gt;<i> OpenOCD doesn't seem to have anyone responsible for
</I>&gt;<i> the &quot;next&quot; release, whatever it's called (maybe a
</I>&gt;<i> datecode like &quot;2009-06&quot;?).  Such roles should ideally
</I>&gt;<i> be rotated.  Some projects have teams defining them.
</I>&gt;<i>
</I>
Technically, I took that role for the 0.1.0 release.  There were two  
factors that have make continuing as such for 0.2.0 challenging: my  
home life and lack of community support.  My home life is in a bit of  
turmoil due to a home remodel, new baby, and looking for a new day  
job.  The community support was nearly non-existent.  Even slowing  
things down for 0.1.0 was difficult but I managed.  As soon as 0.1.0  
was released, trunk had already progressed well ahead and was in  
chaos.  Attempting to slow things down and establish which in-progress  
developments need to be finished has been met with resistance.  As  
soon as one in-progress item is finished, 3 others have been partially  
introduced.  _If_ a process was put in place for accepting patches to  
trunk, the job of release management _might_ be possible.  Otherwise,  
it primarily means picking an arbitrary revision of trunk and making  
it the branch.  Then, as in-progress items are finished, merge the  
patches from trunk into the branch.  It sucks and makes the release  
manager do _a lot_ of work.  It's not an easy job watching every  
commit and determining if it should be taken for the release or not.   
It's also not easy backporting fixes that don't apply cleanly because  
trunk has moved on with other widespread changes.

Enough ranting from me.  We need to set some criteria for introducing  
patches into trunk and formalize the process.  We also need to  
establish the same for release branches.  Then, everyone with commit  
access needs to respect those processes.  If we all play by the same  
rules, cutting releases more frequently will be easy and the overall  
quality of trunk will be better.

&gt;<i>
</I>&gt;<i> Regular status updates help too.  Linux has clear
</I>&gt;<i> progress markers via version codes (2.6.29, then
</I>&gt;<i> merge window, then 2.6.30-rc1, etc) *and* at least
</I>&gt;<i> brief status reports every weeks when a new version
</I>&gt;<i> is tagged. GCC has different status reports (which
</I>&gt;<i> get rotated among release team members) and very
</I>&gt;<i> clear tree status.  OOCD has nothing similar.
</I>&gt;<i>
</I>
Right.  This follows from the above.  If you have a process, it is  
easy to send out updates about what stage we are in.  The releases  
don't need to be on a strict timeline, but knowing that this release  
is slowing down and another will be opening helps patch authors set  
their schedules and use their time effectively.

&gt;<i>
</I>&gt;&gt;&gt;<i> Example:  there was a patch a while back (from Dick
</I>&gt;&gt;&gt;<i> Hollenbeck) that included about 60K of ft2232 and
</I>&gt;&gt;&gt;<i> TMS sequencing updates ... and gratuitous changes
</I>&gt;&gt;&gt;<i> to whitespace, and surely other things.  I don't
</I>&gt;&gt;&gt;<i> know of many projects which wouldn't also reject
</I>&gt;&gt;&gt;<i> such patches with &quot;please split into smaller patches
</I>&gt;&gt;&gt;<i> so this can be reviewed&quot;, as happened.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If that *had* been split and resubmitted ... there
</I>&gt;&gt;&gt;<i> seems to be no process in place to say which changes
</I>&gt;&gt;&gt;<i> are safe to merge *now* versus which can't merge
</I>&gt;&gt;&gt;<i> because they'd destabilize release plans, versus
</I>&gt;&gt;&gt;<i> which are worth merging even if they *do* destabilize
</I>&gt;&gt;&gt;<i> things (because e.g. fixing TMS bugs is critical).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If it _had_ been split and resubmitted, I'd have voted to take the
</I>&gt;&gt;<i> FT2232 fixes and the TMS sequencing updates.  Both had been discussed
</I>&gt;&gt;<i> for quite a while.  They were implemented in an opt-in model.  It was
</I>&gt;&gt;<i> safe to take into trunk with no real impact unless you opted-in.
</I>&gt;<i>
</I>&gt;<i> Both sounded technically plausible to me.  But ... neither
</I>&gt;<i> was provided as an independently reviewable patch.
</I>&gt;<i>
</I>
I still have it in my inbox somewhere.  I believe parts were  
integrated by &#216;yvind.  When I get some time, I'll see about splitting  
it up.

&gt;<i> If they were merged, I would have argued against &quot;opt-in&quot;.
</I>&gt;<i> When a patch is basically good, any remaining bugs should
</I>&gt;<i> just get fixed.  If it isn't, it shouldn't merge.
</I>&gt;<i>
</I>
Actually, in this case, opt-in was the right model.  In general I  
agree with you, but when you are changing such a fundamental part of  
the code, it will take time for the other pieces to be tested and  
debugged.  This particular item was made more difficult by the fact  
that no one on the list owns all the hardware supported by OpenOCD and  
thus one person could _not_ do all the testing themselves.  Now, this  
_could_ have been done in a branch, but having an opt-in scheme allows  
the drivers to be updated individually and be tested more broadly once  
have been.  If it has been done in a branch, it is unlikely they would  
have had as much exposure.

&gt;<i>
</I>&gt;&gt;<i> Of course, I'd love a more formal process in which we decide on the
</I>&gt;&gt;<i> feature set for the next release and only accept things into it that
</I>&gt;&gt;<i> implement those features.  Of course, we should also allow overlap of
</I>&gt;&gt;<i> releases (branch the release from trunk a while before the release is
</I>&gt;&gt;<i> finished) and also allow radical development to occur on branches
</I>&gt;&gt;<i> where they could be merged into trunk after the release is branched.
</I>&gt;&gt;<i> See any large project for examples.
</I>&gt;<i>
</I>&gt;<i> Right.  The guts of it boil down, IMO, to defining some
</I>&gt;<i> responsible roles ... and having people meet those roles.
</I>&gt;<i>
</I>&gt;<i> Given that, some tools work better than others.  GIT makes
</I>&gt;<i> it easy to have any number of branches without needing to
</I>&gt;<i> grant excess permissions to anyone, for example.  But we
</I>&gt;<i> have all probably seen projects managed effectively using
</I>&gt;<i> tools like CVS or SVN.  The tools are secondary to having
</I>&gt;<i> a process which uses them well.
</I>&gt;<i>
</I>
I'm not entirely sold on GIT as a project source control system, but  
things like git-svn enable individuals to maintain their own GIT  
branches and push them to the project as a patch.  That provides a  
reasonable balance between the needs of the project and the needs of  
the contributors.

&gt;<i> - Dave
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> - Dave
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>  -- Unsigned
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
--
Rick Altherr
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">kc8apf at kc8apf.net</A>

&quot;He said he hadn't had a byte in three days. I had a short, so I split  
it with him.&quot;
  -- Unsigned



-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2446 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20090512/44dc34a8/attachment.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20090512/44dc34a8/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006447.html">[Openocd-development] Outsider's point of view
</A></li>
	<LI>Next message: <A HREF="006452.html">[Openocd-development] Outsider's point of view
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6451">[ date ]</a>
              <a href="thread.html#6451">[ thread ]</a>
              <a href="subject.html#6451">[ subject ]</a>
              <a href="author.html#6451">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

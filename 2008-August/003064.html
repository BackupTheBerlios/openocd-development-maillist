<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] stellaris oddity
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20stellaris%20oddity&In-Reply-To=%3C48B6476B.6040607%40discworld.dascon.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003059.html">
   <LINK REL="Next"  HREF="003065.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] stellaris oddity</H1>
    <B>Michael Schwingen</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20stellaris%20oddity&In-Reply-To=%3C48B6476B.6040607%40discworld.dascon.de%3E"
       TITLE="[Openocd-development] stellaris oddity">rincewind at discworld.dascon.de
       </A><BR>
    <I>Thu Aug 28 08:36:27 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003059.html">[Openocd-development] LPC2k calc_checksum and mismatch during verify_image
</A></li>
        <LI>Next message: <A HREF="003065.html">[Openocd-development] stellaris oddity
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3064">[ date ]</a>
              <a href="thread.html#3064">[ thread ]</a>
              <a href="subject.html#3064">[ subject ]</a>
              <a href="author.html#3064">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Spen wrote:
&gt;&gt;<i> Sure - now (revision 972) it fails completely. 
</I>&gt;&gt;<i> Both &quot;reset halt&quot; and &quot;reset init&quot; behave the save, no matter 
</I>&gt;&gt;<i> if I specify the &quot;lm3&quot; variant on the target line or not. The 
</I>&gt;&gt;<i> target is reset and runs (and continues to run ...).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Attached is a log using
</I>&gt;&gt;<i> target cortex_m3 little 0 lm3s
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> Strange, working well with the targets i have here.
</I>&gt;<i> my only suggestion is to try just srst only for reset.
</I>
srst_only shows the same behaviour.

&gt;<i> I added the lm3s option as early luminary devices do not
</I>&gt;<i> follow the cortex_m3 spec as regards to reset.
</I>&gt;<i> 
</I>&gt;<i> you will need this option for correct handling of luminary devices.
</I>&gt;<i> openocd will check for the correct revision and use the correct reset
</I>&gt;<i> scheme.
</I>
Yes, I figured that out from the source, and from earlier debugging, it looks like openocd thinks it needs to activate the lm3 workaround for my target.

The strange thing is that using r885, I could get control of the target *without* the lm3 option as long as I had working code in flash, but I needed the lm3 option to attach to a target with an erased flash. The other side is that *with* the lm3 option, single-step/resume did not work.

Is the Cortex-M3 and/or the Luminary debug implementation documented somewhere public?

cu
Michael


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003059.html">[Openocd-development] LPC2k calc_checksum and mismatch during verify_image
</A></li>
	<LI>Next message: <A HREF="003065.html">[Openocd-development] stellaris oddity
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3064">[ date ]</a>
              <a href="thread.html#3064">[ thread ]</a>
              <a href="subject.html#3064">[ subject ]</a>
              <a href="author.html#3064">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

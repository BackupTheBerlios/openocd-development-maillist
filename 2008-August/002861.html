<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] make reset halt is an atomic operation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20make%20reset%20halt%20is%20an%20atomic%20operation&In-Reply-To=%3Cc09652430808042344x6fdd0392m991df890edf7a9ec%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002874.html">
   <LINK REL="Next"  HREF="002862.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] make reset halt is an atomic operation</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20make%20reset%20halt%20is%20an%20atomic%20operation&In-Reply-To=%3Cc09652430808042344x6fdd0392m991df890edf7a9ec%40mail.gmail.com%3E"
       TITLE="[Openocd-development] make reset halt is an atomic operation">oyvind.harboe at zylin.com
       </A><BR>
    <I>Tue Aug  5 08:44:18 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002874.html">[Openocd-development] [PATCH] enable warnings, clean up warnings
</A></li>
        <LI>Next message: <A HREF="002862.html">[Openocd-development] make reset halt is an atomic operation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2861">[ date ]</a>
              <a href="thread.html#2861">[ thread ]</a>
              <a href="subject.html#2861">[ subject ]</a>
              <a href="author.html#2861">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>the attached patch defines resetting the target into the halted or running
state as an atomic operation.

Previously this would be achived by issuing halt while reset was asserted.
Halt then needed to have conditional code, mostly to ignore what was already
done in assert reset.

Resetting into the halted state takes voodoo in assert+deassert reset.

Another issue not tackled yet is that assert/deassert reset was defined
as two different functions so as to allow multiple targets. However, with
the implementation of assert/deassert wiggling the reset lines directly,
that won't work. That cleanup is for another day.

Objections?

Comments?

--
&#216;yvind Harboe
<A HREF="http://www.zylin.com/zy1000.html">http://www.zylin.com/zy1000.html</A>
ARM7 ARM9 XScale Cortex
JTAG debugger and flash programmer
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: atomicresethalt.txt
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20080805/c67a6d44/attachment.txt">https://lists.berlios.de/pipermail/openocd-development/attachments/20080805/c67a6d44/attachment.txt</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002874.html">[Openocd-development] [PATCH] enable warnings, clean up warnings
</A></li>
	<LI>Next message: <A HREF="002862.html">[Openocd-development] make reset halt is an atomic operation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2861">[ date ]</a>
              <a href="thread.html#2861">[ thread ]</a>
              <a href="subject.html#2861">[ subject ]</a>
              <a href="author.html#2861">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

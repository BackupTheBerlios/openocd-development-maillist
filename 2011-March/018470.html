<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] bugfix for step &lt;address&gt; mips_m4k
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20bugfix%20for%20step%20%3Caddress%3E%20mips_m4k&In-Reply-To=%3CAANLkTinkuG1qnDXDcK91OhwFNp0JFu8vQz3RseLxkYqq%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018469.html">
   <LINK REL="Next"  HREF="018472.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] bugfix for step &lt;address&gt; mips_m4k</H1>
    <B>Andrew Lyon</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20bugfix%20for%20step%20%3Caddress%3E%20mips_m4k&In-Reply-To=%3CAANLkTinkuG1qnDXDcK91OhwFNp0JFu8vQz3RseLxkYqq%40mail.gmail.com%3E"
       TITLE="[Openocd-development] bugfix for step &lt;address&gt; mips_m4k">andrew.lyon at gmail.com
       </A><BR>
    <I>Mon Mar 28 13:28:30 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="018469.html">[Openocd-development] bugfix for step &lt;address&gt; mips_m4k
</A></li>
        <LI>Next message: <A HREF="018472.html">[Openocd-development] bugfix for step &lt;address&gt; mips_m4k
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18470">[ date ]</a>
              <a href="thread.html#18470">[ thread ]</a>
              <a href="subject.html#18470">[ subject ]</a>
              <a href="author.html#18470">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Mar 28, 2011 at 11:31 AM, &#216;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">oyvind.harboe at zylin.com</A>&gt; wrote:
&gt;<i> Any objections to committing?
</I>&gt;<i>
</I>&gt;<i> Could you also list the necessary patches here?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> &#216;yvind Harboe
</I>&gt;<i>
</I>&gt;<i> Can Zylin Consulting help on your project?
</I>&gt;<i>
</I>&gt;<i> US toll free 1-866-980-3434 / International +47 51 87 40 27
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.zylin.com/zy1000.html">http://www.zylin.com/zy1000.html</A>
</I>&gt;<i> ARM7 ARM9 ARM11 XScale Cortex
</I>&gt;<i> JTAG debugger and flash programmer
</I>&gt;<i>
</I>
The other patches I had to apply are the two hunks mentioned in this
thread <A HREF="018337.html">http://lists.berlios.de/pipermail/openocd-development/2011-March/018337.html</A>
but as Drasko said if they are applied and mips_m4k_bulk_write_memory
fails and falls back to mips_m4k_write_memory then the bits will be
shuffled twice.

I've looked at the code and there are various ways it could be fixed,
the most simple would be to remove the automatic use of bulk_write for
over 128 bytes and to remove the automatic fallback to write_memory,
leaving the user to decide which to use, commands already exist for
both (fast_load_image, load_image).

Andy

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018469.html">[Openocd-development] bugfix for step &lt;address&gt; mips_m4k
</A></li>
	<LI>Next message: <A HREF="018472.html">[Openocd-development] bugfix for step &lt;address&gt; mips_m4k
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18470">[ date ]</a>
              <a href="thread.html#18470">[ thread ]</a>
              <a href="subject.html#18470">[ subject ]</a>
              <a href="author.html#18470">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

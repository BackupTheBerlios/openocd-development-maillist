<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] LPC-2148 RCLK and DCC
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-August/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20LPC-2148%20RCLK%20and%20DCC&In-Reply-To=%3CAANLkTi%3DTzafDPZDzZNpo2h%3D8P30BvC8MK8hgZ6vQ3CcQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016302.html">
   <LINK REL="Next"  HREF="016305.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] LPC-2148 RCLK and DCC</H1>
    <B>Xiaofan Chen</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20LPC-2148%20RCLK%20and%20DCC&In-Reply-To=%3CAANLkTi%3DTzafDPZDzZNpo2h%3D8P30BvC8MK8hgZ6vQ3CcQ%40mail.gmail.com%3E"
       TITLE="[Openocd-development] LPC-2148 RCLK and DCC">xiaofanc at gmail.com
       </A><BR>
    <I>Sat Aug 14 12:03:36 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="016302.html">[Openocd-development] Typo in documentation of usb_blaster_vid_pid command
</A></li>
        <LI>Next message: <A HREF="016305.html">[Openocd-development] AVR32 support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16304">[ date ]</a>
              <a href="thread.html#16304">[ thread ]</a>
              <a href="subject.html#16304">[ subject ]</a>
              <a href="author.html#16304">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Aug 14, 2010 at 12:00 PM, Xiaofan Chen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">xiaofanc at gmail.com</A>&gt; wrote:
&gt;<i> On Sat, Aug 14, 2010 at 8:30 AM, Xiaofan Chen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">xiaofanc at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> OpenOCD has long worked with LPC-2148. Last time I was
</I>&gt;&gt;<i> using a J-Link (V6, V7 and V3, it took some time to get V3 working).
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I also tried it under Linux with the latest git. Here I am using libftdi-0.18.
</I>&gt;<i> Somehow the RCLK support is gone.
</I>&gt;<i>
</I>&gt;<i> ../git/openocd/configure --enable-maintainer-mode --enable-jlink
</I>&gt;<i> --enable-ft2232_libftdi --enable-parport --enable-dummy
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">mcuee at ubuntu</A>:~/Desktop/build/openocd/lpc2148$
</I>&gt;<i> openocd -f interface/jtagkey2.cfg &#160;-f board/olimex_lpc_h2148.cfg
</I>&gt;<i> Open On-Chip Debugger 0.5.0-dev-00485-g36333f9 (2010-08-14-11:18)
</I>&gt;<i> Licensed under GNU GPL v2
</I>&gt;<i> For bug reports, read
</I>&gt;<i> &#160; &#160; &#160; &#160;<A HREF="http://openocd.berlios.de/doc/doxygen/bugs.html">http://openocd.berlios.de/doc/doxygen/bugs.html</A>
</I>&gt;<i> Info : only one transport option; autoselect 'jtag'
</I>&gt;<i> RCLK - adaptive
</I>&gt;<i> adapter_nsrst_delay: 200
</I>&gt;<i> jtag_ntrst_delay: 200
</I>&gt;<i> trst_and_srst separate srst_gates_jtag trst_push_pull srst_open_drain
</I>&gt;<i> Info : RCLK (adaptive clock speed) not supported - fallback to 500 kHz
</I>&gt;<i> Info : JTAG tap: lpc2148.cpu tap/device found: 0x4f1f0f0f (mfg: 0x787,
</I>&gt;<i> part: 0xf1f0, ver: 0x4)
</I>&gt;<i> Info : Embedded ICE version 4
</I>&gt;<i> Info : lpc2148.cpu: hardware has 2 breakpoint/watchpoint units
</I>&gt;<i>
</I>
This seems to be a regression from OpenOCD 0.4.0.

<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">mcuee at ubuntu</A>:~/Desktop/build/openocd/lpc2148$
/usr/bin/openocd -f interface/jtagkey2.cfg  -f board/olimex_lpc_h2148.cfg
Open On-Chip Debugger 0.4.0 (2010-08-14-17:05)
Licensed under GNU GPL v2
For bug reports, read
	<A HREF="http://openocd.berlios.de/doc/doxygen/bugs.html">http://openocd.berlios.de/doc/doxygen/bugs.html</A>
RCLK - adaptive
jtag_nsrst_delay: 200
jtag_ntrst_delay: 200
trst_and_srst srst_pulls_trst srst_gates_jtag trst_push_pull srst_open_drain
Info : max TCK change to: 30000 kHz
Info : RCLK (adaptive clock speed)
Info : JTAG tap: lpc2148.cpu tap/device found: 0x4f1f0f0f (mfg: 0x787,
part: 0xf1f0, ver: 0x4)
Info : Embedded ICE version 4
Info : lpc2148.cpu: hardware has 2 breakpoint/watchpoint units

BTW, it seems to me DCC is not enabled by default.

&gt;<i> flash erase_sector 0 0 26
</I>erased sectors 0 through 26 on flash bank 0 in 0.144873s

&gt;<i> flash write_image lpc2148_demo.hex 0x0
</I>Verification will fail since checksum in image (0xe59ff004) to be
written to flash is different from calculated vector checksum
(0xb9205f88).
To remove this warning modify build tools on developer PC to inject
correct LPC vector checksum.
wrote 232748 bytes from file lpc2148_demo.hex in 11.702226s (19.423 kb/s)

&gt;<i> arm7_9 dcc_downloads enable
</I>dcc downloads are enabled

&gt;<i> flash erase_sector 0 0 26
</I>erased sectors 0 through 26 on flash bank 0 in 0.144249s

&gt;<i> flash write_image lpc2148_demo.hex 0x0
</I>Verification will fail since checksum in image (0xe59ff004) to be
written to flash is different from calculated vector checksum
(0xb9205f88).
To remove this warning modify build tools on developer PC to inject
correct LPC vector checksum.
wrote 232748 bytes from file lpc2148_demo.hex in 5.172287s (43.944 kb/s)



-- 
Xiaofan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016302.html">[Openocd-development] Typo in documentation of usb_blaster_vid_pid command
</A></li>
	<LI>Next message: <A HREF="016305.html">[Openocd-development] AVR32 support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16304">[ date ]</a>
              <a href="thread.html#16304">[ thread ]</a>
              <a href="subject.html#16304">[ subject ]</a>
              <a href="author.html#16304">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

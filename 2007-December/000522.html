<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] fileio.c/h fix for e.g. tftp support
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20fileio.c/h%20fix%20for%20e.g.%20tftp%20support&In-Reply-To=%3Cc09652430712192301u33264c7di82aa8bf7c5ff9293%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000521.html">
   <LINK REL="Next"  HREF="000523.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] fileio.c/h fix for e.g. tftp support</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20fileio.c/h%20fix%20for%20e.g.%20tftp%20support&In-Reply-To=%3Cc09652430712192301u33264c7di82aa8bf7c5ff9293%40mail.gmail.com%3E"
       TITLE="[Openocd-development] fileio.c/h fix for e.g. tftp support">oyvind.harboe at zylin.com
       </A><BR>
    <I>Thu Dec 20 08:01:21 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000521.html">[Openocd-development] fileio.c/h fix for e.g. tftp support
</A></li>
        <LI>Next message: <A HREF="000523.html">[Openocd-development] gprof profiling support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#522">[ date ]</a>
              <a href="thread.html#522">[ thread ]</a>
              <a href="subject.html#522">[ subject ]</a>
              <a href="author.html#522">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Dec 19, 2007 11:57 PM, Spen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">spen at spen-soft.co.uk</A>&gt; wrote:
&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">openocd-development-bounces at lists.berlios.de</A>
</I>&gt;<i> &gt; [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">openocd-development-bounces at lists.berlios.de</A>] On
</I>&gt;<i> &gt; Behalf Of Michael Fischer
</I>&gt;<i> &gt; Sent: 19 December 2007 21:19
</I>&gt;<i> &gt; To: Openocd-Dev
</I>&gt;<i> &gt; Subject: [Openocd-development] fileio.c/h fix for e.g. tftp support
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hello List,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I have added a patch which allows OpenOCD running under eCos
</I>&gt;<i> &gt; to access files via tftp.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> Michael,
</I>&gt;<i>
</I>&gt;<i> The changes I added to fileio.c (rev240) seem to have been removed, they
</I>&gt;<i> were only minor additions however - I will fix when I commit other changes.
</I>&gt;<i>
</I>&gt;<i> Would fstat not have worked as the file descriptor is already opened?
</I>
fstat() gets all sorts of information that is not relevant, e.g. tftp
has no concept
of e.g. file date, so no that won't work.

AFAIK, fseek + ftell is the ansi io way of getting the size when not
using fstat().

The alternative to getting the size is to read from the file until
actual is less than
requested, though I felt this was a bigger code change to OpenOCD for not
enough benefit at this point.

&gt;<i> I also think for neatness a FILEIO_TFTP fileio_location should be added -
</I>&gt;<i> unless I am missing something.
</I>
The TFTP is provided by the operating system, hence OpenOCD must pass
all paths it does not know about to the operating system.

Same thing as a pipe really.

There is no TFTP support in OpenOCD(this is provided by the OS), so I
don't think
there should be a FILEIO_TFTP.


-- 
&#216;yvind Harboe
<A HREF="http://www.zylin.com">http://www.zylin.com</A> - eCos ARM &amp; FPGA  developer kit

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000521.html">[Openocd-development] fileio.c/h fix for e.g. tftp support
</A></li>
	<LI>Next message: <A HREF="000523.html">[Openocd-development] gprof profiling support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#522">[ date ]</a>
              <a href="thread.html#522">[ thread ]</a>
              <a href="subject.html#522">[ subject ]</a>
              <a href="author.html#522">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

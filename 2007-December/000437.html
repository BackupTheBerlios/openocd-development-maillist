<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Search &amp; replace malloc	w/clearMalloc()?Probably fixes CFI blues...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Search%20%26%20replace%20malloc%0A%09w/clearMalloc%28%29%3FProbably%20fixes%20CFI%20blues...&In-Reply-To=%3C200712132210.23305.Dominic.Rath%40gmx.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000436.html">
   <LINK REL="Next"  HREF="000438.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Search &amp; replace malloc	w/clearMalloc()?Probably fixes CFI blues...</H1>
    <B>Dominic Rath</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Search%20%26%20replace%20malloc%0A%09w/clearMalloc%28%29%3FProbably%20fixes%20CFI%20blues...&In-Reply-To=%3C200712132210.23305.Dominic.Rath%40gmx.de%3E"
       TITLE="[Openocd-development] Search &amp; replace malloc	w/clearMalloc()?Probably fixes CFI blues...">Dominic.Rath at gmx.de
       </A><BR>
    <I>Thu Dec 13 22:10:22 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000436.html">[Openocd-development] Search &amp; replace malloc	w/clearMalloc()?Probably fixes CFI blues...
</A></li>
        <LI>Next message: <A HREF="000438.html">[Openocd-development] Search &amp; replace malloc	w/clearMalloc()?Probably fixes CFI blues...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#437">[ date ]</a>
              <a href="thread.html#437">[ thread ]</a>
              <a href="subject.html#437">[ subject ]</a>
              <a href="author.html#437">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Michael,

I'm not sure if it's a good idea to replace the mallocs with callocs. It only 
hides the problem (memory being used uninitialized) by initializing 
everything to zero - i'm not convinced if that's what we want.

Of course using an uninitialized value is a bug, and should be fixed, but 
replacing the mallocs with callocs would make that harder. Valgrind on linux 
for example shows all uses of uninitialized values, but that of course only 
works with malloc, not with calloc.

I hope to find some time this weekend to run a valgrind session, and if that 
doesn't work I'll have two weeks of holiday starting december 22nd during 
which I can spend more time on the OpenOCD.

Best regards,

Dominic

On Thursday 13 December 2007 21:22:43 Michael Fischer wrote:
&gt;<i> Hello list,
</I>&gt;<i>
</I>&gt;<i> I have now replaced all mallocs by clearMalloc and now the &quot;flash
</I>&gt;<i> erase_check&quot;
</I>&gt;<i> is working on the Ethernut3 :O)
</I>&gt;<i>
</I>&gt;<i> Many thanks to &#216;yvind for this hint!
</I>&gt;<i>
</I>&gt;<i> Here is my patch, I will check if debugging is working too and
</I>&gt;<i> commit it to the list. &#216;yvind has suggested that we can replace later
</I>&gt;<i> some of the clearMalloc back to malloc. But in the moment it looks
</I>&gt;<i> that this will fix it.
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i>
</I>&gt;<i> Michael
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000436.html">[Openocd-development] Search &amp; replace malloc	w/clearMalloc()?Probably fixes CFI blues...
</A></li>
	<LI>Next message: <A HREF="000438.html">[Openocd-development] Search &amp; replace malloc	w/clearMalloc()?Probably fixes CFI blues...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#437">[ date ]</a>
              <a href="thread.html#437">[ thread ]</a>
              <a href="subject.html#437">[ subject ]</a>
              <a href="author.html#437">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] ADuC 702x flash driver
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20ADuC%20702x%20flash%20driver&In-Reply-To=%3C48D56691.6090100%40duaneellis.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003162.html">
   <LINK REL="Next"  HREF="003164.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] ADuC 702x flash driver</H1>
    <B>Duane Ellis</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20ADuC%20702x%20flash%20driver&In-Reply-To=%3C48D56691.6090100%40duaneellis.com%3E"
       TITLE="[Openocd-development] ADuC 702x flash driver">openocd at duaneellis.com
       </A><BR>
    <I>Sat Sep 20 23:09:37 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003162.html">[Openocd-development] copyright patch
</A></li>
        <LI>Next message: <A HREF="003164.html">[Openocd-development] First line printed is now instructions on how	to report bugs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3163">[ date ]</a>
              <a href="thread.html#3163">[ thread ]</a>
              <a href="subject.html#3163">[ subject ]</a>
              <a href="author.html#3163">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wijlaars, M.W. wrote:
&gt;<i> Hello Duan,
</I>&gt;<i>
</I>&gt;<i> I've been trying to debug the code with printf and even tried with GDB (Still need to read &quot;The art of Debugginng&quot;). This is the first time I,ve used GDB so I'm a bit at lost.
</I>&gt;<i> The code segfaults somewhere in the server.c file. I think the segfault occurs inside the server_loop function and I suppose it segfaults because the new flash driver functions are not known of not called correctly. I'm not sure why but GDB tells me the segfault occurs in an unknown function al line &quot;&quot;. I'll probably will continue debugging and keep you informed.
</I>&gt;<i> If it will help get the openocd flash code working correctly with the ADuC702x micro controller I can send you a very exprimental PCB with the ADuC702x and a JTAG interface on it which I'm developing.
</I>&gt;<i>
</I>&gt;<i> Cheers Marcel Wijlaars
</I>&gt;<i>
</I>&gt;<i>   
</I>
1) A helpful command - when it dies (in gdb) a horrible death is &quot;bt&quot; 
-for back trace. It would un-wind the entire call stack.

You can then see where you came from.

2) Why no symbols? Not sure why, try this:

 When you &quot;./configure&quot; openocd, type these commands.

    bash$   CFLAGS=-ggdb
    bash$   export CFLAGS
    bash$   ./configure  -what-ever-options-you-normally-use

The option, to be clear is:   &lt;dash&gt;&lt;g&gt;&lt;g&gt;&lt;d&gt;&lt;b&gt;, with 2 Gs.

3) Then build openocd, by doing that, it should include a full set of 
debug records in the EXE file for GDB.
    Perhaps openocd is being built without debug information.

4) &gt;&gt; I can send you a very exprimental PCB

    Another toy? Hmm Interesting, you (.nl) are across the pond from me 
(us) It would be costly for you, and take a while days to get here. 
Perhaps we can solve it this way a little faster.

5) Why don't you use the LOG_DEBUG(&quot;I am here&quot;) macro - and place it all 
over your code.
    The macro works just like printf() - and - includes the filename, 
line number, and function.

    Then - all you need to do is start OpenOCD with the &quot;-d&quot; option
    Or - add the &quot;debug_level 3&quot; command to your 'openocd.cfg' file.

    You should - be able to do a &quot;binary search&quot; and narrow this down 
rather quickly.

-Duane.











</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003162.html">[Openocd-development] copyright patch
</A></li>
	<LI>Next message: <A HREF="003164.html">[Openocd-development] First line printed is now instructions on how	to report bugs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3163">[ date ]</a>
              <a href="thread.html#3163">[ thread ]</a>
              <a href="subject.html#3163">[ subject ]</a>
              <a href="author.html#3163">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] The problem with testing target hardware
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20The%20problem%20with%20testing%20target%20hardware&In-Reply-To=%3C49EF6FF9.8040508%40softplc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005604.html">
   <LINK REL="Next"  HREF="005615.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] The problem with testing target hardware</H1>
    <B>Dick Hollenbeck</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20The%20problem%20with%20testing%20target%20hardware&In-Reply-To=%3C49EF6FF9.8040508%40softplc.com%3E"
       TITLE="[Openocd-development] The problem with testing target hardware">dick at softplc.com
       </A><BR>
    <I>Wed Apr 22 21:28:57 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005604.html">[Openocd-development] The problem with testing target hardware
</A></li>
        <LI>Next message: <A HREF="005615.html">[Openocd-development] The problem with testing target hardware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5605">[ date ]</a>
              <a href="thread.html#5605">[ thread ]</a>
              <a href="subject.html#5605">[ subject ]</a>
              <a href="author.html#5605">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Zach Welch wrote:
&gt;<i> On Wed, 2009-04-22 at 19:52 +0200, &#216;yvind Harboe wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> One annoying problem is that all target hardware is
</I>&gt;&gt;<i> not available to all OpenOCD developers.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For development purposes, this could perhaps be
</I>&gt;&gt;<i> addressed by creating a JTAG over TCP/IP protocol.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The idea is that OpenOCD adds a TCP/IP server
</I>&gt;&gt;<i> that accepts JTAG commands.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Those with target hardware can then make this hardware
</I>&gt;&gt;<i> available over the internet.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On the other end an OpenOCD developer uses the
</I>&gt;&gt;<i> new &quot;tcipip interface&quot; to connect to the target hardware.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This will of course be dog slow, but it hopefully will beat
</I>&gt;&gt;<i> not having the hardware available....
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There is a non-trivial amount of programming that needs
</I>&gt;&gt;<i> to be done, but I believe setting up and maintaining the
</I>&gt;&gt;<i> test farm would be a bigger problem. Zylin is interested
</I>&gt;&gt;<i> in stepping up here and offering the physical space
</I>&gt;&gt;<i> / servers required.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'd expect to make these targets avaiable via SSH &amp; port
</I>&gt;&gt;<i> forwarding to OpenOCD developers...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thoughts?
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> I love it.  Positively love it.
</I>&gt;<i>
</I>&gt;<i> I have a strong networking background, so I could whip up an example
</I>&gt;<i> some free afternoon.  I do not see why it would be slow.  Even 10Mbit/s
</I>&gt;<i> easily gives 50kB/s+ over the wire, and I bet many of us are running at
</I>&gt;<i> least 100Mbit/s.  I think the JTAG interface will remain the bottleneck
</I>&gt;<i> if this runs on a local network.  Incidentally, I seem to recall reading
</I>&gt;<i> about an official IEEE JTAG-over-ethernet protocol somewhere.
</I>&gt;<i>
</I>&gt;<i> Of course, you say that you want to do this for remote development over
</I>&gt;<i> the internet.  Ummm....  I have to reach over and physically reset my
</I>&gt;<i> target or JTAG interface on occasion.  I love the enthusiasm, but there
</I>&gt;<i> are some limits to the power of remote software control.  Or do you have
</I>&gt;<i> a remote telepresence solution on hand that you failed to mention?
</I>&gt;<i>
</I>&gt;<i> More practically, this would allow companies to use dumb programmer PCs
</I>&gt;<i> on the factory floor that are controlled by a (distantly) remote
</I>&gt;<i> station; much easier to secure the proprietary sources from industrial
</I>&gt;<i> espionage.  That begs me to ask: does anyone here worry about this type
</I>&gt;<i> of issue?  If you do, would you even be able to tell us about it? ;)
</I>&gt;<i>
</I>&gt;<i> Nevertheless, this idea allows me to introduce the full potential that
</I>&gt;<i> you have just presented to the OpenOCD project:
</I>&gt;<i>
</I>&gt;<i> Given the cost of a netbook plus USB JTAG dongle, wouldn't these
</I>&gt;<i> features undercut the price of ethernet-based JTAG programmer/debuggers
</I>&gt;<i> out on the market today?  Why not just use this proposed TCP/IP JTAG
</I>&gt;<i> layer between a PC and commodity part devices?  
</I>&gt;<i>
</I>&gt;<i> If my reading of this is correct, you are interested in offering your
</I>&gt;<i> resources to an endeavor that might cannibalize your sales.  Whoops.
</I>&gt;<i> Talk about looking the gift horse in the mouth.  But if you are still
</I>&gt;<i> interested, I think it's a great idea and worth pursuing.  It has made
</I>&gt;<i> it on The List, and it's not going away without a pay-off.  ;)  Kidding!
</I>&gt;<i>   
</I>
What he said, but LOUDER.

&gt;<i> Rick's points about clean-up and testing do apply, though.  I would not
</I>&gt;<i> want to start that without a lot of additional low-level grunt work.
</I>&gt;<i>   
</I>

No, these are not mutually exclusive or sequentially dependent tasks, so 
I disagree with the idea that something needs to be done first.



The idea of serializing the entire &quot;cable API&quot; into a byte oriented 
command/reply sequence has some interesting spin off possibilities:



1)  The implication of this is that anything can be sent to ANY 
supported JTAG cable can also be sent over the TCP/IP wire.   And once 
this becomes, true, I would argue that we *could*  simply use the same 
marshalling support as our cable API at some point.   The entire cable 
API becomes something like this *one* function:


ERRCODE transact( u8* command, int commandLen,  u8* reply, int* replyLen )


2) The client program no longer needs to be OpenOCD on the other end.   
Then I could finally put some python code on top of a cable driver for 
real scripting, not this watered down tcl crap.



3) If you don't like a separate process for your scripting, and don't 
like tcl,  (me stepping forward) you could grab any cable driver and 
SWIG python right on top of it, in process, by defining only *one* 
function as the entire language bridge API, plus some hand written 
marshalling/de-marshalling support.  This would be after the cable 
driver API went to transact().


If I recall the BDM2000 folks have an API that consists of about exactly 
one function.   It wreaks of ioctl() but there is little that is more 
standard than a sequence of bytes.


Dick



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005604.html">[Openocd-development] The problem with testing target hardware
</A></li>
	<LI>Next message: <A HREF="005615.html">[Openocd-development] The problem with testing target hardware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5605">[ date ]</a>
              <a href="thread.html#5605">[ thread ]</a>
              <a href="subject.html#5605">[ subject ]</a>
              <a href="author.html#5605">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

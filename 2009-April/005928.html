<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] C99 compatibility (Was: MSVC compatibility (Was: [PATCH] CMake))
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20C99%20compatibility%20%28Was%3A%20MSVC%0A%20compatibility%20%28Was%3A%20%5BPATCH%5D%20CMake%29%29&In-Reply-To=%3C1241039765.32273.1095.camel%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005921.html">
   <LINK REL="Next"  HREF="005930.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] C99 compatibility (Was: MSVC compatibility (Was: [PATCH] CMake))</H1>
    <B>Zach Welch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20C99%20compatibility%20%28Was%3A%20MSVC%0A%20compatibility%20%28Was%3A%20%5BPATCH%5D%20CMake%29%29&In-Reply-To=%3C1241039765.32273.1095.camel%40localhost%3E"
       TITLE="[Openocd-development] C99 compatibility (Was: MSVC compatibility (Was: [PATCH] CMake))">zw at superlucidity.net
       </A><BR>
    <I>Wed Apr 29 23:16:05 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005921.html">[Openocd-development] MSVC compatibility (Was: [PATCH] CMake)
</A></li>
        <LI>Next message: <A HREF="005930.html">[Openocd-development] C99 compatibility (Was: MSVC compatibility (Was: [PATCH] CMake))
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5928">[ date ]</a>
              <a href="thread.html#5928">[ thread ]</a>
              <a href="subject.html#5928">[ subject ]</a>
              <a href="author.html#5928">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2009-04-29 at 13:24 -0500, Dick Hollenbeck wrote:
[snip]
&gt;<i> The C99 stuff is purely arbitrary IMO, there is almost always another 
</I>&gt;<i> way to code those things.   And rather than ifdef-ing them out, I would 
</I>&gt;<i> simply find that other way and offer those changes as patches, removing 
</I>&gt;<i> the C99 support altogether if this is really worth your time.
</I>
We are talking about removing support for a standard that is supported
by most modern compilers, in order to support an old compiler on one
platform, right?  If anything, I think the code should be moving in the
opposite direction.  I would like to see us embrace using C99 features,
abandoning support for compilers unable to support a standard that is
now a decade old.  

&gt;<i>From what I can tell based on feedback to the list, the majority -- if
</I>not all -- of developers are using GCC to build OpenOCD.  That does not
mean we should support GCC only, but it does suggest that we should work
on moving forward -- not back.  MSVC is the first problematic complier
that I have seen reported, and members of the community already have
working CygWin and MinGW32 builds.

While I do not want to prejudge without first seeing a patch, there are
numerous idiomatic expressions required to preserve compatibility with
old compilers, which I believe detract from the readability of the code.
I mean, is it really necessary to continue to place variables at the
start of a block?  Would it be so wrong to declare iterator variables in
for loops to limit their available scope?  Aside from MSVC, are there
really other compilers in use here that will not accept such code?

This group has talked about using trying to use C++ features; why not
simply start by adopting C99 features?  I would not consider using the
former language without a complete rewrite, but my recent spate of
cleaning for C99 seems to have been well received by community. Treating
errors as warnings has not exposed irreconcilable problems from what I
can tell.  OpenOCD appears to be ready to move to C99 today, why give
that up?  Note: I am not suggesting we use all C99 features like inline
functions or even variable-length arrays, just avoid moving backwards.

Due to the lack of prior opposition, I had been debating whether to
simply commit a change that adds -std=c99 and seeing how the community
reacts (since I can now revert it quickly if it poses a real problem). 
As there has been a lot going on, I was trying to avoid the distraction
of this debate, but this thread prompts more immediate consideration.

Cheers,

Zach


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005921.html">[Openocd-development] MSVC compatibility (Was: [PATCH] CMake)
</A></li>
	<LI>Next message: <A HREF="005930.html">[Openocd-development] C99 compatibility (Was: MSVC compatibility (Was: [PATCH] CMake))
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5928">[ date ]</a>
              <a href="thread.html#5928">[ thread ]</a>
              <a href="subject.html#5928">[ subject ]</a>
              <a href="author.html#5928">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] PATCH: flash driver cleanup
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20PATCH%3A%20flash%20driver%20cleanup&In-Reply-To=%3C1239945408.16533.309.camel%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005371.html">
   <LINK REL="Next"  HREF="005364.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] PATCH: flash driver cleanup</H1>
    <B>Zach Welch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20PATCH%3A%20flash%20driver%20cleanup&In-Reply-To=%3C1239945408.16533.309.camel%40localhost%3E"
       TITLE="[Openocd-development] PATCH: flash driver cleanup">zw at superlucidity.net
       </A><BR>
    <I>Fri Apr 17 07:16:48 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005371.html">[Openocd-development] [PATCH] CMake scripts
</A></li>
        <LI>Next message: <A HREF="005364.html">[Openocd-development] PATCH: flash driver cleanup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5363">[ date ]</a>
              <a href="thread.html#5363">[ thread ]</a>
              <a href="subject.html#5363">[ subject ]</a>
              <a href="author.html#5363">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I have attached two patches to help clean up OpenOCD's flash drivers.

The first patch changes most of the driver routines to static where
possible, removing unused data and functions from the build with
preprocessor #if 0 blocks.  While the patch is large, this should be
fairly easy to review as the changes are all uniformly the same.

Someone more experienced with these drivers might take a look at those
functions that are no longer being called from within the tree.
Specifically, the following flash drivers appear to have routines that
do not appear to be connected to anything: at91sam7, nand, pic32mx,
stellaris, stm32x, str7x, str9x.  These bits of code should be either be
(re)connected or removed.  I might be convinced to do some of this work,
if others can clarify the proper actions.

The second patch then fixes an off-by-one problem that was exposed with
GCC 4.3.2.  It should be trivial to review and accept.

Cheers,

Zach

-------------- next part --------------
A non-text attachment was scrubbed...
Name: openocd-flash-static-keyword.patch
Type: text/x-patch
Size: 137410 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20090416/2b8c7370/attachment.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20090416/2b8c7370/attachment.bin</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: openocd-lpc2000-fix-erase-obo.patch
Type: text/x-patch
Size: 363 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20090416/2b8c7370/attachment-0001.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20090416/2b8c7370/attachment-0001.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005371.html">[Openocd-development] [PATCH] CMake scripts
</A></li>
	<LI>Next message: <A HREF="005364.html">[Openocd-development] PATCH: flash driver cleanup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5363">[ date ]</a>
              <a href="thread.html#5363">[ thread ]</a>
              <a href="subject.html#5363">[ subject ]</a>
              <a href="author.html#5363">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

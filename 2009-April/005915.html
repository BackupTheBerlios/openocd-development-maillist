<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] MSVC compatibility (Was: [PATCH] CMake)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20MSVC%20compatibility%20%28Was%3A%20%5BPATCH%5D%20CMake%29&In-Reply-To=%3C49F86870.5010604%40softplc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005911.html">
   <LINK REL="Next"  HREF="005917.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] MSVC compatibility (Was: [PATCH] CMake)</H1>
    <B>Dick Hollenbeck</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20MSVC%20compatibility%20%28Was%3A%20%5BPATCH%5D%20CMake%29&In-Reply-To=%3C49F86870.5010604%40softplc.com%3E"
       TITLE="[Openocd-development] MSVC compatibility (Was: [PATCH] CMake)">dick at softplc.com
       </A><BR>
    <I>Wed Apr 29 16:47:12 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005911.html">[Openocd-development] MSVC compatibility (Was: [PATCH] CMake)
</A></li>
        <LI>Next message: <A HREF="005917.html">[Openocd-development] MSVC compatibility (Was: [PATCH] CMake)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5915">[ date ]</a>
              <a href="thread.html#5915">[ thread ]</a>
              <a href="subject.html#5915">[ subject ]</a>
              <a href="author.html#5915">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Igor Skochinsky wrote:
&gt;<i> Hello All,
</I>&gt;<i>
</I>&gt;<i> Tuesday, April 28, 2009, 7:29:46 PM, Dick wrote:
</I>&gt;<i>
</I>&gt;<i> DH&gt; Latest.
</I>&gt;<i> DH&gt; Paaleese commit any time.
</I>&gt;<i>
</I>&gt;<i> So I decided to try the legendary CMake compatibility and compile
</I>&gt;<i> OpenOCD with native Win32 MSVC. The makefile generation went mostly
</I>&gt;<i> without a hitch, but the actual compilation ran into a lot of issues,
</I>&gt;<i> mainly because of C99 and GNU-specific features.
</I>&gt;<i>
</I>&gt;<i> Main issues:
</I>&gt;<i>
</I>&gt;<i> 1) variable declarations not at the start of block
</I>&gt;<i> 2) designated initializers (.field = value)
</I>&gt;<i> 3) no unistd.h
</I>&gt;<i>
</I>&gt;<i> I've been going through the files trying to fix it up and now have
</I>&gt;<i> most of it compiling, but I wonder if this will be useful for anyone
</I>&gt;<i> else? Or C99 will be required for OpenOCD?
</I>&gt;<i>   
</I>
Igor,

First, thanks for trying it.

Please always state your build environment.  What operating system, and 
what tool chain is it trying to use?

    mingw32?
    cygwin?


I will assume windows in the discussion below:

Then be aware of my remarks that it has not been tested on Windows.  
There is some massaging required.  It would only take about an hour to 
get it to work on windows, but my Windows days are mostly over.

To deal with your issues, and assuming Windows, I would stick with the 
GNU compiler as your first attempt, and this means Mingw.  So when 
generating your make files, be sure and use the command line option with 
tells it to use Mingw, not MS VC.  Also make sure all your toolchain 
commands are in your path, including svn client and gcc.

You are blazing a trail.  You are leader, and as such there will be some 
experimentation required.   Here is a hint:

           
<A HREF="http://www.cmake.org/cmake/help/cmake2.6docs.html#opt:-Ggenerator-name">http://www.cmake.org/cmake/help/cmake2.6docs.html#opt:-Ggenerator-name</A>

Read the section on &quot;generators&quot; and stick with gnu gcc from mingw and 
you should get through it.

Regards,

Dick



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005911.html">[Openocd-development] MSVC compatibility (Was: [PATCH] CMake)
</A></li>
	<LI>Next message: <A HREF="005917.html">[Openocd-development] MSVC compatibility (Was: [PATCH] CMake)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5915">[ date ]</a>
              <a href="thread.html#5915">[ thread ]</a>
              <a href="subject.html#5915">[ subject ]</a>
              <a href="author.html#5915">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] MSVC compatibility (Was: [PATCH] CMake)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20MSVC%20compatibility%20%28Was%3A%20%5BPATCH%5D%20CMake%29&In-Reply-To=%3C49F89B72.10305%40softplc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005917.html">
   <LINK REL="Next"  HREF="005928.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] MSVC compatibility (Was: [PATCH] CMake)</H1>
    <B>Dick Hollenbeck</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20MSVC%20compatibility%20%28Was%3A%20%5BPATCH%5D%20CMake%29&In-Reply-To=%3C49F89B72.10305%40softplc.com%3E"
       TITLE="[Openocd-development] MSVC compatibility (Was: [PATCH] CMake)">dick at softplc.com
       </A><BR>
    <I>Wed Apr 29 20:24:50 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005917.html">[Openocd-development] MSVC compatibility (Was: [PATCH] CMake)
</A></li>
        <LI>Next message: <A HREF="005928.html">[Openocd-development] C99 compatibility (Was: MSVC compatibility (Was: [PATCH] CMake))
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5921">[ date ]</a>
              <a href="thread.html#5921">[ thread ]</a>
              <a href="subject.html#5921">[ subject ]</a>
              <a href="author.html#5921">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> As I said, the makefile generation mostly works &quot;out of box&quot; (I only
</I>&gt;<i> had to specifty location of libftd2xx manually). Right now I'm trying
</I>&gt;<i> nmake makefiles, not VS projects.
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> To deal with your issues, and assuming Windows, I would stick with the GNU
</I>&gt;&gt;<i> compiler as your first attempt, and this means Mingw.  So when generating
</I>&gt;&gt;<i> your make files, be sure and use the command line option with tells it to
</I>&gt;&gt;<i> use Mingw, not MS VC.  Also make sure all your toolchain commands are in
</I>&gt;&gt;<i> your path, including svn client and gcc.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> I know that it can be compiled with mingw and have done it myself.
</I>&gt;<i>   
</I>Wonderful.  It would be great if you can document your success in the 
form of a step by step procedure for the benefit of other Windows 
users.  With that kind of infrastructure then I think it becomes easier 
to get this patch into the tree.  This might start as an email, and 
evolve to a cmake-howto.txt file that becomes part of the tree.

&gt;<i> What I'm interested in now is making a pure msvc build, with no
</I>&gt;<i> Unix-specific headers and libraries. But this means getting rid of all
</I>&gt;<i> C99 and GNU stuff (besides what can be fixes with #defines, like
</I>&gt;<i> __attribute__). Is that something that can be considered for OpenOCD
</I>&gt;<i> at all, or completely out of question? The changes required so far are
</I>&gt;<i> not really substantial, if a bit tedious to do.
</I>&gt;<i>   
</I>
If you were to migrate things into header files where possible, so that 
the number of #ifdefs and what not are limited in there rather than 
being sprinkled about the *.c code, then I doubt anybody would have 
strong objections to changes in source that don't break already 
supported toolchains.   Having said that, the mingw support on windows 
is excellent.  And I do not share your same degree of enthusiasm for 
going to MS VC.  But this is the nature of open source, freedom of choice.

One of the things that can also be considered with Cmake is to generate 
a windows binary from linux.  That might interest me.

If you cannot get your patches accepted, we can always create a small 
band of rebels and fork the project.


The C99 stuff is purely arbitrary IMO, there is almost always another 
way to code those things.   And rather than ifdef-ing them out, I would 
simply find that other way and offer those changes as patches, removing 
the C99 support altogether if this is really worth your time.


I do not yet have write access to the repository, but I can offer my 
&quot;verbal&quot; support, since I have so many years writing code.  And I would 
not hesitate to help fork the project if we had sufficient critical mass 
behind it, inclusive of good reasons.


Dick



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005917.html">[Openocd-development] MSVC compatibility (Was: [PATCH] CMake)
</A></li>
	<LI>Next message: <A HREF="005928.html">[Openocd-development] C99 compatibility (Was: MSVC compatibility (Was: [PATCH] CMake))
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5921">[ date ]</a>
              <a href="thread.html#5921">[ thread ]</a>
              <a href="subject.html#5921">[ subject ]</a>
              <a href="author.html#5921">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

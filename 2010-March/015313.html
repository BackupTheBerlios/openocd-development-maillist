<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Unused symbols; Global vs Static
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-March/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Unused%20symbols%3B%20Global%20vs%20Static&In-Reply-To=%3Ce77c29221003232137r4119ce20pa17306eb11231441%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015311.html">
   <LINK REL="Next"  HREF="015314.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Unused symbols; Global vs Static</H1>
    <B>Antonio Borneo</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Unused%20symbols%3B%20Global%20vs%20Static&In-Reply-To=%3Ce77c29221003232137r4119ce20pa17306eb11231441%40mail.gmail.com%3E"
       TITLE="[Openocd-development] Unused symbols; Global vs Static">borneo.antonio at gmail.com
       </A><BR>
    <I>Wed Mar 24 05:37:18 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="015311.html">[Openocd-development] Unused symbols; Global vs Static
</A></li>
        <LI>Next message: <A HREF="015314.html">[Openocd-development] Unused symbols; Global vs Static
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15313">[ date ]</a>
              <a href="thread.html#15313">[ thread ]</a>
              <a href="subject.html#15313">[ subject ]</a>
              <a href="author.html#15313">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In attachment first 2 patches of what seems to be a long sequence.
Them cleanup just one C file.
I have split in one patch just adding &quot;static&quot; keyword and one just
removing unused function.
I let you decide to proceed removing unused code right now, or just
add those identifiers in a list of to-be-removed-soon items.

In case somebody wants contribute, in attachment the script I'm using to find:
- local identifiers with global scope and
- unused global identifiers.

You need to successfully compile OpenOCD, then run the script in the
same directory in which you have typed &quot;make&quot;.
You will get the list in alphabetic order.

Explanation of the script:
- get all symbols from all &quot;.o&quot; files
- remove symbol address, useless
- change &quot;U&quot; type for &quot;undefined&quot; symbol with a char (&quot;0&quot;) that has
lowest ascii code
- sort by symbol name and then by type
- print symbols that has &quot;global&quot; scope somewhere (uppercase type) but
never appears as &quot;undefined&quot;, so never referenced, in any other place

I'm sure there are much better tools for similar code analysis,
without passing through compiling the code.
Any comment is welcome

Best Regards,
Antonio Borneo
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0001-server-review-scope-of-functions-and-data.patch
Type: text/x-patch
Size: 1679 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20100324/4b27d2c9/attachment.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20100324/4b27d2c9/attachment.bin</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0002-server-review-unused-symbols.patch
Type: text/x-patch
Size: 1148 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20100324/4b27d2c9/attachment-0001.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20100324/4b27d2c9/attachment-0001.bin</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: search.sh
Type: application/x-sh
Size: 191 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20100324/4b27d2c9/attachment.sh">https://lists.berlios.de/pipermail/openocd-development/attachments/20100324/4b27d2c9/attachment.sh</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015311.html">[Openocd-development] Unused symbols; Global vs Static
</A></li>
	<LI>Next message: <A HREF="015314.html">[Openocd-development] Unused symbols; Global vs Static
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15313">[ date ]</a>
              <a href="thread.html#15313">[ thread ]</a>
              <a href="subject.html#15313">[ subject ]</a>
              <a href="author.html#15313">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

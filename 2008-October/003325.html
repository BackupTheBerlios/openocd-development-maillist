<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] &quot;arm7_9 fast_memory_access enable&quot; work in	Windows but not in Ubuntu 7.10:couldn't write MPSSE commands	to FT2232
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-October/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%22arm7_9%20fast_memory_access%20enable%22%20work%20in%0A%09Windows%20but%20not%20in%20Ubuntu%207.10%3Acouldn%27t%20write%20MPSSE%20commands%0A%09to%20FT2232&In-Reply-To=%3C200810110238023431511%40sina.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003342.html">
   <LINK REL="Next"  HREF="003326.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] &quot;arm7_9 fast_memory_access enable&quot; work in	Windows but not in Ubuntu 7.10:couldn't write MPSSE commands	to FT2232</H1>
    <B>dswei</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%22arm7_9%20fast_memory_access%20enable%22%20work%20in%0A%09Windows%20but%20not%20in%20Ubuntu%207.10%3Acouldn%27t%20write%20MPSSE%20commands%0A%09to%20FT2232&In-Reply-To=%3C200810110238023431511%40sina.com%3E"
       TITLE="[Openocd-development] &quot;arm7_9 fast_memory_access enable&quot; work in	Windows but not in Ubuntu 7.10:couldn't write MPSSE commands	to FT2232">dswei99 at sina.com
       </A><BR>
    <I>Fri Oct 10 20:38:05 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003342.html">[Openocd-development] Fix for DCC downloads crashing
</A></li>
        <LI>Next message: <A HREF="003326.html">[Openocd-development] [PATCH] - GDB Protocol Hickup Fix (Dropped	ACKs)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3325">[ date ]</a>
              <a href="thread.html#3325">[ thread ]</a>
              <a href="subject.html#3325">[ subject ]</a>
              <a href="author.html#3325">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>HI, all:
   In my openocd.cfg, I add &quot;arm7_9 fast_memory_access enable&quot;. In Windows, it work well , and make the 
download speed to sdram  6 or 7 times faster; But in Ubuntu 7.10, it causes some error.

   The log are listed below:
1. Log of openocd
$ openocd 
Open On-Chip Debugger 1.0 (2008-10-04-09:26) svn:717
$URL: <A HREF="svn://svn.berlios.de/openocd/trunk/src/openocd.c">svn://svn.berlios.de/openocd/trunk/src/openocd.c</A> $
Info:    options.c:50 configuration_output_handler(): jtag_speed: 0, 0
Info:    options.c:50 configuration_output_handler(): Open On-Chip Debugger 1.0 (2008-10-04-09:26) svn:717
Info:    options.c:50 configuration_output_handler(): fast memory access is enabled
Debug:   21 86 command.c:432 command_run_line(): nand device s3c2440 0
Debug:   23 109 command.c:432 command_run_line(): run_and_halt_time 0 5000
Debug:   25 120 command.c:432 command_run_line(): ft2232_device_desc &quot;USB&lt;=&gt;JTAG&amp;RS232&quot;
Debug:   27 130 command.c:432 command_run_line(): init
Debug:   28 145 openocd.c:102 handle_init_command(): target init complete
Debug:   29 145 ft2232.c:1501 ft2232_init_libftdi(): 'ft2232' interface using libftdi with 'jtagkey' layout (1457:5118)
Debug:   30 276 ft2232.c:1543 ft2232_init_libftdi(): current latency timer: 2
Debug:   31 290 ft2232.c:1729 jtagkey_init(): 80 08 1b
Debug:   32 307 ft2232.c:1787 jtagkey_init(): 82 09 0f
Debug:   33 319 ft2232.c:253 ft2232_speed(): 86 00 00
Debug:   34 343 openocd.c:109 handle_init_command(): jtag interface init complete
Debug:   35 343 jtag.c:1537 jtag_init_inner(): Init JTAG chain
Debug:   36 358 jtag.c:326 jtag_call_event_callbacks(): jtag event: JTAG controller reset (TLR or TRST)
Debug:   37 358 jtag.c:1295 jtag_reset_callback(): -
Debug:   38 372 jtag.c:326 jtag_call_event_callbacks(): jtag event: JTAG controller reset (TLR or TRST)
Debug:   39 383 jtag.c:1295 jtag_reset_callback(): -
Info:    40 406 jtag.c:1389 jtag_examine_chain(): JTAG device found: 0x0032409d (Manufacturer: 0x04e, Part: 0x0324, Version: 0x0)
Debug:   41 406 jtag.c:326 jtag_call_event_callbacks(): jtag event: JTAG controller reset (TLR or TRST)
Debug:   42 430 jtag.c:1295 jtag_reset_callback(): -
Debug:   43 449 openocd.c:116 handle_init_command(): jtag init complete
Debug:   44 472 openocd.c:119 handle_init_command(): jtag examine complete
Debug:   45 472 openocd.c:126 handle_init_command(): flash init complete
Debug:   46 485 openocd.c:130 handle_init_command(): NAND init complete
Debug:   47 485 openocd.c:134 handle_init_command(): pld init complete
Debug:   48 485 gdb_server.c:2036 gdb_init(): gdb service for target arm920t at port 3333
Info:    49 3612 server.c:78 add_connection(): accepting 'telnet' connection from 0
Debug:   51 5202 command.c:432 command_run_line(): halt
Debug:   52 5202 target.c:1823 handle_halt_command(): -
Debug:   53 5202 arm7_9_common.c:960 arm7_9_halt(): target-&gt;state: running
Debug:   54 5202 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000002
Debug:   55 5228 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000005
Debug:   56 5228 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000005
Debug:   57 5234 arm7_9_common.c:1074 arm7_9_debug_entry(): target entered debug from ARM state
Debug:   58 5252 arm7_9_common.c:1106 arm7_9_debug_entry(): target entered debug state in Supervisor mode
Debug:   59 5252 arm7_9_common.c:1137 arm7_9_debug_entry(): r0: 0x00000000
Debug:   60 5252 arm7_9_common.c:1137 arm7_9_debug_entry(): r1: 0x00000000
Debug:   61 5252 arm7_9_common.c:1137 arm7_9_debug_entry(): r2: 0x53000000
Debug:   62 5252 arm7_9_common.c:1137 arm7_9_debug_entry(): r3: 0x00000021
Debug:   63 5252 arm7_9_common.c:1137 arm7_9_debug_entry(): r4: 0x33fab4b8
Debug:   64 5252 arm7_9_common.c:1137 arm7_9_debug_entry(): r5: 0x00000001
Debug:   65 5253 arm7_9_common.c:1137 arm7_9_debug_entry(): r6: 0x33f4dca4
Debug:   66 5253 arm7_9_common.c:1137 arm7_9_debug_entry(): r7: 0x33f4dded
Debug:   67 5253 arm7_9_common.c:1137 arm7_9_debug_entry(): r8: 0x33f4ffdc
Debug:   68 5253 arm7_9_common.c:1137 arm7_9_debug_entry(): r9: 0x00000000
Debug:   69 5253 arm7_9_common.c:1137 arm7_9_debug_entry(): r10: 0x33f4dced
Debug:   70 5253 arm7_9_common.c:1137 arm7_9_debug_entry(): r11: 0x33f4dded
Debug:   71 5253 arm7_9_common.c:1137 arm7_9_debug_entry(): r12: 0x33f9bf78
Debug:   72 5253 arm7_9_common.c:1137 arm7_9_debug_entry(): r13: 0x33f4db94
Debug:   73 5253 arm7_9_common.c:1137 arm7_9_debug_entry(): r14: 0x33f9bf88
Debug:   74 5253 arm7_9_common.c:1137 arm7_9_debug_entry(): r15: 0x0194883c
Debug:   75 5253 arm7_9_common.c:1143 arm7_9_debug_entry(): entered debug state at PC 0x194883c
Debug:   76 5274 arm920t.c:448 arm920t_post_debug_entry(): cp15_control_reg: 00000078
Debug:   77 5455 arm920t.c:470 arm920t_post_debug_entry(): D FSR: 0x000000f7, D FAR: 0xffffff7f, I FSR: 0x000000e2, I FAR: 0x00000000
Debug:   78 5455 target.c:724 target_call_event_callbacks(): target event 0
User:    79 5455 target.c:957 target_arch_state(): target state: halted
User:    80 5455 arm920t.c:574 arm920t_arch_state(): target halted in ARM state due to debug request, current mode: Supervisor
cpsr: 0x200000d3 pc: 0x0194883c
MMU: disabled, D-Cache: disabled, I-Cache: disabled
Debug:   82 13719 command.c:432 command_run_line(): load_image init/init.bin 0
Debug:   83 13720 configuration.c:87 open_file_from_path(): opened init/init.bin
Debug:   84 13720 configuration.c:87 open_file_from_path(): opened init/init.bin
Debug:   85 13720 target.c:979 target_write_buffer(): writing buffer of 288 byte at 0x00000000
Debug:   86 13720 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000004
Debug:   87 13720 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000005
Debug:   89 16512 command.c:432 command_run_line(): resume 0
Debug:   90 16512 arm7_9_common.c:1467 arm7_9_resume(): -
Debug:   91 16512 arm7_9_common.c:1264 arm7_9_restore_context(): -
Debug:   92 16622 arm7_9_common.c:1283 arm7_9_restore_context(): examining User mode
Debug:   93 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r0
Debug:   94 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r1
Debug:   95 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r2
Debug:   96 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r3
Debug:   97 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r4
Debug:   98 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r5
Debug:   99 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r6
Debug:   100 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r7
Debug:   101 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r8
Debug:   102 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r9
Debug:   103 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r10
Debug:   104 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r11
Debug:   105 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r12
Debug:   106 16622 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: pc
Debug:   107 16622 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 0 of mode User with value 0x00000000
Debug:   108 16622 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 1 of mode User with value 0x00000000
Debug:   109 16622 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 2 of mode User with value 0x53000000
Debug:   110 16622 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 3 of mode User with value 0x00000021
Debug:   111 16622 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 4 of mode User with value 0x33fab4b8
Debug:   112 16622 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 5 of mode User with value 0x00000001
Debug:   113 16622 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 6 of mode User with value 0x33f4dca4
Debug:   114 16622 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 7 of mode User with value 0x33f4dded
Debug:   115 16622 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 8 of mode User with value 0x33f4ffdc
Debug:   116 16622 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 9 of mode User with value 0x00000000
Debug:   117 16623 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 10 of mode User with value 0x33f4dced
Debug:   118 16623 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 11 of mode User with value 0x33f4dded
Debug:   119 16623 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 12 of mode User with value 0x33f9bf78
Debug:   120 16623 arm7_9_common.c:1283 arm7_9_restore_context(): examining FIQ mode
Debug:   121 16623 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: pc
Debug:   122 16623 arm7_9_common.c:1283 arm7_9_restore_context(): examining IRQ mode
Debug:   123 16623 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: pc
Debug:   124 16623 arm7_9_common.c:1283 arm7_9_restore_context(): examining Supervisor mode
Debug:   125 16623 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: r13_svc
Debug:   126 16623 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: lr_svc
Debug:   127 16623 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: pc
Debug:   128 16623 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 13 of mode Supervisor with value 0x33f4db94
Debug:   129 16623 arm7_9_common.c:1345 arm7_9_restore_context(): writing register 14 of mode Supervisor with value 0x33f9bf88
Debug:   130 16623 arm7_9_common.c:1283 arm7_9_restore_context(): examining Abort mode
Debug:   131 16623 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: pc
Debug:   132 16624 arm7_9_common.c:1283 arm7_9_restore_context(): examining Undefined mode
Debug:   133 16624 arm7_9_common.c:1297 arm7_9_restore_context(): examining dirty reg: pc
Debug:   134 16624 arm7_9_common.c:1385 arm7_9_restore_context(): writing PC with value 0x00000000
Debug:   135 16624 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000000
Debug:   136 16640 target.c:724 target_call_event_callbacks(): target event 1
Debug:   137 16640 arm7_9_common.c:1577 arm7_9_resume(): target resumed
Debug:   139 17877 command.c:432 command_run_line(): halt
Debug:   140 17877 target.c:1823 handle_halt_command(): -
Debug:   141 17877 arm7_9_common.c:960 arm7_9_halt(): target-&gt;state: running
Debug:   142 17877 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000002
Debug:   143 17906 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000005
Debug:   144 17906 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000005
Debug:   145 17911 arm7_9_common.c:1074 arm7_9_debug_entry(): target entered debug from ARM state
Debug:   146 17922 arm7_9_common.c:1106 arm7_9_debug_entry(): target entered debug state in Supervisor mode
Debug:   147 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r0: 0x000601a8
Debug:   148 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r1: 0xc000107a
Debug:   149 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r2: 0x56000010
Debug:   150 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r3: 0xffffff7f
Debug:   151 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r4: 0x00000005
Debug:   152 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r5: 0x56000014
Debug:   153 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r6: 0x33f4dca4
Debug:   154 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r7: 0x33f4dded
Debug:   155 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r8: 0x33f4ffdc
Debug:   156 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r9: 0x00000000
Debug:   157 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r10: 0x33f4dced
Debug:   158 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r11: 0x33f4dded
Debug:   159 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r12: 0x33f9bf78
Debug:   160 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r13: 0x33f4db94
Debug:   161 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r14: 0x000000a0
Debug:   162 17922 arm7_9_common.c:1137 arm7_9_debug_entry(): r15: 0x000000bc
Debug:   163 17922 arm7_9_common.c:1143 arm7_9_debug_entry(): entered debug state at PC 0xbc
Debug:   164 17956 arm920t.c:448 arm920t_post_debug_entry(): cp15_control_reg: c000107a
Debug:   165 18081 arm920t.c:470 arm920t_post_debug_entry(): D FSR: 0x000000f7, D FAR: 0xffffff7f, I FSR: 0x000000e2, I FAR: 0x00000000
Debug:   166 18081 target.c:724 target_call_event_callbacks(): target event 0
User:    167 18081 target.c:957 target_arch_state(): target state: halted
User:    168 18081 arm920t.c:574 arm920t_arch_state(): target halted in ARM state due to debug request, current mode: Supervisor
cpsr: 0x200000d3 pc: 0x000000bc
MMU: disabled, D-Cache: disabled, I-Cache: enabled
Debug:   170 27523 command.c:432 command_run_line(): load_image u-boot/u-boot.bin 0x33f80000
Debug:   171 27523 configuration.c:87 open_file_from_path(): opened u-boot/u-boot.bin
Debug:   172 27524 configuration.c:87 open_file_from_path(): opened u-boot/u-boot.bin
Debug:   173 27526 target.c:979 target_write_buffer(): writing buffer of 178608 byte at 0x33f80000
Debug:   174 27526 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000004
Debug:   175 28178 embeddedice.c:397 embeddedice_write_reg(): 0: 0x00000005
Error:   176 33226 ft2232.c:187 ft2232_write(): ftdi_write_data: usb bulk write failed
Error:   177 33257 ft2232.c:404 ft2232_send_and_recv(): couldn't write MPSSE commands to FT2232

2. Log of telnet
$ telnet localhost 4444
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
Open On-Chip Debugger
&gt;<i> halt
</I>target state: halted
target halted in ARM state due to debug request, current mode: Supervisor
cpsr: 0x200000d3 pc: 0x0194883c
MMU: disabled, D-Cache: disabled, I-Cache: disabled
&gt;<i> load_image init/init.bin 0
</I>288 byte written at address 0x00000000
downloaded 288 byte in 0.031900s
&gt;<i> resume 0
</I>&gt;<i> halt
</I>target state: halted
target halted in ARM state due to debug request, current mode: Supervisor
cpsr: 0x200000d3 pc: 0x000000bc
MMU: disabled, D-Cache: disabled, I-Cache: enabled
&gt;<i> load_image u-boot/u-boot.bin 0x33f80000
</I>ftdi_write_data: usb bulk write failed
couldn't write MPSSE commands to FT2232
Connection closed by foreign host.


My openocd.cfg is:
telnet_port 4444
gdb_port 3333
interface ft2232
jtag_speed 0
ft2232_vid_pid 0x1457 0x5118
ft2232_layout &quot;jtagkey&quot;
reset_config trst_and_srst
jtag_device 4 0x1 0xf 0xe
daemon_startup attach
target arm920t little reset_run 0 arm920t
arm7_9 fast_memory_access enable
working_area 0 0x200000 0x4000 backup
#flash bank cfi 0 0x100000 2 2 0
#debug_level 3
nand device s3c2440 0
run_and_halt_time 0 5000
ft2232_device_desc &quot;USB&lt;=&gt;JTAG&amp;RS232&quot; 				


Any advisement is welcom!
&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;dswei
&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">dswei99 at sina.com</A>
&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;2008-10-11
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003342.html">[Openocd-development] Fix for DCC downloads crashing
</A></li>
	<LI>Next message: <A HREF="003326.html">[Openocd-development] [PATCH] - GDB Protocol Hickup Fix (Dropped	ACKs)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3325">[ date ]</a>
              <a href="thread.html#3325">[ thread ]</a>
              <a href="subject.html#3325">[ subject ]</a>
              <a href="author.html#3325">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

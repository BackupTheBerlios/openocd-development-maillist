<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] [PATCH] xscale: fix analyze_trace for	trace
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%5D%20xscale%3A%20fix%20analyze_trace%20for%0A%09trace&In-Reply-To=%3C201004131920.o3DJK14Y002144%40member.newsguy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015479.html">
   <LINK REL="Next"  HREF="015456.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] [PATCH] xscale: fix analyze_trace for	trace</H1>
    <B>mikedunn at newsguy.com</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%5D%20xscale%3A%20fix%20analyze_trace%20for%0A%09trace&In-Reply-To=%3C201004131920.o3DJK14Y002144%40member.newsguy.com%3E"
       TITLE="[Openocd-development] [PATCH] xscale: fix analyze_trace for	trace">mikedunn at newsguy.com
       </A><BR>
    <I>Tue Apr 13 21:20:01 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="015479.html">[Openocd-development] [PATCH] xscale: fix analyze_trace for	trace data collected in wrap mode
</A></li>
        <LI>Next message: <A HREF="015456.html">[Openocd-development] [PATCH] xscale: fix analyze_trace for	trace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15454">[ date ]</a>
              <a href="thread.html#15454">[ thread ]</a>
              <a href="subject.html#15454">[ subject ]</a>
              <a href="author.html#15454">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i>Is it ready in your opinion?
</I>&gt;<i>
</I>
Yes.  I've been using and tweaking it for about 3 weeks.  The other day I
stopped making changes so as not to introduce a bug in the 11th hour (like my
last simple patch).  I'll let you know if I find a problem, but I'm confident
that the current patch improves on the original code.  Don't mean to disparage
that code... the fundamentals were there, but it was very rough around the
edges.  xscale_analyze_trace() looks like it may have evolved into a
unmaintainable hack.  And clearly it was never used with a trace collected in
'wrap' mode, which seems to me to be the more useful mode since it lets you
examine the path of execution leading up to a breakpoint, watchpoint, or
vector trap.

If anyone has suggestions on how trace functionality should work, I'd be
interested, and maybe could implement it, since I've had my nose in this for a
while now.  Never got around to taking a look at how generic arm ETM works. 
One thing I've been wondering is why there's no option to read the
instructions directly from target memory, as opposed to relying on a
separately loaded image file.  Only thing I could think of is that the memory
mapping may have changed in between collecting the trace and running the
analysis (with some work, this issue can be addressed).  Also annoyed that
trace is always disabled on a debug break.  Don't see why it can't remain
enabled in 'wrap' mode.  I haven't seen anything in the manual that suggests
it incurs a run-time performance penalty.

Thanks,
Mike

----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015479.html">[Openocd-development] [PATCH] xscale: fix analyze_trace for	trace data collected in wrap mode
</A></li>
	<LI>Next message: <A HREF="015456.html">[Openocd-development] [PATCH] xscale: fix analyze_trace for	trace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15454">[ date ]</a>
              <a href="thread.html#15454">[ thread ]</a>
              <a href="subject.html#15454">[ subject ]</a>
              <a href="author.html#15454">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Libftdi or JTAGKey-Tiny hang?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Libftdi%20or%20JTAGKey-Tiny%20hang%3F&In-Reply-To=%3C4BCFEBA8.2040202%40amontec.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015546.html">
   <LINK REL="Next"  HREF="015551.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Libftdi or JTAGKey-Tiny hang?</H1>
    <B>Laurent Gauch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Libftdi%20or%20JTAGKey-Tiny%20hang%3F&In-Reply-To=%3C4BCFEBA8.2040202%40amontec.com%3E"
       TITLE="[Openocd-development] Libftdi or JTAGKey-Tiny hang?">laurent.gauch at amontec.com
       </A><BR>
    <I>Thu Apr 22 08:24:40 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="015546.html">[Openocd-development] Libftdi or JTAGKey-Tiny hang?
</A></li>
        <LI>Next message: <A HREF="015551.html">[Openocd-development] Libftdi or JTAGKey-Tiny hang?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15549">[ date ]</a>
              <a href="thread.html#15549">[ thread ]</a>
              <a href="subject.html#15549">[ subject ]</a>
              <a href="author.html#15549">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jon,

I really think it is not related to OS kernel nor to kernel driver nor 
Virtual Machine. But really coming from something in the OpenOCD code 
itself.

Also, it should be related to *HOW* OpenOCD is closing the Amontec 
JTAGkey (and or the JTAGkey-2 ), specially regarding TRST and SRST. If I 
found time today, I will provide a patch to try.

Regards,
Laurent Gauch
 <A HREF="http://www.amontec.com">http://www.amontec.com</A>
 <A HREF="http://www.amontec.com/jtagkey.shtml">http://www.amontec.com/jtagkey.shtml</A>

&gt;<i> In the course of my fooling around lately it seems I am able to wedge something, libftdi or the JTAGKey-Tiny, I got it into a state where OpenOCD would only produce this on startup, even after power cycling the target:
</I>&gt;<i>
</I>&gt;<i> Error: JTAG scan chain interrogation failed: all ones
</I>&gt;<i> Error: Check JTAG interface, timings, target power, etc.
</I>&gt;<i> Error: JTAG scan chain interrogation failed: all ones
</I>&gt;<i> Error: Check JTAG interface, timings, target power, etc.
</I>&gt;<i> Command handler execution failed
</I>&gt;<i> Warn : jtag initialization failed; try 'jtag init' again.
</I>&gt;<i>
</I>&gt;<i> Leaving the target powered I replugged the JTAGKey-Tiny and on next start of OpenOCD it found things:
</I>&gt;<i>
</I>&gt;<i> Info : RCLK (adaptive clock speed) not supported - fallback to 100 kHz
</I>&gt;<i> Info : JTAG tap: penta.tap tap/device found: 0x04040009 (mfg: 0x004, part: 0x4040, ver: 0x0)
</I>&gt;<i> Info : JTAG tap: dm355.jrc tap/device found: 0x0b73b02f (mfg: 0x017, part: 0xb73b, ver: 0x0)
</I>&gt;<i> Info : JTAG tap: dm355.etb enabled
</I>&gt;<i> Info : JTAG tap: dm355.arm enabled
</I>&gt;<i> Info : Embedded ICE version 6
</I>&gt;<i> Info : dm355.arm: hardware has 2 breakpoint/watchpoint units
</I>&gt;<i> Info : ETM v1.3
</I>&gt;<i>
</I>&gt;<i> Note: I am running OpenOCD on Linux inside VirtualBox hosted on Windows, using VirtualBox's USB capture features.
</I>&gt;<i>
</I>&gt;<i> If this is of interest to anyone please let me know if there is something you'd like me to try / information to capture next time.
</I>&gt;<i>   
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015546.html">[Openocd-development] Libftdi or JTAGKey-Tiny hang?
</A></li>
	<LI>Next message: <A HREF="015551.html">[Openocd-development] Libftdi or JTAGKey-Tiny hang?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15549">[ date ]</a>
              <a href="thread.html#15549">[ thread ]</a>
              <a href="subject.html#15549">[ subject ]</a>
              <a href="author.html#15549">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] openocd patch: 6a59e2b flash: update luminary	device table
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20openocd%20patch%3A%206a59e2b%20flash%3A%20update%20luminary%0A%09device%20table&In-Reply-To=%3C20111103204338.659FE24239%40openocd.zylin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021554.html">
   <LINK REL="Next"  HREF="021557.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] openocd patch: 6a59e2b flash: update luminary	device table</H1>
    <B>gerrit at openocd.zylin.com</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20openocd%20patch%3A%206a59e2b%20flash%3A%20update%20luminary%0A%09device%20table&In-Reply-To=%3C20111103204338.659FE24239%40openocd.zylin.com%3E"
       TITLE="[Openocd-development] openocd patch: 6a59e2b flash: update luminary	device table">gerrit at openocd.zylin.com
       </A><BR>
    <I>Thu Nov  3 21:43:37 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="021554.html">[Openocd-development] openocd patch: 68f4516 at91sam3: fix warnings
</A></li>
        <LI>Next message: <A HREF="021557.html">[Openocd-development] openocd patch: b311a1a cfi: fix gaffe in	fixing warnings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21556">[ date ]</a>
              <a href="thread.html#21556">[ thread ]</a>
              <a href="subject.html#21556">[ subject ]</a>
              <a href="author.html#21556">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from Gerrit.

Spencer Oliver (<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">spen at spen-soft.co.uk</A>) just uploaded a new patch set to Gerrit, which you can find at <A HREF="http://openocd.zylin.com/161">http://openocd.zylin.com/161</A>

-- gerrit

commit 6a59e2bbe6089b74828bfeab681ae84ccc70ced2
Author: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">spen at spen-soft.co.uk</A>&gt;
Date:   Thu Nov 3 20:42:50 2011 +0000

    flash: update luminary device table
    
    add support for checking target against the device CLASS rather
    then just the PARTNO.
    
    This change also adds the new LM4F family (Blizzard).
    
    Change-Id: Ia9d1e33f1f1c2817c0039a2232ecf932fae072f9
    Signed-off-by: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">spen at spen-soft.co.uk</A>&gt;

diff --git a/contrib/gen-stellaris-part-header.pl b/contrib/gen-stellaris-part-header.pl
index 24ddcb1..0cc567f 100755
--- a/contrib/gen-stellaris-part-header.pl
+++ b/contrib/gen-stellaris-part-header.pl
@@ -7,13 +7,13 @@ $comment = &quot;// Autogenerated by contrib/gen-stellaris-part-header.pl
 // From Stellaris Firmware Development Package revision&quot;;
 
 $struct_header = &quot;static struct {
-	uint32_t partno;
+	uint8_t class;
+	uint8_t partno;
 	const char *partname;
-}	StellarisParts[] =
-{
+} StellarisParts[] = {
 &quot;;
 
-$struct_footer = &quot;\t{0,\&quot;Unknown part\&quot;}\n};\n&quot;;
+$struct_footer = &quot;\t{0xFF, 0x00, \&quot;Unknown Part\&quot;}\n};\n&quot;;
 
 $#ARGV == 1 || die &quot;Usage: $0 &lt;inc directory&gt; &lt;output file&gt;\n&quot;;
 -d $ARGV[0] || die $ARGV[0].&quot; is not a directory\n&quot;;
@@ -26,13 +26,11 @@ opendir(DIR, $dir) || die &quot;can't open $dir: $!&quot;;
 @files = readdir(DIR);
 closedir(DIR);
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">- at short_files</A> = sort(grep(/lm3s...\.h/, @files));
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">- at long_files</A> = sort(grep(/lm3s....\.h/, @files));
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">+ at header_files</A> = sort(grep(/lm.+\.h/, @files));
 
 $ver = 0;
 $new_struct = $struct_header;
-process_file(@short_files);
-process_file(@long_files);
+process_file(@header_files);
 $new_struct .= $struct_footer;
 
 $dump = &quot;$comment $ver\n$new_struct&quot;;
@@ -51,7 +49,7 @@ close(OUTPUT);
 
 sub process_file {
 	foreach $h_file (@_) {
-		($base) = ($h_file =~ m/lm3s(.{3,4})\.h/ig);
+		($base) = ($h_file =~ m/lm..(.{3,7})\.h/ig);
 		$base = uc($base);
 		local($/, *FILE);
 		open(FILE, &quot;$dir/$h_file&quot;);
@@ -66,22 +64,39 @@ sub process_file {
 				$ver = $1;
 			}
 		}
-		if ($content =~ /SYSCTL_DID1_VER_[^M]\s+0x(\S+)/) {
-			$did1_ver = hex($1);
+
+		if ($content =~ /SYSCTL_DID0_CLASS_[^M].+?0x(\S+)/s) {
+			$class = hex($1) &gt;&gt; 16;
 		} else {
-			print STDERR &quot;$h_file is missing SYSCTL_DID1_VER\n&quot;;
-			$did1_ver = 255;
-			$invalid = 1;
+			# attempt another way to get class
+			if ($content =~ /\s(\S+)-class/) {
+				$class = getclass($1);
+				if ($class eq 0xFF) {
+					print STDERR &quot;$h_file unknown class\n&quot;;
+					$invalid = 1;
+				}
+			} else {
+				print STDERR &quot;$h_file is missing SYSCTL_DID0_CLASS_\n&quot;;
+				$class = 0;
+				$invalid = 1;
+			}
 		}
-		if ($content =~ /SYSCTL_DID1_PRTNO_$base\s+0x(\S+)/) {
+
+		if ($content =~ /SYSCTL_DID1_PRTNO_$base.+0x(\S+)/) {
 			$prtno = hex($1);
+			$base = &quot;LM3S&quot; . $base;
 		} else {
-			print STDERR &quot;$h_file is missing SYSCTL_DID1_PRTNO\n&quot;;
-			$prtno = 0;
-			$invalid = 1;
+			# LM4F have a changed header
+			if ($content =~ /SYSCTL_DID1_PRTNO_LM4F$base.+?0x(\S+)/s) {
+				$prtno = hex($1);
+				$base = &quot;LM4F&quot; . $base;
+			} else {
+				print STDERR &quot;$h_file is missing SYSCTL_DID1_PRTNO\n&quot;;
+				$prtno = 0;
+				$invalid = 1;
+			}
 		}
-		$id = ($did1_ver | $prtno) &gt;&gt; 16;
-		$new_member = sprintf &quot;{0x%04X,\&quot;LM3S%s\&quot;},&quot;, $id, $base;
+		$new_member = sprintf &quot;{0x%02X, 0x%02X, \&quot;%s\&quot;},&quot;, $class, $prtno &gt;&gt; 16, $base;
 		if ($invalid == 1) {
 			#$new_struct .= &quot;\t//$new_member\t// Invalid\n&quot;;
 		} else {
@@ -89,3 +104,21 @@ sub process_file {
 		}
 	}
 }
+
+sub getclass {
+	$class = $_[0];
+	if ($class =~ /Sandstorm/i) {
+		return 0;
+	} elsif ($class =~ /Fury/i) {
+		return 1;
+	} elsif ($class =~ /DustDevil/i) {
+		return 3;
+	} elsif ($class =~ /Tempest/i) {
+		return 4;
+	} elsif ($class =~ /Blizzard/i) {
+		return 5;
+	} elsif ($class =~ /Firestorm/i) {
+		return 6;
+	}
+	return 0xFF;
+}
diff --git a/src/flash/nor/stellaris.c b/src/flash/nor/stellaris.c
index 39c189c..3508bea 100644
--- a/src/flash/nor/stellaris.c
+++ b/src/flash/nor/stellaris.c
@@ -126,248 +126,293 @@ struct stellaris_flash_bank
 // Autogenerated by contrib/gen-stellaris-part-header.pl
 // From Stellaris Firmware Development Package revision 8049
 static struct {
-	uint32_t partno;
+	uint8_t class;
+	uint8_t partno;
 	const char *partname;
-}	StellarisParts[] =
-{
-	{0x0001,&quot;LM3S101&quot;},
-	{0x0002,&quot;LM3S102&quot;},
-	{0x0019,&quot;LM3S300&quot;},
-	{0x0011,&quot;LM3S301&quot;},
-	{0x001A,&quot;LM3S308&quot;},
-	{0x0012,&quot;LM3S310&quot;},
-	{0x0013,&quot;LM3S315&quot;},
-	{0x0014,&quot;LM3S316&quot;},
-	{0x0017,&quot;LM3S317&quot;},
-	{0x0015,&quot;LM3S328&quot;},
-	{0x002A,&quot;LM3S600&quot;},
-	{0x0021,&quot;LM3S601&quot;},
-	{0x002B,&quot;LM3S608&quot;},
-	{0x0022,&quot;LM3S610&quot;},
-	{0x0023,&quot;LM3S611&quot;},
-	{0x0024,&quot;LM3S612&quot;},
-	{0x0025,&quot;LM3S613&quot;},
-	{0x0026,&quot;LM3S615&quot;},
-	{0x0028,&quot;LM3S617&quot;},
-	{0x0029,&quot;LM3S618&quot;},
-	{0x0027,&quot;LM3S628&quot;},
-	{0x0038,&quot;LM3S800&quot;},
-	{0x0031,&quot;LM3S801&quot;},
-	{0x0039,&quot;LM3S808&quot;},
-	{0x0032,&quot;LM3S811&quot;},
-	{0x0033,&quot;LM3S812&quot;},
-	{0x0034,&quot;LM3S815&quot;},
-	{0x0036,&quot;LM3S817&quot;},
-	{0x0037,&quot;LM3S818&quot;},
-	{0x0035,&quot;LM3S828&quot;},
-	{0x10BF,&quot;LM3S1110&quot;},
-	{0x10C3,&quot;LM3S1133&quot;},
-	{0x10C5,&quot;LM3S1138&quot;},
-	{0x10C1,&quot;LM3S1150&quot;},
-	{0x10C4,&quot;LM3S1162&quot;},
-	{0x10C2,&quot;LM3S1165&quot;},
-	{0x10EC,&quot;LM3S1166&quot;},
-	{0x10C6,&quot;LM3S1332&quot;},
-	{0x10BC,&quot;LM3S1435&quot;},
-	{0x10BA,&quot;LM3S1439&quot;},
-	{0x10BB,&quot;LM3S1512&quot;},
-	{0x10C7,&quot;LM3S1538&quot;},
-	{0x10DB,&quot;LM3S1601&quot;},
-	{0x1006,&quot;LM3S1607&quot;},
-	{0x10DA,&quot;LM3S1608&quot;},
-	{0x10C0,&quot;LM3S1620&quot;},
-	{0x10CD,&quot;LM3S1621&quot;},
-	{0x1003,&quot;LM3S1625&quot;},
-	{0x1004,&quot;LM3S1626&quot;},
-	{0x1005,&quot;LM3S1627&quot;},
-	{0x10B3,&quot;LM3S1635&quot;},
-	{0x10EB,&quot;LM3S1636&quot;},
-	{0x10BD,&quot;LM3S1637&quot;},
-	{0x10B1,&quot;LM3S1651&quot;},
-	{0x10B9,&quot;LM3S1751&quot;},
-	{0x1010,&quot;LM3S1776&quot;},
-	{0x1016,&quot;LM3S1811&quot;},
-	{0x103D,&quot;LM3S1816&quot;},
-	{0x10B4,&quot;LM3S1850&quot;},
-	{0x10DD,&quot;LM3S1911&quot;},
-	{0x10DC,&quot;LM3S1918&quot;},
-	{0x10B7,&quot;LM3S1937&quot;},
-	{0x10BE,&quot;LM3S1958&quot;},
-	{0x10B5,&quot;LM3S1960&quot;},
-	{0x10B8,&quot;LM3S1968&quot;},
-	{0x10EA,&quot;LM3S1969&quot;},
-	{0x10CE,&quot;LM3S1B21&quot;},
-	{0x10CA,&quot;LM3S1C21&quot;},
-	{0x10CB,&quot;LM3S1C26&quot;},
-	{0x1098,&quot;LM3S1C58&quot;},
-	{0x10B0,&quot;LM3S1D21&quot;},
-	{0x10CC,&quot;LM3S1D26&quot;},
-	{0x101D,&quot;LM3S1F11&quot;},
-	{0x101B,&quot;LM3S1F16&quot;},
-	{0x10AF,&quot;LM3S1G21&quot;},
-	{0x1095,&quot;LM3S1G58&quot;},
-	{0x101E,&quot;LM3S1H11&quot;},
-	{0x101C,&quot;LM3S1H16&quot;},
-	{0x100F,&quot;LM3S1J11&quot;},
-	{0x103C,&quot;LM3S1J16&quot;},
-	{0x100E,&quot;LM3S1N11&quot;},
-	{0x103B,&quot;LM3S1N16&quot;},
-	{0x10B2,&quot;LM3S1P51&quot;},
-	{0x109E,&quot;LM3S1R21&quot;},
-	{0x10C9,&quot;LM3S1R26&quot;},
-	{0x1030,&quot;LM3S1W16&quot;},
-	{0x102F,&quot;LM3S1Z16&quot;},
-	{0x10D4,&quot;LM3S2016&quot;},
-	{0x1051,&quot;LM3S2110&quot;},
-	{0x1084,&quot;LM3S2139&quot;},
-	{0x1039,&quot;LM3S2276&quot;},
-	{0x10A2,&quot;LM3S2410&quot;},
-	{0x1059,&quot;LM3S2412&quot;},
-	{0x1056,&quot;LM3S2432&quot;},
-	{0x105A,&quot;LM3S2533&quot;},
-	{0x10E1,&quot;LM3S2601&quot;},
-	{0x10E0,&quot;LM3S2608&quot;},
-	{0x1033,&quot;LM3S2616&quot;},
-	{0x1057,&quot;LM3S2620&quot;},
-	{0x1085,&quot;LM3S2637&quot;},
-	{0x1053,&quot;LM3S2651&quot;},
-	{0x1080,&quot;LM3S2671&quot;},
-	{0x1050,&quot;LM3S2678&quot;},
-	{0x10A4,&quot;LM3S2730&quot;},
-	{0x1052,&quot;LM3S2739&quot;},
-	{0x103A,&quot;LM3S2776&quot;},
-	{0x106D,&quot;LM3S2793&quot;},
-	{0x10E3,&quot;LM3S2911&quot;},
-	{0x10E2,&quot;LM3S2918&quot;},
-	{0x10ED,&quot;LM3S2919&quot;},
-	{0x1054,&quot;LM3S2939&quot;},
-	{0x108F,&quot;LM3S2948&quot;},
-	{0x1058,&quot;LM3S2950&quot;},
-	{0x1055,&quot;LM3S2965&quot;},
-	{0x106C,&quot;LM3S2B93&quot;},
-	{0x1094,&quot;LM3S2D93&quot;},
-	{0x1093,&quot;LM3S2U93&quot;},
-	{0x1008,&quot;LM3S3634&quot;},
-	{0x1043,&quot;LM3S3651&quot;},
-	{0x10C8,&quot;LM3S3654&quot;},
-	{0x1044,&quot;LM3S3739&quot;},
-	{0x1049,&quot;LM3S3748&quot;},
-	{0x1045,&quot;LM3S3749&quot;},
-	{0x1042,&quot;LM3S3826&quot;},
-	{0x1041,&quot;LM3S3J26&quot;},
-	{0x1040,&quot;LM3S3N26&quot;},
-	{0x103F,&quot;LM3S3W26&quot;},
-	{0x103E,&quot;LM3S3Z26&quot;},
-	{0x1081,&quot;LM3S5632&quot;},
-	{0x100C,&quot;LM3S5651&quot;},
-	{0x108A,&quot;LM3S5652&quot;},
-	{0x104D,&quot;LM3S5656&quot;},
-	{0x1091,&quot;LM3S5662&quot;},
-	{0x1096,&quot;LM3S5732&quot;},
-	{0x1097,&quot;LM3S5737&quot;},
-	{0x10A0,&quot;LM3S5739&quot;},
-	{0x1099,&quot;LM3S5747&quot;},
-	{0x10A7,&quot;LM3S5749&quot;},
-	{0x109A,&quot;LM3S5752&quot;},
-	{0x109C,&quot;LM3S5762&quot;},
-	{0x1069,&quot;LM3S5791&quot;},
-	{0x100B,&quot;LM3S5951&quot;},
-	{0x104E,&quot;LM3S5956&quot;},
-	{0x1068,&quot;LM3S5B91&quot;},
-	{0x102E,&quot;LM3S5C31&quot;},
-	{0x102C,&quot;LM3S5C36&quot;},
-	{0x105E,&quot;LM3S5C51&quot;},
-	{0x105B,&quot;LM3S5C56&quot;},
-	{0x105F,&quot;LM3S5D51&quot;},
-	{0x105C,&quot;LM3S5D56&quot;},
-	{0x1087,&quot;LM3S5D91&quot;},
-	{0x102D,&quot;LM3S5G31&quot;},
-	{0x101F,&quot;LM3S5G36&quot;},
-	{0x105D,&quot;LM3S5G51&quot;},
-	{0x104F,&quot;LM3S5G56&quot;},
-	{0x1009,&quot;LM3S5K31&quot;},
-	{0x104A,&quot;LM3S5K36&quot;},
-	{0x100A,&quot;LM3S5P31&quot;},
-	{0x1048,&quot;LM3S5P36&quot;},
-	{0x10B6,&quot;LM3S5P3B&quot;},
-	{0x100D,&quot;LM3S5P51&quot;},
-	{0x104C,&quot;LM3S5P56&quot;},
-	{0x1007,&quot;LM3S5R31&quot;},
-	{0x104B,&quot;LM3S5R36&quot;},
-	{0x1047,&quot;LM3S5T36&quot;},
-	{0x107F,&quot;LM3S5U91&quot;},
-	{0x1046,&quot;LM3S5Y36&quot;},
-	{0x10A1,&quot;LM3S6100&quot;},
-	{0x1074,&quot;LM3S6110&quot;},
-	{0x10A5,&quot;LM3S6420&quot;},
-	{0x1082,&quot;LM3S6422&quot;},
-	{0x1075,&quot;LM3S6432&quot;},
-	{0x1076,&quot;LM3S6537&quot;},
-	{0x1071,&quot;LM3S6610&quot;},
-	{0x10E7,&quot;LM3S6611&quot;},
-	{0x10E6,&quot;LM3S6618&quot;},
-	{0x1083,&quot;LM3S6633&quot;},
-	{0x108B,&quot;LM3S6637&quot;},
-	{0x10A3,&quot;LM3S6730&quot;},
-	{0x1077,&quot;LM3S6753&quot;},
-	{0x10D1,&quot;LM3S6816&quot;},
-	{0x10E9,&quot;LM3S6911&quot;},
-	{0x10D3,&quot;LM3S6916&quot;},
-	{0x10E8,&quot;LM3S6918&quot;},
-	{0x1089,&quot;LM3S6938&quot;},
-	{0x1072,&quot;LM3S6950&quot;},
-	{0x1078,&quot;LM3S6952&quot;},
-	{0x1073,&quot;LM3S6965&quot;},
-	{0x10AA,&quot;LM3S6C11&quot;},
-	{0x10AC,&quot;LM3S6C65&quot;},
-	{0x109F,&quot;LM3S6G11&quot;},
-	{0x10AB,&quot;LM3S6G65&quot;},
-	{0x1064,&quot;LM3S8530&quot;},
-	{0x108E,&quot;LM3S8538&quot;},
-	{0x1061,&quot;LM3S8630&quot;},
-	{0x1063,&quot;LM3S8730&quot;},
-	{0x108D,&quot;LM3S8733&quot;},
-	{0x1086,&quot;LM3S8738&quot;},
-	{0x1065,&quot;LM3S8930&quot;},
-	{0x108C,&quot;LM3S8933&quot;},
-	{0x1088,&quot;LM3S8938&quot;},
-	{0x10A6,&quot;LM3S8962&quot;},
-	{0x1062,&quot;LM3S8970&quot;},
-	{0x10D7,&quot;LM3S8971&quot;},
-	{0x10AE,&quot;LM3S8C62&quot;},
-	{0x10AD,&quot;LM3S8G62&quot;},
-	{0x10CF,&quot;LM3S9781&quot;},
-	{0x1067,&quot;LM3S9790&quot;},
-	{0x106B,&quot;LM3S9792&quot;},
-	{0x102D,&quot;LM3S9971&quot;},
-	{0x1020,&quot;LM3S9997&quot;},
-	{0x10D0,&quot;LM3S9B81&quot;},
-	{0x1066,&quot;LM3S9B90&quot;},
-	{0x106A,&quot;LM3S9B92&quot;},
-	{0x106E,&quot;LM3S9B95&quot;},
-	{0x106F,&quot;LM3S9B96&quot;},
-	{0x101D,&quot;LM3S9BN2&quot;},
-	{0x101E,&quot;LM3S9BN5&quot;},
-	{0x101F,&quot;LM3S9BN6&quot;},
-	{0x1070,&quot;LM3S9C97&quot;},
-	{0x107A,&quot;LM3S9CN5&quot;},
-	{0x10A9,&quot;LM3S9D81&quot;},
-	{0x107E,&quot;LM3S9D90&quot;},
-	{0x1092,&quot;LM3S9D92&quot;},
-	{0x10C8,&quot;LM3S9D95&quot;},
-	{0x109D,&quot;LM3S9D96&quot;},
-	{0x107B,&quot;LM3S9DN5&quot;},
-	{0x107C,&quot;LM3S9DN6&quot;},
-	{0x1060,&quot;LM3S9G97&quot;},
-	{0x1079,&quot;LM3S9GN5&quot;},
-	{0x101B,&quot;LM3S9L71&quot;},
-	{0x1018,&quot;LM3S9L97&quot;},
-	{0x10A8,&quot;LM3S9U81&quot;},
-	{0x107D,&quot;LM3S9U90&quot;},
-	{0x1090,&quot;LM3S9U92&quot;},
-	{0x10B7,&quot;LM3S9U95&quot;},
-	{0x109B,&quot;LM3S9U96&quot;},
-	{0,&quot;Unknown part&quot;}
+} StellarisParts[] = {
+	{0x00, 0x01, &quot;LM3S101&quot;},
+	{0x00, 0x02, &quot;LM3S102&quot;},
+	{0x01, 0xBF, &quot;LM3S1110&quot;},
+	{0x01, 0xC3, &quot;LM3S1133&quot;},
+	{0x01, 0xC5, &quot;LM3S1138&quot;},
+	{0x01, 0xC1, &quot;LM3S1150&quot;},
+	{0x01, 0xC4, &quot;LM3S1162&quot;},
+	{0x01, 0xC2, &quot;LM3S1165&quot;},
+	{0x01, 0xEC, &quot;LM3S1166&quot;},
+	{0x01, 0xC6, &quot;LM3S1332&quot;},
+	{0x01, 0xBC, &quot;LM3S1435&quot;},
+	{0x01, 0xBA, &quot;LM3S1439&quot;},
+	{0x01, 0xBB, &quot;LM3S1512&quot;},
+	{0x01, 0xC7, &quot;LM3S1538&quot;},
+	{0x01, 0xDB, &quot;LM3S1601&quot;},
+	{0x03, 0x06, &quot;LM3S1607&quot;},
+	{0x01, 0xDA, &quot;LM3S1608&quot;},
+	{0x01, 0xC0, &quot;LM3S1620&quot;},
+	{0x04, 0xCD, &quot;LM3S1621&quot;},
+	{0x03, 0x03, &quot;LM3S1625&quot;},
+	{0x03, 0x04, &quot;LM3S1626&quot;},
+	{0x03, 0x05, &quot;LM3S1627&quot;},
+	{0x01, 0xB3, &quot;LM3S1635&quot;},
+	{0x01, 0xEB, &quot;LM3S1636&quot;},
+	{0x01, 0xBD, &quot;LM3S1637&quot;},
+	{0x04, 0xB1, &quot;LM3S1651&quot;},
+	{0x01, 0xB9, &quot;LM3S1751&quot;},
+	{0x03, 0x10, &quot;LM3S1776&quot;},
+	{0x04, 0x16, &quot;LM3S1811&quot;},
+	{0x04, 0x3D, &quot;LM3S1816&quot;},
+	{0x01, 0xB4, &quot;LM3S1850&quot;},
+	{0x01, 0xDD, &quot;LM3S1911&quot;},
+	{0x01, 0xDC, &quot;LM3S1918&quot;},
+	{0x01, 0xB7, &quot;LM3S1937&quot;},
+	{0x01, 0xBE, &quot;LM3S1958&quot;},
+	{0x01, 0xB5, &quot;LM3S1960&quot;},
+	{0x01, 0xB8, &quot;LM3S1968&quot;},
+	{0x01, 0xEA, &quot;LM3S1969&quot;},
+	{0x04, 0xCE, &quot;LM3S1B21&quot;},
+	{0x06, 0xCA, &quot;LM3S1C21&quot;},
+	{0x06, 0xCB, &quot;LM3S1C26&quot;},
+	{0x06, 0x98, &quot;LM3S1C58&quot;},
+	{0x06, 0xB0, &quot;LM3S1D21&quot;},
+	{0x06, 0xCC, &quot;LM3S1D26&quot;},
+	{0x06, 0x1D, &quot;LM3S1F11&quot;},
+	{0x06, 0x1B, &quot;LM3S1F16&quot;},
+	{0x06, 0xAF, &quot;LM3S1G21&quot;},
+	{0x06, 0x95, &quot;LM3S1G58&quot;},
+	{0x06, 0x1E, &quot;LM3S1H11&quot;},
+	{0x06, 0x1C, &quot;LM3S1H16&quot;},
+	{0x04, 0x0F, &quot;LM3S1J11&quot;},
+	{0x04, 0x3C, &quot;LM3S1J16&quot;},
+	{0x04, 0x0E, &quot;LM3S1N11&quot;},
+	{0x04, 0x3B, &quot;LM3S1N16&quot;},
+	{0x04, 0xB2, &quot;LM3S1P51&quot;},
+	{0x04, 0x9E, &quot;LM3S1R21&quot;},
+	{0x04, 0xC9, &quot;LM3S1R26&quot;},
+	{0x04, 0x30, &quot;LM3S1W16&quot;},
+	{0x04, 0x2F, &quot;LM3S1Z16&quot;},
+	{0x01, 0xD4, &quot;LM3S2016&quot;},
+	{0x01, 0x51, &quot;LM3S2110&quot;},
+	{0x01, 0x84, &quot;LM3S2139&quot;},
+	{0x03, 0x39, &quot;LM3S2276&quot;},
+	{0x01, 0xA2, &quot;LM3S2410&quot;},
+	{0x01, 0x59, &quot;LM3S2412&quot;},
+	{0x01, 0x56, &quot;LM3S2432&quot;},
+	{0x01, 0x5A, &quot;LM3S2533&quot;},
+	{0x01, 0xE1, &quot;LM3S2601&quot;},
+	{0x01, 0xE0, &quot;LM3S2608&quot;},
+	{0x03, 0x33, &quot;LM3S2616&quot;},
+	{0x01, 0x57, &quot;LM3S2620&quot;},
+	{0x01, 0x85, &quot;LM3S2637&quot;},
+	{0x01, 0x53, &quot;LM3S2651&quot;},
+	{0x03, 0x80, &quot;LM3S2671&quot;},
+	{0x03, 0x50, &quot;LM3S2678&quot;},
+	{0x01, 0xA4, &quot;LM3S2730&quot;},
+	{0x01, 0x52, &quot;LM3S2739&quot;},
+	{0x03, 0x3A, &quot;LM3S2776&quot;},
+	{0x04, 0x6D, &quot;LM3S2793&quot;},
+	{0x01, 0xE3, &quot;LM3S2911&quot;},
+	{0x01, 0xE2, &quot;LM3S2918&quot;},
+	{0x01, 0xED, &quot;LM3S2919&quot;},
+	{0x01, 0x54, &quot;LM3S2939&quot;},
+	{0x01, 0x8F, &quot;LM3S2948&quot;},
+	{0x01, 0x58, &quot;LM3S2950&quot;},
+	{0x01, 0x55, &quot;LM3S2965&quot;},
+	{0x04, 0x6C, &quot;LM3S2B93&quot;},
+	{0x06, 0x94, &quot;LM3S2D93&quot;},
+	{0x06, 0x93, &quot;LM3S2U93&quot;},
+	{0x00, 0x19, &quot;LM3S300&quot;},
+	{0x00, 0x11, &quot;LM3S301&quot;},
+	{0x00, 0x1A, &quot;LM3S308&quot;},
+	{0x00, 0x12, &quot;LM3S310&quot;},
+	{0x00, 0x13, &quot;LM3S315&quot;},
+	{0x00, 0x14, &quot;LM3S316&quot;},
+	{0x00, 0x17, &quot;LM3S317&quot;},
+	{0x00, 0x15, &quot;LM3S328&quot;},
+	{0x03, 0x08, &quot;LM3S3634&quot;},
+	{0x03, 0x43, &quot;LM3S3651&quot;},
+	{0x04, 0xC8, &quot;LM3S3654&quot;},
+	{0x03, 0x44, &quot;LM3S3739&quot;},
+	{0x03, 0x49, &quot;LM3S3748&quot;},
+	{0x03, 0x45, &quot;LM3S3749&quot;},
+	{0x04, 0x42, &quot;LM3S3826&quot;},
+	{0x04, 0x41, &quot;LM3S3J26&quot;},
+	{0x04, 0x40, &quot;LM3S3N26&quot;},
+	{0x04, 0x3F, &quot;LM3S3W26&quot;},
+	{0x04, 0x3E, &quot;LM3S3Z26&quot;},
+	{0x03, 0x81, &quot;LM3S5632&quot;},
+	{0x04, 0x0C, &quot;LM3S5651&quot;},
+	{0x03, 0x8A, &quot;LM3S5652&quot;},
+	{0x04, 0x4D, &quot;LM3S5656&quot;},
+	{0x03, 0x91, &quot;LM3S5662&quot;},
+	{0x03, 0x96, &quot;LM3S5732&quot;},
+	{0x03, 0x97, &quot;LM3S5737&quot;},
+	{0x03, 0xA0, &quot;LM3S5739&quot;},
+	{0x03, 0x99, &quot;LM3S5747&quot;},
+	{0x03, 0xA7, &quot;LM3S5749&quot;},
+	{0x03, 0x9A, &quot;LM3S5752&quot;},
+	{0x03, 0x9C, &quot;LM3S5762&quot;},
+	{0x04, 0x69, &quot;LM3S5791&quot;},
+	{0x04, 0x0B, &quot;LM3S5951&quot;},
+	{0x04, 0x4E, &quot;LM3S5956&quot;},
+	{0x04, 0x68, &quot;LM3S5B91&quot;},
+	{0x06, 0x2E, &quot;LM3S5C31&quot;},
+	{0x06, 0x2C, &quot;LM3S5C36&quot;},
+	{0x06, 0x5E, &quot;LM3S5C51&quot;},
+	{0x06, 0x5B, &quot;LM3S5C56&quot;},
+	{0x06, 0x5F, &quot;LM3S5D51&quot;},
+	{0x06, 0x5C, &quot;LM3S5D56&quot;},
+	{0x06, 0x87, &quot;LM3S5D91&quot;},
+	{0x06, 0x2D, &quot;LM3S5G31&quot;},
+	{0x06, 0x1F, &quot;LM3S5G36&quot;},
+	{0x06, 0x5D, &quot;LM3S5G51&quot;},
+	{0x06, 0x4F, &quot;LM3S5G56&quot;},
+	{0x04, 0x09, &quot;LM3S5K31&quot;},
+	{0x04, 0x4A, &quot;LM3S5K36&quot;},
+	{0x04, 0x0A, &quot;LM3S5P31&quot;},
+	{0x04, 0x48, &quot;LM3S5P36&quot;},
+	{0x04, 0xB6, &quot;LM3S5P3B&quot;},
+	{0x04, 0x0D, &quot;LM3S5P51&quot;},
+	{0x04, 0x4C, &quot;LM3S5P56&quot;},
+	{0x04, 0x07, &quot;LM3S5R31&quot;},
+	{0x04, 0x4B, &quot;LM3S5R36&quot;},
+	{0x04, 0x47, &quot;LM3S5T36&quot;},
+	{0x06, 0x7F, &quot;LM3S5U91&quot;},
+	{0x04, 0x46, &quot;LM3S5Y36&quot;},
+	{0x00, 0x2A, &quot;LM3S600&quot;},
+	{0x00, 0x21, &quot;LM3S601&quot;},
+	{0x00, 0x2B, &quot;LM3S608&quot;},
+	{0x00, 0x22, &quot;LM3S610&quot;},
+	{0x01, 0xA1, &quot;LM3S6100&quot;},
+	{0x00, 0x23, &quot;LM3S611&quot;},
+	{0x01, 0x74, &quot;LM3S6110&quot;},
+	{0x00, 0x24, &quot;LM3S612&quot;},
+	{0x00, 0x25, &quot;LM3S613&quot;},
+	{0x00, 0x26, &quot;LM3S615&quot;},
+	{0x00, 0x28, &quot;LM3S617&quot;},
+	{0x00, 0x29, &quot;LM3S618&quot;},
+	{0x00, 0x27, &quot;LM3S628&quot;},
+	{0x01, 0xA5, &quot;LM3S6420&quot;},
+	{0x01, 0x82, &quot;LM3S6422&quot;},
+	{0x01, 0x75, &quot;LM3S6432&quot;},
+	{0x01, 0x76, &quot;LM3S6537&quot;},
+	{0x01, 0x71, &quot;LM3S6610&quot;},
+	{0x01, 0xE7, &quot;LM3S6611&quot;},
+	{0x01, 0xE6, &quot;LM3S6618&quot;},
+	{0x01, 0x83, &quot;LM3S6633&quot;},
+	{0x01, 0x8B, &quot;LM3S6637&quot;},
+	{0x01, 0xA3, &quot;LM3S6730&quot;},
+	{0x01, 0x77, &quot;LM3S6753&quot;},
+	{0x01, 0xD1, &quot;LM3S6816&quot;},
+	{0x01, 0xE9, &quot;LM3S6911&quot;},
+	{0x01, 0xD3, &quot;LM3S6916&quot;},
+	{0x01, 0xE8, &quot;LM3S6918&quot;},
+	{0x01, 0x89, &quot;LM3S6938&quot;},
+	{0x01, 0x72, &quot;LM3S6950&quot;},
+	{0x01, 0x78, &quot;LM3S6952&quot;},
+	{0x01, 0x73, &quot;LM3S6965&quot;},
+	{0x06, 0xAA, &quot;LM3S6C11&quot;},
+	{0x06, 0xAC, &quot;LM3S6C65&quot;},
+	{0x06, 0x9F, &quot;LM3S6G11&quot;},
+	{0x06, 0xAB, &quot;LM3S6G65&quot;},
+	{0x00, 0x38, &quot;LM3S800&quot;},
+	{0x00, 0x31, &quot;LM3S801&quot;},
+	{0x00, 0x39, &quot;LM3S808&quot;},
+	{0x00, 0x32, &quot;LM3S811&quot;},
+	{0x00, 0x33, &quot;LM3S812&quot;},
+	{0x00, 0x34, &quot;LM3S815&quot;},
+	{0x00, 0x36, &quot;LM3S817&quot;},
+	{0x00, 0x37, &quot;LM3S818&quot;},
+	{0x00, 0x35, &quot;LM3S828&quot;},
+	{0x01, 0x64, &quot;LM3S8530&quot;},
+	{0x01, 0x8E, &quot;LM3S8538&quot;},
+	{0x01, 0x61, &quot;LM3S8630&quot;},
+	{0x01, 0x63, &quot;LM3S8730&quot;},
+	{0x01, 0x8D, &quot;LM3S8733&quot;},
+	{0x01, 0x86, &quot;LM3S8738&quot;},
+	{0x01, 0x65, &quot;LM3S8930&quot;},
+	{0x01, 0x8C, &quot;LM3S8933&quot;},
+	{0x01, 0x88, &quot;LM3S8938&quot;},
+	{0x01, 0xA6, &quot;LM3S8962&quot;},
+	{0x01, 0x62, &quot;LM3S8970&quot;},
+	{0x01, 0xD7, &quot;LM3S8971&quot;},
+	{0x06, 0xAE, &quot;LM3S8C62&quot;},
+	{0x06, 0xAD, &quot;LM3S8G62&quot;},
+	{0x04, 0xCF, &quot;LM3S9781&quot;},
+	{0x04, 0x67, &quot;LM3S9790&quot;},
+	{0x04, 0x6B, &quot;LM3S9792&quot;},
+	{0x04, 0x2D, &quot;LM3S9971&quot;},
+	{0x04, 0x20, &quot;LM3S9997&quot;},
+	{0x04, 0xD0, &quot;LM3S9B81&quot;},
+	{0x04, 0x66, &quot;LM3S9B90&quot;},
+	{0x04, 0x6A, &quot;LM3S9B92&quot;},
+	{0x04, 0x6E, &quot;LM3S9B95&quot;},
+	{0x04, 0x6F, &quot;LM3S9B96&quot;},
+	{0x04, 0x1D, &quot;LM3S9BN2&quot;},
+	{0x04, 0x1E, &quot;LM3S9BN5&quot;},
+	{0x04, 0x1F, &quot;LM3S9BN6&quot;},
+	{0x06, 0x70, &quot;LM3S9C97&quot;},
+	{0x06, 0x7A, &quot;LM3S9CN5&quot;},
+	{0x06, 0xA9, &quot;LM3S9D81&quot;},
+	{0x06, 0x7E, &quot;LM3S9D90&quot;},
+	{0x06, 0x92, &quot;LM3S9D92&quot;},
+	{0x06, 0xC8, &quot;LM3S9D95&quot;},
+	{0x06, 0x9D, &quot;LM3S9D96&quot;},
+	{0x06, 0x7B, &quot;LM3S9DN5&quot;},
+	{0x06, 0x7C, &quot;LM3S9DN6&quot;},
+	{0x06, 0x60, &quot;LM3S9G97&quot;},
+	{0x06, 0x79, &quot;LM3S9GN5&quot;},
+	{0x04, 0x1B, &quot;LM3S9L71&quot;},
+	{0x04, 0x18, &quot;LM3S9L97&quot;},
+	{0x06, 0xA8, &quot;LM3S9U81&quot;},
+	{0x06, 0x7D, &quot;LM3S9U90&quot;},
+	{0x06, 0x90, &quot;LM3S9U92&quot;},
+	{0x06, 0xB7, &quot;LM3S9U95&quot;},
+	{0x06, 0x9B, &quot;LM3S9U96&quot;},
+	{0x05, 0x18, &quot;LM4F110B2QR&quot;},
+	{0x05, 0x19, &quot;LM4F110C4QR&quot;},
+	{0x05, 0x10, &quot;LM4F110E5QR&quot;},
+	{0x05, 0x11, &quot;LM4F110H5QR&quot;},
+	{0x05, 0x22, &quot;LM4F111B2QR&quot;},
+	{0x05, 0x23, &quot;LM4F111C4QR&quot;},
+	{0x05, 0x20, &quot;LM4F111E5QR&quot;},
+	{0x05, 0x21, &quot;LM4F111H5QR&quot;},
+	{0x05, 0x36, &quot;LM4F112C4QC&quot;},
+	{0x05, 0x30, &quot;LM4F112E5QC&quot;},
+	{0x05, 0x31, &quot;LM4F112H5QC&quot;},
+	{0x05, 0x35, &quot;LM4F112H5QD&quot;},
+	{0x05, 0x01, &quot;LM4F120B2QR&quot;},
+	{0x05, 0x02, &quot;LM4F120C4QR&quot;},
+	{0x05, 0x03, &quot;LM4F120E5QR&quot;},
+	{0x05, 0x04, &quot;LM4F120H5QR&quot;},
+	{0x05, 0x08, &quot;LM4F121B2QR&quot;},
+	{0x05, 0x09, &quot;LM4F121C4QR&quot;},
+	{0x05, 0x0A, &quot;LM4F121E5QR&quot;},
+	{0x05, 0x0B, &quot;LM4F121H5QR&quot;},
+	{0x05, 0xD0, &quot;LM4F122C4QC&quot;},
+	{0x05, 0xD1, &quot;LM4F122E5QC&quot;},
+	{0x05, 0xD2, &quot;LM4F122H5QC&quot;},
+	{0x05, 0xD6, &quot;LM4F122H5QD&quot;},
+	{0x05, 0x48, &quot;LM4F130C4QR&quot;},
+	{0x05, 0x40, &quot;LM4F130E5QR&quot;},
+	{0x05, 0x41, &quot;LM4F130H5QR&quot;},
+	{0x05, 0x52, &quot;LM4F131C4QR&quot;},
+	{0x05, 0x50, &quot;LM4F131E5QR&quot;},
+	{0x05, 0x51, &quot;LM4F131H5QR&quot;},
+	{0x05, 0x66, &quot;LM4F132C4QC&quot;},
+	{0x05, 0x60, &quot;LM4F132E5QC&quot;},
+	{0x05, 0x61, &quot;LM4F132H5QC&quot;},
+	{0x05, 0x65, &quot;LM4F132H5QD&quot;},
+	{0x05, 0xA0, &quot;LM4F230E5QR&quot;},
+	{0x05, 0xA1, &quot;LM4F230H5QR&quot;},
+	{0x05, 0xB0, &quot;LM4F231E5QR&quot;},
+	{0x05, 0xB1, &quot;LM4F231H5QR&quot;},
+	{0x05, 0xC0, &quot;LM4F232E5QC&quot;},
+	{0x05, 0xE3, &quot;LM4F232H5BB&quot;},
+	{0x05, 0xC1, &quot;LM4F232H5QC&quot;},
+	{0x05, 0xC5, &quot;LM4F232H5QD&quot;},
+	{0x05, 0xE5, &quot;LM4FS1AH5BB&quot;},
+	{0x05, 0xE4, &quot;LM4FS99H5BB&quot;},
+	{0x05, 0xE0, &quot;LM4FSXAH5BB&quot;},
+	{0xFF, 0x00, &quot;Unknown Part&quot;}
 };
 
 static char * StellarisClassname[7] =
@@ -697,7 +742,8 @@ static int stellaris_read_part_info(struct flash_bank *bank)
 
 	for (i = 0; StellarisParts[i].partno; i++)
 	{
-		if (StellarisParts[i].partno == ((did1 &gt;&gt; 16) &amp; 0xFFFF))
+		if ((StellarisParts[i].partno == ((did1 &gt;&gt; 16) &amp; 0xFF)) &amp;&amp;
+				(StellarisParts[i].class == ((did0 &gt;&gt; 16) &amp; 0xFF)))
 			break;
 	}
 

-- 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021554.html">[Openocd-development] openocd patch: 68f4516 at91sam3: fix warnings
</A></li>
	<LI>Next message: <A HREF="021557.html">[Openocd-development] openocd patch: b311a1a cfi: fix gaffe in	fixing warnings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21556">[ date ]</a>
              <a href="thread.html#21556">[ thread ]</a>
              <a href="subject.html#21556">[ subject ]</a>
              <a href="author.html#21556">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

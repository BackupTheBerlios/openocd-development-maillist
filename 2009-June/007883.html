<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] [patch] workaround CFI alignment error	traps
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5Bpatch%5D%20workaround%20CFI%20alignment%20error%0A%09traps&In-Reply-To=%3C3d1967ab0906092041s2a6ca995sdb2ff28b3331a788%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007871.html">
   <LINK REL="Next"  HREF="007889.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] [patch] workaround CFI alignment error	traps</H1>
    <B>Brian Hutchinson</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5Bpatch%5D%20workaround%20CFI%20alignment%20error%0A%09traps&In-Reply-To=%3C3d1967ab0906092041s2a6ca995sdb2ff28b3331a788%40mail.gmail.com%3E"
       TITLE="[Openocd-development] [patch] workaround CFI alignment error	traps">b.hutchman at gmail.com
       </A><BR>
    <I>Wed Jun 10 05:41:09 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="007871.html">[Openocd-development] [patch] workaround CFI alignment error traps
</A></li>
        <LI>Next message: <A HREF="007889.html">[Openocd-development] [patch] workaround CFI alignment error	traps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7883">[ date ]</a>
              <a href="thread.html#7883">[ thread ]</a>
              <a href="subject.html#7883">[ subject ]</a>
              <a href="author.html#7883">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Jun 9, 2009 at 6:13 PM, David Brownell &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">david-b at pacbell.net</A>&gt; wrote:

&gt;<i> Tweak the csb337 code so that it doesn't enable alignment traps when
</I>&gt;<i> it completes the &quot;reset init&quot; sequence.
</I>&gt;<i>
</I>&gt;<i> It turns out that the current CFI code reliably triggers such traps.
</I>&gt;<i> I don't have time now to sort out what flavor bug that is; I just
</I>&gt;<i> need flash reading/writing to work.
</I>&gt;<i> ---
</I>&gt;<i>  tcl/board/csb337.cfg |    4 +---
</I>&gt;<i>  1 file changed, 1 insertion(+), 3 deletions(-)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Openocd-development mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">https://lists.berlios.de/mailman/listinfo/openocd-development</A>
</I>&gt;<i>
</I>
What do these alignment traps look like when they happen?  I just updated to
the latest OpenOCD (SVN 2177) and when I do reset init ... it thinks my
target isn't halted and times out:

<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">hutch at hutch-laptop</A>:/$ !telnet
telnet localhost 4444
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
Open On-Chip Debugger
&gt;<i> reset init
</I>JTAG tap: pc205.cpu tap/device found: 0x079263a9 (mfg: 0x1d4, part: 0x7926,
ver: 0x0)
JTAG Tap/device matched
PC was not 0. Does this target need srst_pulls_trst?
target state: halted
target halted in ARM state due to breakpoint, current mode: Supervisor
cpsr: 0x000000d3 pc: 0xffff0000
MMU: disabled, D-Cache: disabled, I-Cache: disabled
fast memory access is enabled
dcc downloads are enabled
3000 kHz
target not halted
Runtime error, file &quot;/usr/local/share/openocd/scripts/board/tess.cfg&quot;, line
38:

timed out while waiting for target halted
Runtime error, file &quot;embedded:startup.tcl&quot;, line 226:
    expected return code but got 'TARGET: pc205.cpu - Not halted'
in procedure 'ocd_process_reset'
called at file &quot;embedded:startup.tcl&quot;, line 208
called at file &quot;embedded:startup.tcl&quot;, line 209
called at file &quot;embedded:startup.tcl&quot;, line 225
Runtime error, file &quot;command.c&quot;, line 453:
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20090609/eca70435/attachment.html">https://lists.berlios.de/pipermail/openocd-development/attachments/20090609/eca70435/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007871.html">[Openocd-development] [patch] workaround CFI alignment error traps
</A></li>
	<LI>Next message: <A HREF="007889.html">[Openocd-development] [patch] workaround CFI alignment error	traps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7883">[ date ]</a>
              <a href="thread.html#7883">[ thread ]</a>
              <a href="subject.html#7883">[ subject ]</a>
              <a href="author.html#7883">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

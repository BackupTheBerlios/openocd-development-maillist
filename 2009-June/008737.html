<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Dynamic library loading
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Dynamic%20library%20loading&In-Reply-To=%3C4A43CBD9.8020406%40op.pl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008776.html">
   <LINK REL="Next"  HREF="008743.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Dynamic library loading</H1>
    <B>Freddie Chopin</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Dynamic%20library%20loading&In-Reply-To=%3C4A43CBD9.8020406%40op.pl%3E"
       TITLE="[Openocd-development] Dynamic library loading">freddie_chopin at op.pl
       </A><BR>
    <I>Thu Jun 25 21:11:21 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="008776.html">[Openocd-development] [patch] openocd.texi - svf and xsvf	commands
</A></li>
        <LI>Next message: <A HREF="008743.html">[Openocd-development] Dynamic library loading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8737">[ date ]</a>
              <a href="thread.html#8737">[ thread ]</a>
              <a href="subject.html#8737">[ subject ]</a>
              <a href="author.html#8737">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello list!

I'm trying to make loading of libraries dynamic, so that those would not 
be required always - just when needed.

I've created globals for function pointers, library handle. I open the 
library - everything is cool. I get processes addresses - still cool. I 
use some functions - cool. Generally whole ft2232 initialization works 
fine (there are many functions called dynamically and that works, the 
read serial number is correct), then there are initialization functions 
for JTAG chain and suddenly function ft2232_read() fails, but in some 
strange way...

The FT_Read is executed (via a function pointer of course), and it 
returns. There is no OpenOCD error (so some status is returned, the 
number of bytes is ok, and so on). The function gets to it's end, but 
never returns to the caller. Windows shows &quot;access violation&quot; exception, 
so I'm guessing that dynamially called FT_Read destroys the stack frame 
and return address somehow...

Any idea what I may be doing wrong? What info can I provide for you to 
help me in that task?

4\/3!!

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008776.html">[Openocd-development] [patch] openocd.texi - svf and xsvf	commands
</A></li>
	<LI>Next message: <A HREF="008743.html">[Openocd-development] Dynamic library loading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8737">[ date ]</a>
              <a href="thread.html#8737">[ thread ]</a>
              <a href="subject.html#8737">[ subject ]</a>
              <a href="author.html#8737">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

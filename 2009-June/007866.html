<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] unable to open ftdi device
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20unable%20to%20open%20ftdi%20device&In-Reply-To=%3C4A2ED4FA.4080706%40st.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007880.html">
   <LINK REL="Next"  HREF="007867.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] unable to open ftdi device</H1>
    <B>Paul J THACKER</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20unable%20to%20open%20ftdi%20device&In-Reply-To=%3C4A2ED4FA.4080706%40st.com%3E"
       TITLE="[Openocd-development] unable to open ftdi device">paul.thacker at st.com
       </A><BR>
    <I>Tue Jun  9 23:32:42 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="007880.html">[Openocd-development] My source [find target,	interface etc.] lines in my .cfg files don't work with latest build
</A></li>
        <LI>Next message: <A HREF="007867.html">[Openocd-development] unable to open ftdi device
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7866">[ date ]</a>
              <a href="thread.html#7866">[ thread ]</a>
              <a href="subject.html#7866">[ subject ]</a>
              <a href="author.html#7866">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Openocd-0.1.0 on OpenSUSE 11.0 with Amontec jtagkey-tiny:

<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">thackerp at cea05</A>:~/cartesio/eclipse/trunk&gt; openocd -f jtagkey-tiny.cfg
Open On-Chip Debugger 0.1.0 (2009-05-21-09:56) Release


BUGS? Read <A HREF="http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS">http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS</A>


$URL: 
<A HREF="https://kc8apf@svn.berlios.de/svnroot/repos/openocd/tags/openocd-0.1.0/src/openocd.c">https://kc8apf@svn.berlios.de/svnroot/repos/openocd/tags/openocd-0.1.0/src/openocd.c</A> 
$
Error: unable to open ftdi device: 18
initialise_usb failed
Error: ListDevices: NONE

Runtime error, file &quot;command.c&quot;, line 456:

Trace and debug outputs:

open(&quot;jtagkey-tiny.cfg&quot;, O_RDONLY)      = 3
close(3)                                = 0
open(&quot;jtagkey-tiny.cfg&quot;, O_RDONLY)      = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=118, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 
0) = 0xb8092000
read(3, &quot;#interface\ninterface ft2232\nft22&quot;..., 4096) = 118
read(3, &quot;&quot;, 4096)                       = 0
read(3, &quot;&quot;, 4096)                       = 0
close(3)                                = 0
munmap(0xb8092000, 4096)                = 0
gettimeofday({1244582536, 328068}, NULL) = 0
gettimeofday({1244582536, 328114}, NULL) = 0
gettimeofday({1244582536, 329023}, NULL) = 0
gettimeofday({1244582536, 329079}, NULL) = 0
gettimeofday({1244582536, 329212}, NULL) = 0
gettimeofday({1244582536, 329255}, NULL) = 0
gettimeofday({1244582536, 329362}, NULL) = 0
gettimeofday({1244582536, 329404}, NULL) = 0
gettimeofday({1244582536, 329534}, NULL) = 0
gettimeofday({1244582536, 329577}, NULL) = 0
open(&quot;/proc/sys/kernel/osrelease&quot;, O_RDONLY) = 3
fstat64(3, {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 
0) = 0xb8092000
read(3, &quot;2.6.25.18-0.2-pae\n&quot;, 1024)    = 18
read(3, &quot;&quot;, 1024)                       = 0
close(3)                                = 0
munmap(0xb8092000, 4096)                = 0
open(&quot;/proc/bus/usb&quot;, 
O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY|0x80000) = 3
fstat64(3, {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0
fcntl64(3, F_GETFD)                     = 0x1 (flags FD_CLOEXEC)
getdents64(3, /* 2 entries */, 1024)    = 48
getdents64(3, /* 0 entries */, 1024)    = 0
close(3)                                = 0
open(&quot;/dev/usb&quot;, O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY|0x80000) = 
-1 ENOENT (No such file or directory)
write(2, &quot;Error: unable to open ftdi devic&quot;..., 38Error: unable to open 
ftdi device: 18
) = 38
open(&quot;/proc/bus/usb&quot;, 
O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY|0x80000) = 3
fstat64(3, {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0
getdents64(3, /* 2 entries */, 1024)    = 48
getdents64(3, /* 0 entries */, 1024)    = 0
close(3)                                = 0
open(&quot;/dev/usb&quot;, O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY|0x80000) = 
-1 ENOENT (No such file or directory)
fstat64(1, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 6), ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 
0) = 0xb8092000
write(1, &quot;initialise_usb failed\n&quot;, 22initialise_usb failed
) = 22
write(2, &quot;Error: ListDevices: NONE\n\n&quot;, 26Error: ListDevices: NONE

) = 26
write(2, &quot;Runtime error, file \&quot;command.c\&quot;,&quot;..., 47Runtime error, file 
&quot;command.c&quot;, line 456:
     ) = 47
exit_group(1)

cea05:/home/thackerp/cartesio/eclipse/trunk # openocd -d 3 -f 
jtagkey-tiny.cfg
Open On-Chip Debugger 0.1.0 (2009-05-21-09:56) Release


BUGS? Read <A HREF="http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS">http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS</A>


$URL: 
<A HREF="https://kc8apf@svn.berlios.de/svnroot/repos/openocd/tags/openocd-0.1.0/src/openocd.c">https://kc8apf@svn.berlios.de/svnroot/repos/openocd/tags/openocd-0.1.0/src/openocd.c</A> 
$
User : 5 0 command.c:494 command_run_line():
Debug: 6 0 configuration.c:88 find_file(): found jtagkey-tiny.cfg
Debug: 8 0 command.c:91 script_command(): script_command - interface
Debug: 9 0 command.c:108 script_command(): script_command - interface, 
argv[0]=ocd_interface
Debug: 10 0 command.c:108 script_command(): script_command - interface, 
argv[1]=ft2232
Debug: 12 0 command.c:91 script_command(): script_command - 
ft2232_device_desc
Debug: 13 0 command.c:108 script_command(): script_command - 
ft2232_device_desc, argv[0]=ocd_ft2232_device_desc
Debug: 14 0 command.c:108 script_command(): script_command - 
ft2232_device_desc, argv[1]=Amontec JTAGkey A
Debug: 16 0 command.c:91 script_command(): script_command - ft2232_layout
Debug: 17 0 command.c:108 script_command(): script_command - 
ft2232_layout, argv[0]=ocd_ft2232_layout
Debug: 18 0 command.c:108 script_command(): script_command - 
ft2232_layout, argv[1]=jtagkey
Debug: 20 0 command.c:91 script_command(): script_command - ft2232_vid_pid
Debug: 21 0 command.c:108 script_command(): script_command - 
ft2232_vid_pid, argv[0]=ocd_ft2232_vid_pid
Debug: 22 0 command.c:108 script_command(): script_command - 
ft2232_vid_pid, argv[1]=0x0403
Debug: 23 0 command.c:108 script_command(): script_command - 
ft2232_vid_pid, argv[2]=0xcff8
User : 24 0 command.c:494 command_run_line():
Debug: 26 0 command.c:91 script_command(): script_command - init
Debug: 27 0 command.c:108 script_command(): script_command - init, 
argv[0]=ocd_init
Debug: 28 0 openocd.c:144 handle_init_command(): target init complete
Debug: 29 0 ft2232.c:1463 ft2232_init_ftd2xx(): 'ft2232' interface using 
FTD2XX with 'jtagkey' layout (0403:cff8)
Error: 30 1 ft2232.c:1506 ft2232_init_ftd2xx(): unable to open ftdi 
device: 18
initialise_usb failed
Error: 31 1 ft2232.c:1532 ft2232_init_ftd2xx(): ListDevices: NONE

Debug: 32 1 command.c:427 run_command(): Command failed with error code -100
User : 33 1 command.c:626 openocd_jim_vfprintf(): Runtime error, file 
&quot;command.c&quot;, line 456:
     User : 34 1 command.c:626 openocd_jim_vfprintf():

Same error when run as root. FTDI device shows up under lsusb:

<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">thackerp at cea05</A>:~/cartesio/eclipse/trunk&gt; lsusb
Bus 003 Device 002: ID 046d:c315 Logitech, Inc. Classic New Touch Keyboard
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 003: ID 0bc2:0502 Seagate RSS LLC
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 004: ID 0403:cff8 Future Technology Devices 
International, Ltd
Bus 001 Device 002: ID 045e:0040 Microsoft Corp. Wheel Mouse Optical
Bus 001 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub

I have no /dev/usb. Do I need some kind of udev rule to create it? 
Anybody see this before?

Thanks,
Paul

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007880.html">[Openocd-development] My source [find target,	interface etc.] lines in my .cfg files don't work with latest build
</A></li>
	<LI>Next message: <A HREF="007867.html">[Openocd-development] unable to open ftdi device
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7866">[ date ]</a>
              <a href="thread.html#7866">[ thread ]</a>
              <a href="subject.html#7866">[ subject ]</a>
              <a href="author.html#7866">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] new target_types.h
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20new%20target_types.h&In-Reply-To=%3C1243812317.26434.754.camel%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007593.html">
   <LINK REL="Next"  HREF="007563.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] new target_types.h</H1>
    <B>Zach Welch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20new%20target_types.h&In-Reply-To=%3C1243812317.26434.754.camel%40localhost%3E"
       TITLE="[Openocd-development] new target_types.h">zw at superlucidity.net
       </A><BR>
    <I>Mon Jun  1 01:25:17 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="007593.html">[Openocd-development] [PATCH] Ugly fix for J-Link hard power-on
</A></li>
        <LI>Next message: <A HREF="007563.html">[Openocd-development] new target_types.h
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7556">[ date ]</a>
              <a href="thread.html#7556">[ thread ]</a>
              <a href="subject.html#7556">[ subject ]</a>
              <a href="author.html#7556">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2009-05-31 at 12:15 -0400, Duane Ellis wrote:
&gt;<i> zach&gt; Move definition of 'struct target_type_s' into new 'target_type.h' 
</I>&gt;<i> file.
</I>&gt;<i> 
</I>&gt;<i> Hmm,
</I>&gt;<i> 
</I>&gt;<i> why would this not be in:  
</I>&gt;<i> 
</I>&gt;<i> 	#include &lt;openocd/_types_.h&gt;
</I>
Why put it in its own file?  Encapsulation, that's why.

&gt;<i> Or something like that, I specifically mean a file with a bunch of forward structure definitions, really simple - the file would not have 'structure contents' - only the names. 
</I>&gt;<i> 
</I>&gt;<i> ie: Something as little and as simple as this:
</I>&gt;<i> 
</I>&gt;<i> 	struct foobar_s;
</I>&gt;<i> 	typedef struct foobar_s foobar_t;
</I>&gt;<i> 
</I>&gt;<i> That &quot;forward decoration types header file&quot; would in it self be very helpful. &quot;target_types.h&quot; is no better then &quot;target.h&quot;
</I>
You want to expose every struct name to every module?  No thanks.

If you need help finding structures, use the Doxygen manual.  Oh, but
wait... there are virtually twice as many of these types as there could
be, because these typedefs are effectively redundant and serve to
clutter up the namespace.  They detract from the code and documentation
and should be removed completely.

&gt;<i> Reasoning: 90% of the time, all that is really needed/used is a *POINTER* to the structure.
</I>
We would not need such forward declarations if if we used the 'struct
foo_s *' form instead of the typedefs.

For example, I have a patch to remove the jtag_tap_t forward declaration
from types.h and another to remove the jtag_tap_t symbol completely.
These will hit the list shortly.

--Z

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007593.html">[Openocd-development] [PATCH] Ugly fix for J-Link hard power-on
</A></li>
	<LI>Next message: <A HREF="007563.html">[Openocd-development] new target_types.h
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7556">[ date ]</a>
              <a href="thread.html#7556">[ thread ]</a>
              <a href="subject.html#7556">[ subject ]</a>
              <a href="author.html#7556">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

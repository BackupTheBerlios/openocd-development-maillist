<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] make maintainer-clean is does not work when build != src dir
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20make%20maintainer-clean%20is%20does%20not%20work%0A%20when%20build%20%21%3D%20src%20dir&In-Reply-To=%3C1244547127.31669.157.camel%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007837.html">
   <LINK REL="Next"  HREF="007848.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] make maintainer-clean is does not work when build != src dir</H1>
    <B>Zach Welch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20make%20maintainer-clean%20is%20does%20not%20work%0A%20when%20build%20%21%3D%20src%20dir&In-Reply-To=%3C1244547127.31669.157.camel%40localhost%3E"
       TITLE="[Openocd-development] make maintainer-clean is does not work when build != src dir">zw at superlucidity.net
       </A><BR>
    <I>Tue Jun  9 13:32:07 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="007837.html">[Openocd-development] make maintainer-clean is does not work	when build != src dir
</A></li>
        <LI>Next message: <A HREF="007848.html">[Openocd-development] cygwin libtool: s/ECHO=/echo=/
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7845">[ date ]</a>
              <a href="thread.html#7845">[ thread ]</a>
              <a href="subject.html#7845">[ subject ]</a>
              <a href="author.html#7845">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2009-06-09 at 12:39 +0200, &#216;yvind Harboe wrote:
&gt;<i> On Tue, Jun 9, 2009 at 12:24 PM, Zach Welch&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">zw at superlucidity.net</A>&gt; wrote:
</I>&gt;<i> &gt; On Tue, 2009-06-09 at 12:00 +0200, &#216;yvind Harboe wrote:
</I>&gt;<i> &gt;&gt; I use a different build &amp; openocd src dir, this means &quot;make
</I>&gt;<i> &gt;&gt; maintainer-clean&quot; does not work...
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Is this old news?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; This is reproduceable under Linux as well as Cygwin.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I tricked myself into believing that &quot;make maintainer-clean&quot; worked from
</I>&gt;<i> &gt;&gt; the build directory at some point and confused that with the eol native
</I>&gt;<i> &gt;&gt; line issues....
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Whoops!  I will commit a patch that fixes this shortly.
</I>&gt;<i> 
</I>&gt;<i> Works fine now. Thanks!
</I>&gt;<i> 
</I>&gt;<i> My remaining concern is that &quot;bootstrap&quot; does not do a &quot;make
</I>&gt;<i> maintainer-clean&quot;...
</I>
If you _always_ do a maintainer-clean _before_ merging changes that
touch the build system, then the clean building process you want to work
should work flawlessly (if there are no bugs).

I would even say that doing otherwise is a &quot;user error&quot;.  Your mess. ;)

&gt;<i> I'd want/expect the following sequence to *always* work:
</I>&gt;<i> 
</I>&gt;<i> - svn update
</I>&gt;<i> - boostrap
</I>&gt;<i> - configure
</I>&gt;<i> - make
</I>
Without a maintainer-clean first, this is impossible to guarantee.

Specifically, there is no way for the build system to know the version
or state of the old code version and how to clean it up.  That said, it
should work most of the time.  With --enable-maintainer-mode, you should
not even need to bother with the bootstrap and configure steps!  A
simple make is usually sufficient, and it will rebuild the required
Makefiles or other files when the autotools sources are changed.

If it doesn't, well, that's why I warn you to run maintainer-clean. :)
The first place to start debugging will be &quot;starting from a fresh
checkout&quot;, which was what that preparatory command was meant to do.

Cheers,

Zach


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007837.html">[Openocd-development] make maintainer-clean is does not work	when build != src dir
</A></li>
	<LI>Next message: <A HREF="007848.html">[Openocd-development] cygwin libtool: s/ECHO=/echo=/
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7845">[ date ]</a>
              <a href="thread.html#7845">[ thread ]</a>
              <a href="subject.html#7845">[ subject ]</a>
              <a href="author.html#7845">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

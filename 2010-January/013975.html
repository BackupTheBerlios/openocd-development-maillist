<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] openocd-0.40.-rc1 -c shutdown returns	EXIT_FAIL
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20openocd-0.40.-rc1%20-c%20shutdown%20returns%0A%09EXIT_FAIL&In-Reply-To=%3Cc09652431001042255l3976ce7kae4cb8e50ef695bb%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013971.html">
   <LINK REL="Next"  HREF="013976.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] openocd-0.40.-rc1 -c shutdown returns	EXIT_FAIL</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20openocd-0.40.-rc1%20-c%20shutdown%20returns%0A%09EXIT_FAIL&In-Reply-To=%3Cc09652431001042255l3976ce7kae4cb8e50ef695bb%40mail.gmail.com%3E"
       TITLE="[Openocd-development] openocd-0.40.-rc1 -c shutdown returns	EXIT_FAIL">oyvind.harboe at zylin.com
       </A><BR>
    <I>Tue Jan  5 07:55:04 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="013971.html">[Openocd-development] openocd-0.40.-rc1 -c shutdown returns	EXIT_FAIL
</A></li>
        <LI>Next message: <A HREF="013976.html">[Openocd-development] openocd-0.40.-rc1 -c shutdown returns	EXIT_FAIL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13975">[ date ]</a>
              <a href="thread.html#13975">[ thread ]</a>
              <a href="subject.html#13975">[ subject ]</a>
              <a href="author.html#13975">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Jan 4, 2010 at 10:17 PM, David Brownell &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">david-b at pacbell.net</A>&gt; wrote:
&gt;<i> On Monday 04 January 2010, &#216;yvind Harboe wrote:
</I>&gt;&gt;<i> On Mon, Jan 4, 2010 at 8:59 PM, David Brownell &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">david-b at pacbell.net</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; On Monday 04 January 2010, &#216;yvind Harboe wrote:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; This is a hack of course, but I'm wondering if it is the best
</I>&gt;&gt;<i> &gt;&gt; hack for 0.4...
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I'd like a solution that gets rid of *all* the errors on
</I>&gt;&gt;<i> &gt; execution of the &quot;shutdown&quot; command.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Is there a reason why shutdown doesn't just cause exit()?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It's less &quot;clean&quot;,
</I>&gt;<i>
</I>&gt;<i> But it's &quot;correct&quot; ... where the current code isn't.
</I>
Actually the exit command shouldn't even be built for embedded
targets, it doesn't mean anything. There is no &quot;exit&quot;, for embedded hosts
I've implemented a much more apt &quot;reboot&quot; command, which
reboots the zy1000.

For 0.4 the best thing I can come up with right now is to call exit() for the
&quot;exit&quot; command and deleting all the kludges higher up in the callstack.

For *debugging* purposes, it would be nice to have a way to
let openocd terminate by returning from the main() fn. valgrind
and such could then enumerate all alllocations that have not
been freed up by the time main() has returned, all cleanup(atexit
handlers), etc. has been run. But that can come post 0.4.


-- 
&#216;yvind Harboe
US toll free 1-866-980-3434 / International +47 51 63 25 00
<A HREF="http://www.zylin.com/zy1000.html">http://www.zylin.com/zy1000.html</A>
ARM7 ARM9 ARM11 XScale Cortex
JTAG debugger and flash programmer

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013971.html">[Openocd-development] openocd-0.40.-rc1 -c shutdown returns	EXIT_FAIL
</A></li>
	<LI>Next message: <A HREF="013976.html">[Openocd-development] openocd-0.40.-rc1 -c shutdown returns	EXIT_FAIL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13975">[ date ]</a>
              <a href="thread.html#13975">[ thread ]</a>
              <a href="subject.html#13975">[ subject ]</a>
              <a href="author.html#13975">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] [PATCH] atmega128: implement EEPROM flashing
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%5D%20atmega128%3A%20implement%20EEPROM%20flashing&In-Reply-To=%3C20100113143737.GN2553%40home.pavel.comp%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014139.html">
   <LINK REL="Next"  HREF="014142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] [PATCH] atmega128: implement EEPROM flashing</H1>
    <B>Paul Fertser</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%5D%20atmega128%3A%20implement%20EEPROM%20flashing&In-Reply-To=%3C20100113143737.GN2553%40home.pavel.comp%3E"
       TITLE="[Openocd-development] [PATCH] atmega128: implement EEPROM flashing">fercerpav at gmail.com
       </A><BR>
    <I>Wed Jan 13 15:37:37 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="014139.html">[PATCH] atmega128: implement EEPROM flashing
</A></li>
        <LI>Next message: <A HREF="014142.html">[Openocd-development] [PATCH] atmega128: implement EEPROM	flashing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14138">[ date ]</a>
              <a href="thread.html#14138">[ thread ]</a>
              <a href="subject.html#14138">[ subject ]</a>
              <a href="author.html#14138">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Attached is the patch that allows me to program both flash and eeprom of
atmega128.

Indeed it's not elegant but so is the whole AVR support :|

The question i still have no idea how to answer is how to properly implement
verification support? The problem is that the memory in question is NOR and so
the driver was implemented as a nor driver. But since OCD doesn't work with AVR
in openocd i have no chance to use regular commands to readout flash and eeprom
contents. Datasheet mentions special JTAG commands that let one to read it back
(similar to the programming) but i have no idea how to proceed
openocd-architecture-wise. Probably avrf driver should be implemented like nand?

Thanks a lot to everybody involved,
Happy hacking!
-- 
Be free, use free (<A HREF="http://www.gnu.org/philosophy/free-sw.html">http://www.gnu.org/philosophy/free-sw.html</A>) software!
mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">fercerpav at gmail.com</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014139.html">[PATCH] atmega128: implement EEPROM flashing
</A></li>
	<LI>Next message: <A HREF="014142.html">[Openocd-development] [PATCH] atmega128: implement EEPROM	flashing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14138">[ date ]</a>
              <a href="thread.html#14138">[ thread ]</a>
              <a href="subject.html#14138">[ subject ]</a>
              <a href="author.html#14138">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] cortex_a : dap_ap_select issue when multiple target on the same dap
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20cortex_a%20%3A%20dap_ap_select%20issue%20when%0A%20multiple%20target%20on%20the%20same%20dap&In-Reply-To=%3CA3217089E06965468FCEC60ADC3A8F9255FE2FED90%40EXDCVYMBSTM006.EQ1STM.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018744.html">
   <LINK REL="Next"  HREF="018784.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] cortex_a : dap_ap_select issue when multiple target on the same dap</H1>
    <B>Michel JAOUEN</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20cortex_a%20%3A%20dap_ap_select%20issue%20when%0A%20multiple%20target%20on%20the%20same%20dap&In-Reply-To=%3CA3217089E06965468FCEC60ADC3A8F9255FE2FED90%40EXDCVYMBSTM006.EQ1STM.local%3E"
       TITLE="[Openocd-development] cortex_a : dap_ap_select issue when multiple target on the same dap">michel.jaouen at stericsson.com
       </A><BR>
    <I>Tue Apr 12 18:56:05 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="018744.html">[Openocd-development] cortex_a : dap_ap_select issue when	multiple target on the same dap
</A></li>
        <LI>Next message: <A HREF="018784.html">[Openocd-development] cortex_a : dap_ap_select issue when multiple target on the same dap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18773">[ date ]</a>
              <a href="thread.html#18773">[ thread ]</a>
              <a href="subject.html#18773">[ subject ]</a>
              <a href="author.html#18773">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello, 
Following your advice, here is a set of 3 patches impacting only cortex_a functions: 
0001-cortex_a-use-dap-ref-from-armv4_5common.patch : 
No change in cortex_a behaviour, dap is always selected from armv4_5common
0002-cortex_a-multiple-target-on-the-same-dap.patch : 
Cortex_a behavior is changing ,on the same tap, the 1st initialization build the dap instance,
The other instance relies on the 1st instance.
0003-cortex_a-apb-mem-read-write-working-with-mmu_on.patch :
Support memory read even from apb mem access even if mmu is on : 
(This support is needed for ste u8500, DDR is not accessible from ap mem)

Best regards

-----Original Message-----
From: &#216;yvind Harboe [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">oyvind.harboe at zylin.com</A>] 
Sent: Monday, April 11, 2011 8:26 PM
To: Michel JAOUEN
Cc: luca ellero; <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">openocd-development at lists.berlios.de</A>
Subject: Re: cortex_a : dap_ap_select issue when multiple target on the same dap

I haven't been following cortex work closely enough to comment
in detail, but a couple of things come to mind:

try to split the commits into the &quot;harmless&quot; first and then
later on those that enable new features and have a bigger
chance of breaking things.

Having small commits will make it easier to review the changes.

That said, it sounds to me like you're heading in the right
direction. Perhaps we can come up with more clever ways
of separating jtag tap and dap later on, but I don't have
any clever suggestions  as of writing.

-- 
&#216;yvind Harboe

Can Zylin Consulting help on your project?

US toll free 1-866-980-3434 / International +47 51 87 40 27

<A HREF="http://www.zylin.com/zy1000.html">http://www.zylin.com/zy1000.html</A>
ARM7 ARM9 ARM11 XScale Cortex
JTAG debugger and flash programmer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0003-cortex_a-apb-mem-read-write-working-with-mmu_on.patch
Type: application/octet-stream
Size: 12798 bytes
Desc: 0003-cortex_a-apb-mem-read-write-working-with-mmu_on.patch
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20110412/95e5ca0e/attachment.obj">https://lists.berlios.de/pipermail/openocd-development/attachments/20110412/95e5ca0e/attachment.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0001-cortex_a-use-dap-ref-from-armv4_5common.patch
Type: application/octet-stream
Size: 6672 bytes
Desc: 0001-cortex_a-use-dap-ref-from-armv4_5common.patch
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20110412/95e5ca0e/attachment-0001.obj">https://lists.berlios.de/pipermail/openocd-development/attachments/20110412/95e5ca0e/attachment-0001.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0002-cortex_a-multiple-target-on-the-same-dap.patch
Type: application/octet-stream
Size: 1618 bytes
Desc: 0002-cortex_a-multiple-target-on-the-same-dap.patch
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20110412/95e5ca0e/attachment-0002.obj">https://lists.berlios.de/pipermail/openocd-development/attachments/20110412/95e5ca0e/attachment-0002.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018744.html">[Openocd-development] cortex_a : dap_ap_select issue when	multiple target on the same dap
</A></li>
	<LI>Next message: <A HREF="018784.html">[Openocd-development] cortex_a : dap_ap_select issue when multiple target on the same dap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18773">[ date ]</a>
              <a href="thread.html#18773">[ thread ]</a>
              <a href="subject.html#18773">[ subject ]</a>
              <a href="author.html#18773">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] [PATCH] Correct very slow initialization steps and strange behaviour
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-April/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%5D%20Correct%20very%20slow%20initialization%0A%20steps%20and%20strange%20behaviour&In-Reply-To=%3C4DB7FE41.2000105%40amontec.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018922.html">
   <LINK REL="Next"  HREF="018921.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] [PATCH] Correct very slow initialization steps and strange behaviour</H1>
    <B>Laurent Gauch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%5D%20Correct%20very%20slow%20initialization%0A%20steps%20and%20strange%20behaviour&In-Reply-To=%3C4DB7FE41.2000105%40amontec.com%3E"
       TITLE="[Openocd-development] [PATCH] Correct very slow initialization steps and strange behaviour">laurent.gauch at amontec.com
       </A><BR>
    <I>Wed Apr 27 13:30:09 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="018922.html">[Openocd-development] [PATCH] Correct very slow initialization steps and strange behaviour
</A></li>
        <LI>Next message: <A HREF="018921.html">[Openocd-development] [PATCH] Correct very slow initialization steps and strange behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18920">[ date ]</a>
              <a href="thread.html#18920">[ thread ]</a>
              <a href="subject.html#18920">[ subject ]</a>
              <a href="author.html#18920">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> I'm not looking for something that works in all circumstances. I just
</I>&gt;<i> want it to be the *same* across all interfaces.
</I>&gt;<i>
</I>&gt;<i> The correct long term solution would be to have *no* default speed
</I>&gt;<i> and just put up an error message if the script doesn't specify it.
</I>&gt;<i> IMHO.
</I>For me the correct is :
1. -init- fix the adapter jtag interface to a default frequency as 100kHz.
2a. close the JTAG interface if the scripts did not surcharge the JTAG frequency, or set the new frequency wanted by the script.
2b. try to detect the maximum working frequency and continue the JTAG interface.

With this, we do not need to call any JTAG_ fn (upper level) from the adapter JTAG driver (lower level). Also, this avoid tones of big spagethi and make the all more robust.

Also, we could think to add the JTAG frequency when initializing the JTAG interface as JTAG_interface-&gt;init(100);

&gt;<i>
</I>&gt;<i> &gt;/ So I think having no default and forcing the user to specify a value
</I>&gt;<i> /&gt;/ might be the way to go.
</I>&gt;<i> /
</I>&gt;<i> Agreed. If we could have that patch first and not go the detour of
</I>&gt;<i> a fixed default across all interfaces, then that would be
</I>&gt;<i> my choice too.
</I>The JTAG adapter do not need to know if the core.c is happy or not with the JTAG frequency coming from a script or from anywhere. The JTAG adapter just want to know what JTAG frequency to work on.
&gt;<i> Patch anyone?
</I>
Regards,
Laurent 
 <A HREF="http://www.amontec.com/">http://www.amontec.com/</A>
 Amontec JTAGkey-2 : High speed USB JTAG interface
 <A HREF="http://www.amontec.com/jtagkey.shtml">http://www.amontec.com/jtagkey.shtml</A> 




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018922.html">[Openocd-development] [PATCH] Correct very slow initialization steps and strange behaviour
</A></li>
	<LI>Next message: <A HREF="018921.html">[Openocd-development] [PATCH] Correct very slow initialization steps and strange behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18920">[ date ]</a>
              <a href="thread.html#18920">[ thread ]</a>
              <a href="subject.html#18920">[ subject ]</a>
              <a href="author.html#18920">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

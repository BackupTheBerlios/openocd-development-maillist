<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] EmbeddedICE send patch
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2007-August/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20EmbeddedICE%20send%20patch&In-Reply-To=%3C46CC125C.7070503%40asix.cz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000301.html">
   <LINK REL="Next"  HREF="000304.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] EmbeddedICE send patch</H1>
    <B>Pavel Chromy</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20EmbeddedICE%20send%20patch&In-Reply-To=%3C46CC125C.7070503%40asix.cz%3E"
       TITLE="[Openocd-development] EmbeddedICE send patch">chromy at asix.cz
       </A><BR>
    <I>Wed Aug 22 12:39:24 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000301.html">[Openocd-development] Support for AT91SAM7X512
</A></li>
        <LI>Next message: <A HREF="000304.html">[Openocd-development] EmbeddedICE send patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#302">[ date ]</a>
              <a href="thread.html#302">[ thread ]</a>
              <a href="subject.html#302">[ subject ]</a>
              <a href="author.html#302">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello list,

I have attached a patch to embeddedice.c adding
embeddedice_send() which is a counterpart to embeddedice_receive()
This is useful e.g. for sending data to a flash loader
semi-hosted on the chip (work in progress on such thing).
I have also added function embeddedice_handshake() which waits (with timeout)
until the DCC is ready to receive (or send) the data.

Also it seems to me that unnecessary to dynamically allocate
amounts of memory as small as 1 byte if the size is known at compile time,
so I have modified embeddedice_[receive,write_reg,read_reg_w_check] to use
local variables to fill in scan fields.
Even if the overhead of dynamic allocation is low in my opinion it is
a good idea to avoid such extreme situations.

I propose this to be merged to SVN.

Best regards,
   Pavel
-------------- next part --------------
A non-text attachment was scrubbed...
Name: eice_send.zip
Type: application/x-zip-compressed
Size: 1818 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20070822/d0797208/attachment.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20070822/d0797208/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000301.html">[Openocd-development] Support for AT91SAM7X512
</A></li>
	<LI>Next message: <A HREF="000304.html">[Openocd-development] EmbeddedICE send patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#302">[ date ]</a>
              <a href="thread.html#302">[ thread ]</a>
              <a href="subject.html#302">[ subject ]</a>
              <a href="author.html#302">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

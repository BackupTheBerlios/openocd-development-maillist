<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Generic on-chip loader,	was: EmbeddedICE send patch
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2007-August/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Generic%20on-chip%20loader%2C%0A%09was%3A%20EmbeddedICE%20send%20patch&In-Reply-To=%3C46D13BA9.6070003%40asix.cz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000307.html">
   <LINK REL="Next"  HREF="000313.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Generic on-chip loader,	was: EmbeddedICE send patch</H1>
    <B>Pavel Chromy</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Generic%20on-chip%20loader%2C%0A%09was%3A%20EmbeddedICE%20send%20patch&In-Reply-To=%3C46D13BA9.6070003%40asix.cz%3E"
       TITLE="[Openocd-development] Generic on-chip loader,	was: EmbeddedICE send patch">chromy at asix.cz
       </A><BR>
    <I>Sun Aug 26 10:36:57 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000307.html">[Openocd-development] EmbeddedICE send patch
</A></li>
        <LI>Next message: <A HREF="000313.html">[Openocd-development] Generic on-chip loader,	was: EmbeddedICE send patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#312">[ date ]</a>
              <a href="thread.html#312">[ thread ]</a>
              <a href="subject.html#312">[ subject ]</a>
              <a href="author.html#312">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Dominic and the list,

here is a working draft of generic on-chip loader I created, if anyone is interested.
(see the quotation below for context).
I am looking forward to hear any comments, improvements or objections.
Even if it is not added to the repository some user might find this useful.

I have attached an example of a loader which does flashing of at91sam7x,
however, this is just an example, it would be better to have support for
semi-hosted flashing of at91sam7x included directly in OpenOCD.
My aim was to create generic interface as simple as possible,
for feeding the data to the target, it might not be directly related
to flash memory belonging to the target.

I also thought about &quot;shared memory&quot; communication method
do you think this would be a good/better idea that direct usage of DCC?
(DCC should be more efficient in theory, he question is how significant role this plays
in overall speed)

Pavel

&gt;<i> I am aware of that there are already algorithms running on the target 
</I>&gt;<i> for most
</I>&gt;<i> of the supported flashes.
</I>&gt;<i> 
</I>&gt;<i> The idea I have is to create a virtual flash driver as a generic 
</I>&gt;<i> interface to feed data
</I>&gt;<i> to the target for processing via simple protocol running over DCC.
</I>&gt;<i> The algorithm could be loaded to the target as an image by script or 
</I>&gt;<i> simply by
</I>&gt;<i> hand for one shot operation.
</I>&gt;<i> This would be typically useful for programming some special memory not 
</I>&gt;<i> supported by
</I>&gt;<i> OpenOCD (e.g. serial data flash) without necessity to patch and 
</I>&gt;<i> recompile OpenOCD
</I>&gt;<i> because of a single usage of such exotic memory part.
</I>&gt;<i> All needed to do would be to program a simple target application 
</I>&gt;<i> receiving data by a defined protocol.
</I>&gt;<i> 
</I>&gt;<i> Another usage of this I can think of is feeding FPGA configuration data 
</I>&gt;<i> to the target (FPGA configured
</I>&gt;<i> by target in slave mode). I believe more situations like this may be found.
</I>&gt;<i> 
</I>&gt;<i> Note: I know that DCC is not available in every target but I have chosen 
</I>&gt;<i> this as probably the most
</I>&gt;<i> efficient way of communication with running target application. There 
</I>&gt;<i> may be also a &quot;shared memory&quot; mode
</I>&gt;<i> for targets not featuring DCC in the future.
</I>&gt;<i> 
</I>&gt;<i> What do you think about this idea? I will post this to the forum once it 
</I>&gt;<i> is fully functional.
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: openocd_ocl.zip
Type: application/x-zip-compressed
Size: 3869 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20070826/ca53b2c3/attachment.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20070826/ca53b2c3/attachment.bin</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: at91sam7x_ocl.zip
Type: application/x-zip-compressed
Size: 10048 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20070826/ca53b2c3/attachment-0001.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20070826/ca53b2c3/attachment-0001.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000307.html">[Openocd-development] EmbeddedICE send patch
</A></li>
	<LI>Next message: <A HREF="000313.html">[Openocd-development] Generic on-chip loader,	was: EmbeddedICE send patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#312">[ date ]</a>
              <a href="thread.html#312">[ thread ]</a>
              <a href="subject.html#312">[ subject ]</a>
              <a href="author.html#312">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

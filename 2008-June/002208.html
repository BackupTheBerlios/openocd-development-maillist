<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Patch2: avoid memory leak of working area if	flash fails on LPC2000
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Patch2%3A%20avoid%20memory%20leak%20of%20working%20area%20if%0A%09flash%20fails%20on%20LPC2000&In-Reply-To=%3COF5AE79259.6C85EB2C-ONC125745D.0037D1B8-C125745D.00383286%40securitasdirect.se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002206.html">
   <LINK REL="Next"  HREF="002209.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Patch2: avoid memory leak of working area if	flash fails on LPC2000</H1>
    <B>Fredrik Hederstierna</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Patch2%3A%20avoid%20memory%20leak%20of%20working%20area%20if%0A%09flash%20fails%20on%20LPC2000&In-Reply-To=%3COF5AE79259.6C85EB2C-ONC125745D.0037D1B8-C125745D.00383286%40securitasdirect.se%3E"
       TITLE="[Openocd-development] Patch2: avoid memory leak of working area if	flash fails on LPC2000">fredrik.hederstierna at securitas-direct.com
       </A><BR>
    <I>Tue Jun  3 12:13:42 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002206.html">[Openocd-development] Patch: avoid memory leak of working area	if flash fails on str9x
</A></li>
        <LI>Next message: <A HREF="002209.html">[Openocd-development] Patch2: avoid memory leak of working area	if flash fails on LPC2000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2208">[ date ]</a>
              <a href="thread.html#2208">[ thread ]</a>
              <a href="subject.html#2208">[ subject ]</a>
              <a href="author.html#2208">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi 

I discovered that the error handling of working area can cause leaks in 
several other flash drivers.

I've made a patch also for LPC2000 that avoids memory leak of working area 
if flash fails. 
Maybe also other drivers should be checked to avoid restart of openocd if 
failure occurs.



Best Regards
Fredrik Hederstierna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20080603/d6565373/attachment.html">https://lists.berlios.de/pipermail/openocd-development/attachments/20080603/d6565373/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lpc2000_flash_leak.patch
Type: application/octet-stream
Size: 3224 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20080603/d6565373/attachment.obj">https://lists.berlios.de/pipermail/openocd-development/attachments/20080603/d6565373/attachment.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002206.html">[Openocd-development] Patch: avoid memory leak of working area	if flash fails on str9x
</A></li>
	<LI>Next message: <A HREF="002209.html">[Openocd-development] Patch2: avoid memory leak of working area	if flash fails on LPC2000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2208">[ date ]</a>
              <a href="thread.html#2208">[ thread ]</a>
              <a href="subject.html#2208">[ subject ]</a>
              <a href="author.html#2208">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

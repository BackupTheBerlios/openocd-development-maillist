<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] ARM NAND I/O: Read Function
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20ARM%20NAND%20I/O%3A%20Read%20Function&In-Reply-To=%3C1258284141.14924.4131.camel%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012360.html">
   <LINK REL="Next"  HREF="012379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] ARM NAND I/O: Read Function</H1>
    <B>Zach Welch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20ARM%20NAND%20I/O%3A%20Read%20Function&In-Reply-To=%3C1258284141.14924.4131.camel%40localhost%3E"
       TITLE="[Openocd-development] ARM NAND I/O: Read Function">zw at superlucidity.net
       </A><BR>
    <I>Sun Nov 15 12:22:21 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="012360.html">[Openocd-development] ARM NAND I/O: Read Function
</A></li>
        <LI>Next message: <A HREF="012379.html">[Openocd-development] ARM NAND I/O: Read Function
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12365">[ date ]</a>
              <a href="thread.html#12365">[ thread ]</a>
              <a href="subject.html#12365">[ subject ]</a>
              <a href="author.html#12365">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2009-11-15 at 02:19 -0700, David Brownell wrote:
&gt;<i> On Sunday 15 November 2009, Dean Glazeski wrote:
</I>&gt;<i> &gt; I've done an implementation of reading using an on-chip algorithm for NAND
</I>&gt;<i> &gt; devices attached to ARM chips.  It seems to work on my AT91SAM9260 board
</I>&gt;<i> &gt; increasing nand dump from 0.2 kb/s to 9.2 kb/s.  Not sure if this is the
</I>&gt;<i> &gt; best implementation, so take a look.  By the way, there is some room for
</I>&gt;<i> &gt; refactoring between this function and the write version.  I'm not sure how
</I>&gt;<i> &gt; to do that so I just posted this patch with the implementation.
</I>&gt;<i> 
</I>&gt;<i> At first glance it seemed OK; comments still talk about &quot;write&quot; not &quot;read&quot;
</I>&gt;<i> though.  :)
</I>&gt;<i> 
</I>&gt;<i> Minor style issues ... a few overlong lines, and don't do functions like
</I>&gt;<i> 
</I>&gt;<i> 	int f(...) {
</I>&gt;<i> 		...
</I>&gt;<i> 	}
</I>&gt;<i> 
</I>&gt;<i> Always have that left bracket at beginning-of-line.
</I>&gt;<i> 
</I>&gt;<i> Refactoring can come later.
</I>
Personally, I think refactoring should come first, along with a patch to
hook up this routine into the system.  Right now, it's dangling unused.

I have been working hard to eliminate duplicated code, so I am not eager
to see more entering the tree.  Others should take responsibility for
handling this work when it is required; remember, all patch series
should be finished before it's pushed.  That includes refactoring, which
will be easier _before_ adding code.  If such changes would clearly be
best for the code, then that seems like a clear reason for those patches
to be part of a series.

My recent NAND write/dump refactoring shows one way how this can be
done: add new helpers, use them in existing code, add your new code to
use them.  That may not be the order you do the development, and other
approaches for structuring the series would work too.  In any case, I
hope I have made a convincing argument for finding free time to factor
facsimiles first.

--Z


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012360.html">[Openocd-development] ARM NAND I/O: Read Function
</A></li>
	<LI>Next message: <A HREF="012379.html">[Openocd-development] ARM NAND I/O: Read Function
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12365">[ date ]</a>
              <a href="thread.html#12365">[ thread ]</a>
              <a href="subject.html#12365">[ subject ]</a>
              <a href="author.html#12365">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

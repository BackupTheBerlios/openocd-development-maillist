<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] remove superfluous typedefs
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20remove%20superfluous%20typedefs&In-Reply-To=%3C1258136919.14924.285.camel%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012296.html">
   <LINK REL="Next"  HREF="012300.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] remove superfluous typedefs</H1>
    <B>Zach Welch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20remove%20superfluous%20typedefs&In-Reply-To=%3C1258136919.14924.285.camel%40localhost%3E"
       TITLE="[Openocd-development] remove superfluous typedefs">zw at superlucidity.net
       </A><BR>
    <I>Fri Nov 13 19:28:39 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="012296.html">[Openocd-development] remove superfluous typedefs
</A></li>
        <LI>Next message: <A HREF="012300.html">[Openocd-development] remove superfluous typedefs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12297">[ date ]</a>
              <a href="thread.html#12297">[ thread ]</a>
              <a href="subject.html#12297">[ subject ]</a>
              <a href="author.html#12297">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 2009-11-13 at 11:08 -0700, David Brownell wrote:
&gt;<i> On Friday 13 November 2009, Zach Welch wrote:
</I>&gt;<i> &gt; Any further comment on my command handler series?  I want to push those
</I>&gt;<i> &gt; patches first, then these 160+ patches of cleanup....
</I>&gt;<i> 
</I>&gt;<i> In my other editor window -- just hit the &quot;send&quot;.  (Response to
</I>&gt;<i> a private message of yours.)
</I>
Thanks.  I have included the most relevant section below.

&gt;<i> Briefly, I really dislike the macros relying on lexical capture.
</I>&gt;<i> That's a breeding ground for some very hard-to-find bugs.  And
</I>&gt;<i> the temptation to have it seems to come entirely from starting
</I>&gt;<i> with a weak interface design.
</I>&gt;<i>
</I>&gt;<i> Using those macros as a short-term mechanism to clean up the
</I>&gt;<i> messy interfaces would make sense though -- then removing them.
</I>&gt;<i>
</I>On Fri, 2009-11-13 at 11:07 -0700, David Brownell wrote:
[snip] 
&gt;<i> 	struct command_invocation {
</I>&gt;<i> 		struct command_context *ctx;
</I>&gt;<i> 		unsigned argc;
</I>&gt;<i> 		char **argv;
</I>&gt;<i> 	};
</I>&gt;<i> 
</I>&gt;<i> Such a model is cheaper to call, and easier to maintain...
</I>
This was the destination that I had in mind, though it might be nicer to
stick cmd back in there (given that will yield simpler code).   I agree
that removing this macro after this final work is done should be among
the goals, but I'm all about incremental and iterative results.

I see the above being possible by renaming argc and args to CMD_ARGC and
CMD_ARGV and then using the same trick that I used on COMMAND_NAME
(which I suddenly want to rename).  However, I am not quite ready to
make that final push, as I know my sed-fu may fall short....  Anyway,
the subtle change to the standard spelling is not lost on me. ;)

So, for now, I will push this with the understanding that this is how
we'll deal with it.  Once it's one argument, then we can drop it; it
really was create so that all of the intervening patches will simply
have less noise in them.  AFAIK, that was the only objection to the
series, and it was well worth mentioning and discussing.

Brace yourself for a minor patch flood. :)

--Z


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012296.html">[Openocd-development] remove superfluous typedefs
</A></li>
	<LI>Next message: <A HREF="012300.html">[Openocd-development] remove superfluous typedefs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12297">[ date ]</a>
              <a href="thread.html#12297">[ thread ]</a>
              <a href="subject.html#12297">[ subject ]</a>
              <a href="author.html#12297">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] How to single step without interrupts?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20How%20to%20single%20step%20without%20interrupts%3F&In-Reply-To=%3C200911231956.36746.david-b%40pacbell.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012752.html">
   <LINK REL="Next"  HREF="012759.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] How to single step without interrupts?</H1>
    <B>David Brownell</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20How%20to%20single%20step%20without%20interrupts%3F&In-Reply-To=%3C200911231956.36746.david-b%40pacbell.net%3E"
       TITLE="[Openocd-development] How to single step without interrupts?">david-b at pacbell.net
       </A><BR>
    <I>Tue Nov 24 04:56:36 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="012752.html">[Openocd-development] How to single step without interrupts?
</A></li>
        <LI>Next message: <A HREF="012759.html">[Openocd-development] How to single step without interrupts?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12758">[ date ]</a>
              <a href="thread.html#12758">[ thread ]</a>
              <a href="subject.html#12758">[ subject ]</a>
              <a href="author.html#12758">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 23 November 2009, Thomas Kindler wrote:
&gt;<i> When single stepping on a STM32, I'm constantly caught in interrupt 
</I>&gt;<i> handler code. &#160;This makes debugging almost impossible for non-trivial 
</I>&gt;<i> programs with timer and other peripheral interrupts.
</I>&gt;<i> 
</I>&gt;<i> I have seen that there's an &quot;cortex_m3 maskisr on/off&quot; command, but it's 
</I>&gt;<i> awkward to use from eclipse. 
</I>
Does that solve the problem you're facing though?


&gt;<i> There seems to be no way to issue monitor  
</I>&gt;<i> commands to OpenOCD during a debug session, or even bind commands to a 
</I>&gt;<i> GUI button (perhaps a nice feature for Zylin-CDT?).
</I>&gt;<i> 
</I>&gt;<i> Is there a good way to tell OpenOCD to mask ISRs after hitting a 
</I>&gt;<i> breakpoint/single-stepping, but re-enable interrupts on run?
</I>
If &quot;monitor cortex_m3 maskisr on&quot; (or &quot;off&quot;) suffices, surely
you can script things so GDB runs automatically?  Or maybe not;
I don't use GDB much.  All I can say is that I've worked with
debuggers that were built around KSH, specifically so that they
could embed such scripting ... anywhere.  :)

I'm afraid I can't be of much help here.  Though I can wonder
whether this isn't something that would be a good match for
&quot;monitor mode&quot; support ... where you can debug one task with
the aid of some debug code linked into your program, while in
the background the interrupts are firing and their handlers
are doing their work.  Making OpenOCD support that might be
a good project someday.  (The chainsaw IRQ handler should
probably not be held off.

- Dave


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012752.html">[Openocd-development] How to single step without interrupts?
</A></li>
	<LI>Next message: <A HREF="012759.html">[Openocd-development] How to single step without interrupts?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12758">[ date ]</a>
              <a href="thread.html#12758">[ thread ]</a>
              <a href="subject.html#12758">[ subject ]</a>
              <a href="author.html#12758">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

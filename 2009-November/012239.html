<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] [PATCH 4/5] add help regardless of callback
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%204/5%5D%20add%20help%20regardless%20of%20callback&In-Reply-To=%3C1257971541-12580-5-git-send-email-zw%40superlucidity.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012236.html">
   <LINK REL="Next"  HREF="012240.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] [PATCH 4/5] add help regardless of callback</H1>
    <B>Zachary T Welch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%204/5%5D%20add%20help%20regardless%20of%20callback&In-Reply-To=%3C1257971541-12580-5-git-send-email-zw%40superlucidity.net%3E"
       TITLE="[Openocd-development] [PATCH 4/5] add help regardless of callback">zw at superlucidity.net
       </A><BR>
    <I>Wed Nov 11 21:32:20 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="012236.html">[Openocd-development] [PATCH 3/5] eliminate duplicate helptext	management
</A></li>
        <LI>Next message: <A HREF="012240.html">[Openocd-development] [PATCH 5/5] improve command registration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12239">[ date ]</a>
              <a href="thread.html#12239">[ thread ]</a>
              <a href="subject.html#12239">[ subject ]</a>
              <a href="author.html#12239">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Add help for commands regardless of whether a handler is involved.
With this, all sorts of new commands can be found in 'help' text.
Hopefully, all of them have been documented....

Sadly, the lsort function appears to handle nested lists poorly, such
that sub-commands do not group with their parents.

Signed-off-by: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">zw at superlucidity.net</A>&gt;
---
 src/helper/command.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/helper/command.c b/src/helper/command.c
index a4ac4af..5ac5c30 100644
--- a/src/helper/command.c
+++ b/src/helper/command.c
@@ -237,6 +237,8 @@ command_t* register_command(command_context_t *context, command_t *parent, char
 		}
 	}
 
+	command_helptext_add(command_name_list(c), help);
+
 	/* just a placeholder, no handler */
 	if (c-&gt;handler == NULL)
 		return c;
@@ -257,8 +259,6 @@ command_t* register_command(command_context_t *context, command_t *parent, char
 
 	free((void *)full_name);
 
-	command_helptext_add(command_name_list(c), help);
-
 	return c;
 }
 
-- 
1.6.4.4


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012236.html">[Openocd-development] [PATCH 3/5] eliminate duplicate helptext	management
</A></li>
	<LI>Next message: <A HREF="012240.html">[Openocd-development] [PATCH 5/5] improve command registration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12239">[ date ]</a>
              <a href="thread.html#12239">[ thread ]</a>
              <a href="subject.html#12239">[ subject ]</a>
              <a href="author.html#12239">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

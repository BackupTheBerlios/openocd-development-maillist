<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] [PATCH 2/2] allow documentation to be	configured
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%202/2%5D%20allow%20documentation%20to%20be%0A%09configured&In-Reply-To=%3C1258470150-14243-3-git-send-email-zw%40superlucidity.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012475.html">
   <LINK REL="Next"  HREF="012480.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] [PATCH 2/2] allow documentation to be	configured</H1>
    <B>Zachary T Welch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%202/2%5D%20allow%20documentation%20to%20be%0A%09configured&In-Reply-To=%3C1258470150-14243-3-git-send-email-zw%40superlucidity.net%3E"
       TITLE="[Openocd-development] [PATCH 2/2] allow documentation to be	configured">zw at superlucidity.net
       </A><BR>
    <I>Tue Nov 17 16:02:30 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="012475.html">[Openocd-development] [PATCH 1/2] update doxygen configuration to	produce a PDF
</A></li>
        <LI>Next message: <A HREF="012480.html">[Openocd-development] [PATCH 2/2] allow documentation to be	configured
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12476">[ date ]</a>
              <a href="thread.html#12476">[ thread ]</a>
              <a href="subject.html#12476">[ subject ]</a>
              <a href="author.html#12476">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Add --disable-manual-html and --enable-manual-pdf options to the
configure script, allowing user to change the defaults.  These
update the proess of munging the Doxygen configuration file to
use the settings thusly provided.  Add options in README.

Signed-off-by: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">zw at superlucidity.net</A>&gt;
---
 Doxyfile.in  |    4 ++--
 Makefile.am  |    5 ++++-
 README       |    3 +++
 configure.in |   17 +++++++++++++++++
 4 files changed, 26 insertions(+), 3 deletions(-)

diff --git a/Doxyfile.in b/Doxyfile.in
index 077db10..656e16d 100644
--- a/Doxyfile.in
+++ b/Doxyfile.in
@@ -764,7 +764,7 @@ IGNORE_PREFIX          =
 # If the GENERATE_HTML tag is set to YES (the default) Doxygen will
 # generate HTML output.
 
-GENERATE_HTML          = YES
+GENERATE_HTML          = @manual_as_html@
 
 # The HTML_OUTPUT tag is used to specify where the HTML docs will be put.
 # If a relative path is entered the value of OUTPUT_DIRECTORY will be
@@ -981,7 +981,7 @@ FORMULA_FONTSIZE       = 10
 # If the GENERATE_LATEX tag is set to YES (the default) Doxygen will
 # generate Latex output.
 
-GENERATE_LATEX         = YES
+GENERATE_LATEX         = @manual_as_pdf@
 
 # The LATEX_OUTPUT tag is used to specify where the LaTeX docs will be put.
 # If a relative path is entered the value of OUTPUT_DIRECTORY will be
diff --git a/Makefile.am b/Makefile.am
index be42c28..e60ea33 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -25,7 +25,10 @@ Doxyfile: $(srcdir)/Doxyfile.in
 	@( \
 	  echo &quot;### @@@ -= DO NOT EDIT THIS FILE =- @@@ ###&quot; &amp;&amp; \
 	  echo &quot;### @@@ Make changes to Doxyfile.in @@@ ###&quot; &amp;&amp; \
-	  sed -e '<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">s, at srcdir</A>\@,$(srcdir),' $&lt; \
+	  sed -e '<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">s, at srcdir</A>\@,$(srcdir),' \
+		-e '<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">s, at manual_as_html</A>\@,$(manual_as_html),' \
+		-e '<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">s, at manual_as_pdf</A>\@,$(manual_as_pdf),' \
+		$&lt; \
 	) &gt; $@
 
 THE_MANUAL = doxygen/latex/refman.pdf
diff --git a/README b/README
index 33258e8..1d4c3c5 100644
--- a/README
+++ b/README
@@ -258,6 +258,9 @@ options may be available there:
   --enable-httpd          Enable builtin httpd server - useful for standalone
                           OpenOCD implementations
 
+  --disable-manual-html   Disable building developer manual as HTML.
+  --enable-manual-pdf     Enable building developer manual as PDF.
+
 Miscellaneous Configure Options
 -------------------------------
 
diff --git a/configure.in b/configure.in
index fa2a498..70dba5c 100644
--- a/configure.in
+++ b/configure.in
@@ -277,6 +277,23 @@ AC_ARG_WITH(ftd2xx-lib,
   with_ftd2xx_lib=static
   ])
 
+AC_MSG_CHECKING([whether to build manual as HTML])
+AC_ARG_ENABLE(manaul-html,
+  AS_HELP_STRING([--disable-manual-html],
+    [Disable building developer manual as HTML.]),
+  [manual_as_html=$enableval], [manual_as_html=yes])
+AC_SUBST(manual_as_html)
+AC_MSG_RESULT($manual_as_html)
+
+AC_MSG_CHECKING([whether to build manual as PDF])
+AC_ARG_ENABLE(manaul-pdf,
+  AS_HELP_STRING([--enable-manual-pdf],
+    [Enable building developer manual as PDF.]),
+  [manual_as_pdf=$enableval], [manual_as_pdf=no])
+AC_SUBST(manual_as_pdf)
+AC_MSG_RESULT($manual_as_pdf)
+
+
 AC_ARG_ENABLE(gccwarnings,
   AS_HELP_STRING([--disable-gccwarnings], [Disable compiler warnings]),
   [gcc_warnings=$enableval], [gcc_warnings=yes])
-- 
1.6.4.4


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012475.html">[Openocd-development] [PATCH 1/2] update doxygen configuration to	produce a PDF
</A></li>
	<LI>Next message: <A HREF="012480.html">[Openocd-development] [PATCH 2/2] allow documentation to be	configured
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12476">[ date ]</a>
              <a href="thread.html#12476">[ thread ]</a>
              <a href="subject.html#12476">[ subject ]</a>
              <a href="author.html#12476">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

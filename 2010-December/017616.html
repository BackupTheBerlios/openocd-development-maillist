<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] [beagleboard] Flyswatter with XM
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-December/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5Bbeagleboard%5D%20Flyswatter%20with%20XM&In-Reply-To=%3C1292230805.2779.329.camel%40constitution.bos.jonmasters.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017614.html">
   <LINK REL="Next"  HREF="017617.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] [beagleboard] Flyswatter with XM</H1>
    <B>Jon Masters</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5Bbeagleboard%5D%20Flyswatter%20with%20XM&In-Reply-To=%3C1292230805.2779.329.camel%40constitution.bos.jonmasters.org%3E"
       TITLE="[Openocd-development] [beagleboard] Flyswatter with XM">jonathan at jonmasters.org
       </A><BR>
    <I>Mon Dec 13 10:00:05 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="017614.html">[Openocd-development] [beagleboard] Flyswatter with XM
</A></li>
        <LI>Next message: <A HREF="017617.html">[Openocd-development] [beagleboard] Flyswatter with XM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17616">[ date ]</a>
              <a href="thread.html#17616">[ thread ]</a>
              <a href="subject.html#17616">[ subject ]</a>
              <a href="author.html#17616">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2010-12-13 at 09:45 +0100, Marek Vasut wrote:
&gt;<i> On Monday 13 December 2010 03:27:17 Jon Masters wrote:
</I>
&gt;<i> &gt; Some logic is added to detect CPU cores that report an incorrect ARM DAP
</I>&gt;<i> &gt; (Debug Access Port, exposed behind something called an ICEPick which
</I>&gt;<i> &gt; sits on the JTAG chain and allows devices to come and go - I'm still
</I>&gt;<i> &gt; figuring all of this out in the case of the Cortex parts). The problem
</I>&gt;<i> &gt; is that the iMX51 actually *DOES* correctly report the location of its
</I>&gt;<i> &gt; DAP and so does not need to be fixed up! As Antonio points out, the
</I>&gt;<i> &gt; simple fix is to comment out the following loop in
</I>&gt;<i> &gt; src/target/arm_adi_v5.c (reformatted for reading):
</I>&gt;<i> 
</I>&gt;<i> If it *DOES* report it correctly, why do they have erratum ENGcm09395 then ? But 
</I>&gt;<i> I assume you tested it on imx51 and it was reported correctly ?
</I>&gt;<i> 
</I>&gt;<i> Beagleboard isn't imx51 just fyi.
</I>
Sorry, you're right. I spent too long reading the OpenOCD source and
seeing the IMX51 Freescale references in the broken_cpus array, and then
it was late... Yea, I'm using the DM3730 TI processor in the
BeagleBoard-xM here, which is being picked up by your logic in that loop
incorrectly and a fixup is being applied that should not be applied.

&lt;snip commented out code fixup&gt;

&gt;<i> This is bogus ... I'd prefer extending the detection to be able to identify 
</I>&gt;<i> imx51 in a more precise way.
</I>
Sure. I was just applying a hack in my local git branch for running the
BeagleBoard-xM here with my Flyswatter. That was neither a patch nor
intended for use other than with the xM if someone else is using a
release of OpenOCD since the beginning of November. I really agree with
you that the correct fix is to better determine an IMX51 for fixup.

FWIW, I got this wrong at first. I read the archives and assumed that
the BeagleBoard was in need of some fixup, but actually it's fine. It's
the logic intended to fixup the other part that is breaking Beagle.

Oh, and hey, thanks for the followup.

Jon.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017614.html">[Openocd-development] [beagleboard] Flyswatter with XM
</A></li>
	<LI>Next message: <A HREF="017617.html">[Openocd-development] [beagleboard] Flyswatter with XM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17616">[ date ]</a>
              <a href="thread.html#17616">[ thread ]</a>
              <a href="subject.html#17616">[ subject ]</a>
              <a href="author.html#17616">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

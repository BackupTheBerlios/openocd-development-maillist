<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] [beagleboard] Flyswatter with XM
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-December/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5Bbeagleboard%5D%20Flyswatter%20with%20XM&In-Reply-To=%3C201012131005.38379.marek.vasut%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017616.html">
   <LINK REL="Next"  HREF="017618.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] [beagleboard] Flyswatter with XM</H1>
    <B>Marek Vasut</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5Bbeagleboard%5D%20Flyswatter%20with%20XM&In-Reply-To=%3C201012131005.38379.marek.vasut%40gmail.com%3E"
       TITLE="[Openocd-development] [beagleboard] Flyswatter with XM">marek.vasut at gmail.com
       </A><BR>
    <I>Mon Dec 13 10:05:38 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="017616.html">[Openocd-development] [beagleboard] Flyswatter with XM
</A></li>
        <LI>Next message: <A HREF="017618.html">[Openocd-development] [beagleboard] Flyswatter with XM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17617">[ date ]</a>
              <a href="thread.html#17617">[ thread ]</a>
              <a href="subject.html#17617">[ subject ]</a>
              <a href="author.html#17617">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 13 December 2010 10:00:05 Jon Masters wrote:
&gt;<i> On Mon, 2010-12-13 at 09:45 +0100, Marek Vasut wrote:
</I>&gt;<i> &gt; On Monday 13 December 2010 03:27:17 Jon Masters wrote:
</I>&gt;<i> &gt; &gt; Some logic is added to detect CPU cores that report an incorrect ARM
</I>&gt;<i> &gt; &gt; DAP (Debug Access Port, exposed behind something called an ICEPick
</I>&gt;<i> &gt; &gt; which sits on the JTAG chain and allows devices to come and go - I'm
</I>&gt;<i> &gt; &gt; still figuring all of this out in the case of the Cortex parts). The
</I>&gt;<i> &gt; &gt; problem is that the iMX51 actually *DOES* correctly report the
</I>&gt;<i> &gt; &gt; location of its DAP and so does not need to be fixed up! As Antonio
</I>&gt;<i> &gt; &gt; points out, the simple fix is to comment out the following loop in
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; src/target/arm_adi_v5.c (reformatted for reading):
</I>&gt;<i> &gt; If it *DOES* report it correctly, why do they have erratum ENGcm09395
</I>&gt;<i> &gt; then ? But I assume you tested it on imx51 and it was reported correctly
</I>&gt;<i> &gt; ?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Beagleboard isn't imx51 just fyi.
</I>&gt;<i> 
</I>&gt;<i> Sorry, you're right. I spent too long reading the OpenOCD source and
</I>&gt;<i> seeing the IMX51 Freescale references in the broken_cpus array, and then
</I>&gt;<i> it was late... Yea, I'm using the DM3730 TI processor in the
</I>&gt;<i> BeagleBoard-xM here, which is being picked up by your logic in that loop
</I>&gt;<i> incorrectly and a fixup is being applied that should not be applied.
</I>&gt;<i> 
</I>&gt;<i> &lt;snip commented out code fixup&gt;
</I>&gt;<i> 
</I>&gt;<i> &gt; This is bogus ... I'd prefer extending the detection to be able to
</I>&gt;<i> &gt; identify imx51 in a more precise way.
</I>&gt;<i> 
</I>&gt;<i> Sure. I was just applying a hack in my local git branch for running the
</I>&gt;<i> BeagleBoard-xM here with my Flyswatter. That was neither a patch nor
</I>&gt;<i> intended for use other than with the xM if someone else is using a
</I>&gt;<i> release of OpenOCD since the beginning of November. I really agree with
</I>&gt;<i> you that the correct fix is to better determine an IMX51 for fixup.
</I>&gt;<i> 
</I>&gt;<i> FWIW, I got this wrong at first. I read the archives and assumed that
</I>&gt;<i> the BeagleBoard was in need of some fixup, but actually it's fine. It's
</I>&gt;<i> the logic intended to fixup the other part that is breaking Beagle.
</I>
Can you try checking how can that be fixed ? I believe it'd just be a matter of 
adding a few more identification information (check how the fixup loop detects the 
CPU, try extending it so it doesn't break beagle).
&gt;<i> 
</I>&gt;<i> Oh, and hey, thanks for the followup.
</I>&gt;<i> 
</I>&gt;<i> Jon.
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017616.html">[Openocd-development] [beagleboard] Flyswatter with XM
</A></li>
	<LI>Next message: <A HREF="017618.html">[Openocd-development] [beagleboard] Flyswatter with XM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17617">[ date ]</a>
              <a href="thread.html#17617">[ thread ]</a>
              <a href="subject.html#17617">[ subject ]</a>
              <a href="author.html#17617">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

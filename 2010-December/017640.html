<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] STM32 flash
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-December/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20STM32%20flash&In-Reply-To=%3CAANLkTinLdTvq-RyvsnwPC32tjBTp9xND_TmA00W%3DWnYN%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017653.html">
   <LINK REL="Next"  HREF="017641.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] STM32 flash</H1>
    <B>Alan Bowman</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20STM32%20flash&In-Reply-To=%3CAANLkTinLdTvq-RyvsnwPC32tjBTp9xND_TmA00W%3DWnYN%40mail.gmail.com%3E"
       TITLE="[Openocd-development] STM32 flash">alan.michael.bowman at gmail.com
       </A><BR>
    <I>Tue Dec 14 17:35:49 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="017653.html">[Openocd-development] Fix for compilation failure	amt_jtagaccel.c
</A></li>
        <LI>Next message: <A HREF="017641.html">[Openocd-development] STM32 flash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17640">[ date ]</a>
              <a href="thread.html#17640">[ thread ]</a>
              <a href="subject.html#17640">[ subject ]</a>
              <a href="author.html#17640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have just connected my JTAGkey2 to a new STM32E-EVAL board, and have
found that I am unable to program/erase the onboard flash.  When I
first connected to the target, I was warned that there was an
unrecognised BS tap ID.  I added an extra expected-id to my config
file (0x06430041) and that allowed me to connect without errors.  When
I came to erase the flash using

stm32x mass_erase 0

I received the following error:

device id = 0x10006430
Cannot identify target as a STM32 family.

I am using openOCD 0.4.0, but looking through the latest repository
code, I think that I would get the same error.  I think it is just
that recognition of the larger family of STM32s (I have an STM32F103ZG
on my board, one of the later eval boards) have not been added to
OpenOCD.  It looks like it should be a handful of lines to add the
extra devices/flash - is this true, or have I missed some subtle
reason why this isn't easy to support?

I would make the change and try it out but I'm not currently able to
rebuild from source on my Windows platform.  I wanted to see if there
was a good reason why it wasn't worth doing before going down that
route.

Cheers

Alan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017653.html">[Openocd-development] Fix for compilation failure	amt_jtagaccel.c
</A></li>
	<LI>Next message: <A HREF="017641.html">[Openocd-development] STM32 flash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17640">[ date ]</a>
              <a href="thread.html#17640">[ thread ]</a>
              <a href="subject.html#17640">[ subject ]</a>
              <a href="author.html#17640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

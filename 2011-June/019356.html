<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] [PATCH] use one configuration for all JTAGkey devices.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%5D%20use%20one%20configuration%20for%20all%0A%20JTAGkey%20devices.&In-Reply-To=%3C4DECBDA1.9080003%40amontec.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019346.html">
   <LINK REL="Next"  HREF="019368.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] [PATCH] use one configuration for all JTAGkey devices.</H1>
    <B>Laurent Gauch</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%5D%20use%20one%20configuration%20for%20all%0A%20JTAGkey%20devices.&In-Reply-To=%3C4DECBDA1.9080003%40amontec.com%3E"
       TITLE="[Openocd-development] [PATCH] use one configuration for all JTAGkey devices.">laurent.gauch at amontec.com
       </A><BR>
    <I>Mon Jun  6 13:44:33 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="019346.html">[Openocd-development] [PATCH] use one configuration for all JTAGkey devices.
</A></li>
        <LI>Next message: <A HREF="019368.html">[Openocd-development] [PATCH] use one configuration for all JTAGkey devices.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19356">[ date ]</a>
              <a href="thread.html#19356">[ thread ]</a>
              <a href="subject.html#19356">[ subject ]</a>
              <a href="author.html#19356">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> On Mon, Jun 6, 2011 at 9:32 AM, Michael Schwingen
</I>&gt;<i> &lt;rincewind at discworld.dascon.de &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">https://lists.berlios.de/mailman/listinfo/openocd-development</A>&gt;&gt; wrote:
</I>&gt;<i> &gt;/ Am 06/06/2011 09:20 AM, schrieb Yegor Yefremov:
</I>&gt;<i> /&gt;&gt;/ Signed-off-by: Yegor Yefremov &lt;yegorslists at googlemail.com &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">https://lists.berlios.de/mailman/listinfo/openocd-development</A>&gt;&gt;
</I>&gt;<i> /&gt;&gt;/
</I>&gt;<i> /&gt;&gt;/ ---
</I>&gt;<i> /&gt;&gt;/  tcl/interface/jtagkey2.cfg  |    7 ++-----
</I>&gt;<i> /&gt;&gt;/  tcl/interface/jtagkey2p.cfg |    7 ++-----
</I>&gt;<i> /&gt;&gt;/  2 files changed, 4 insertions(+), 10 deletions(-)
</I>&gt;<i> /&gt;&gt;/
</I>&gt;<i> /&gt;&gt;/ Index: b/tcl/interface/jtagkey2.cfg
</I>&gt;<i> /&gt;&gt;/ ===================================================================
</I>&gt;<i> /&gt;&gt;/ --- a/tcl/interface/jtagkey2.cfg
</I>&gt;<i> /&gt;&gt;/ +++ b/tcl/interface/jtagkey2.cfg
</I>&gt;<i> /&gt;&gt;/ @@ -4,8 +4,5 @@
</I>&gt;<i> /&gt;&gt;/  # <A HREF="http://www.amontec.com/jtagkey2.shtml">http://www.amontec.com/jtagkey2.shtml</A>
</I>&gt;<i> /&gt;&gt;/  #
</I>&gt;<i> /&gt;&gt;/
</I>&gt;<i> /&gt;&gt;/ -interface ft2232
</I>&gt;<i> /&gt;&gt;/ -ft2232_device_desc &quot;Amontec JTAGkey-2&quot;
</I>&gt;<i> /&gt;&gt;/ -ft2232_layout jtagkey
</I>&gt;<i> /&gt;&gt;/ -ft2232_vid_pid 0x0403 0xCFF8
</I>&gt;<i> /&gt;&gt;/ -
</I>&gt;<i> /&gt;&gt;/ +# The JTAGkey2 uses exactly the same config as the JTAGkey.
</I>&gt;<i> /&gt;&gt;/ +source [find interface/jtagkey.cfg]
</I>&gt;<i> /&gt;&gt;/ Index: b/tcl/interface/jtagkey2p.cfg
</I>&gt;<i> /&gt;&gt;/ ===================================================================
</I>&gt;<i> /&gt;&gt;/ --- a/tcl/interface/jtagkey2p.cfg
</I>&gt;<i> /&gt;&gt;/ +++ b/tcl/interface/jtagkey2p.cfg
</I>&gt;<i> /&gt;&gt;/ @@ -4,8 +4,5 @@
</I>&gt;<i> /&gt;&gt;/  # <A HREF="http://www.amontec.com/jtagkey2p.shtml">http://www.amontec.com/jtagkey2p.shtml</A>
</I>&gt;<i> /&gt;&gt;/  #
</I>&gt;<i> /&gt;&gt;/
</I>&gt;<i> /&gt;&gt;/ -interface ft2232
</I>&gt;<i> /&gt;&gt;/ -ft2232_device_desc &quot;Amontec JTAGkey-2P&quot;
</I>&gt;<i> /&gt;&gt;/ -ft2232_layout jtagkey
</I>&gt;<i> /&gt;&gt;/ -ft2232_vid_pid 0x0403 0xCFF8
</I>&gt;<i> /&gt;&gt;/ -
</I>&gt;<i> /&gt;&gt;/ +# The JTAGkey2P uses exactly the same config as the JTAGkey.
</I>&gt;<i> /&gt;&gt;/ +source [find interface/jtagkey.cfg]
</I>&gt;<i> /&gt;/ Hi,
</I>&gt;<i> /&gt;/
</I>&gt;<i> /&gt;/ this patch seems to remove the two different ft2232_device_desc strings.
</I>&gt;<i> /&gt;/ Are these unused?
</I>&gt;<i> /&gt;/
</I>&gt;<i> /&gt;/ If not, I don't understand how this is supposed to work.
</I>&gt;<i> /&gt;/
</I>&gt;<i> /&gt;/ If the devices really can share one config file, then *one* generic file
</I>&gt;<i> /&gt;/ should remain, and the others should be deleted.
</I>&gt;<i> /
</I>&gt;<i> I see your point. This won't function because
</I>&gt;<i> ftdi_usb_open_desc_index() makes strncmp() and the strings won't
</I>&gt;<i> match. So the patch was wrong. Sorry for the noise.
</I>&gt;<i>
</I>&gt;<i> The only question is, what description has jtagkey-tiny &quot;Amontec
</I>&gt;<i> JTAGkey&quot; or &quot;Amontec JTAGkey-tiny&quot;?
</I>&gt;<i>   
</I>The Amontec JTAGkey Tiny comes with the same description string as the 
&quot;Amontec JTAGkey&quot;.
The Amontec JTAGkey-2 Tiny will receive the same description string as 
&quot;Amontec JTAGkey-2&quot;.
The Amontec JTAGkey-3 and Amontec JTAGkey-3 Tiny (introducing SWD 
interface + SWO trace ) will have description string as &quot;Amontec JTAGkey-3&quot;
 ...
&gt;<i> Yegor
</I>&gt;<i>   
</I>
Sebastien is ready to come with some other patches making one jtagkey 
configuration file generic for all Amontec JTAGkey dongles, with d2xx 
driver and libusb driver on windows 32bits 64bits and linux 32bits and 
64bits ...
But we are is still waiting on the merge of his first patch concerning 
the ft2232 open / close , init / deinit processes ...
Regarding his patch, I am a bit worry to see any objective comments, as 
if his patch comment was read in diagonal, or never read... The 
maintainers ask for patch + patch comment, but nobody read the Sebastien 
patch comment !!!
This patch is really nice and allows to decouple the how-to open the 
ft2232 handle and how-to initialize / deinitialize a specific layout, 
and make sure to free memory ... This is resolved by splitting some 
functions.

If our ft2232.c patches are not merged quickly, Amontec Team will 
certainly come with a new specific jtagkey.c API driver  instead of the 
ft2232.c JTAG driver.
The advantage with a specific Amontec JTAGkey API driver in openocd, 
will be to see our patches merged in the minute, instead to wait 1 to 2 
months ... also the ft2232.c will still be usable for the JTAGkey.

We will wait the end of the week ...

Regards,
Laurent
 <A HREF="http://www.amontec.com">http://www.amontec.com</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019346.html">[Openocd-development] [PATCH] use one configuration for all JTAGkey devices.
</A></li>
	<LI>Next message: <A HREF="019368.html">[Openocd-development] [PATCH] use one configuration for all JTAGkey devices.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19356">[ date ]</a>
              <a href="thread.html#19356">[ thread ]</a>
              <a href="subject.html#19356">[ subject ]</a>
              <a href="author.html#19356">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

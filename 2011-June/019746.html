<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Request for review: driver for Keil ULINK
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Request%20for%20review%3A%20driver%20for%20Keil%20ULINK&In-Reply-To=%3C5b1351127840602ebe1bee6d5f722f63%40basementcode.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019744.html">
   <LINK REL="Next"  HREF="019748.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Request for review: driver for Keil ULINK</H1>
    <B>Christopher Harvey</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Request%20for%20review%3A%20driver%20for%20Keil%20ULINK&In-Reply-To=%3C5b1351127840602ebe1bee6d5f722f63%40basementcode.com%3E"
       TITLE="[Openocd-development] Request for review: driver for Keil ULINK">chris at basementcode.com
       </A><BR>
    <I>Tue Jun 21 19:11:17 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="019744.html">[Openocd-development] Request for review: driver for Keil ULINK
</A></li>
        <LI>Next message: <A HREF="019748.html">[Openocd-development] Request for review: driver for Keil ULINK
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19746">[ date ]</a>
              <a href="thread.html#19746">[ thread ]</a>
              <a href="subject.html#19746">[ subject ]</a>
              <a href="author.html#19746">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> On Tue, 21 Jun 2011 18:34:16 +0200, Martin Schm&#246;lzer 
 &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">martin.schmoelzer at student.tuwien.ac.at</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> my ULINK driver for OpenOCD is finally in a usable state. Attached is
</I>&gt;<i> a patch
</I>&gt;<i> set that adds this driver + the custom firmware for the ULINK 
</I>&gt;<i> adapter.
</I>&gt;<i>
</I>&gt;<i> Currently, this is only tested with an Olimex STM32-P103 development 
</I>&gt;<i> board
</I>&gt;<i> (STM32F103RBT6). &quot;stm32x mass_erase&quot; and &quot;flash write_image erase&quot; 
</I>&gt;<i> both work.
</I>&gt;<i>
</I>&gt;<i> The driver/firmware uses one USB bulk endpoint and is designed to 
</I>&gt;<i> queue
</I>&gt;<i> several commands into one packet for better throughput. The first 
</I>&gt;<i> version of
</I>&gt;<i> the driver used the &quot;naive&quot; approach of one packet per command which 
</I>&gt;<i> (of
</I>&gt;<i> course) had horrible performance (~ 800 Byte/sec flash speed for the 
</I>&gt;<i> STM32).
</I>&gt;<i> The current implementation reaches about 4.5 kB/sec, which seems to 
</I>&gt;<i> be the
</I>&gt;<i> maximum I can get out of the Cypress EZ-USB MCU that is used in the 
</I>&gt;<i> ULINK
</I>&gt;<i> adapter.
</I>&gt;<i>
</I>&gt;<i> Some features are still incomplete:
</I>&gt;<i> - Pathmove commands
</I>&gt;<i> - TCK speed: Currently, the ULINK only works at its maximum TCK 
</I>&gt;<i> frequency
</I>&gt;<i>   (about 150 kHz, measured using a digital storage oscilloscope).
</I>&gt;<i>
</I>&gt;<i> I'm planning to complete these features and further testing by
</I>&gt;<i> early/mid july.
</I>&gt;<i>
</I>&gt;<i> Feedback is highly appreciated!
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i> Martin
</I>
 Hi Martin,
 I've got a ulink at home with an MCB board (I forgot the exact number), 
 so this is exciting news for me.

 I've been wanting to lean the internals of OCD and Jtag for a while, 
 could anybody suggest some technical jtag/gdb/arm documents? I am also 
 curious, how did you figure out the format of the data in the packets 
 you're sending to the Ulink?

 thanks,
 -Chris

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019744.html">[Openocd-development] Request for review: driver for Keil ULINK
</A></li>
	<LI>Next message: <A HREF="019748.html">[Openocd-development] Request for review: driver for Keil ULINK
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19746">[ date ]</a>
              <a href="thread.html#19746">[ thread ]</a>
              <a href="subject.html#19746">[ subject ]</a>
              <a href="author.html#19746">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

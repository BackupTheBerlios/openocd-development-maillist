<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> No subject
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2012-March/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.51.1331735906.7537.openocd-development%40lists.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009525.html">
   <LINK REL="Next"  HREF="009656.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>No subject</H1>
    <B></B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.51.1331735906.7537.openocd-development%40lists.berlios.de%3E"
       TITLE="No subject">
       </A><BR>
    <I>Wed Mar 14 15:36:47 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009525.html">No subject
</A></li>
        <LI>Next message: <A HREF="009656.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9594">[ date ]</a>
              <a href="thread.html#9594">[ thread ]</a>
              <a href="subject.html#9594">[ subject ]</a>
              <a href="author.html#9594">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>PATCH AGAINST 2294
arm_adi_v7m_R2294.patch

Index: src/target/arm_adi_v5.c
Index: src/target/arm_adi_v5.h
Index: src/target/armv7m.c

The changes in these files move the dap command handler implementations
to arm_adi_v5.c, leaving just thin wrappers in armv7m.c.
There should be no change in functionality here. Should be harmless to
commit.



--=20
=C3=98yvind Harboe
Embedded software and hardware consulting services
<A HREF="http://www.zylin.com">http://www.zylin.com</A>

--001636d34bf83d87c5046ec3b42b
Content-Type: text/plain; charset=US-ASCII; name=&quot;precortexa8refactoring.txt&quot;
Content-Disposition: attachment; filename=&quot;precortexa8refactoring.txt&quot;
Content-Transfer-Encoding: base64
X-Attachment-Id: f_fx6gf8wv0

IyMjIEVjbGlwc2UgV29ya3NwYWNlIFBhdGNoIDEuMA0KI1Agb3Blbm9jZA0KSW5kZXg6IHNyYy90
YXJnZXQvYXJtX2FkaV92NS5jDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQotLS0gc3JjL3RhcmdldC9hcm1fYWRpX3Y1
LmMJKHJldmlzaW9uIDI1MjkpDQorKysgc3JjL3RhcmdldC9hcm1fYWRpX3Y1LmMJKHdvcmtpbmcg
Y29weSkNCkBAIC0xMTI5LDMgKzExMjksOTUgQEANCiAJcmV0dXJuIEVSUk9SX09LOwogfQogCitp
bnQgZGFwX2Jhc2VhZGRyX2NvbW1hbmQoc3RydWN0IGNvbW1hbmRfY29udGV4dF9zICpjbWRfY3R4
LCBzd2pkcF9jb21tb25fdCAqc3dqZHAsIGNoYXIgKiphcmdzLCBpbnQgYXJnYykNCit7DQorCXVp
bnQzMl90IGFwc2VsLCBhcHNlbHNhdmUsIGJhc2VhZGRyOw0KKwlpbnQgcmV0dmFsOw0KKw0KKwlh
cHNlbCA9IHN3amRwLT5hcHNlbDsNCisJYXBzZWxzYXZlID0gc3dqZHAtPmFwc2VsOw0KKwlpZiAo
YXJnYyA+IDApDQorCXsNCisJCWFwc2VsID0gc3RydG91bChhcmdzWzBdLCBOVUxMLCAwKTsNCisJ
fQ0KKwlpZiAoYXBzZWxzYXZlICE9IGFwc2VsKQ0KKwl7DQorCQlkYXBfYXBfc2VsZWN0KHN3amRw
LCBhcHNlbCk7DQorCX0NCisNCisJZGFwX2FwX3JlYWRfcmVnX3UzMihzd2pkcCwgMHhGOCwgJmJh
c2VhZGRyKTsNCisJcmV0dmFsID0gc3dqZHBfdHJhbnNhY3Rpb25fZW5kY2hlY2soc3dqZHApOw0K
Kwljb21tYW5kX3ByaW50KGNtZF9jdHgsICIweCU4Ljh4IiwgYmFzZWFkZHIpOw0KKw0KKwlpZiAo
YXBzZWxzYXZlICE9IGFwc2VsKQ0KKwl7DQorCQlkYXBfYXBfc2VsZWN0KHN3amRwLCBhcHNlbHNh
dmUpOw0KKwl9DQorDQorCXJldHVybiByZXR2YWw7DQorfQ0KKw0KK2ludCBkYXBfbWVtYWNjZXNz
X2NvbW1hbmQoc3RydWN0IGNvbW1hbmRfY29udGV4dF9zICpjbWRfY3R4LCBzd2pkcF9jb21tb25f
dCAqc3dqZHAsIGNoYXIgKiphcmdzLCBpbnQgYXJnYykNCit7DQorCXVpbnQzMl90IG1lbWFjY2Vz
c190Y2s7DQorDQorCW1lbWFjY2Vzc190Y2sgPSBzd2pkcC0+bWVtYWNjZXNzX3RjazsNCisJaWYg
KGFyZ2MgPiAwKQ0KKwl7CQ0KKwkJbWVtYWNjZXNzX3RjayA9IHN0cnRvdWwoYXJnc1swXSwgTlVM
TCwgMCk7DQorCX0NCisNCisJc3dqZHAtPm1lbWFjY2Vzc190Y2sgPSBtZW1hY2Nlc3NfdGNrOw0K
Kwljb21tYW5kX3ByaW50KGNtZF9jdHgsICJtZW1vcnkgYnVzIGFjY2VzcyBkZWxheSBzZXQgdG8g
JWkgdGNrIiwgc3dqZHAtPm1lbWFjY2Vzc190Y2spOw0KKw0KKwlyZXR1cm4gRVJST1JfT0s7DQor
fQ0KKw0KK2ludCBkYXBfYXBzZWxfY29tbWFuZChzdHJ1Y3QgY29tbWFuZF9jb250ZXh0X3MgKmNt
ZF9jdHgsIHN3amRwX2NvbW1vbl90ICpzd2pkcCwgY2hhciAqKmFyZ3MsIGludCBhcmdjKQ0KK3sN
CisJdWludDMyX3QgYXBzZWwsIGFwaWQ7DQorCWludCByZXR2YWw7DQorDQorCWFwc2VsID0gMDsN
CisJaWYgKGFyZ2MgPiAwKQ0KKwl7DQorCQlhcHNlbCA9IHN0cnRvdWwoYXJnc1swXSwgTlVMTCwg
MCk7DQorCX0NCisNCisJZGFwX2FwX3NlbGVjdChzd2pkcCwgYXBzZWwpOw0KKwlkYXBfYXBfcmVh
ZF9yZWdfdTMyKHN3amRwLCAweEZDLCAmYXBpZCk7DQorCXJldHZhbCA9IHN3amRwX3RyYW5zYWN0
aW9uX2VuZGNoZWNrKHN3amRwKTsNCisJY29tbWFuZF9wcmludChjbWRfY3R4LCAiYXAgJWkgc2Vs
ZWN0ZWQsIGlkZW50aWZpY2F0aW9uIHJlZ2lzdGVyIDB4JTguOHgiLCBhcHNlbCwgYXBpZCk7DQor
DQorCXJldHVybiByZXR2YWw7DQorfQ0KKw0KK2ludCBkYXBfYXBpZF9jb21tYW5kKHN0cnVjdCBj
b21tYW5kX2NvbnRleHRfcyAqY21kX2N0eCwgc3dqZHBfY29tbW9uX3QgKnN3amRwLCBjaGFyICoq
YXJncywgaW50IGFyZ2MpDQorew0KKwl1aW50MzJfdCBhcHNlbCwgYXBzZWxzYXZlLCBhcGlkOw0K
KwlpbnQgcmV0dmFsOw0KKw0KKwlhcHNlbCA9IHN3amRwLT5hcHNlbDsNCisJYXBzZWxzYXZlID0g
c3dqZHAtPmFwc2VsOw0KKwlpZiAoYXJnYyA+IDApDQorCXsNCisJCWFwc2VsID0gc3RydG91bChh
cmdzWzBdLCBOVUxMLCAwKTsNCisJfQ0KKw0KKwlpZiAoYXBzZWxzYXZlICE9IGFwc2VsKQ0KKwl7
DQorCQlkYXBfYXBfc2VsZWN0KHN3amRwLCBhcHNlbCk7DQorCX0NCisNCisJZGFwX2FwX3JlYWRf
cmVnX3UzMihzd2pkcCwgMHhGQywgJmFwaWQpOw0KKwlyZXR2YWwgPSBzd2pkcF90cmFuc2FjdGlv
bl9lbmRjaGVjayhzd2pkcCk7DQorCWNvbW1hbmRfcHJpbnQoY21kX2N0eCwgIjB4JTguOHgiLCBh
cGlkKTsNCisJaWYgKGFwc2Vsc2F2ZSAhPSBhcHNlbCkNCisJew0KKwkJZGFwX2FwX3NlbGVjdChz
d2pkcCwgYXBzZWxzYXZlKTsNCisJfQ0KKw0KKwlyZXR1cm4gcmV0dmFsOw0KK30NCisNCisNCklu
ZGV4OiBzcmMvdGFyZ2V0L2FybV9hZGlfdjUuaA0KPT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KLS0tIHNyYy90YXJnZXQv
YXJtX2FkaV92NS5oCShyZXZpc2lvbiAyNTI5KQ0KKysrIHNyYy90YXJnZXQvYXJtX2FkaV92NS5o
CSh3b3JraW5nIGNvcHkpDQpAQCAtMTQ1LDEzICsxNDUsMTIgQEANCiAvKiBJbml0aWFsaXNhdGlv
biBvZiB0aGUgZGVidWcgc3lzdGVtLCBwb3dlciBkb21haW5zIGFuZCByZWdpc3RlcnMgKi8KIGV4
dGVybiBpbnQgYWhiYXBfZGVidWdwb3J0X2luaXQoc3dqZHBfY29tbW9uX3QgKnN3amRwKTsKIAot
ZXh0ZXJuIGludCBkYXBfaW5mb19jb21tYW5kKHN0cnVjdCBjb21tYW5kX2NvbnRleHRfcyAqY21k
X2N0eCwgc3dqZHBfY29tbW9uX3QgKnN3amRwLCBpbnQgYXBzZWwpOworDQogLyogQ29tbWFuZHMg
Zm9yIHVzZXIgZGFwIGFjY2VzcyAqLwotLyogQ3VycmVudGx5IGltcGxlbWVudGVkIGluIGFybXY3
bSwgbmVlZHMgYXJtdjdtIHRhcmdldCBzdHJ1Y3R1cmUgdG8gZmluZCBqdGFnIGFuZCBzd2pkcCBz
dHJ1Y3R1cmVzICovCi1leHRlcm4gaW50IGhhbmRsZV9kYXBfaW5mb19jb21tYW5kKHN0cnVjdCBj
b21tYW5kX2NvbnRleHRfcyAqY21kX2N0eCwgY2hhciAqY21kLCBjaGFyICoqYXJncywgaW50IGFy
Z2MpOwotZXh0ZXJuIGludCBoYW5kbGVfZGFwX2Fwc2VsX2NvbW1hbmQoc3RydWN0IGNvbW1hbmRf
Y29udGV4dF9zICpjbWRfY3R4LCBjaGFyICpjbWQsIGNoYXIgKiphcmdzLCBpbnQgYXJnYyk7Ci1l
eHRlcm4gaW50IGhhbmRsZV9kYXBfYXBpZF9jb21tYW5kKHN0cnVjdCBjb21tYW5kX2NvbnRleHRf
cyAqY21kX2N0eCwgY2hhciAqY21kLCBjaGFyICoqYXJncywgaW50IGFyZ2MpOwotZXh0ZXJuIGlu
dCBoYW5kbGVfZGFwX2Jhc2VhZGRyX2NvbW1hbmQoc3RydWN0IGNvbW1hbmRfY29udGV4dF9zICpj
bWRfY3R4LCBjaGFyICpjbWQsIGNoYXIgKiphcmdzLCBpbnQgYXJnYyk7Ci1leHRlcm4gaW50IGhh
bmRsZV9kYXBfbWVtYWNjZXNzX2NvbW1hbmQoc3RydWN0IGNvbW1hbmRfY29udGV4dF9zICpjbWRf
Y3R4LCBjaGFyICpjbWQsIGNoYXIgKiphcmdzLCBpbnQgYXJnYyk7CitleHRlcm4gaW50IGRhcF9p
bmZvX2NvbW1hbmQoc3RydWN0IGNvbW1hbmRfY29udGV4dF9zICpjbWRfY3R4LCBzd2pkcF9jb21t
b25fdCAqc3dqZHAsIGludCBhcHNlbCk7DQorZXh0ZXJuIGludCBkYXBfYmFzZWFkZHJfY29tbWFu
ZChzdHJ1Y3QgY29tbWFuZF9jb250ZXh0X3MgKmNtZF9jdHgsIHN3amRwX2NvbW1vbl90ICpzd2pk
cCwgY2hhciAqKmFyZ3MsIGludCBhcmdjKTsNCitleHRlcm4gaW50IGRhcF9tZW1hY2Nlc3NfY29t
bWFuZChzdHJ1Y3QgY29tbWFuZF9jb250ZXh0X3MgKmNtZF9jdHgsIHN3amRwX2NvbW1vbl90ICpz
d2pkcCwgY2hhciAqKmFyZ3MsIGludCBhcmdjKTsNCitleHRlcm4gaW50IGRhcF9hcHNlbF9jb21t
YW5kKHN0cnVjdCBjb21tYW5kX2NvbnRleHRfcyAqY21kX2N0eCwgc3dqZHBfY29tbW9uX3QgKnN3
amRwLCBjaGFyICoqYXJncywgaW50IGFyZ2MpOw0KK2V4dGVybiBpbnQgZGFwX2FwaWRfY29tbWFu
ZChzdHJ1Y3QgY29tbWFuZF9jb250ZXh0X3MgKmNtZF9jdHgsIHN3amRwX2NvbW1vbl90ICpzd2pk
cCwgY2hhciAqKmFyZ3MsIGludCBhcmdjKTsNCiAKICNlbmRpZgpJbmRleDogc3JjL3RhcmdldC9h
cm12N20uYw0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PQ0KLS0tIHNyYy90YXJnZXQvYXJtdjdtLmMJKHJldmlzaW9uIDI1
MjkpDQorKysgc3JjL3RhcmdldC9hcm12N20uYwkod29ya2luZyBjb3B5KQ0KQEAgLTUzOSwyMCAr
NTM5LDYgQEANCiAJcmV0dXJuIEVSUk9SX09LOwogfQogCi1pbnQgYXJtdjdtX3JlZ2lzdGVyX2Nv
bW1hbmRzKHN0cnVjdCBjb21tYW5kX2NvbnRleHRfcyAqY21kX2N0eCkKLXsKLQljb21tYW5kX3Qg
KmFybV9hZGlfdjVfZGFwX2NtZDsKLQotCWFybV9hZGlfdjVfZGFwX2NtZCA9IHJlZ2lzdGVyX2Nv
bW1hbmQoY21kX2N0eCwgTlVMTCwgImRhcCIsIE5VTEwsIENPTU1BTkRfQU5ZLCAiY29ydGV4IGRh
cCBzcGVjaWZpYyBjb21tYW5kcyIpOwotCXJlZ2lzdGVyX2NvbW1hbmQoY21kX2N0eCwgYXJtX2Fk
aV92NV9kYXBfY21kLCAiaW5mbyIsIGhhbmRsZV9kYXBfaW5mb19jb21tYW5kLCBDT01NQU5EX0VY
RUMsICJEaXNwbGF5cyBkYXAgaW5mbyBmb3IgYXAgW251bV0sIGRlZmF1bHQgY3VycmVudGx5IHNl
bGVjdGVkIEFQIik7Ci0JcmVnaXN0ZXJfY29tbWFuZChjbWRfY3R4LCBhcm1fYWRpX3Y1X2RhcF9j
bWQsICJhcHNlbCIsIGhhbmRsZV9kYXBfYXBzZWxfY29tbWFuZCwgQ09NTUFORF9FWEVDLCAiU2Vs
ZWN0IGEgZGlmZmVyZW50IEFQIFtudW1dIChkZWZhdWx0IDApIik7Ci0JcmVnaXN0ZXJfY29tbWFu
ZChjbWRfY3R4LCBhcm1fYWRpX3Y1X2RhcF9jbWQsICJhcGlkIiwgaGFuZGxlX2RhcF9hcGlkX2Nv
bW1hbmQsIENPTU1BTkRfRVhFQywgIkRpc3BsYXlzIGlkIHJlZyBmcm9tIEFQIFtudW1dLCBkZWZh
dWx0IGN1cnJlbnRseSBzZWxlY3RlZCBBUCIpOwotCXJlZ2lzdGVyX2NvbW1hbmQoY21kX2N0eCwg
YXJtX2FkaV92NV9kYXBfY21kLCAiYmFzZWFkZHIiLCBoYW5kbGVfZGFwX2Jhc2VhZGRyX2NvbW1h
bmQsIENPTU1BTkRfRVhFQywgIkRpc3BsYXlzIGRlYnVnIGJhc2UgYWRkcmVzcyBmcm9tIEFQIFtu
dW1dLCBkZWZhdWx0IGN1cnJlbnRseSBzZWxlY3RlZCBBUCIpOwotCXJlZ2lzdGVyX2NvbW1hbmQo
Y21kX2N0eCwgYXJtX2FkaV92NV9kYXBfY21kLCAibWVtYWNjZXNzIiwgaGFuZGxlX2RhcF9tZW1h
Y2Nlc3NfY29tbWFuZCwgQ09NTUFORF9FWEVDLCAic2V0L2dldCBudW1iZXIgb2YgZXh0cmEgdGNr
IGZvciBtZW0tYXAgbWVtb3J5IGJ1cyBhY2Nlc3MgWzAtMjU1XSIpOwotCi0JcmV0dXJuIEVSUk9S
X09LOwotfQotCiBpbnQgYXJtdjdtX2NoZWNrc3VtX21lbW9yeShzdHJ1Y3QgdGFyZ2V0X3MgKnRh
cmdldCwgdWludDMyX3QgYWRkcmVzcywgdWludDMyX3QgY291bnQsIHVpbnQzMl90KiBjaGVja3N1
bSkKIHsKIAl3b3JraW5nX2FyZWFfdCAqY3JjX2FsZ29yaXRobTsKQEAgLTczOSw3NCArNzI1LDMx
IEBADQogCXRhcmdldF90ICp0YXJnZXQgPSBnZXRfY3VycmVudF90YXJnZXQoY21kX2N0eCk7CiAJ
YXJtdjdtX2NvbW1vbl90ICphcm12N20gPSB0YXJnZXQtPmFyY2hfaW5mbzsKIAlzd2pkcF9jb21t
b25fdCAqc3dqZHAgPSAmYXJtdjdtLT5zd2pkcF9pbmZvOwotCXVpbnQzMl90IGFwc2VsLCBhcHNl
bHNhdmUsIGFwaWQ7Ci0JaW50IHJldHZhbDsKLQotCWFwc2VsID0gc3dqZHAtPmFwc2VsOwotCWFw
c2Vsc2F2ZSA9IHN3amRwLT5hcHNlbDsKLQlpZiAoYXJnYyA+IDApCi0JewotCQlhcHNlbCA9IHN0
cnRvdWwoYXJnc1swXSwgTlVMTCwgMCk7Ci0JfQotCi0JaWYgKGFwc2Vsc2F2ZSAhPSBhcHNlbCkK
LQl7Ci0JCWRhcF9hcF9zZWxlY3Qoc3dqZHAsIGFwc2VsKTsKLQl9CiAKLQlkYXBfYXBfcmVhZF9y
ZWdfdTMyKHN3amRwLCAweEZDLCAmYXBpZCk7Ci0JcmV0dmFsID0gc3dqZHBfdHJhbnNhY3Rpb25f
ZW5kY2hlY2soc3dqZHApOwotCWNvbW1hbmRfcHJpbnQoY21kX2N0eCwgIjB4JTguOCIgUFJJeDMy
ICIiLCBhcGlkKTsKLQlpZiAoYXBzZWxzYXZlICE9IGFwc2VsKQotCXsKLQkJZGFwX2FwX3NlbGVj
dChzd2pkcCwgYXBzZWxzYXZlKTsKLQl9Ci0KLQlyZXR1cm4gcmV0dmFsOworCXJldHVybiBkYXBf
YXBpZF9jb21tYW5kKGNtZF9jdHgsIHN3amRwLCBhcmdzLCBhcmdjKTsNCis7DQogfQogCi1pbnQg
aGFuZGxlX2RhcF9hcHNlbF9jb21tYW5kKHN0cnVjdCBjb21tYW5kX2NvbnRleHRfcyAqY21kX2N0
eCwgY2hhciAqY21kLCBjaGFyICoqYXJncywgaW50IGFyZ2MpCitzdGF0aWMgaW50IGhhbmRsZV9k
YXBfYXBzZWxfY29tbWFuZChzdHJ1Y3QgY29tbWFuZF9jb250ZXh0X3MgKmNtZF9jdHgsIGNoYXIg
KmNtZCwgY2hhciAqKmFyZ3MsIGludCBhcmdjKQ0KIHsKIAl0YXJnZXRfdCAqdGFyZ2V0ID0gZ2V0
X2N1cnJlbnRfdGFyZ2V0KGNtZF9jdHgpOwogCWFybXY3bV9jb21tb25fdCAqYXJtdjdtID0gdGFy
Z2V0LT5hcmNoX2luZm87CiAJc3dqZHBfY29tbW9uX3QgKnN3amRwID0gJmFybXY3bS0+c3dqZHBf
aW5mbzsKLQl1aW50MzJfdCBhcHNlbCwgYXBpZDsKLQlpbnQgcmV0dmFsOwotCi0JYXBzZWwgPSAw
OwotCWlmIChhcmdjID4gMCkKLQl7Ci0JCWFwc2VsID0gc3RydG91bChhcmdzWzBdLCBOVUxMLCAw
KTsKLQl9Ci0KLQlkYXBfYXBfc2VsZWN0KHN3amRwLCBhcHNlbCk7Ci0JZGFwX2FwX3JlYWRfcmVn
X3UzMihzd2pkcCwgMHhGQywgJmFwaWQpOwotCXJldHZhbCA9IHN3amRwX3RyYW5zYWN0aW9uX2Vu
ZGNoZWNrKHN3amRwKTsKLQljb21tYW5kX3ByaW50KGNtZF9jdHgsICJhcCAlaSBzZWxlY3RlZCwg
aWRlbnRpZmljYXRpb24gcmVnaXN0ZXIgMHglOC44IiBQUkl4MzIgIiIsIChpbnQpYXBzZWwsIGFw
aWQpOwogCi0JcmV0dXJuIHJldHZhbDsKKwlyZXR1cm4gZGFwX2Fwc2VsX2NvbW1hbmQoY21kX2N0
eCwgc3dqZHAsIGFyZ3MsIGFyZ2MpOw0KIH0KIAotaW50IGhhbmRsZV9kYXBfbWVtYWNjZXNzX2Nv
bW1hbmQoc3RydWN0IGNvbW1hbmRfY29udGV4dF9zICpjbWRfY3R4LCBjaGFyICpjbWQsIGNoYXIg
KiphcmdzLCBpbnQgYXJnYykKK3N0YXRpYyBpbnQgaGFuZGxlX2RhcF9tZW1hY2Nlc3NfY29tbWFu
ZChzdHJ1Y3QgY29tbWFuZF9jb250ZXh0X3MgKmNtZF9jdHgsIGNoYXIgKmNtZCwgY2hhciAqKmFy
Z3MsIGludCBhcmdjKQ0KIHsKIAl0YXJnZXRfdCAqdGFyZ2V0ID0gZ2V0X2N1cnJlbnRfdGFyZ2V0
KGNtZF9jdHgpOwogCWFybXY3bV9jb21tb25fdCAqYXJtdjdtID0gdGFyZ2V0LT5hcmNoX2luZm87
CiAJc3dqZHBfY29tbW9uX3QgKnN3amRwID0gJmFybXY3bS0+c3dqZHBfaW5mbzsKLQl1aW50MzJf
dCBtZW1hY2Nlc3NfdGNrOwotCi0JbWVtYWNjZXNzX3RjayA9IHN3amRwLT5tZW1hY2Nlc3NfdGNr
OwotCWlmIChhcmdjID4gMCkKLQl7Ci0JCW1lbWFjY2Vzc190Y2sgPSBzdHJ0b3VsKGFyZ3NbMF0s
IE5VTEwsIDApOwotCX0KIAotCXN3amRwLT5tZW1hY2Nlc3NfdGNrID0gbWVtYWNjZXNzX3RjazsK
LQljb21tYW5kX3ByaW50KGNtZF9jdHgsICJtZW1vcnkgYnVzIGFjY2VzcyBkZWxheSBzZXQgdG8g
JWkgdGNrIiwgKGludCkoc3dqZHAtPm1lbWFjY2Vzc190Y2spKTsKLQotCXJldHVybiBFUlJPUl9P
SzsKKwlyZXR1cm4gZGFwX21lbWFjY2Vzc19jb21tYW5kKCBjbWRfY3R4LCBzd2pkcCwgYXJncywg
YXJnYyk7DQogfQogCi1pbnQgaGFuZGxlX2RhcF9pbmZvX2NvbW1hbmQoc3RydWN0IGNvbW1hbmRf
Y29udGV4dF9zICpjbWRfY3R4LCBjaGFyICpjbWQsIGNoYXIgKiphcmdzLCBpbnQgYXJnYykKKw0K
K3N0YXRpYyBpbnQgaGFuZGxlX2RhcF9pbmZvX2NvbW1hbmQoc3RydWN0IGNvbW1hbmRfY29udGV4
dF9zICpjbWRfY3R4LCBjaGFyICpjbWQsIGNoYXIgKiphcmdzLCBpbnQgYXJnYykNCiB7CiAJdGFy
Z2V0X3QgKnRhcmdldCA9IGdldF9jdXJyZW50X3RhcmdldChjbWRfY3R4KTsKIAlhcm12N21fY29t
bW9uX3QgKmFybXY3bSA9IHRhcmdldC0+YXJjaF9pbmZvOwpAQCAtODI1LDMgKzc2OCwxNiBAQA0K
IAlyZXR1cm4gcmV0dmFsOwogfQogCitpbnQgYXJtdjdtX3JlZ2lzdGVyX2NvbW1hbmRzKHN0cnVj
dCBjb21tYW5kX2NvbnRleHRfcyAqY21kX2N0eCkNCit7DQorCWNvbW1hbmRfdCAqYXJtX2FkaV92
NV9kYXBfY21kOw0KKw0KKwlhcm1fYWRpX3Y1X2RhcF9jbWQgPSByZWdpc3Rlcl9jb21tYW5kKGNt
ZF9jdHgsIE5VTEwsICJkYXAiLCBOVUxMLCBDT01NQU5EX0FOWSwgImNvcnRleCBkYXAgc3BlY2lm
aWMgY29tbWFuZHMiKTsNCisJcmVnaXN0ZXJfY29tbWFuZChjbWRfY3R4LCBhcm1fYWRpX3Y1X2Rh
cF9jbWQsICJpbmZvIiwgaGFuZGxlX2RhcF9pbmZvX2NvbW1hbmQsIENPTU1BTkRfRVhFQywgIkRp
c3BsYXlzIGRhcCBpbmZvIGZvciBhcCBbbnVtXSwgZGVmYXVsdCBjdXJyZW50bHkgc2VsZWN0ZWQg
QVAiKTsNCisJcmVnaXN0ZXJfY29tbWFuZChjbWRfY3R4LCBhcm1fYWRpX3Y1X2RhcF9jbWQsICJh
cHNlbCIsIGhhbmRsZV9kYXBfYXBzZWxfY29tbWFuZCwgQ09NTUFORF9FWEVDLCAiU2VsZWN0IGEg
ZGlmZmVyZW50IEFQIFtudW1dIChkZWZhdWx0IDApIik7DQorCXJlZ2lzdGVyX2NvbW1hbmQoY21k
X2N0eCwgYXJtX2FkaV92NV9kYXBfY21kLCAiYXBpZCIsIGhhbmRsZV9kYXBfYXBpZF9jb21tYW5k
LCBDT01NQU5EX0VYRUMsICJEaXNwbGF5cyBpZCByZWcgZnJvbSBBUCBbbnVtXSwgZGVmYXVsdCBj
dXJyZW50bHkgc2VsZWN0ZWQgQVAiKTsNCisJcmVnaXN0ZXJfY29tbWFuZChjbWRfY3R4LCBhcm1f
YWRpX3Y1X2RhcF9jbWQsICJiYXNlYWRkciIsIGhhbmRsZV9kYXBfYmFzZWFkZHJfY29tbWFuZCwg
Q09NTUFORF9FWEVDLCAiRGlzcGxheXMgZGVidWcgYmFzZSBhZGRyZXNzIGZyb20gQVAgW251bV0s
IGRlZmF1bHQgY3VycmVudGx5IHNlbGVjdGVkIEFQIik7DQorCXJlZ2lzdGVyX2NvbW1hbmQoY21k
X2N0eCwgYXJtX2FkaV92NV9kYXBfY21kLCAibWVtYWNjZXNzIiwgaGFuZGxlX2RhcF9tZW1hY2Nl
c3NfY29tbWFuZCwgQ09NTUFORF9FWEVDLCAic2V0L2dldCBudW1iZXIgb2YgZXh0cmEgdGNrIGZv
ciBtZW0tYXAgbWVtb3J5IGJ1cyBhY2Nlc3MgWzAtMjU1XSIpOw0KKw0KKwlyZXR1cm4gRVJST1Jf
T0s7DQorfQ0K
--001636d34bf83d87c5046ec3b42b--

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009525.html">No subject
</A></li>
	<LI>Next message: <A HREF="009656.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9594">[ date ]</a>
              <a href="thread.html#9594">[ thread ]</a>
              <a href="subject.html#9594">[ subject ]</a>
              <a href="author.html#9594">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

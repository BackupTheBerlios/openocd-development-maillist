<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] OpenOCD libftdi and ftd2xx benchmark
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-July/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20OpenOCD%20libftdi%20and%20ftd2xx%20benchmark&In-Reply-To=%3C20110716052147.32184.qmail%40stuge.se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020286.html">
   <LINK REL="Next"  HREF="020290.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] OpenOCD libftdi and ftd2xx benchmark</H1>
    <B>Peter Stuge</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20OpenOCD%20libftdi%20and%20ftd2xx%20benchmark&In-Reply-To=%3C20110716052147.32184.qmail%40stuge.se%3E"
       TITLE="[Openocd-development] OpenOCD libftdi and ftd2xx benchmark">peter at stuge.se
       </A><BR>
    <I>Sat Jul 16 07:21:47 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="020286.html">[Openocd-development] OpenOCD libftdi and ftd2xx benchmark
</A></li>
        <LI>Next message: <A HREF="020290.html">[Openocd-development] OpenOCD libftdi and ftd2xx benchmark
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20287">[ date ]</a>
              <a href="thread.html#20287">[ thread ]</a>
              <a href="subject.html#20287">[ subject ]</a>
              <a href="author.html#20287">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Xiaofan Chen wrote:
&gt;<i> &gt; Actually the result is pretty close for the LPC-P2148 based test.
</I>&gt;<i> &gt; jtag_khz = 1500 KHz, 38.927 KiB/s (ftd2xx) versus 38.754 KiB/s.
</I>&gt;<i> 
</I>&gt;<i> The above is for Amontec JtagKey2 which is high speed USB.
</I>&gt;<i> 
</I>&gt;<i> The J-Link under OpenOCD (full speed USB but with intelligence
</I>&gt;<i> in it) seems much slower than Amontec JtagKey2. The speed
</I>&gt;<i> is 18.813 KiB/s at the same 1500KHz jtag_khz for J-Link (V6, IAR OEM).
</I>
I'll test the Versaloon with an LPC-P2148 tomorrow.


Xiaofan Chen wrote:
&gt;<i> &gt; So in conclusion there is almost no difference in performance between
</I>&gt;<i> &gt; OpenOCD using libftdi-0.19 and ftd2xx, or did I overlook something?
</I>&gt;<i> 
</I>&gt;<i> Yes ftd2xx is only slightly faster based on my limited tests.
</I>
Please don't be shy. You did rather extensive testing in an excellent
structured fashion which makes the results clear and easy to
understand for anyone. That is incredibly valuable. :)


&gt;<i> Freddie, Laurant and others may have more inputs
</I>
Even more test results are of course interesting!


&gt;<i> &gt; If not, I would suggest to only use libftdi in OpenOCD.
</I>&gt;<i> 
</I>&gt;<i> I think it is still good to have both options.
</I>
No doubt a convenience for users, but will it be big enough to
warrant the extra work (and really ugly code) needed while rewriting
the ft2232 driver? I tend to say no.

I think the majority of ftd2xx users were on Windows, and I think
they are equally if not more happy with an OpenOCD binary package
that is easily downloaded and has kernel drivers (WinUSB) that are
even installed automatically (go libwdi!) just by running openocd.

That is the open source one-click embedded debug (well ok gdb too)
that NXP has accomplished for some of their targets, but which we can
actually do for *every* target. :) Just like Pete this is exactly
what I would like OpenOCD to do, and it seems not so far away.


&gt;<i> &gt; The benefit for OpenOCD would be that it can use libusb-1 on Windows
</I>&gt;<i> &gt; without first having to rewrite the ft2232 driver.
</I>&gt;<i> 
</I>&gt;<i> That is right. It is actually not difficult to switch to libftdi-1.0
</I>&gt;<i> since the current 1.0 API is compatible with libftdi-0.1x.
</I>
Awesome.


&gt;<i> &gt; That rewrite is
</I>&gt;<i> &gt; absolutely desirable, but it seems that everyone agrees that the
</I>&gt;<i> &gt; driver deserves and needs a thorough job, so would be nice to be able
</I>&gt;<i> &gt; to punt on that and still be able to start using WinUSB and libusb-1.
</I>&gt;<i> 
</I>&gt;<i> I did some tests for libftdi-1.0 last time and it did not
</I>&gt;<i> offer any speed improvement for OpenOCD since OpenOCD
</I>&gt;<i> has not taken the advantage of the libftdi-1.0 async API.
</I>
Yes, I also don't expect speed advantages without rewrite, but rather
usability advantages basically thanks to libwdi and libusb-1/WinUSB.


//Peter

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020286.html">[Openocd-development] OpenOCD libftdi and ftd2xx benchmark
</A></li>
	<LI>Next message: <A HREF="020290.html">[Openocd-development] OpenOCD libftdi and ftd2xx benchmark
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20287">[ date ]</a>
              <a href="thread.html#20287">[ thread ]</a>
              <a href="subject.html#20287">[ subject ]</a>
              <a href="author.html#20287">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

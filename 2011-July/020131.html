<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] [PATCH] Do not append git info to version	string when building from released tarball
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-July/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%5D%20Do%20not%20append%20git%20info%20to%20version%0A%09string%20when%20building%20from%20released%20tarball&In-Reply-To=%3C1310247879-31238-1-git-send-email-lucab%40debian.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020130.html">
   <LINK REL="Next"  HREF="020242.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] [PATCH] Do not append git info to version	string when building from released tarball</H1>
    <B>Luca Bruno</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20%5BPATCH%5D%20Do%20not%20append%20git%20info%20to%20version%0A%09string%20when%20building%20from%20released%20tarball&In-Reply-To=%3C1310247879-31238-1-git-send-email-lucab%40debian.org%3E"
       TITLE="[Openocd-development] [PATCH] Do not append git info to version	string when building from released tarball">lucab at debian.org
       </A><BR>
    <I>Sat Jul  9 23:44:39 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="020130.html">[Openocd-development] Getting Error: JTAG-DP STICKY ERROR for beagleboard with 0.5.0-dev-00949-gac43d7a
</A></li>
        <LI>Next message: <A HREF="020242.html">[Openocd-development] [PATCH] Do not append git info to version string when building from released tarball
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20131">[ date ]</a>
              <a href="thread.html#20131">[ thread ]</a>
              <a href="subject.html#20131">[ subject ]</a>
              <a href="author.html#20131">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>When building official releases from tarball, git commit info is not
available in the building environment. Thus, automake should not try to
append the git commit to the version string.

Signed-off-by: Luca Bruno &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">lucab at debian.org</A>&gt;
---
 src/Makefile.am |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/src/Makefile.am b/src/Makefile.am
index 1e7af9c..1be24ea 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -45,10 +45,11 @@ libopenocd_la_CPPFLAGS = -DPKGBLDDATE=\&quot;`date +%F-%R`\&quot;
 # guess-rev.sh returns either a repository version ID or &quot;-snapshot&quot;
 if RELEASE
 libopenocd_la_CPPFLAGS += -DRELSTR=\&quot;\&quot;
+libopenocd_la_CPPFLAGS += -DGITVERSION=\&quot;\&quot;
 else
 libopenocd_la_CPPFLAGS += -DRELSTR=\&quot;`$(top_srcdir)/guess-rev.sh $(top_srcdir)`\&quot;
-endif
 libopenocd_la_CPPFLAGS += -DGITVERSION=\&quot;`cd $(top_srcdir) &amp;&amp; git describe`\&quot;
+endif
 
 # add default CPPFLAGS
 libopenocd_la_CPPFLAGS += $(AM_CPPFLAGS) $(CPPFLAGS)
-- 
1.7.5.4


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020130.html">[Openocd-development] Getting Error: JTAG-DP STICKY ERROR for beagleboard with 0.5.0-dev-00949-gac43d7a
</A></li>
	<LI>Next message: <A HREF="020242.html">[Openocd-development] [PATCH] Do not append git info to version string when building from released tarball
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20131">[ date ]</a>
              <a href="thread.html#20131">[ thread ]</a>
              <a href="subject.html#20131">[ subject ]</a>
              <a href="author.html#20131">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

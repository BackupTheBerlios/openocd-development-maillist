<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Adding commands for GDB remote accesses
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-July/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Adding%20commands%20for%20GDB%20remote%20accesses&In-Reply-To=%3C1507573647.20110721121841%40mail.ru%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020343.html">
   <LINK REL="Next"  HREF="020345.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Adding commands for GDB remote accesses</H1>
    <B>Igor Skochinsky</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Adding%20commands%20for%20GDB%20remote%20accesses&In-Reply-To=%3C1507573647.20110721121841%40mail.ru%3E"
       TITLE="[Openocd-development] Adding commands for GDB remote accesses">skochinsky at mail.ru
       </A><BR>
    <I>Thu Jul 21 12:18:41 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="020343.html">[Openocd-development] Adding commands for GDB remote accesses
</A></li>
        <LI>Next message: <A HREF="020345.html">[Openocd-development] Adding commands for GDB remote accesses
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20344">[ date ]</a>
              <a href="thread.html#20344">[ thread ]</a>
              <a href="subject.html#20344">[ subject ]</a>
              <a href="author.html#20344">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Julius,

Thursday, July 21, 2011, 11:48:17 AM, you wrote:

JB&gt; I'm looking at adding OpenRISC 1000 support to OpenOCD.
[skip]
JB&gt; One solution is we make our GDB port not use these remote query
JB&gt; commands and instead rely on the register cache fetched with the &quot;g&quot;
JB&gt; RSP command.

You can have the most used registers in the G/g packet and use P/p for
the rest. If you make an XML description (not sure if OpenOCD supports
it, but would be nice), you might even not need to rebuild GDB to
make use of it.

JB&gt; However, I'd really like something which would allow custom RSP
JB&gt; commands (which can write back to the socket) to be handled.
JB&gt; The problems I see are that, even though the gdb_put_packet() function
JB&gt; is declared and could be used by target code, I can't, for the life of
JB&gt; me, figure out where I could get the right connection* to be putting
JB&gt; the data out at the right place. Also, the unconditional &quot;OK&quot; being
JB&gt; sent isn't great either - perhaps that could be conditional on a
JB&gt; return value from command_run_line() or something.

I'm quite sure you can send a different response for qRcmd - that's how
you can use the usual &quot;telnet&quot; interface from inside GDB. Otherwise
have a look at the File-I/O Remote Protocol Extension or qXfer commands.

-- 
WBR,
 Igor                            mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">skochinsky at mail.ru</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020343.html">[Openocd-development] Adding commands for GDB remote accesses
</A></li>
	<LI>Next message: <A HREF="020345.html">[Openocd-development] Adding commands for GDB remote accesses
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20344">[ date ]</a>
              <a href="thread.html#20344">[ thread ]</a>
              <a href="subject.html#20344">[ subject ]</a>
              <a href="author.html#20344">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

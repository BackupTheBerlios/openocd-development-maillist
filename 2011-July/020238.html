<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Building local bootstrap jimsh0 failed
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-July/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Building%20local%20bootstrap%20jimsh0%20failed&In-Reply-To=%3C96ACE855-C414-4D87-B94F-2073435A5504%40workware.net.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020237.html">
   <LINK REL="Next"  HREF="020240.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Building local bootstrap jimsh0 failed</H1>
    <B>Steve Bennett</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Building%20local%20bootstrap%20jimsh0%20failed&In-Reply-To=%3C96ACE855-C414-4D87-B94F-2073435A5504%40workware.net.au%3E"
       TITLE="[Openocd-development] Building local bootstrap jimsh0 failed">steveb at workware.net.au
       </A><BR>
    <I>Wed Jul 13 23:53:00 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="020237.html">[Openocd-development] Building local bootstrap jimsh0 failed
</A></li>
        <LI>Next message: <A HREF="020240.html">[Openocd-development] Building local bootstrap jimsh0 failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20238">[ date ]</a>
              <a href="thread.html#20238">[ thread ]</a>
              <a href="subject.html#20238">[ subject ]</a>
              <a href="author.html#20238">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/07/2011, at 5:39 AM, Eric Wetzel wrote:

&gt;<i> On Thu, Jul 7, 2011 at 8:07 AM, Eric Wetzel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">thewetzel at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> On Thu, Jul 7, 2011 at 6:40 AM, Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">spen at spen-soft.co.uk</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> On 7 July 2011 11:09, Steve Bennett &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">steveb at workware.net.au</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> ../../jimtcl/autosetup/find-tclsh: line 10: cc: command not found
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> But no cc?
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> If cygwin is installed, why no cc?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> That one confused me aswell, perhaps the cygwin tools need reinstalling.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> The cygwin-mingw cross compiler is relatively new and does have some
</I>&gt;&gt;&gt;<i> install issues:
</I>&gt;&gt;&gt;<i> <A HREF="http://www.cygwin.com/ml/cygwin-announce/2011-06/msg00004.html">http://www.cygwin.com/ml/cygwin-announce/2011-06/msg00004.html</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Cheers
</I>&gt;&gt;&gt;<i> Spen
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> That would do it. I didn't have Cygwin's gcc installed, only the mingw one.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> It built fine last week, with git ff640f1, but I guess the latest bump
</I>&gt;&gt;<i> of JimTCL changed the way it builds.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i> ~Eric
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I have a new, but similar, issue with Jim now. After the last build
</I>&gt;<i> succeeded, I added OpenOCD's install directory to my Cygwin path,
</I>&gt;<i> which includes a mingw32-targetted Jim binary. Now, attempting to
</I>&gt;<i> rebuild OpenOCD from git results in this during the configure phase:
</I>&gt;<i> === configuring in jimtcl
</I>&gt;<i> (/home/ericwetz/local/src/openocd.git/build-win32/jimtcl)
</I>&gt;<i> configure: running /bin/sh ../../jimtcl/configure.gnu
</I>&gt;<i> --disable-option-checking '--prefix=/home/ericwetz/local'
</I>&gt;<i> '--enable-maintainer-mode' '--build=i686-pc-cygwin'
</I>&gt;<i> '--host=i686-pc-mingw32' '--enable-dummy' '--enable-jlink'
</I>&gt;<i> '--enable-ft2232_ftd2xx'
</I>&gt;<i> '--with-ftd2xx-win32-zipdir=/home/ericwetz/local/src/ftd2xx'
</I>&gt;<i> 'build_alias=i686-pc-cygwin' 'host_alias=i686-pc-mingw32'
</I>&gt;<i> --cache-file=/dev/null --srcdir=../../jimtcl
</I>&gt;<i> cygwin warning:
</I>&gt;<i>  MS-DOS style path detected:
</I>&gt;<i> /home/ericwetz/local/bin/C:\cygwin\home\ericwetz\local\src\openocd.git\build-win32\jimtcl\x0D
</I>&gt;<i>  Preferred POSIX equivalent is:
</I>&gt;<i> /home/ericwetz/local/bin/C:/cygwin/home/ericwetz/local/src/openocd.git/build-win32/jimtcl\x0D
</I>&gt;<i>  CYGWIN environment variable option &quot;nodosfilewarning&quot; turns off this warning.
</I>&gt;<i>  Consult the user's guide for more details about POSIX paths:
</I>&gt;<i>    <A HREF="http://cygwin.com/cygwin-ug-net/using.html#using-pathnames">http://cygwin.com/cygwin-ug-net/using.html#using-pathnames</A>
</I>&gt;<i> ../../jimtcl/configure: line 3: exec:
</I>&gt;<i> C:\cygwin\home\ericwetz\local\src\openocd.: not foundin32\jimtcl
</I>&gt;<i> configure: error: ../../jimtcl/configure.gnu failed for jimtcl
</I>&gt;<i> 
</I>&gt;<i> Running the installed jimsh on jimtcl/autosetup/test-tclsh returns the
</I>&gt;<i> Windows path:
</I>&gt;<i> C:\cygwin\home\ericwetz\local\src\openocd.git\jimtcl
</I>&gt;<i> 
</I>&gt;<i> It should be noted that running jimsh on an absolute Cygwin path
</I>&gt;<i> fails, complaining &quot;No such file or directory&quot;, but that seems to be
</I>&gt;<i> typical of all native Windows applications.
</I>&gt;<i> 
</I>&gt;<i> Removing jimsh from my path fixes this, as a new jimsh0 must be
</I>&gt;<i> bootstrapped (solved in this last post in this e-mail).
</I>&gt;<i> 
</I>&gt;<i> I don't know what could be done to fix this; I'm not even sure it
</I>&gt;<i> deserves fixing. I acknowledge that the environments I'm trying to
</I>&gt;<i> build from and for are a little bit convoluted, but this is what I
</I>&gt;<i> have to work with. I don't have a Linux machine at work, and MinGW
</I>&gt;<i> always makes me kindof uncomfortable.
</I>
Hi Eric,

Thanks for the report.
This is caused by a couple of things.

Firstly, the version of jimtcl used by openocd isn't fully functional
when built under mingw. It's fine for openocd, but things like backslashes
in paths and exec aren't handled properly. So the built jimsh isn't suitable
for configure/autosetup. (Not that the latest version of jimtcl adds better
support for mingw, but that version is not yet used by openocd)

But, that wouldn't be a problem except for...

Secondly, when openocd installs it also installs jimtcl. It really shouldn't.
It uses jimtcl internally and doesn't need anything installed.

At some point openocd will use a newer version of jimtcl, so this will solve the
first point. But I would also like to see openocd *not* install jimtcl.
This needs to be done with some automake-foo in openocd.

Cheers,
Steve

--
&#181;Web: Embedded Web Framework - <A HREF="http://uweb.workware.net.au/">http://uweb.workware.net.au/</A>
WorkWare Systems Pty Ltd
W: www.workware.net.au      P: +61 434 921 300
E: <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">steveb at workware.net.au</A>   F: +61 7 3391 6002






</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020237.html">[Openocd-development] Building local bootstrap jimsh0 failed
</A></li>
	<LI>Next message: <A HREF="020240.html">[Openocd-development] Building local bootstrap jimsh0 failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20238">[ date ]</a>
              <a href="thread.html#20238">[ thread ]</a>
              <a href="subject.html#20238">[ subject ]</a>
              <a href="author.html#20238">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

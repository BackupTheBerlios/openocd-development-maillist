<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] qXfer:memory-map:read patch
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20qXfer%3Amemory-map%3Aread%20patch&In-Reply-To=%3Cc09652430710230703q6af9cc8cia76b4ac3755bed83%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000378.html">
   <LINK REL="Next"  HREF="000381.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] qXfer:memory-map:read patch</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20qXfer%3Amemory-map%3Aread%20patch&In-Reply-To=%3Cc09652430710230703q6af9cc8cia76b4ac3755bed83%40mail.gmail.com%3E"
       TITLE="[Openocd-development] qXfer:memory-map:read patch">oyvind.harboe at zylin.com
       </A><BR>
    <I>Tue Oct 23 16:03:19 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000378.html">[Openocd-development] Flash programming via GDB load &quot;qXfer:memory-map:read&quot; support
</A></li>
        <LI>Next message: <A HREF="000381.html">[Openocd-development] qXfer:memory-map:read patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#380">[ date ]</a>
              <a href="thread.html#380">[ thread ]</a>
              <a href="subject.html#380">[ subject ]</a>
              <a href="author.html#380">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Is it possible to use vFlashXxx without qXfer:memory-map:read?


I was unable to get vFlashXxx working without adding support for
qXfer:memory-map:read and setting memory-map-packet = on.


(gdb) set remote memory-map-packet on
(gdb) target remote 10.0.0.108:3333
Remote debugging using 10.0.0.108:3333
-- memory map is picked up here ---


About the patch:

- It's not done, but mainly it needs more failure paths. I miss
exception handling and memory management :-)
- GDB seems to have some default way to handle memory for which there
are no memory properties defined. Don't know the details though. The
net result might be that it is sufficient to specify the flash regions
in the memory map xml returned.
- I've added a couple of #if _DEBUG_GDB_IO_ around some log statements
that are in the critical path performance wise. We're running OpenOCD
on an ARM7 under eCos, so this shows up in profiling.



-- 
&#216;yvind Harboe
<A HREF="http://www.zylin.com">http://www.zylin.com</A> - eCos ARM &amp; FPGA  developer kit
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: memorymappatch.txt
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20071023/9b280ec6/attachment.txt">https://lists.berlios.de/pipermail/openocd-development/attachments/20071023/9b280ec6/attachment.txt</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000378.html">[Openocd-development] Flash programming via GDB load &quot;qXfer:memory-map:read&quot; support
</A></li>
	<LI>Next message: <A HREF="000381.html">[Openocd-development] qXfer:memory-map:read patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#380">[ date ]</a>
              <a href="thread.html#380">[ thread ]</a>
              <a href="subject.html#380">[ subject ]</a>
              <a href="author.html#380">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] STR7x flash protect information is broken
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20STR7x%20flash%20protect%20information%20is%20broken&In-Reply-To=%3C4B66E261.60709%40spen-soft.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014518.html">
   <LINK REL="Next"  HREF="014522.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] STR7x flash protect information is broken</H1>
    <B>Spencer Oliver</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20STR7x%20flash%20protect%20information%20is%20broken&In-Reply-To=%3C4B66E261.60709%40spen-soft.co.uk%3E"
       TITLE="[Openocd-development] STR7x flash protect information is broken">spen at spen-soft.co.uk
       </A><BR>
    <I>Mon Feb  1 15:17:05 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="014518.html">[Openocd-development] STR7x flash protect information is broken
</A></li>
        <LI>Next message: <A HREF="014522.html">[Openocd-development] STR7x flash protect information is broken
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14520">[ date ]</a>
              <a href="thread.html#14520">[ thread ]</a>
              <a href="subject.html#14520">[ subject ]</a>
              <a href="author.html#14520">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Edgar Grimberg wrote:
&gt;&gt;<i> Ah ok, I think this is an issue with the str7, rather than openocd.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The flash protection is being removed (until next reset) but we are reading
</I>&gt;&gt;<i> the non-volatile register (FLASH_NVWPAR).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is read at reset and any write to this register only effects the
</I>&gt;&gt;<i> volatile version of FLASH_NVWPAR. The address of the volatile version is
</I>&gt;&gt;<i> unknown.
</I>&gt;<i> 
</I>&gt;<i> So, the conclusion is that we cannot have the flash protect information for
</I>&gt;<i> STR7 flash? If that's true, I'll add a note in the str7x_info string,
</I>&gt;<i> so it will
</I>&gt;<i> appear on the output of &quot;flash info&quot; command.
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Edgar
</I>&gt;<i> 
</I>&gt;<i> 
</I>
The str7 write protection is a bit quirky as once set can only be 
removed temporarily anyway - until the next reset.

Also disable_jtag can catch people out as once this is set you can only 
remove this protection from code running on the device.
So unless you have made provision for this in the user code you can 
easily loose a device.

Cheers
Spen

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014518.html">[Openocd-development] STR7x flash protect information is broken
</A></li>
	<LI>Next message: <A HREF="014522.html">[Openocd-development] STR7x flash protect information is broken
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14520">[ date ]</a>
              <a href="thread.html#14520">[ thread ]</a>
              <a href="subject.html#14520">[ subject ]</a>
              <a href="author.html#14520">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

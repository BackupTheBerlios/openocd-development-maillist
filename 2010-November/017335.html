<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Programming external flash with OpenOCD fails
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Programming%20external%20flash%20with%20OpenOCD%0A%20fails&In-Reply-To=%3C4CF549D3.2060208%40discworld.dascon.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017334.html">
   <LINK REL="Next"  HREF="017337.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Programming external flash with OpenOCD fails</H1>
    <B>Michael Schwingen</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Programming%20external%20flash%20with%20OpenOCD%0A%20fails&In-Reply-To=%3C4CF549D3.2060208%40discworld.dascon.de%3E"
       TITLE="[Openocd-development] Programming external flash with OpenOCD fails">rincewind at discworld.dascon.de
       </A><BR>
    <I>Tue Nov 30 20:00:35 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="017334.html">[Openocd-development] Programming external flash with OpenOCD	fails
</A></li>
        <LI>Next message: <A HREF="017337.html">[Openocd-development] Programming external flash with OpenOCD	fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17335">[ date ]</a>
              <a href="thread.html#17335">[ thread ]</a>
              <a href="subject.html#17335">[ subject ]</a>
              <a href="author.html#17335">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/30/2010 07:06 PM, Starkeeper wrote:
&gt;<i> Hi there,
</I>&gt;<i> I have an external flash (Spansion S29GL128N90) connected to a NXP LPC2478
</I>&gt;<i> microcontroller. Everytime when I try to flash this external flash I get the
</I>&gt;<i> following error from OpenOCD (Version 0.4.0 and self compiled 0.5.0):
</I>&gt;<i>
</I>&gt;<i> Flash Manufacturer/Device: 0x0001 0x227e
</I>&gt;<i> error writing to flash at address 0x80000000 at offset 0x00000000 (-902)
</I>&gt;<i> Command handler execution failed in procedure 'flash' called at file
</I>&gt;<i> &quot;command.c&quot;, line 650 called at file &quot;command.c&quot;, line 361
</I>&gt;<i>
</I>&gt;<i> Command used:
</I>&gt;<i> monitor flash write_image erase ./bin/Debug/We-Res.hex 0x00 ihex
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The flash is connected to the EMI and seems to works fine. OpenOCD is able
</I>&gt;<i> to erase the flash and I am able to read the data, that I have written
</I>&gt;<i> previously with the following commands:
</I>&gt;<i> monitor flash erase_sector 1 0 10
</I>&gt;<i> monitor flash fillw 0x80000000 0x12345678 0x1000
</I>Could you try what happens if you disable the work-area in the CPU config?

If it works, it will be dead slow, but we might get more diagnostics if
the offending code runs on the PC instead of the target. If it fails,
too, please provide a log of the failing operation that shows the bus
cycles.

BTW: you *did* set up the work area to point to an area where you have
working memory?

cu
Michael


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017334.html">[Openocd-development] Programming external flash with OpenOCD	fails
</A></li>
	<LI>Next message: <A HREF="017337.html">[Openocd-development] Programming external flash with OpenOCD	fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17335">[ date ]</a>
              <a href="thread.html#17335">[ thread ]</a>
              <a href="subject.html#17335">[ subject ]</a>
              <a href="author.html#17335">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

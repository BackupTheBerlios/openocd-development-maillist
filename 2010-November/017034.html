<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] STM32 reset_config
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20STM32%20reset_config&In-Reply-To=%3CAANLkTin8q-kMnLoDVVZWVOEUAj%3DPsiEi84rXiFKNTUeR%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017033.html">
   <LINK REL="Next"  HREF="017037.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] STM32 reset_config</H1>
    <B>Andreas Fritiofson</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20STM32%20reset_config&In-Reply-To=%3CAANLkTin8q-kMnLoDVVZWVOEUAj%3DPsiEi84rXiFKNTUeR%40mail.gmail.com%3E"
       TITLE="[Openocd-development] STM32 reset_config">andreas.fritiofson at gmail.com
       </A><BR>
    <I>Wed Nov 10 20:01:17 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="017033.html">[Openocd-development] STM32 reset_config
</A></li>
        <LI>Next message: <A HREF="017037.html">[Openocd-development] STM32 reset_config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17034">[ date ]</a>
              <a href="thread.html#17034">[ thread ]</a>
              <a href="subject.html#17034">[ subject ]</a>
              <a href="author.html#17034">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Nov 10, 2010 at 7:47 PM, Andreas Fritiofson
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">andreas.fritiofson at gmail.com</A>&gt; wrote:
&gt;<i> On Wed, Nov 10, 2010 at 6:50 PM, Freddie Chopin &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">freddie_chopin at op.pl</A>&gt; wrote:
</I>&gt;&gt;<i> Hi!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've doubts about this commit
</I>&gt;&gt;<i> <A HREF="http://openocd.git.sourceforge.net/git/gitweb.cgi?p=openocd/openocd;a=commit;h=85944d4144a1df0647e4324d1cf8ae9a276b70e5">http://openocd.git.sourceforge.net/git/gitweb.cgi?p=openocd/openocd;a=commit;h=85944d4144a1df0647e4324d1cf8ae9a276b70e5</A>
</I>&gt;&gt;<i> Today I've noticed that resetting the chip with OpenOCD does NOT reset
</I>&gt;&gt;<i> peripheals (the chip is STM32F103RBT8), which IMO is not very good...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Do you think this patch should be reverted? Are there any important reasons
</I>&gt;&gt;<i> to not have &quot;reset_config&quot; in stm32.cfg as in many other target cfg files?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I don't think this specific patch is the problem. I've run with
</I>&gt;<i> 'reset_config none' for a long time without any trouble. Before this
</I>&gt;<i> patch there were a bunch of reset issues. Please don't revert it.
</I>&gt;<i> Besides, having reset signals wired is optional and a board/adapter
</I>&gt;<i> level decision, and should not be specified in the target file.
</I>&gt;<i>
</I>&gt;<i> If the peripherals are not getting reset I suspect some other patch
</I>&gt;<i> has sneaked in that changed the &quot;soft reset&quot; behavior from a real
</I>&gt;<i> reset to a core only reset. Perhaps to fix issues with other Cortex-M3
</I>&gt;<i> implementations. I haven't run HEAD for a while, but if I find some
</I>&gt;<i> time I'll try to confirm and locate the problem.
</I>
Without having tested it, commit 3c69eee9 seems to be the problem.
While it's good that the reset type is now configurable, changing the
default behavior wasn't perhaps the best idea. It would have been
better to keep SYSRESETREQ as the default and change it in the configs
for cores that haven't wired it up to the &quot;master reset&quot;.

Regards,
Andreas

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017033.html">[Openocd-development] STM32 reset_config
</A></li>
	<LI>Next message: <A HREF="017037.html">[Openocd-development] STM32 reset_config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17034">[ date ]</a>
              <a href="thread.html#17034">[ thread ]</a>
              <a href="subject.html#17034">[ subject ]</a>
              <a href="author.html#17034">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

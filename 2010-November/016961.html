<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Stm32 load elf file with gdb
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Stm32%20load%20elf%20file%20with%20gdb&In-Reply-To=%3CA464022AF0AD452F80245B676389ADC1%40JONATHAN%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016959.html">
   <LINK REL="Next"  HREF="016968.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Stm32 load elf file with gdb</H1>
    <B>Jonathan dumaresq</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Stm32%20load%20elf%20file%20with%20gdb&In-Reply-To=%3CA464022AF0AD452F80245B676389ADC1%40JONATHAN%3E"
       TITLE="[Openocd-development] Stm32 load elf file with gdb">jdumaresq at cimeq.qc.ca
       </A><BR>
    <I>Thu Nov  4 14:46:20 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="016959.html">[Openocd-development] JTAG blockage
</A></li>
        <LI>Next message: <A HREF="016968.html">[Openocd-development] Stm32 load elf file with gdb
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16961">[ date ]</a>
              <a href="thread.html#16961">[ thread ]</a>
              <a href="subject.html#16961">[ subject ]</a>
              <a href="author.html#16961">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I try to get my stm32 environnement working with gdb. I'm unable to get my
elf file loaded with gdb. Here my setup:

Openocd.cfg
/////
source [find interface/olimex-arm-usb-ocd.cfg]
source [find target/stm32.cfg]

stm32.cpu configure -event gdb-flash-write-end {
        reset init
}

stm32.cpu configure -event gdb-flash-erase-start {
        reset init
}
///////

All include file are default. 

Here how i lunch gdb

Arm-none-eabi-gdb rtosdemo.elf


(gdb)target remote | openocd --pipe
(gdb)load rtosdemo.elf
(gdb) load
Loading section .text, size 0xa7d8 lma 0x0
Debug: 408 139609 gdb_server.c:2145 gdb_input_inner(): received packet:
'X0,3fb0
:<i>&lt;binary-data&gt;'
</I>Debug: 409 139609 gdb_server.c:1388 gdb_write_memory_binary_packet(): addr:
0x00
000000, len: 0x00003fb0
Debug: 410 139609 target.c:1251 target_write_buffer(): writing buffer of
16304 b
yte at 0x00000000
Debug: 411 139687 arm_adi_v5.c:335 jtagdp_transaction_endcheck(): jtag-dp:
CTRL/
STAT error, 0xf0000021
Error: 412 139687 arm_adi_v5.c:361 jtagdp_transaction_endcheck(): JTAG-DP
STICKY
 ERROR
Debug: 413 139703 arm_adi_v5.c:373 jtagdp_transaction_endcheck(): jtag-dp:
CTRL/
STAT 0xf0000001
Error: 414 139703 arm_adi_v5.c:380 jtagdp_transaction_endcheck(): MEM_AP_CSW
0x2
3000052, MEM_AP_TAR 0x4
Debug: 415 139797 arm_adi_v5.c:335 jtagdp_transaction_endcheck(): jtag-dp:
CTRL/
STAT error, 0xf0000021
Error: 416 139797 arm_adi_v5.c:361 jtagdp_transaction_endcheck(): JTAG-DP
STICKY
 ERROR
Debug: 417 139797 arm_adi_v5.c:373 jtagdp_transaction_endcheck(): jtag-dp:
CTRL/
STAT 0xf0000001
Error: 418 139828 arm_adi_v5.c:380 jtagdp_transaction_endcheck(): MEM_AP_CSW
0x2
3000052, MEM_AP_TAR 0x4
Warn : 419 139828 arm_adi_v5.c:720 mem_ap_write_buf_u32(): Block write error
add
ress 0x0, wcount 0xfec
Error: 420 139828 gdb_server.c:1211 gdb_error(): unexpected error -107
Load failed
(gdb)

I have to admit that i'm a little bit lost there. Do i have something else
to do to get this work ?

Thanx

Jonathan



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016959.html">[Openocd-development] JTAG blockage
</A></li>
	<LI>Next message: <A HREF="016968.html">[Openocd-development] Stm32 load elf file with gdb
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16961">[ date ]</a>
              <a href="thread.html#16961">[ thread ]</a>
              <a href="subject.html#16961">[ subject ]</a>
              <a href="author.html#16961">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Config file format/line endings
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Config%20file%20format/line%20endings&In-Reply-To=%3CAANLkTineGgccJbc5ni4G5CYqHe9O6E%2B-w5c2hKx40NT7%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017154.html">
   <LINK REL="Next"  HREF="017156.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Config file format/line endings</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Config%20file%20format/line%20endings&In-Reply-To=%3CAANLkTineGgccJbc5ni4G5CYqHe9O6E%2B-w5c2hKx40NT7%40mail.gmail.com%3E"
       TITLE="[Openocd-development] Config file format/line endings">oyvind.harboe at zylin.com
       </A><BR>
    <I>Tue Nov 16 02:15:48 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="017154.html">[Openocd-development] Config file format/line endings
</A></li>
        <LI>Next message: <A HREF="017156.html">[Openocd-development] Config file format/line endings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17155">[ date ]</a>
              <a href="thread.html#17155">[ thread ]</a>
              <a href="subject.html#17155">[ subject ]</a>
              <a href="author.html#17155">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Nov 16, 2010 at 2:06 AM, Steve Bennett &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">steveb at workware.net.au</A>&gt; wrote:
&gt;<i> On 16/11/2010, at 9:27 AM, Andrew Leech wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi all,
</I>&gt;&gt;<i> I've just found a compiling/usage difficulty with the git version on
</I>&gt;&gt;<i> cygwin. Apparently somewhere between 0.4.0 and mainline (possibly
</I>&gt;&gt;<i> jimtcl?) openocd no longer handles dos line endings on config files.
</I>&gt;&gt;<i> Apparently all my config files of my existing 0.4.0 installation have
</I>&gt;&gt;<i> dos line endings and I'd never realised or cared, but I compiled git
</I>&gt;&gt;<i> on cygwin and tried to use it with my existing openocd.cfg and was
</I>&gt;&gt;<i> treated to this error:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Open On-Chip Debugger 0.5.0-dev-00589-gfdae512-dirty (2010-11-16-10:00)
</I>&gt;&gt;<i> Licensed under GNU GPL v2
</I>&gt;&gt;<i> For bug reports, read
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;<A HREF="http://openocd.berlios.de/doc/doxygen/bugs.html">http://openocd.berlios.de/doc/doxygen/bugs.html</A>
</I>&gt;&gt;<i> Runtime Error: embedded:startup.tcl:57:
</I>&gt;&gt;<i> in procedure 'script'
</I>&gt;&gt;<i> at file &quot;embedded:startup.tcl&quot;, line 57
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is a very un-user-friendly error message and had me stumped, I
</I>&gt;&gt;<i> though my build was broken or something. It took me a lot of stuffing
</I>&gt;&gt;<i> around with config files to realise it was just a dos2unix on my
</I>&gt;&gt;<i> config file away from working, and now I'm all good.
</I>&gt;&gt;<i> I personally don't have an issue with requiring unix line endings,
</I>&gt;&gt;<i> it's just that this is a nasty way to fail, a cleaner error message
</I>&gt;&gt;<i> would have been useful.
</I>&gt;<i>
</I>&gt;<i> I suspect the problem is here in src/helper/startup.tcl
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;set errmsg [format &quot;%s: command requires more arguments&quot; \
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160;[concat $name &quot; &quot; $args]]
</I>&gt;<i>
</I>&gt;<i> The backslash newline sequence will likely have a carriage return inserted.
</I>&gt;<i> The easy solution is to ensure that these startup files are read in text mode
</I>&gt;<i> or have the \r\n translated to \n before creating startup_tcl.c
</I>&gt;<i>
</I>&gt;<i> But it would also be nice if each startup script were evaluated independently
</I>&gt;<i> with the original filename, and any error message shown.
</I>
A large startup.tcl is generated by the makefiles from many smaller
startup.tcl scripts around the source tree. This startup.tcl is then converted
to .c and linked into openocd. Why? Because it was felt that it was an important
feature to be able to launch openocd without a dependency on the files that
openocd ships with.



-- 
&#216;yvind Harboe

Can Zylin Consulting help on your project?

US toll free 1-866-980-3434 / International +47 51 63 25 00

<A HREF="http://www.zylin.com/zy1000.html">http://www.zylin.com/zy1000.html</A>
ARM7 ARM9 ARM11 XScale Cortex
JTAG debugger and flash programmer

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017154.html">[Openocd-development] Config file format/line endings
</A></li>
	<LI>Next message: <A HREF="017156.html">[Openocd-development] Config file format/line endings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17155">[ date ]</a>
              <a href="thread.html#17155">[ thread ]</a>
              <a href="subject.html#17155">[ subject ]</a>
              <a href="author.html#17155">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

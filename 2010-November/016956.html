<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Proposition of new target cfg files scheme
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Proposition%20of%20new%20target%20cfg%20files%20scheme&In-Reply-To=%3C4CD2AF6F.6000908%40discworld.dascon.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016950.html">
   <LINK REL="Next"  HREF="016935.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Proposition of new target cfg files scheme</H1>
    <B>Michael Schwingen</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Proposition%20of%20new%20target%20cfg%20files%20scheme&In-Reply-To=%3C4CD2AF6F.6000908%40discworld.dascon.de%3E"
       TITLE="[Openocd-development] Proposition of new target cfg files scheme">rincewind at discworld.dascon.de
       </A><BR>
    <I>Thu Nov  4 14:04:47 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="016950.html">[Openocd-development] Proposition of new target cfg files scheme
</A></li>
        <LI>Next message: <A HREF="016935.html">[Openocd-development] STM32 core debug reset problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16956">[ date ]</a>
              <a href="thread.html#16956">[ thread ]</a>
              <a href="subject.html#16956">[ subject ]</a>
              <a href="author.html#16956">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Laurent Gauch wrote:
&gt;<i> under target directories we should add the architecture family 
</I>&gt;<i> directories as
</I>&gt;<i>
</I>&gt;<i> - target
</I>&gt;<i>     - arm
</I>&gt;<i>     - STM32
</I>&gt;<i>         stm32f103rb.cfg
</I>&gt;<i>         stm32f107v8.cfg
</I>&gt;<i>         stm32f100rb.cfg
</I>This gets quite annoying to type when specifying the target, and it 
makes it necessary to have lots of small files for all the variants.

How about specifying a CPU variant on the commandline instead of the 
filename? I am thinking about a mechanism where OpenOCD reads some kind 
of index file, looks up the CPU variant that I passed on the 
commandline, and calls the generic config file where that CPU is 
supported, passing the variant via some variable. The generic config 
file can then deduce RAM size etc. using that variable, instead of 
splitting this in multiple small files.

The index could be built automatically from the generic config files, in 
a way that each config file provides a list of the CPU variants that it 
supports. Extracting the index could be done by two ways:
 - at compile/install time, using a simple script
 - at runtime, by reading *all* config files and building the list 
dynamically in memory.

Comments?

cu
Michael

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016950.html">[Openocd-development] Proposition of new target cfg files scheme
</A></li>
	<LI>Next message: <A HREF="016935.html">[Openocd-development] STM32 core debug reset problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16956">[ date ]</a>
              <a href="thread.html#16956">[ thread ]</a>
              <a href="subject.html#16956">[ subject ]</a>
              <a href="author.html#16956">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

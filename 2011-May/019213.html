<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Jlink support
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-May/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Jlink%20support&In-Reply-To=%3CDCDCC444763E458D87A84CDC2924E6F2%40Bright%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019202.html">
   <LINK REL="Next"  HREF="019220.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Jlink support</H1>
    <B>Paul Claessen</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Jlink%20support&In-Reply-To=%3CDCDCC444763E458D87A84CDC2924E6F2%40Bright%3E"
       TITLE="[Openocd-development] Jlink support">paul at claessen.com
       </A><BR>
    <I>Fri May 27 17:22:19 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="019202.html">[Openocd-development] Error: .. adapter speed not selected
</A></li>
        <LI>Next message: <A HREF="019220.html">[Openocd-development] Jlink support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19213">[ date ]</a>
              <a href="thread.html#19213">[ thread ]</a>
              <a href="subject.html#19213">[ subject ]</a>
              <a href="author.html#19213">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I built OpenOCD 0.5.0-dev-00882 the other day with Jlink support enabled.

It built okay, but when I tried to use it I got some errors (See below for error log). They seem to hint at USB endpoint problems (but I could be totally wrong).

I found several links on the web (links given below) that seem to indicate that these errors are caused by newer versions of Jlink firmware, that are not supported by OpenOCD.
The suggested solution is to downgrade one&#8217;s Jlink firmware. A better solution, IMHO, would be to add support for these newer firmware versions in OpenOCD.

My questions are: 1) Is the development team (especially the Jlink developer) aware of this (i.e. IS this indeed a firmware version issue?), 2) are there any plans to add support for newer Jlink firmware and 3) in case there are no plans to add support for this, and I can find some time to see if I can add this myself, has someone already looked at this and has an idea of what would need to change or tips for what to look for? (if lucky, it&#8217;s only a change of USB endpoints).

Kind regards,

~ Paul Claessen

Links:

<A HREF="http://www.arm9board.net/wiki/index.php?title=J-link_under_Linux_using_OpenOCD">http://www.arm9board.net/wiki/index.php?title=J-link_under_Linux_using_OpenOCD</A> 

<A HREF="http://www.segger2.com/index.php?page=Thread&amp;threadID=707">http://www.segger2.com/index.php?page=Thread&amp;threadID=707</A> 

Error (and info) messages:

Warn : Adapter driver 'jlink' did not declare which transports it allows; assuming legacy JTAG-only
Info : only one transport option; autoselect 'jtag'
1000 kHz
dbreg
Info : J-Link initialization started / target CPU reset initiated
Info : J-Link ARM V8 compiled Jan 31 2011 18:34:52
Info : J-Link caps 0xb9ff7bbf
Info : J-Link hw version 80000
Info : J-Link hw type J-Link
Info : J-Link max mem block 8368
Info : J-Link configuration
Info : USB-Address: 0x1
Info : Kickstart power on JTAG-pin 19: 0xffffffff
Info : Vref = 2.562 TCK = 1 TDI = 0 TDO = 0 TMS = 0 SRST = 0 TRST = 0
Info : J-Link JTAG Interface ready
Error: usb_bulk_read failed (requested=1, result=0)
Error: jlink_tap_execute, wrong result -107 (expected 1)
Info : clock speed 1000 kHz
Warn : There are no enabled taps.  AUTO PROBING MIGHT NOT WORK!!
Error: usb_bulk_read failed (requested=1, result=-110)
Error: jlink_tap_execute, wrong result -107 (expected 1)
Error: usb_bulk_read failed (requested=1, result=0)
Error: jlink_tap_execute, wrong result -107 (expected 1)
in procedure 'transport'
in procedure 'init'
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20110527/a7eb2198/attachment.html">https://lists.berlios.de/pipermail/openocd-development/attachments/20110527/a7eb2198/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019202.html">[Openocd-development] Error: .. adapter speed not selected
</A></li>
	<LI>Next message: <A HREF="019220.html">[Openocd-development] Jlink support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19213">[ date ]</a>
              <a href="thread.html#19213">[ thread ]</a>
              <a href="subject.html#19213">[ subject ]</a>
              <a href="author.html#19213">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

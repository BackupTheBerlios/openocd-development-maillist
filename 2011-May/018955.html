<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Read register using GDB
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-May/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Read%20register%20using%20GDB&In-Reply-To=%3C4DBEDCED.9070104%40freenet.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018954.html">
   <LINK REL="Next"  HREF="018956.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Read register using GDB</H1>
    <B>Mathias K.</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Read%20register%20using%20GDB&In-Reply-To=%3C4DBEDCED.9070104%40freenet.de%3E"
       TITLE="[Openocd-development] Read register using GDB">kesmtp at freenet.de
       </A><BR>
    <I>Mon May  2 18:33:49 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="018954.html">[Openocd-development] Read register using GDB
</A></li>
        <LI>Next message: <A HREF="018956.html">[Openocd-development] Read register using GDB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18955">[ date ]</a>
              <a href="thread.html#18955">[ thread ]</a>
              <a href="subject.html#18955">[ subject ]</a>
              <a href="author.html#18955">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you stop the target you should store the target context into the local register cache and if you
resume the target you need to restore the context. This is why the target registers never read again
if the target already halted.


Am 02.05.2011 18:22, schrieb Jie Zhang:
&gt;<i> Thank you for your reply!
</I>&gt;<i> 
</I>&gt;<i> I'm adding a new target to OpenOCD. But I think all existing targets in OpenOCD have this issue.
</I>&gt;<i> Maybe I missed something...
</I>&gt;<i> 
</I>&gt;<i> Jie
</I>&gt;<i> 
</I>&gt;<i> On Mon, May 2, 2011 at 12:13 PM, Mathias K. &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">kesmtp at freenet.de</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">kesmtp at freenet.de</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i>     Hello,
</I>&gt;<i> 
</I>&gt;<i>     please tell us more about your target platform.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Regards,
</I>&gt;<i> 
</I>&gt;<i>     Mathias
</I>&gt;<i> 
</I>&gt;<i>     Am 02.05.2011 18:06, schrieb Jie Zhang:
</I>&gt;<i>     &gt; Hi,
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; I encountered an issue when using OpenOCD with GDB. After GDB connects to OpenOCD and halt the
</I>&gt;<i>     &gt; target, &quot;info reg&quot; command returns all zeros for all registers. I took a look at the related code
</I>&gt;<i>     &gt; and found that when GDB requests register values from OpenOCD, OpenOCD does not read register from
</I>&gt;<i>     &gt; target, instead it just calls target_get_gdb_reg_list to create a register list without
</I>&gt;<i>     initializing
</I>&gt;<i>     &gt; it with real register value, and then just returns them to GDB. Is it a bug or by design?
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Regards,
</I>&gt;<i>     &gt; Jie
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; _______________________________________________
</I>&gt;<i>     &gt; Openocd-development mailing list
</I>&gt;<i>     &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A>&gt;
</I>&gt;<i>     &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">https://lists.berlios.de/mailman/listinfo/openocd-development</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018954.html">[Openocd-development] Read register using GDB
</A></li>
	<LI>Next message: <A HREF="018956.html">[Openocd-development] Read register using GDB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18955">[ date ]</a>
              <a href="thread.html#18955">[ thread ]</a>
              <a href="subject.html#18955">[ subject ]</a>
              <a href="author.html#18955">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

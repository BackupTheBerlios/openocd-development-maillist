<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] malloc: Vote what to do
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20malloc%3A%20Vote%20what%20to%20do&In-Reply-To=%3C19CA9E279FDA5246B7D7A1C91A4AF7F464335D%40dealogicserver.DEALogic.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013676.html">
   <LINK REL="Next"  HREF="013678.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] malloc: Vote what to do</H1>
    <B>Nico Coesel</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20malloc%3A%20Vote%20what%20to%20do&In-Reply-To=%3C19CA9E279FDA5246B7D7A1C91A4AF7F464335D%40dealogicserver.DEALogic.nl%3E"
       TITLE="[Openocd-development] malloc: Vote what to do">ncoesel at DEALogic.nl
       </A><BR>
    <I>Fri Dec 18 09:34:07 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="013676.html">[Openocd-development] malloc: Vote what to do
</A></li>
        <LI>Next message: <A HREF="013678.html">[Openocd-development] malloc: Vote what to do
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13703">[ date ]</a>
              <a href="thread.html#13703">[ thread ]</a>
              <a href="subject.html#13703">[ subject ]</a>
              <a href="author.html#13703">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">openocd-development-bounces at lists.berlios.de</A> [mailto:openocd-
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">development-bounces at lists.berlios.de</A>] On Behalf Of Zach Welch
</I>&gt;<i> Sent: donderdag 17 december 2009 23:21
</I>&gt;<i> To: Carsten Breuer
</I>&gt;<i> Cc: <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A>
</I>&gt;<i> Subject: Re: [Openocd-development] malloc: Vote what to do
</I>&gt;<i> 
</I>&gt;<i> On Thu, 2009-12-17 at 21:44 +0100, Carsten Breuer wrote:
</I>&gt;<i> &gt; Hi all,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; after finding out, that malloc come back with NULL
</I>&gt;<i> &gt; even on linux (where people says here, it don't),
</I>&gt;<i> &gt; im starting to loose interest in the hole thing.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So what should we do?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I think now, that all this arguments not to check
</I>&gt;<i> &gt; malloc result is academical and some arguments are not
</I>&gt;<i> &gt; even true.
</I>&gt;<i> 
</I>&gt;<i> I believe the actual argument against NULL checks was in the context
</I>of
&gt;<i> NULL pointers passed into API functions.
</I>&gt;<i> 
</I>&gt;<i> All returns from malloc should be checked for NULL.  I will come to
</I>the
&gt;<i> house of anyone who says otherwise with a 2&quot;x4&quot; clue club and knock
</I>them
&gt;<i> over the head with it.  If that fails, I will go for their kneecaps.
</I>
AFAIK the argument is also that on Linux malloc will never return NULL.
When memory gets low, a (sort off) randomly selected process is killed
instead. Still, OpenOCD may run on other platforms like Windows where
malloc probably returns NULL when memory is about to be depleted. So
yes, checking for NULL is mandatory. IMHO there shouldn't be any voting
on that matter. Not checking return values (especially pointers) is just
sloppy Microsoft-ish programming and should be fixed.

Nico Coesel


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013676.html">[Openocd-development] malloc: Vote what to do
</A></li>
	<LI>Next message: <A HREF="013678.html">[Openocd-development] malloc: Vote what to do
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13703">[ date ]</a>
              <a href="thread.html#13703">[ thread ]</a>
              <a href="subject.html#13703">[ subject ]</a>
              <a href="author.html#13703">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

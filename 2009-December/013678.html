<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] malloc: Vote what to do
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20malloc%3A%20Vote%20what%20to%20do&In-Reply-To=%3CDBB2C6BE82594140BDF497CD10C4E08B%40desktop%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013703.html">
   <LINK REL="Next"  HREF="013683.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] malloc: Vote what to do</H1>
    <B>Liam Redmond (Rock Software)</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20malloc%3A%20Vote%20what%20to%20do&In-Reply-To=%3CDBB2C6BE82594140BDF497CD10C4E08B%40desktop%3E"
       TITLE="[Openocd-development] malloc: Vote what to do">LiamRedmond at rock-software.com
       </A><BR>
    <I>Fri Dec 18 00:13:08 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="013703.html">[Openocd-development] malloc: Vote what to do
</A></li>
        <LI>Next message: <A HREF="013683.html">[Openocd-development] malloc: Thanks for the answers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13678">[ date ]</a>
              <a href="thread.html#13678">[ thread ]</a>
              <a href="subject.html#13678">[ subject ]</a>
              <a href="author.html#13678">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

Not from a maintainer but from one following this thread with interest after 
I too noticed malloc calls as unchecked function call parameters, something 
that made me gasp a little being mainly an embedded programmer.

I would vote for...

&gt;<i> [] Check the result of malloc:
</I>
Actually, I would vote for check the result of everything unless you 
absolutely know what to expect (which is quite rare I think), it's just good 
defensive practice IMHO.

&gt;<i> [] Create a malloc replacement that calls malloc
</I>&gt;<i>   itself and kill the app if malloc return NULL.
</I>
Definitely not this one. Because sometimes if malloc returns NULL it's not a 
fatal thing. You might have several algorithms doing the same job, one that 
uses a lot of memory which is used in preference if that memory is available 
and another perhaps less efficient one to fall back on if you can't have 
that amount of memory. Killing the app is not a good idea I think. Again 
this is probably me thinking &quot;embedded&quot; rather than PC.

--

Liam.

----- Original Message ----- 
From: &quot;Carsten Breuer&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">CarstenBreuerOpenOcd at textwork.de</A>&gt;
To: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A>&gt;
Sent: Thursday, December 17, 2009 8:44 PM
Subject: [Openocd-development] malloc: Vote what to do


&gt;<i> Hi all,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> after finding out, that malloc come back with NULL
</I>&gt;<i> even on linux (where people says here, it don't),
</I>&gt;<i> im starting to loose interest in the hole thing.
</I>&gt;<i>
</I>&gt;<i> So what should we do?
</I>&gt;<i>
</I>&gt;<i> I think now, that all this arguments not to check
</I>&gt;<i> malloc result is academical and some arguments are not
</I>&gt;<i> even true.
</I>&gt;<i>
</I>&gt;<i> We have three solutions right now:
</I>&gt;<i>
</I>&gt;<i> [] Check the result of malloc:
</I>&gt;<i> [] Create a malloc replacement that calls malloc
</I>&gt;<i>   itself and kill the app if malloc return NULL.
</I>&gt;<i> [] Leave it as it is.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I want a maintainer decision on that.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Best Regards,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Carsten
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Openocd-development mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">https://lists.berlios.de/mailman/listinfo/openocd-development</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013703.html">[Openocd-development] malloc: Vote what to do
</A></li>
	<LI>Next message: <A HREF="013683.html">[Openocd-development] malloc: Thanks for the answers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13678">[ date ]</a>
              <a href="thread.html#13678">[ thread ]</a>
              <a href="subject.html#13678">[ subject ]</a>
              <a href="author.html#13678">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

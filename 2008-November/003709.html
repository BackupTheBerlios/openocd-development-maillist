<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Unable to flash TinCanTools Hammer using	trunk: Bug?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Unable%20to%20flash%20TinCanTools%20Hammer%20using%0A%09trunk%3A%20Bug%3F&In-Reply-To=%3C49278745.4020307%40nowthor.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003704.html">
   <LINK REL="Next"  HREF="003711.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Unable to flash TinCanTools Hammer using	trunk: Bug?</H1>
    <B>Carlos Antunes</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Unable%20to%20flash%20TinCanTools%20Hammer%20using%0A%09trunk%3A%20Bug%3F&In-Reply-To=%3C49278745.4020307%40nowthor.com%3E"
       TITLE="[Openocd-development] Unable to flash TinCanTools Hammer using	trunk: Bug?">cmantunes at nowthor.com
       </A><BR>
    <I>Sat Nov 22 05:15:01 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003704.html">[Openocd-development] [PATCH] Fixed TCL port typo
</A></li>
        <LI>Next message: <A HREF="003711.html">[Openocd-development] Unable to flash TinCanTools Hammer using	trunk: Bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3709">[ date ]</a>
              <a href="thread.html#3709">[ thread ]</a>
              <a href="subject.html#3709">[ subject ]</a>
              <a href="author.html#3709">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello!

I am trying to use OpenOCD trunk to flash the TinCanTools Hammer Board 
and I am getting an error. As I am a newbie, I don't know whether the 
screw up is of my making.

I start OpenOCD with the command:

openocd -f interface/flyswatter.cfg -f target/hammer.cfg -c &quot;init&quot; -c 
&quot;reset&quot;

After that, I enter &quot;halt&quot; followed by &quot;debug_level 3&quot; and try to flash 
the Hammer with:

flash write_bank 0 
/home/cmsa/devel/TCT-Hammer/sources/apex-1.5.6/apex.bin 0x0

This is what I get back:

Debug:   193 216589 command.c:91 script_command(): script_command - 
write_bank
Debug:   194 216589 command.c:108 script_command(): script_command - 
write_bank, argv[0]=ocd_flash_write_bank
Debug:   195 216589 command.c:108 script_command(): script_command - 
write_bank, argv[1]=0
Debug:   196 216589 command.c:108 script_command(): script_command - 
write_bank, argv[2]=/home/cmsa/devel/TCT-Hammer/sources/apex-1.5.6/apex.bin
Debug:   197 216589 command.c:108 script_command(): script_command - 
write_bank, argv[3]=0x0
Debug:   198 216589 configuration.c:88 find_file(): found 
/home/cmsa/devel/TCT-Hammer/sources/apex-1.5.6/apex.bin
Debug:   199 216590 embeddedice.c:401 embeddedice_write_reg(): 0: 0x00000004
Debug:   200 216590 embeddedice.c:401 embeddedice_write_reg(): 0: 0x00000005
Debug:   201 216602 target.c:989 target_write_buffer(): writing buffer 
of 56 byte at 0x40800000
Debug:   202 216602 embeddedice.c:401 embeddedice_write_reg(): 0: 0x00000004
Debug:   203 216602 embeddedice.c:401 embeddedice_write_reg(): 0: 0x00000005
Info:    204 216612 cfi.c:1208 cfi_intel_write_block(): Using target 
buffer at 0x40800038 and of size 0x8000
Debug:   205 216612 target.c:989 target_write_buffer(): writing buffer 
of 32768 byte at 0x40800038
Debug:   206 216612 armv4_5.c:527 armv4_5_run_algorithm_inner(): Running 
algorithm
Debug:   207 216612 armv4_5.c:594 armv4_5_run_algorithm_inner(): setting 
core_mode: 0x13
Debug:   208 216612 embeddedice.c:401 embeddedice_write_reg(): 12: 
0x00000000
Debug:   209 216612 embeddedice.c:401 embeddedice_write_reg(): 20: 
0x00000000
Debug:   210 216622 embeddedice.c:401 embeddedice_write_reg(): 8: 0x40808050
Debug:   211 216622 embeddedice.c:401 embeddedice_write_reg(): 9: 0x00000003
Debug:   212 216622 embeddedice.c:401 embeddedice_write_reg(): 11: 
0xffffffff
Debug:   213 216622 embeddedice.c:401 embeddedice_write_reg(): 13: 
0x000000f7
Debug:   214 216622 embeddedice.c:401 embeddedice_write_reg(): 12: 
0x00000100
Debug:   215 216623 breakpoints.c:93 breakpoint_add(): added hardware 
breakpoint at 0x40808050 of length 0x00000004
Debug:   216 216623 arm7_9_common.c:1539 arm7_9_resume(): -
Debug:   217 216623 embeddedice.c:401 embeddedice_write_reg(): 8: 0x40808050
Debug:   218 216623 embeddedice.c:401 embeddedice_write_reg(): 9: 0x00000003
Debug:   219 216623 embeddedice.c:401 embeddedice_write_reg(): 11: 
0xffffffff
Debug:   220 216623 embeddedice.c:401 embeddedice_write_reg(): 13: 
0x000000f7
Debug:   221 216623 embeddedice.c:401 embeddedice_write_reg(): 12: 
0x00000100
Debug:   222 216626 arm7_9_common.c:1357 arm7_9_restore_context(): -
Debug:   223 216705 arm7_9_common.c:1376 arm7_9_restore_context(): 
examining User mode
Debug:   224 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r0
Debug:   225 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r1
Debug:   226 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r2
Debug:   227 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r3
Debug:   228 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r4
Debug:   229 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r5
Debug:   230 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r6
Debug:   231 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r7
Debug:   232 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r8
Debug:   233 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r9
Debug:   234 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r10
Debug:   235 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r11
Debug:   236 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r12
Debug:   237 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: pc
Debug:   238 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: cpsr
Debug:   239 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 0 of mode User with value 0x40800038
Debug:   240 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 1 of mode User with value 0x00000000
Debug:   241 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 2 of mode User with value 0xe1c130b0
Debug:   242 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 3 of mode User with value 0xe1c140b0
Debug:   243 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 4 of mode User with value 0xe1d140b0
Debug:   244 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 5 of mode User with value 0xe0047005
Debug:   245 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 6 of mode User with value 0xe1570005
Debug:   246 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 7 of mode User with value 0x1afffffb
Debug:   247 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 8 of mode User with value 0xe1140006
Debug:   248 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 9 of mode User with value 0x1a000003
Debug:   249 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 10 of mode User with value 0xe2522001
Debug:   250 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 11 of mode User with value 0x0a000001
Debug:   251 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 12 of mode User with value 0xe2811002
Debug:   252 216705 arm7_9_common.c:1376 arm7_9_restore_context(): 
examining FIQ mode
Debug:   253 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: pc
Debug:   254 216705 arm7_9_common.c:1376 arm7_9_restore_context(): 
examining IRQ mode
Debug:   255 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: pc
Debug:   256 216705 arm7_9_common.c:1376 arm7_9_restore_context(): 
examining Supervisor mode
Debug:   257 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: r13_svc
Debug:   258 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: lr_svc
Debug:   259 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: pc
Debug:   260 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 13 of mode Supervisor with value 0xeafffff2
Debug:   261 216705 arm7_9_common.c:1438 arm7_9_restore_context(): 
writing register 14 of mode Supervisor with value 0xeafffffe
Debug:   262 216705 arm7_9_common.c:1376 arm7_9_restore_context(): 
examining Abort mode
Debug:   263 216705 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: pc
Debug:   264 216706 arm7_9_common.c:1376 arm7_9_restore_context(): 
examining Undefined mode
Debug:   265 216706 arm7_9_common.c:1390 arm7_9_restore_context(): 
examining dirty reg: pc
Debug:   266 216706 arm7_9_common.c:1471 arm7_9_restore_context(): 
writing cpsr with value 0x600000d3
Debug:   267 216706 arm9tdmi.c:587 arm9tdmi_write_xpsr(): xpsr: 
600000d3, spsr: 0
Debug:   268 216706 arm7_9_common.c:1478 arm7_9_restore_context(): 
writing PC with value 0x40808038
Debug:   269 216706 embeddedice.c:401 embeddedice_write_reg(): 0: 0x00000004
Debug:   270 216718 target.c:717 target_call_event_callbacks(): target 
event 23 (debug-resumed)
Debug:   271 216718 target.c:3125 target_handle_event(): event: 23 
debug-resumed - no action
Debug:   272 216718 arm7_9_common.c:1686 arm7_9_resume(): target resumed
Debug:   273 216728 embeddedice.c:401 embeddedice_write_reg(): 0: 0x00000005
Debug:   274 216728 embeddedice.c:401 embeddedice_write_reg(): 0: 0x00000005
Debug:   275 216738 arm7_9_common.c:1164 arm7_9_debug_entry(): target 
entered debug from ARM state
Debug:   276 216748 arm7_9_common.c:1196 arm7_9_debug_entry(): target 
entered debug state in Supervisor mode
Debug:   277 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r0: 
0x40800038
Debug:   278 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r1: 
0x00000000
Debug:   279 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r2: 
0xe1c130b0
Debug:   280 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r3: 
0xe1c140b0
Debug:   281 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r4: 
0xe1d140b0
Debug:   282 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r5: 
0xe0047005
Debug:   283 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r6: 
0xe1570005
Debug:   284 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r7: 
0x1afffffb
Debug:   285 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r8: 
0xe1140006
Debug:   286 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r9: 
0x1a000003
Debug:   287 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r10: 
0xe2522001
Debug:   288 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r11: 
0x0a000001
Debug:   289 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r12: 
0xe2811002
Debug:   290 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r13: 
0xeafffff2
Debug:   291 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r14: 
0xeafffffe
Debug:   292 216748 arm7_9_common.c:1227 arm7_9_debug_entry(): r15: 
0x40808050
Debug:   293 216748 arm7_9_common.c:1233 arm7_9_debug_entry(): entered 
debug state at PC 0x40808050
Debug:   294 216761 arm920t.c:452 arm920t_post_debug_entry(): 
cp15_control_reg: 00000078
Debug:   295 216881 arm920t.c:474 arm920t_post_debug_entry(): D FSR: 
0x000000ff, D FAR: 0xfffbfffb, I FSR: 0x000000ff, I FAR: 0xffffffff
Debug:   296 216881 target.c:717 target_call_event_callbacks(): target 
event 22 (debug-halted)
Debug:   297 216881 target.c:3125 target_handle_event(): event: 22 
debug-halted - no action
Debug:   298 216881 target.c:1787 target_wait_state(): waiting for 
target debug-running...
Error:   300 217221 target.c:1794 target_wait_state(): timed out while 
waiting for target debug-running
Debug:   301 217221 embeddedice.c:401 embeddedice_write_reg(): 12: 
0x00000000
Debug:   302 217221 embeddedice.c:401 embeddedice_write_reg(): 12: 
0x00000000
Debug:   303 217222 embeddedice.c:401 embeddedice_write_reg(): 20: 
0x00000000
Error:   304 217225 flash.c:111 flash_driver_write(): error writing to 
flash at address 0x00000000 at offset 0x00000000 (-4)
Debug:   305 217225 command.c:416 run_command(): Command failed with 
error code -4
User:    306 217225 command.c:616 openocd_jim_vfprintf(): Runtime error, 
file &quot;?&quot;, line 1:
User:    307 217225 command.c:616 openocd_jim_vfprintf():    
User:    308 217226 command.c:616 openocd_jim_vfprintf(): In procedure 
'flash' called at file &quot;command.c&quot;, line 445
User:    309 217226 command.c:616 openocd_jim_vfprintf(): In procedure 
'unknown' called at file &quot;?&quot;, line 1

Any ideas?

Thanks!

Carlos




-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3253 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20081121/ca621b05/attachment.bin">https://lists.berlios.de/pipermail/openocd-development/attachments/20081121/ca621b05/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003704.html">[Openocd-development] [PATCH] Fixed TCL port typo
</A></li>
	<LI>Next message: <A HREF="003711.html">[Openocd-development] Unable to flash TinCanTools Hammer using	trunk: Bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3709">[ date ]</a>
              <a href="thread.html#3709">[ thread ]</a>
              <a href="subject.html#3709">[ subject ]</a>
              <a href="author.html#3709">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] TMS470 and problem with endianness
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20TMS470%20and%20problem%20with%20endianness&In-Reply-To=%3C4e4acf3a0811131206r2219b84fp86c50dca87a5c752%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003630.html">
   <LINK REL="Next"  HREF="003634.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] TMS470 and problem with endianness</H1>
    <B>quba54 Gazeta.pl</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20TMS470%20and%20problem%20with%20endianness&In-Reply-To=%3C4e4acf3a0811131206r2219b84fp86c50dca87a5c752%40mail.gmail.com%3E"
       TITLE="[Openocd-development] TMS470 and problem with endianness">quba54 at gazeta.pl
       </A><BR>
    <I>Thu Nov 13 21:06:35 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003630.html">[Openocd-development] TMS470 and problem with endianness
</A></li>
        <LI>Next message: <A HREF="003634.html">[Openocd-development] TMS470 and problem with endianness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3633">[ date ]</a>
              <a href="thread.html#3633">[ thread ]</a>
              <a href="subject.html#3633">[ subject ]</a>
              <a href="author.html#3633">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I make changes in functions:

- arm7_9_set_breakpoint(),arm7_9_unset_breakpoint() &#8211; I think it's clear to
understand
- armv4_5_get_gdb_reg_list()  - registers in target-&gt;reg_cache variable are
stored in host endianes (little endian) so if target is configured to work
in big endian GDB expects data returned formatted in big endian. In original
version register values was always returned in little endian. I declared
additional variable tmp_regs[26] holding values converted to target
endiannes and returning it to upper layer (gdb_server.c). I also add
function armv4_5_get_real_reg() to transform tmp_regs[i] to real register
from target-&gt;reg_cache variable. Maybe it can be done in more clear way but
I'm beginner in openocd sources and I needed fast solution to debug my big
endian target.



2008/11/13 &#216;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">oyvind.harboe at zylin.com</A>&gt;

&gt;<i> On Thu, Nov 13, 2008 at 9:49 AM, quba54 Gazeta.pl &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">quba54 at gazeta.pl</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Recently I also had to debug big endian arm7 target (mac7111) and I make
</I>&gt;<i> &gt; some modifications in openocd source code. See attachment.
</I>&gt;<i>
</I>&gt;<i> Please explain a bit more what you have done and why.
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> &#216;yvind Harboe
</I>&gt;<i> <A HREF="http://www.zylin.com/zy1000.html">http://www.zylin.com/zy1000.html</A>
</I>&gt;<i> ARM7 ARM9 XScale Cortex
</I>&gt;<i> JTAG debugger and flash programmer
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20081113/db5d8f08/attachment.html">https://lists.berlios.de/pipermail/openocd-development/attachments/20081113/db5d8f08/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003630.html">[Openocd-development] TMS470 and problem with endianness
</A></li>
	<LI>Next message: <A HREF="003634.html">[Openocd-development] TMS470 and problem with endianness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3633">[ date ]</a>
              <a href="thread.html#3633">[ thread ]</a>
              <a href="subject.html#3633">[ subject ]</a>
              <a href="author.html#3633">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

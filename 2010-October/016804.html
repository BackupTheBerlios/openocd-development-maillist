<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Error running openocd on hacked stm32 primer2 / SWD Progress Status
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-October/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Error%20running%20openocd%20on%20hacked%20stm32%0A%20primer2%20/%20SWD%20Progress%20Status&In-Reply-To=%3CAANLkTikbLM1RKu9bFKFPF476ZOFGDUijfyWQY4aoXAKc%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016803.html">
   <LINK REL="Next"  HREF="016805.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Error running openocd on hacked stm32 primer2 / SWD Progress Status</H1>
    <B>Tomek CEDRO</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Error%20running%20openocd%20on%20hacked%20stm32%0A%20primer2%20/%20SWD%20Progress%20Status&In-Reply-To=%3CAANLkTikbLM1RKu9bFKFPF476ZOFGDUijfyWQY4aoXAKc%40mail.gmail.com%3E"
       TITLE="[Openocd-development] Error running openocd on hacked stm32 primer2 / SWD Progress Status">tomek.cedro at gmail.com
       </A><BR>
    <I>Wed Oct 20 22:40:16 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="016803.html">[Openocd-development] Error running openocd on hacked stm32 primer2
</A></li>
        <LI>Next message: <A HREF="016805.html">[Openocd-development] OpenOCD on colibri PXA 320 With Amontec	tiny JTAG issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16804">[ date ]</a>
              <a href="thread.html#16804">[ thread ]</a>
              <a href="subject.html#16804">[ subject ]</a>
              <a href="author.html#16804">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Nived, Hello OCD'ers :-)

On Wed, Oct 20, 2010 at 9:39 PM, Nived &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">nivedks at gmail.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i> We have hacked (connected jtag pins on the processor manually to create a
</I>&gt;<i> jtag port on the board) an stm32 primer2 &#160;that uses an stm32f103vet6
</I>&gt;<i> processor. When we try to start the server, we are getting the following the
</I>&gt;<i> error.
</I>
Recently I have managed to do the same with success [1], but using
UrJTAG (as for now). I am working on SWD for OpenOCD and UrJTAG, so
need to have both transports JTAG/SWD on Primer1 and Primer2 (later I
want to make RLink working on it in default configuration). As for now
I am using FFT2232H based device named KT-LINK because it allows more
freedom in testing than RLink. I have selected Primer1/2 because its
cheap and simple Cortex device. To make RLink work also I will have to
reverse the protocol [2] first - help is wanted! I have decided to use
UrJTAG first because it is much more simple and allows only register
access, so this is better set of variables to start. When I have this
working I will port this part to OpenOCD and move on with Debug
functionality. I plan to make it alive next month and so we can test
it by December.

Please note that on Primer2 some JTAG pins are connected to audio
codec and they are set as output, so you wont get them working as JTAG
by default - try to cut them off and hard reset the device before
program starts, then try the detect/idcode sequence. TRST will not
reset/zero the device, I had to use nSRST signal to hold it reset
after power on and then read out the idcode. I will update the Primer2
connection diagram [3] today to make your task easier. Please take a
look at project website for more updates :-)

[1] <A HREF="http://stm32primer2swd.sf.net">http://stm32primer2swd.sf.net</A>
[2] <A HREF="http://files.tomek.cedro.info/electronics/arm/cortex/stm32/rlinkre/">http://files.tomek.cedro.info/electronics/arm/cortex/stm32/rlinkre/</A>
[3] <A HREF="http://files.tomek.cedro.info/electronics/arm/cortex/stm32/stm32primer2-swj-rlink-pinout/stm32primer2-swj-rlink-pinout-cederom.pdf">http://files.tomek.cedro.info/electronics/arm/cortex/stm32/stm32primer2-swj-rlink-pinout/stm32primer2-swj-rlink-pinout-cederom.pdf</A>

Best regards,
Tomek

-- 
CeDeROM, SQ7MHZ, <A HREF="http://www.tomek.cedro.info">http://www.tomek.cedro.info</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016803.html">[Openocd-development] Error running openocd on hacked stm32 primer2
</A></li>
	<LI>Next message: <A HREF="016805.html">[Openocd-development] OpenOCD on colibri PXA 320 With Amontec	tiny JTAG issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16804">[ date ]</a>
              <a href="thread.html#16804">[ thread ]</a>
              <a href="subject.html#16804">[ subject ]</a>
              <a href="author.html#16804">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Problem getting reliable &quot;reset init&quot; on	LPC1766 target.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-October/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Problem%20getting%20reliable%20%22reset%20init%22%20on%0A%09LPC1766%20target.&In-Reply-To=%3CF7C0AA5DD1508F4789E10B6CC9BB75DB03E0CE6F%40nzc-ap-xch-02.ap.trimblecorp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016727.html">
   <LINK REL="Next"  HREF="016729.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Problem getting reliable &quot;reset init&quot; on	LPC1766 target.</H1>
    <B>Bernard Mentink</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Problem%20getting%20reliable%20%22reset%20init%22%20on%0A%09LPC1766%20target.&In-Reply-To=%3CF7C0AA5DD1508F4789E10B6CC9BB75DB03E0CE6F%40nzc-ap-xch-02.ap.trimblecorp.net%3E"
       TITLE="[Openocd-development] Problem getting reliable &quot;reset init&quot; on	LPC1766 target.">Bernard.Mentink at trimble.co.nz
       </A><BR>
    <I>Tue Oct 12 23:54:30 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="016727.html">[Openocd-development] Problem getting reliable &quot;reset init&quot; on LPC1766 target.
</A></li>
        <LI>Next message: <A HREF="016729.html">[Openocd-development] Problem getting reliable &quot;reset init&quot; on LPC1766 target.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16728">[ date ]</a>
              <a href="thread.html#16728">[ thread ]</a>
              <a href="subject.html#16728">[ subject ]</a>
              <a href="author.html#16728">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Ok I have tried this. I get a fast image download, but I have slow debugging as the clock seems to get reset back to 10khz again ..
(The JTAG clock gets limited to 6Mhz by the Turlelizer2 hardware ..)

This is the dump from gdb output ..

------------------------------------------
target remote localhost:3333
0x00000000 in g_pfnVectors ()
mon reset init
10 kHz
JTAG tap: lpc1766.cpu tap/device found: 0x4ba00477 (mfg: 0x23b, part: 0xba00, ver: 0x4)
target state: halted
target halted due to debug-request, current mode: Thread 
xPSR: 0x01000000 pc: 0x1fff0080 msp: 0x10001ffc
6000 kHz
load
Loading section .text, size 0x8383 lma 0x0
Loading section .data, size 0x211 lma 0x8383
Start address 0xcc, load size 34196
Transfer rate: 7 KB/sec, 8549 bytes/write.
mon reset halt
10 kHz
JTAG tap: lpc1766.cpu tap/device found: 0x4ba00477 (mfg: 0x23b, part: 0xba00, ver: 0x4)
target state: halted
target halted due to debug-request, current mode: Thread 
xPSR: 0x01000000 pc: 0x1fff0080 msp: 0x10001ffc
thb main
Hardware assisted breakpoint 1 at 0x29ae: file main.c, line 79.
---------------------------------------------

Shouldn't the clock stay at the high rate?

Thanks,
Bernie
 


------------------------------------------------------------------------------------------
Hiding the Truth with &quot;Political Correctness&quot; is the same as Lying ... BRM

-----Original Message-----
From: &#216;yvind Harboe [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">oyvind.harboe at zylin.com</A>] 
Sent: Wednesday, 13 October 2010 10:41 a.m.
To: Bernard Mentink
Cc: J&#246;rg Fischer; <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">openocd-development at lists.berlios.de</A>
Subject: Re: [Openocd-development] Problem getting reliable &quot;reset init&quot; on LPC1766 target.

&gt;<i> Is there any way to download the imake at 500khz, then switch to 10khz 
</I>&gt;<i>for the debugging .... With the currect reset sequence I am using?
</I>
Look at board/mcb1700.cfg

Debugging is probably stable at higher clock rates once the PLL is running.

--
&#216;yvind Harboe
US toll free 1-866-980-3434 / International +47 51 63 25 00 <A HREF="http://www.zylin.com/zy1000.html">http://www.zylin.com/zy1000.html</A>
ARM7 ARM9 ARM11 XScale Cortex
JTAG debugger and flash programmer

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016727.html">[Openocd-development] Problem getting reliable &quot;reset init&quot; on LPC1766 target.
</A></li>
	<LI>Next message: <A HREF="016729.html">[Openocd-development] Problem getting reliable &quot;reset init&quot; on LPC1766 target.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16728">[ date ]</a>
              <a href="thread.html#16728">[ thread ]</a>
              <a href="subject.html#16728">[ subject ]</a>
              <a href="author.html#16728">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

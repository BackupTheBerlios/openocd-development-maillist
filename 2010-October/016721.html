<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Problem getting reliable &quot;reset init&quot; on	LPC1766 target.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2010-October/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Problem%20getting%20reliable%20%22reset%20init%22%20on%0A%09LPC1766%20target.&In-Reply-To=%3CF7C0AA5DD1508F4789E10B6CC9BB75DB03DBDBE4%40nzc-ap-xch-02.ap.trimblecorp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016719.html">
   <LINK REL="Next"  HREF="016723.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Problem getting reliable &quot;reset init&quot; on	LPC1766 target.</H1>
    <B>Bernard Mentink</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Problem%20getting%20reliable%20%22reset%20init%22%20on%0A%09LPC1766%20target.&In-Reply-To=%3CF7C0AA5DD1508F4789E10B6CC9BB75DB03DBDBE4%40nzc-ap-xch-02.ap.trimblecorp.net%3E"
       TITLE="[Openocd-development] Problem getting reliable &quot;reset init&quot; on	LPC1766 target.">Bernard.Mentink at trimble.co.nz
       </A><BR>
    <I>Tue Oct 12 22:36:05 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="016719.html">[Openocd-development] Problem getting reliable &quot;reset init&quot; on LPC1766 target.
</A></li>
        <LI>Next message: <A HREF="016723.html">[Openocd-development] Problem getting reliable &quot;reset init&quot; on LPC1766 target.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16721">[ date ]</a>
              <a href="thread.html#16721">[ thread ]</a>
              <a href="subject.html#16721">[ subject ]</a>
              <a href="author.html#16721">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jorg,

Thanks for the reply.

I tried what you suggested, and that has helped .. However, I still have some un-reliability related to the jtag speed setting.

If I set to 500khz, I get to the reset vector ok, but do not get to the breakpoint at main, and the debugger goes off to the weeds.
If I set to 50khz, I get to main ok, but reading variables etc at a breakpoint generates errors ..
If I set to 20khz, I get perfect debugging no errors ..

So, do I have incorrect clock settings, or maybe my hardware is flakey at high JTAG clock rates ..

Any suggestions? What speed are you running at? .. And could you attach your .cfg file .. Thanks.

Cheers,
Bernie 


------------------------------------------------------------------------------------------
Hiding the Truth with &quot;Political Correctness&quot; is the same as Lying ... BRM

-----Original Message-----
From: <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">openocd-development-bounces at lists.berlios.de</A> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">openocd-development-bounces at lists.berlios.de</A>] On Behalf Of J&#246;rg Fischer
Sent: Wednesday, 13 October 2010 9:13 a.m.
To: <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">openocd-development at lists.berlios.de</A>
Subject: Re: [Openocd-development] Problem getting reliable &quot;reset init&quot; on LPC1766 target.

Am 11.10.2010 22:04, schrieb Bernard Mentink:

&gt;&gt;<i> # LPC2000 &amp; LPC1700 -&gt; SRST causes TRST reset_config srst_pulls_trst
</I>
That does not work for me anymore since the &quot;Cortex-M3 reset handling&quot;
patch is in. Have you tried
&quot;reset_config srst_only&quot;?

&gt;&gt;<i> target remote localhost:3333
</I>
Here must be a &quot;mon reset init&quot;. Otherwise, you'll have the &quot;wrong&quot; CCLK on &quot;load&quot;.

&gt;&gt;<i> load
</I>&gt;&gt;<i> mon reset init
</I>
And you want to change this to a
&quot;mon reset halt&quot; or your ADCs won't work. The bootloader initializes the calibration in the ADC.

&gt;&gt;<i> thb main
</I>
-- J. Fischer

_______________________________________________
Openocd-development mailing list
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">https://lists.berlios.de/mailman/listinfo/openocd-development</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016719.html">[Openocd-development] Problem getting reliable &quot;reset init&quot; on LPC1766 target.
</A></li>
	<LI>Next message: <A HREF="016723.html">[Openocd-development] Problem getting reliable &quot;reset init&quot; on LPC1766 target.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16721">[ date ]</a>
              <a href="thread.html#16721">[ thread ]</a>
              <a href="subject.html#16721">[ subject ]</a>
              <a href="author.html#16721">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

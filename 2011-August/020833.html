<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Remove &quot;qP&quot; from rtos code?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-August/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Remove%20%22qP%22%20from%20rtos%20code%3F&In-Reply-To=%3CCACYR8yOkdxC%2BAug%2BUYp%2Bc1cZNBHnG6HtXHk8oKbrfHy9vWGtJQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020821.html">
   <LINK REL="Next"  HREF="020817.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Remove &quot;qP&quot; from rtos code?</H1>
    <B>Jie Zhang</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Remove%20%22qP%22%20from%20rtos%20code%3F&In-Reply-To=%3CCACYR8yOkdxC%2BAug%2BUYp%2Bc1cZNBHnG6HtXHk8oKbrfHy9vWGtJQ%40mail.gmail.com%3E"
       TITLE="[Openocd-development] Remove &quot;qP&quot; from rtos code?">jzhang918 at gmail.com
       </A><BR>
    <I>Sat Aug 27 17:01:59 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="020821.html">[Openocd-development] Remove &quot;qP&quot; from rtos code?
</A></li>
        <LI>Next message: <A HREF="020817.html">[Openocd-development] threadid_t
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20833">[ date ]</a>
              <a href="thread.html#20833">[ thread ]</a>
              <a href="subject.html#20833">[ subject ]</a>
              <a href="author.html#20833">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Evan,

If qThreadExtraInfo is not implemented, qP will be used. But since
qThreadExtraInfo has now been implemented, qP should not be needed any
more. GDB added qThreadExtraInfo more than 10 years ago. All GDB
releases since 5.0 will not send out qP packet if the stub supports
qThreadExtraInfo. So I think it's safe for OpenOCD to remove qP
support and only keep qThreadExtraInfo. This will make code clean and
reduce maintenance effort.

Regards,
Jie

On Thu, Aug 25, 2011 at 8:50 PM, Evan Hunter &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">evan at ozhiker.com</A>&gt; wrote:
&gt;<i> Backward compatibility is the reason -
</I>&gt;<i> When I was testing with GDB+eclipse I found that OpenOCD received &quot;qP&quot;
</I>&gt;<i> packets sometimes, and I think I implemented it first, before reading that
</I>&gt;<i> same quotation you mentioned. Then when I implemented qThreadExtraInfo, I
</I>&gt;<i> figured it was nicer to keep &quot;qP&quot; compatibility too.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Evan
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Quoting Jie Zhang &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">jzhang918 at gmail.com</A>&gt;:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Evan,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> GDB manual says about &quot;qP&quot;:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160;Don't use this packet; use the `qThreadExtraInfo' query instead (see
</I>&gt;&gt;<i> below).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Since &quot;qThreadExtraInfo&quot; is already supported in rtos.c, why &quot;qP&quot; is
</I>&gt;&gt;<i> still needed?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i> Jie
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Openocd-development mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">Openocd-development at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">https://lists.berlios.de/mailman/listinfo/openocd-development</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020821.html">[Openocd-development] Remove &quot;qP&quot; from rtos code?
</A></li>
	<LI>Next message: <A HREF="020817.html">[Openocd-development] threadid_t
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20833">[ date ]</a>
              <a href="thread.html#20833">[ thread ]</a>
              <a href="subject.html#20833">[ subject ]</a>
              <a href="author.html#20833">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

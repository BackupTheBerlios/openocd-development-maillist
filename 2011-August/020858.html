<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] Coding style
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2011-August/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Coding%20style&In-Reply-To=%3CCAMPiNCJNqup8oVSRhYW7CO4%3DwvuR5D0WUkxbQDaxo9zUsvCwXA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020856.html">
   <LINK REL="Next"  HREF="020859.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] Coding style</H1>
    <B>Eric Wetzel</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20Coding%20style&In-Reply-To=%3CCAMPiNCJNqup8oVSRhYW7CO4%3DwvuR5D0WUkxbQDaxo9zUsvCwXA%40mail.gmail.com%3E"
       TITLE="[Openocd-development] Coding style">thewetzel at gmail.com
       </A><BR>
    <I>Mon Aug 29 18:28:06 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="020856.html">[Openocd-development] Coding style
</A></li>
        <LI>Next message: <A HREF="020859.html">[Openocd-development] Coding style
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20858">[ date ]</a>
              <a href="thread.html#20858">[ thread ]</a>
              <a href="subject.html#20858">[ subject ]</a>
              <a href="author.html#20858">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Aug 29, 2011 at 9:11 AM, Jie Zhang &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">jzhang918 at gmail.com</A>&gt; wrote:
&gt;<i> On Mon, Aug 29, 2011 at 7:35 AM, &#216;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-development">oyvind.harboe at zylin.com</A>&gt; wrote:
</I>&gt;&gt;<i> I don't mind picking the kernel style, if nothing else because we then can get
</I>&gt;&gt;<i> scripts to check for the style.
</I>&gt;&gt;<i>
</I>&gt;<i> It seems people like Linux kernel coding style. It's widely used and
</I>&gt;<i> well documented. So I think it will be good.
</I>&gt;<i>
</I>&gt;<i> How about make a plan to do the coding style switch? We cannot do now
</I>&gt;<i> immediately since it will break all patches in people's local trees.
</I>&gt;<i> We need to set a roughly date so people can prepare for it. The end of
</I>&gt;<i> this year or the beginning of the next year will be a good point time
</I>&gt;<i> for me. I think I will have already pushed out all my patches at that
</I>&gt;<i> time. And at that time, people will be in Christmas and New year
</I>&gt;<i> holidays. There might be less development activities. So the impact
</I>&gt;<i> will be likely less than other times of a year.
</I>&gt;<i>
</I>&gt;<i> What's your thought?
</I>&gt;<i>
</I>I am interested in this conversation, and I'm surprised it wasn't
squashed right away as inciting a holy war. So far, everybody's been
very civil, though I suspect that's because there hasn't been a great
deal of dissent.

I have no strong feelings as to which style should be used, but a
quick blanket application of indent's default styles of -gnu, -kr, and
-linux shows this:
indent-gnu: 340 files changed, 117612 insertions(+), 108216 deletions(-)
indent-kr: 341 files changed, 103813 insertions(+), 105417 deletions(-)
indent-linux: 341 files changed, 42192 insertions(+), 43373 deletions(-)

&gt;<i>From that cursory glance, we are most like the Linux style.
</I>
For the record, here are the relevant standards:
GNU: <A HREF="http://www.gnu.org/prep/standards/standards.html#Writing-C">http://www.gnu.org/prep/standards/standards.html#Writing-C</A>
Kernighan &amp; Ritchie:
<A HREF="http://en.wikipedia.org/wiki/Indent_style#K.26R_style">http://en.wikipedia.org/wiki/Indent_style#K.26R_style</A> (sorry, didn't
try very hard on this one)
Linux: <A HREF="http://www.kernel.org/doc/Documentation/CodingStyle">http://www.kernel.org/doc/Documentation/CodingStyle</A>

Each run issued some warnings:
Warning:old style assignment ambiguity in &quot;=&amp;&quot;.  Assuming &quot;= &amp;&quot;
Warning:old style assignment ambiguity in &quot;=*&quot;.  Assuming &quot;= *&quot;
(Which I assume are because if you accidentally switch those
operators, it means something different)

And a cluster of errors/warnings about the comment style in
src/xsvf/xsvf.c, using #if 0 to &quot;keep uncrustify from adding asterisks
at the beginning of every line.&quot;

I did not use the -T option to add OpenOCD's custom types to Indent's
syntax recognition, so custom-type casts aren't considered such and
where we declare pointers to custom types, Indent maybe thinks we're
multiplying, so the * isn't snuggled to the variable name.
+static int jim_version_command(Jim_Interp * interp, int argc,
+                              Jim_Obj * const *argv)

Also, Linus doesn't like typedefs (Chapter 5 of the Linux style), and
Indent handles &quot;struct structname *x&quot; correctly with being told about
custom names.

Best regards,
~Eric

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020856.html">[Openocd-development] Coding style
</A></li>
	<LI>Next message: <A HREF="020859.html">[Openocd-development] Coding style
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20858">[ date ]</a>
              <a href="thread.html#20858">[ thread ]</a>
              <a href="subject.html#20858">[ subject ]</a>
              <a href="author.html#20858">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

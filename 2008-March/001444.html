<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] patch: alloc_printf tweak
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20patch%3A%20alloc_printf%20tweak&In-Reply-To=%3C47CFE510.9080509%40asix.cz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001442.html">
   <LINK REL="Next"  HREF="001446.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] patch: alloc_printf tweak</H1>
    <B>Pavel Chromy</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20patch%3A%20alloc_printf%20tweak&In-Reply-To=%3C47CFE510.9080509%40asix.cz%3E"
       TITLE="[Openocd-development] patch: alloc_printf tweak">chromy at asix.cz
       </A><BR>
    <I>Thu Mar  6 13:35:28 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001442.html">[Openocd-development] Cleaning up gdb_server a bit
</A></li>
        <LI>Next message: <A HREF="001446.html">[Openocd-development] deleted unused confusing code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1444">[ date ]</a>
              <a href="thread.html#1444">[ thread ]</a>
              <a href="subject.html#1444">[ subject ]</a>
              <a href="author.html#1444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello list,

up to this moment alloc_prinf was trying to fit the string into the buffer as small as 2 bytes.
This was not very efficient when speaking about speed but served its purpose to find possible bugs,
which it did - the va_list/va_copy issue.
I believe there are no more issues, so the attached patch changes starting buffer size to 128 bytes,
into which most of the messages fit directly without reallocation.
Along with this comes some indentation (spaces-&gt;tabs).

Please commit.

Regards,
  Pavel

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: alloc_printf_tweak.pach
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20080306/84502a1c/attachment.ksh">https://lists.berlios.de/pipermail/openocd-development/attachments/20080306/84502a1c/attachment.ksh</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001442.html">[Openocd-development] Cleaning up gdb_server a bit
</A></li>
	<LI>Next message: <A HREF="001446.html">[Openocd-development] deleted unused confusing code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1444">[ date ]</a>
              <a href="thread.html#1444">[ thread ]</a>
              <a href="subject.html#1444">[ subject ]</a>
              <a href="author.html#1444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

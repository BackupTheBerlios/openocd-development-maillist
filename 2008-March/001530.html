<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] patch: telnet log callback &amp; prompt
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20patch%3A%20telnet%20log%20callback%20%26%20prompt&In-Reply-To=%3C47D58C3A.4060801%40asix.cz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001549.html">
   <LINK REL="Next"  HREF="001532.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] patch: telnet log callback &amp; prompt</H1>
    <B>Pavel Chromy</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20patch%3A%20telnet%20log%20callback%20%26%20prompt&In-Reply-To=%3C47D58C3A.4060801%40asix.cz%3E"
       TITLE="[Openocd-development] patch: telnet log callback &amp; prompt">chromy at asix.cz
       </A><BR>
    <I>Mon Mar 10 20:30:02 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001549.html">[Openocd-development] [PATCH] remove warning in jtag.c
</A></li>
        <LI>Next message: <A HREF="001532.html">[Openocd-development] patch: telnet log callback &amp; prompt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1530">[ date ]</a>
              <a href="thread.html#1530">[ thread ]</a>
              <a href="subject.html#1530">[ subject ]</a>
              <a href="author.html#1530">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello list,

more improvements to telnet log callback:
there was a duplicated prompt if an asynchronous log message was printed
during command processing, once by the callback function and another time when command was done.

Now log callback function erases whole command line (even the partly typed command),
outputs the message and then restores the command line back to its state.

To make this work correctly a slight reordering in telnet_input had to be done,
so that the command line is empty before call to command_run_line.

Hope this solution is close to a perfect one.

Best regards,
  Pavel
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: telnet_log_prompt.patch
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openocd-development/attachments/20080310/33d61470/attachment.ksh">https://lists.berlios.de/pipermail/openocd-development/attachments/20080310/33d61470/attachment.ksh</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001549.html">[Openocd-development] [PATCH] remove warning in jtag.c
</A></li>
	<LI>Next message: <A HREF="001532.html">[Openocd-development] patch: telnet log callback &amp; prompt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1530">[ date ]</a>
              <a href="thread.html#1530">[ thread ]</a>
              <a href="subject.html#1530">[ subject ]</a>
              <a href="author.html#1530">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>

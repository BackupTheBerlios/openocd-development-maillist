<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-development] FW: PATCH - Jim/TCL patch - far more	complete.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-development/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20FW%3A%20PATCH%20-%20Jim/TCL%20patch%20-%20far%20more%0A%09complete.&In-Reply-To=%3CE1KFqOM-000CSW-Gb%40smtp3.global.net.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002401.html">
   <LINK REL="Next"  HREF="002404.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-development] FW: PATCH - Jim/TCL patch - far more	complete.</H1>
    <B>Spen</B> 
    <A HREF="mailto:openocd-development%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-development%5D%20FW%3A%20PATCH%20-%20Jim/TCL%20patch%20-%20far%20more%0A%09complete.&In-Reply-To=%3CE1KFqOM-000CSW-Gb%40smtp3.global.net.uk%3E"
       TITLE="[Openocd-development] FW: PATCH - Jim/TCL patch - far more	complete.">spen at spen-soft.co.uk
       </A><BR>
    <I>Mon Jul  7 15:04:37 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002401.html">[Openocd-development] FW: PATCH - Jim/TCL patch - far more	complete.
</A></li>
        <LI>Next message: <A HREF="002404.html">[Openocd-development] FW: PATCH - Jim/TCL patch - far more	complete.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2403">[ date ]</a>
              <a href="thread.html#2403">[ thread ]</a>
              <a href="subject.html#2403">[ subject ]</a>
              <a href="author.html#2403">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt;&gt;This allows for implementing the target event scripts in Tcl.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I have looked into this, and as far as my debugging goes it 
</I>&gt;<i> makes no 
</I>&gt;<i> &gt; difference command_run_line gets called whatever interface is used.
</I>&gt;<i> 
</I>&gt;<i> So from this I understand that you do not mind support for 
</I>&gt;<i> target event proc's in Tcl.
</I>&gt;<i> 
</I>
Not at all.

&gt;<i> &gt; A few other things i have noticed:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 1. The user output is a bit messed up aswell.
</I>&gt;<i> &gt; Try running a reset script calling flash info 0 to see what i mean.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2. I have also changed the command_run_line behaviour it 
</I>&gt;<i> was searching 
</I>&gt;<i> &gt; each openocd command twice.
</I>&gt;<i> 
</I>&gt;<i> Changes to command.* look fine to me.
</I>&gt;<i> 
</I>
I have committed.

&gt;<i> &gt;
</I>&gt;<i> &gt; Find attached a patch for review that makes a few changes 
</I>&gt;<i> with no loss 
</I>&gt;<i> &gt; of tcl capability - as far as my tests go.
</I>&gt;<i> 
</I>&gt;<i> You pulled out the capability to write Tcl proc's for target events.
</I>&gt;<i> 
</I>&gt;<i> Was that intentional?
</I>&gt;<i> 
</I>
I do not see how, tcl is still working in a reset script for me.
all tcl does is create a proc that calls &quot;openocd script reset.script&quot; for
example.
everything leads to command_run_line in the end, so if openocd does not
handle it tcl will.

tested with a simple func in the reset script, eg.
proc tcl_test {} {echo &quot;Production test not implemented&quot;}

i have noticed that neither my patched version or svn head do not handle
multiple line procs
in event script, so my patch has no impact on current svn head.

Cheers
Spen


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002401.html">[Openocd-development] FW: PATCH - Jim/TCL patch - far more	complete.
</A></li>
	<LI>Next message: <A HREF="002404.html">[Openocd-development] FW: PATCH - Jim/TCL patch - far more	complete.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2403">[ date ]</a>
              <a href="thread.html#2403">[ thread ]</a>
              <a href="subject.html#2403">[ subject ]</a>
              <a href="author.html#2403">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-development">More information about the Openocd-development
mailing list</a><br>
</body></html>
